function UP(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Rn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function iA(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var sA={exports:{}},tp={},oA={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf=Symbol.for("react.element"),LP=Symbol.for("react.portal"),FP=Symbol.for("react.fragment"),jP=Symbol.for("react.strict_mode"),zP=Symbol.for("react.profiler"),qP=Symbol.for("react.provider"),HP=Symbol.for("react.context"),VP=Symbol.for("react.forward_ref"),KP=Symbol.for("react.suspense"),WP=Symbol.for("react.memo"),GP=Symbol.for("react.lazy"),m1=Symbol.iterator;function YP(t){return t===null||typeof t!="object"?null:(t=m1&&t[m1]||t["@@iterator"],typeof t=="function"?t:null)}var aA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lA=Object.assign,cA={};function sc(t,e,r){this.props=t,this.context=e,this.refs=cA,this.updater=r||aA}sc.prototype.isReactComponent={};sc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};sc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uA(){}uA.prototype=sc.prototype;function cw(t,e,r){this.props=t,this.context=e,this.refs=cA,this.updater=r||aA}var uw=cw.prototype=new uA;uw.constructor=cw;lA(uw,sc.prototype);uw.isPureReactComponent=!0;var y1=Array.isArray,fA=Object.prototype.hasOwnProperty,fw={current:null},hA={key:!0,ref:!0,__self:!0,__source:!0};function dA(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fA.call(e,n)&&!hA.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:nf,type:t,key:s,ref:o,props:i,_owner:fw.current}}function QP(t,e){return{$$typeof:nf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function hw(t){return typeof t=="object"&&t!==null&&t.$$typeof===nf}function JP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var w1=/\/+/g;function d0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JP(""+t.key):e.toString(36)}function _h(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nf:case LP:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+d0(o,0):n,y1(i)?(r="",t!=null&&(r=t.replace(w1,"$&/")+"/"),_h(i,e,r,"",function(c){return c})):i!=null&&(hw(i)&&(i=QP(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(w1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",y1(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+d0(s,a);o+=_h(s,e,r,l,i)}else if(l=YP(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+d0(s,a++),o+=_h(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Nf(t,e,r){if(t==null)return t;var n=[],i=0;return _h(t,n,"","",function(s){return e.call(r,s,i++)}),n}function ZP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Br={current:null},Sh={transition:null},XP={ReactCurrentDispatcher:Br,ReactCurrentBatchConfig:Sh,ReactCurrentOwner:fw};function pA(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Nf,forEach:function(t,e,r){Nf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Nf(t,function(){e++}),e},toArray:function(t){return Nf(t,function(e){return e})||[]},only:function(t){if(!hw(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=sc;ye.Fragment=FP;ye.Profiler=zP;ye.PureComponent=cw;ye.StrictMode=jP;ye.Suspense=KP;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XP;ye.act=pA;ye.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=lA({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=fw.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fA.call(e,l)&&!hA.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:nf,type:t.type,key:i,ref:s,props:n,_owner:o}};ye.createContext=function(t){return t={$$typeof:HP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:qP,_context:t},t.Consumer=t};ye.createElement=dA;ye.createFactory=function(t){var e=dA.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:VP,render:t}};ye.isValidElement=hw;ye.lazy=function(t){return{$$typeof:GP,_payload:{_status:-1,_result:t},_init:ZP}};ye.memo=function(t,e){return{$$typeof:WP,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=Sh.transition;Sh.transition={};try{t()}finally{Sh.transition=e}};ye.unstable_act=pA;ye.useCallback=function(t,e){return Br.current.useCallback(t,e)};ye.useContext=function(t){return Br.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Br.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Br.current.useEffect(t,e)};ye.useId=function(){return Br.current.useId()};ye.useImperativeHandle=function(t,e,r){return Br.current.useImperativeHandle(t,e,r)};ye.useInsertionEffect=function(t,e){return Br.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Br.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Br.current.useMemo(t,e)};ye.useReducer=function(t,e,r){return Br.current.useReducer(t,e,r)};ye.useRef=function(t){return Br.current.useRef(t)};ye.useState=function(t){return Br.current.useState(t)};ye.useSyncExternalStore=function(t,e,r){return Br.current.useSyncExternalStore(t,e,r)};ye.useTransition=function(){return Br.current.useTransition()};ye.version="18.3.1";oA.exports=ye;var Y=oA.exports;const gA=Mo(Y),e5=UP({__proto__:null,default:gA},[Y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t5=Y,r5=Symbol.for("react.element"),n5=Symbol.for("react.fragment"),i5=Object.prototype.hasOwnProperty,s5=t5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o5={key:!0,ref:!0,__self:!0,__source:!0};function mA(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)i5.call(e,n)&&!o5.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:r5,type:t,key:s,ref:o,props:i,_owner:s5.current}}tp.Fragment=n5;tp.jsx=mA;tp.jsxs=mA;sA.exports=tp;var W=sA.exports,rm={},yA={exports:{}},bn={},wA={exports:{}},vA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(E,S){var N=E.length;E.push(S);e:for(;0<N;){var C=N-1>>>1,y=E[C];if(0<i(y,S))E[C]=S,E[N]=y,N=C;else break e}}function r(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var S=E[0],N=E.pop();if(N!==S){E[0]=N;e:for(var C=0,y=E.length,k=y>>>1;C<k;){var q=2*(C+1)-1,x=E[q],U=q+1,F=E[U];if(0>i(x,N))U<y&&0>i(F,x)?(E[C]=F,E[U]=N,C=U):(E[C]=x,E[q]=N,C=q);else if(U<y&&0>i(F,N))E[C]=F,E[U]=N,C=U;else break e}}return S}function i(E,S){var N=E.sortIndex-S.sortIndex;return N!==0?N:E.id-S.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,h=3,g=!1,w=!1,v=!1,O=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(E){for(var S=r(c);S!==null;){if(S.callback===null)n(c);else if(S.startTime<=E)n(c),S.sortIndex=S.expirationTime,e(l,S);else break;S=r(c)}}function T(E){if(v=!1,_(E),!w)if(r(l)!==null)w=!0,m(D);else{var S=r(c);S!==null&&b(T,S.startTime-E)}}function D(E,S){w=!1,v&&(v=!1,A(M),M=-1),g=!0;var N=h;try{for(_(S),f=r(l);f!==null&&(!(f.expirationTime>S)||E&&!K());){var C=f.callback;if(typeof C=="function"){f.callback=null,h=f.priorityLevel;var y=C(f.expirationTime<=S);S=t.unstable_now(),typeof y=="function"?f.callback=y:f===r(l)&&n(l),_(S)}else n(l);f=r(l)}if(f!==null)var k=!0;else{var q=r(c);q!==null&&b(T,q.startTime-S),k=!1}return k}finally{f=null,h=N,g=!1}}var R=!1,$=null,M=-1,B=5,z=-1;function K(){return!(t.unstable_now()-z<B)}function L(){if($!==null){var E=t.unstable_now();z=E;var S=!0;try{S=$(!0,E)}finally{S?P():(R=!1,$=null)}}else R=!1}var P;if(typeof I=="function")P=function(){I(L)};else if(typeof MessageChannel<"u"){var p=new MessageChannel,d=p.port2;p.port1.onmessage=L,P=function(){d.postMessage(null)}}else P=function(){O(L,0)};function m(E){$=E,R||(R=!0,P())}function b(E,S){M=O(function(){E(t.unstable_now())},S)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(E){E.callback=null},t.unstable_continueExecution=function(){w||g||(w=!0,m(D))},t.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<E?Math.floor(1e3/E):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(E){switch(h){case 1:case 2:case 3:var S=3;break;default:S=h}var N=h;h=S;try{return E()}finally{h=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(E,S){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var N=h;h=E;try{return S()}finally{h=N}},t.unstable_scheduleCallback=function(E,S,N){var C=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?C+N:C):N=C,E){case 1:var y=-1;break;case 2:y=250;break;case 5:y=1073741823;break;case 4:y=1e4;break;default:y=5e3}return y=N+y,E={id:u++,callback:S,priorityLevel:E,startTime:N,expirationTime:y,sortIndex:-1},N>C?(E.sortIndex=N,e(c,E),r(l)===null&&E===r(c)&&(v?(A(M),M=-1):v=!0,b(T,N-C))):(E.sortIndex=y,e(l,E),w||g||(w=!0,m(D))),E},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(E){var S=h;return function(){var N=h;h=S;try{return E.apply(this,arguments)}finally{h=N}}}})(vA);wA.exports=vA;var a5=wA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l5=Y,vn=a5;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bA=new Set,xu={};function La(t,e){Hl(t,e),Hl(t+"Capture",e)}function Hl(t,e){for(xu[t]=e,t=0;t<e.length;t++)bA.add(e[t])}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nm=Object.prototype.hasOwnProperty,c5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v1={},b1={};function u5(t){return nm.call(b1,t)?!0:nm.call(v1,t)?!1:c5.test(t)?b1[t]=!0:(v1[t]=!0,!1)}function f5(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function h5(t,e,r,n){if(e===null||typeof e>"u"||f5(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ur(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ur={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ur[t]=new Ur(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ur[e]=new Ur(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ur[t]=new Ur(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ur[t]=new Ur(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ur[t]=new Ur(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ur[t]=new Ur(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ur[t]=new Ur(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ur[t]=new Ur(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ur[t]=new Ur(t,5,!1,t.toLowerCase(),null,!1,!1)});var dw=/[\-:]([a-z])/g;function pw(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(dw,pw);ur[e]=new Ur(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(dw,pw);ur[e]=new Ur(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(dw,pw);ur[e]=new Ur(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ur[t]=new Ur(t,1,!1,t.toLowerCase(),null,!1,!1)});ur.xlinkHref=new Ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ur[t]=new Ur(t,1,!1,t.toLowerCase(),null,!0,!0)});function gw(t,e,r,n){var i=ur.hasOwnProperty(e)?ur[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(h5(e,r,i,n)&&(r=null),n||i===null?u5(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ks=l5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tf=Symbol.for("react.element"),cl=Symbol.for("react.portal"),ul=Symbol.for("react.fragment"),mw=Symbol.for("react.strict_mode"),im=Symbol.for("react.profiler"),EA=Symbol.for("react.provider"),xA=Symbol.for("react.context"),yw=Symbol.for("react.forward_ref"),sm=Symbol.for("react.suspense"),om=Symbol.for("react.suspense_list"),ww=Symbol.for("react.memo"),no=Symbol.for("react.lazy"),AA=Symbol.for("react.offscreen"),E1=Symbol.iterator;function vc(t){return t===null||typeof t!="object"?null:(t=E1&&t[E1]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,p0;function Yc(t){if(p0===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);p0=e&&e[1]||""}return`
`+p0+t}var g0=!1;function m0(t,e){if(!t||g0)return"";g0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{g0=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Yc(t):""}function d5(t){switch(t.tag){case 5:return Yc(t.type);case 16:return Yc("Lazy");case 13:return Yc("Suspense");case 19:return Yc("SuspenseList");case 0:case 2:case 15:return t=m0(t.type,!1),t;case 11:return t=m0(t.type.render,!1),t;case 1:return t=m0(t.type,!0),t;default:return""}}function am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ul:return"Fragment";case cl:return"Portal";case im:return"Profiler";case mw:return"StrictMode";case sm:return"Suspense";case om:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xA:return(t.displayName||"Context")+".Consumer";case EA:return(t._context.displayName||"Context")+".Provider";case yw:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ww:return e=t.displayName||null,e!==null?e:am(t.type)||"Memo";case no:e=t._payload,t=t._init;try{return am(t(e))}catch{}}return null}function p5(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(e);case 8:return e===mw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function To(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _A(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function g5(t){var e=_A(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function kf(t){t._valueTracker||(t._valueTracker=g5(t))}function SA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=_A(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ed(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,e){var r=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function x1(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=To(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function IA(t,e){e=e.checked,e!=null&&gw(t,"checked",e,!1)}function cm(t,e){IA(t,e);var r=To(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?um(t,e.type,r):e.hasOwnProperty("defaultValue")&&um(t,e.type,To(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function A1(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function um(t,e,r){(e!=="number"||ed(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Qc=Array.isArray;function Cl(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+To(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function fm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _1(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Q(92));if(Qc(r)){if(1<r.length)throw Error(Q(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:To(r)}}function PA(t,e){var r=To(e.value),n=To(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function S1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function CA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?CA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Df,OA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Df=Df||document.createElement("div"),Df.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Df.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Au(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var iu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m5=["Webkit","ms","Moz","O"];Object.keys(iu).forEach(function(t){m5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),iu[e]=iu[t]})});function NA(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||iu.hasOwnProperty(t)&&iu[t]?(""+e).trim():e+"px"}function TA(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=NA(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var y5=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dm(t,e){if(e){if(y5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gm=null;function vw(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mm=null,Ol=null,Nl=null;function I1(t){if(t=af(t)){if(typeof mm!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=op(e),mm(t.stateNode,t.type,e))}}function kA(t){Ol?Nl?Nl.push(t):Nl=[t]:Ol=t}function DA(){if(Ol){var t=Ol,e=Nl;if(Nl=Ol=null,I1(t),e)for(t=0;t<e.length;t++)I1(e[t])}}function RA(t,e){return t(e)}function $A(){}var y0=!1;function MA(t,e,r){if(y0)return t(e,r);y0=!0;try{return RA(t,e,r)}finally{y0=!1,(Ol!==null||Nl!==null)&&($A(),DA())}}function _u(t,e){var r=t.stateNode;if(r===null)return null;var n=op(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Q(231,e,typeof r));return r}var ym=!1;if(xs)try{var bc={};Object.defineProperty(bc,"passive",{get:function(){ym=!0}}),window.addEventListener("test",bc,bc),window.removeEventListener("test",bc,bc)}catch{ym=!1}function w5(t,e,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(u){this.onError(u)}}var su=!1,td=null,rd=!1,wm=null,v5={onError:function(t){su=!0,td=t}};function b5(t,e,r,n,i,s,o,a,l){su=!1,td=null,w5.apply(v5,arguments)}function E5(t,e,r,n,i,s,o,a,l){if(b5.apply(this,arguments),su){if(su){var c=td;su=!1,td=null}else throw Error(Q(198));rd||(rd=!0,wm=c)}}function Fa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function BA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function P1(t){if(Fa(t)!==t)throw Error(Q(188))}function x5(t){var e=t.alternate;if(!e){if(e=Fa(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return P1(i),t;if(s===n)return P1(i),e;s=s.sibling}throw Error(Q(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?t:e}function UA(t){return t=x5(t),t!==null?LA(t):null}function LA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LA(t);if(e!==null)return e;t=t.sibling}return null}var FA=vn.unstable_scheduleCallback,C1=vn.unstable_cancelCallback,A5=vn.unstable_shouldYield,_5=vn.unstable_requestPaint,Nt=vn.unstable_now,S5=vn.unstable_getCurrentPriorityLevel,bw=vn.unstable_ImmediatePriority,jA=vn.unstable_UserBlockingPriority,nd=vn.unstable_NormalPriority,I5=vn.unstable_LowPriority,zA=vn.unstable_IdlePriority,rp=null,Mi=null;function P5(t){if(Mi&&typeof Mi.onCommitFiberRoot=="function")try{Mi.onCommitFiberRoot(rp,t,void 0,(t.current.flags&128)===128)}catch{}}var ci=Math.clz32?Math.clz32:N5,C5=Math.log,O5=Math.LN2;function N5(t){return t>>>=0,t===0?32:31-(C5(t)/O5|0)|0}var Rf=64,$f=4194304;function Jc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function id(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=Jc(a):(s&=o,s!==0&&(n=Jc(s)))}else o=r&~i,o!==0?n=Jc(o):s!==0&&(n=Jc(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-ci(e),i=1<<r,n|=t[r],e&=~i;return n}function T5(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k5(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ci(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=T5(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function vm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function qA(){var t=Rf;return Rf<<=1,!(Rf&4194240)&&(Rf=64),t}function w0(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function sf(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ci(e),t[e]=r}function D5(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-ci(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Ew(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-ci(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ke=0;function HA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VA,xw,KA,WA,GA,bm=!1,Mf=[],Eo=null,xo=null,Ao=null,Su=new Map,Iu=new Map,co=[],R5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function O1(t,e){switch(t){case"focusin":case"focusout":Eo=null;break;case"dragenter":case"dragleave":xo=null;break;case"mouseover":case"mouseout":Ao=null;break;case"pointerover":case"pointerout":Su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(e.pointerId)}}function Ec(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=af(e),e!==null&&xw(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function $5(t,e,r,n,i){switch(e){case"focusin":return Eo=Ec(Eo,t,e,r,n,i),!0;case"dragenter":return xo=Ec(xo,t,e,r,n,i),!0;case"mouseover":return Ao=Ec(Ao,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Su.set(s,Ec(Su.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Iu.set(s,Ec(Iu.get(s)||null,t,e,r,n,i)),!0}return!1}function YA(t){var e=pa(t.target);if(e!==null){var r=Fa(e);if(r!==null){if(e=r.tag,e===13){if(e=BA(r),e!==null){t.blockedOn=e,GA(t.priority,function(){KA(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ih(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Em(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);gm=n,r.target.dispatchEvent(n),gm=null}else return e=af(r),e!==null&&xw(e),t.blockedOn=r,!1;e.shift()}return!0}function N1(t,e,r){Ih(t)&&r.delete(e)}function M5(){bm=!1,Eo!==null&&Ih(Eo)&&(Eo=null),xo!==null&&Ih(xo)&&(xo=null),Ao!==null&&Ih(Ao)&&(Ao=null),Su.forEach(N1),Iu.forEach(N1)}function xc(t,e){t.blockedOn===e&&(t.blockedOn=null,bm||(bm=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,M5)))}function Pu(t){function e(i){return xc(i,t)}if(0<Mf.length){xc(Mf[0],t);for(var r=1;r<Mf.length;r++){var n=Mf[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Eo!==null&&xc(Eo,t),xo!==null&&xc(xo,t),Ao!==null&&xc(Ao,t),Su.forEach(e),Iu.forEach(e),r=0;r<co.length;r++)n=co[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<co.length&&(r=co[0],r.blockedOn===null);)YA(r),r.blockedOn===null&&co.shift()}var Tl=ks.ReactCurrentBatchConfig,sd=!0;function B5(t,e,r,n){var i=ke,s=Tl.transition;Tl.transition=null;try{ke=1,Aw(t,e,r,n)}finally{ke=i,Tl.transition=s}}function U5(t,e,r,n){var i=ke,s=Tl.transition;Tl.transition=null;try{ke=4,Aw(t,e,r,n)}finally{ke=i,Tl.transition=s}}function Aw(t,e,r,n){if(sd){var i=Em(t,e,r,n);if(i===null)C0(t,e,n,od,r),O1(t,n);else if($5(i,t,e,r,n))n.stopPropagation();else if(O1(t,n),e&4&&-1<R5.indexOf(t)){for(;i!==null;){var s=af(i);if(s!==null&&VA(s),s=Em(t,e,r,n),s===null&&C0(t,e,n,od,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else C0(t,e,n,null,r)}}var od=null;function Em(t,e,r,n){if(od=null,t=vw(n),t=pa(t),t!==null)if(e=Fa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=BA(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return od=t,null}function QA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S5()){case bw:return 1;case jA:return 4;case nd:case I5:return 16;case zA:return 536870912;default:return 16}default:return 16}}var mo=null,_w=null,Ph=null;function JA(){if(Ph)return Ph;var t,e=_w,r=e.length,n,i="value"in mo?mo.value:mo.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Ph=i.slice(t,1<n?1-n:void 0)}function Ch(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bf(){return!0}function T1(){return!1}function En(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bf:T1,this.isPropagationStopped=T1,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Bf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Bf)},persist:function(){},isPersistent:Bf}),e}var oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sw=En(oc),of=It({},oc,{view:0,detail:0}),L5=En(of),v0,b0,Ac,np=It({},of,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Iw,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ac&&(Ac&&t.type==="mousemove"?(v0=t.screenX-Ac.screenX,b0=t.screenY-Ac.screenY):b0=v0=0,Ac=t),v0)},movementY:function(t){return"movementY"in t?t.movementY:b0}}),k1=En(np),F5=It({},np,{dataTransfer:0}),j5=En(F5),z5=It({},of,{relatedTarget:0}),E0=En(z5),q5=It({},oc,{animationName:0,elapsedTime:0,pseudoElement:0}),H5=En(q5),V5=It({},oc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K5=En(V5),W5=It({},oc,{data:0}),D1=En(W5),G5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J5(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Q5[t])?!!e[t]:!1}function Iw(){return J5}var Z5=It({},of,{key:function(t){if(t.key){var e=G5[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ch(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y5[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Iw,charCode:function(t){return t.type==="keypress"?Ch(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ch(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),X5=En(Z5),eC=It({},np,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R1=En(eC),tC=It({},of,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Iw}),rC=En(tC),nC=It({},oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),iC=En(nC),sC=It({},np,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oC=En(sC),aC=[9,13,27,32],Pw=xs&&"CompositionEvent"in window,ou=null;xs&&"documentMode"in document&&(ou=document.documentMode);var lC=xs&&"TextEvent"in window&&!ou,ZA=xs&&(!Pw||ou&&8<ou&&11>=ou),$1=" ",M1=!1;function XA(t,e){switch(t){case"keyup":return aC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fl=!1;function cC(t,e){switch(t){case"compositionend":return e_(e);case"keypress":return e.which!==32?null:(M1=!0,$1);case"textInput":return t=e.data,t===$1&&M1?null:t;default:return null}}function uC(t,e){if(fl)return t==="compositionend"||!Pw&&XA(t,e)?(t=JA(),Ph=_w=mo=null,fl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZA&&e.locale!=="ko"?null:e.data;default:return null}}var fC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fC[t.type]:e==="textarea"}function t_(t,e,r,n){kA(n),e=ad(e,"onChange"),0<e.length&&(r=new Sw("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var au=null,Cu=null;function hC(t){h_(t,0)}function ip(t){var e=pl(t);if(SA(e))return t}function dC(t,e){if(t==="change")return e}var r_=!1;if(xs){var x0;if(xs){var A0="oninput"in document;if(!A0){var U1=document.createElement("div");U1.setAttribute("oninput","return;"),A0=typeof U1.oninput=="function"}x0=A0}else x0=!1;r_=x0&&(!document.documentMode||9<document.documentMode)}function L1(){au&&(au.detachEvent("onpropertychange",n_),Cu=au=null)}function n_(t){if(t.propertyName==="value"&&ip(Cu)){var e=[];t_(e,Cu,t,vw(t)),MA(hC,e)}}function pC(t,e,r){t==="focusin"?(L1(),au=e,Cu=r,au.attachEvent("onpropertychange",n_)):t==="focusout"&&L1()}function gC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ip(Cu)}function mC(t,e){if(t==="click")return ip(e)}function yC(t,e){if(t==="input"||t==="change")return ip(e)}function wC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hi=typeof Object.is=="function"?Object.is:wC;function Ou(t,e){if(hi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!nm.call(e,i)||!hi(t[i],e[i]))return!1}return!0}function F1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function j1(t,e){var r=F1(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=F1(r)}}function i_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?i_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s_(){for(var t=window,e=ed();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ed(t.document)}return e}function Cw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vC(t){var e=s_(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&i_(r.ownerDocument.documentElement,r)){if(n!==null&&Cw(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=j1(r,s);var o=j1(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bC=xs&&"documentMode"in document&&11>=document.documentMode,hl=null,xm=null,lu=null,Am=!1;function z1(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Am||hl==null||hl!==ed(n)||(n=hl,"selectionStart"in n&&Cw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),lu&&Ou(lu,n)||(lu=n,n=ad(xm,"onSelect"),0<n.length&&(e=new Sw("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=hl)))}function Uf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var dl={animationend:Uf("Animation","AnimationEnd"),animationiteration:Uf("Animation","AnimationIteration"),animationstart:Uf("Animation","AnimationStart"),transitionend:Uf("Transition","TransitionEnd")},_0={},o_={};xs&&(o_=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function sp(t){if(_0[t])return _0[t];if(!dl[t])return t;var e=dl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in o_)return _0[t]=e[r];return t}var a_=sp("animationend"),l_=sp("animationiteration"),c_=sp("animationstart"),u_=sp("transitionend"),f_=new Map,q1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bo(t,e){f_.set(t,e),La(e,[t])}for(var S0=0;S0<q1.length;S0++){var I0=q1[S0],EC=I0.toLowerCase(),xC=I0[0].toUpperCase()+I0.slice(1);Bo(EC,"on"+xC)}Bo(a_,"onAnimationEnd");Bo(l_,"onAnimationIteration");Bo(c_,"onAnimationStart");Bo("dblclick","onDoubleClick");Bo("focusin","onFocus");Bo("focusout","onBlur");Bo(u_,"onTransitionEnd");Hl("onMouseEnter",["mouseout","mouseover"]);Hl("onMouseLeave",["mouseout","mouseover"]);Hl("onPointerEnter",["pointerout","pointerover"]);Hl("onPointerLeave",["pointerout","pointerover"]);La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));La("onBeforeInput",["compositionend","keypress","textInput","paste"]);La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zc));function H1(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,E5(n,e,void 0,t),t.currentTarget=null}function h_(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;H1(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;H1(i,a,c),s=l}}}if(rd)throw t=wm,rd=!1,wm=null,t}function gt(t,e){var r=e[Cm];r===void 0&&(r=e[Cm]=new Set);var n=t+"__bubble";r.has(n)||(d_(e,t,2,!1),r.add(n))}function P0(t,e,r){var n=0;e&&(n|=4),d_(r,t,n,e)}var Lf="_reactListening"+Math.random().toString(36).slice(2);function Nu(t){if(!t[Lf]){t[Lf]=!0,bA.forEach(function(r){r!=="selectionchange"&&(AC.has(r)||P0(r,!1,t),P0(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lf]||(e[Lf]=!0,P0("selectionchange",!1,e))}}function d_(t,e,r,n){switch(QA(e)){case 1:var i=B5;break;case 4:i=U5;break;default:i=Aw}r=i.bind(null,e,r,t),i=void 0,!ym||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function C0(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=pa(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}MA(function(){var c=s,u=vw(r),f=[];e:{var h=f_.get(t);if(h!==void 0){var g=Sw,w=t;switch(t){case"keypress":if(Ch(r)===0)break e;case"keydown":case"keyup":g=X5;break;case"focusin":w="focus",g=E0;break;case"focusout":w="blur",g=E0;break;case"beforeblur":case"afterblur":g=E0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=k1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=j5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=rC;break;case a_:case l_:case c_:g=H5;break;case u_:g=iC;break;case"scroll":g=L5;break;case"wheel":g=oC;break;case"copy":case"cut":case"paste":g=K5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=R1}var v=(e&4)!==0,O=!v&&t==="scroll",A=v?h!==null?h+"Capture":null:h;v=[];for(var I=c,_;I!==null;){_=I;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,A!==null&&(T=_u(I,A),T!=null&&v.push(Tu(I,T,_)))),O)break;I=I.return}0<v.length&&(h=new g(h,w,null,r,u),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",h&&r!==gm&&(w=r.relatedTarget||r.fromElement)&&(pa(w)||w[As]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(w=r.relatedTarget||r.toElement,g=c,w=w?pa(w):null,w!==null&&(O=Fa(w),w!==O||w.tag!==5&&w.tag!==6)&&(w=null)):(g=null,w=c),g!==w)){if(v=k1,T="onMouseLeave",A="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(v=R1,T="onPointerLeave",A="onPointerEnter",I="pointer"),O=g==null?h:pl(g),_=w==null?h:pl(w),h=new v(T,I+"leave",g,r,u),h.target=O,h.relatedTarget=_,T=null,pa(u)===c&&(v=new v(A,I+"enter",w,r,u),v.target=_,v.relatedTarget=O,T=v),O=T,g&&w)t:{for(v=g,A=w,I=0,_=v;_;_=Qa(_))I++;for(_=0,T=A;T;T=Qa(T))_++;for(;0<I-_;)v=Qa(v),I--;for(;0<_-I;)A=Qa(A),_--;for(;I--;){if(v===A||A!==null&&v===A.alternate)break t;v=Qa(v),A=Qa(A)}v=null}else v=null;g!==null&&V1(f,h,g,v,!1),w!==null&&O!==null&&V1(f,O,w,v,!0)}}e:{if(h=c?pl(c):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var D=dC;else if(B1(h))if(r_)D=yC;else{D=gC;var R=pC}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(D=mC);if(D&&(D=D(t,c))){t_(f,D,r,u);break e}R&&R(t,h,c),t==="focusout"&&(R=h._wrapperState)&&R.controlled&&h.type==="number"&&um(h,"number",h.value)}switch(R=c?pl(c):window,t){case"focusin":(B1(R)||R.contentEditable==="true")&&(hl=R,xm=c,lu=null);break;case"focusout":lu=xm=hl=null;break;case"mousedown":Am=!0;break;case"contextmenu":case"mouseup":case"dragend":Am=!1,z1(f,r,u);break;case"selectionchange":if(bC)break;case"keydown":case"keyup":z1(f,r,u)}var $;if(Pw)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else fl?XA(t,r)&&(M="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(M="onCompositionStart");M&&(ZA&&r.locale!=="ko"&&(fl||M!=="onCompositionStart"?M==="onCompositionEnd"&&fl&&($=JA()):(mo=u,_w="value"in mo?mo.value:mo.textContent,fl=!0)),R=ad(c,M),0<R.length&&(M=new D1(M,t,null,r,u),f.push({event:M,listeners:R}),$?M.data=$:($=e_(r),$!==null&&(M.data=$)))),($=lC?cC(t,r):uC(t,r))&&(c=ad(c,"onBeforeInput"),0<c.length&&(u=new D1("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:c}),u.data=$))}h_(f,e)})}function Tu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function ad(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_u(t,r),s!=null&&n.unshift(Tu(t,s,i)),s=_u(t,e),s!=null&&n.push(Tu(t,s,i))),t=t.return}return n}function Qa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function V1(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=_u(r,s),l!=null&&o.unshift(Tu(r,l,a))):i||(l=_u(r,s),l!=null&&o.push(Tu(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var _C=/\r\n?/g,SC=/\u0000|\uFFFD/g;function K1(t){return(typeof t=="string"?t:""+t).replace(_C,`
`).replace(SC,"")}function Ff(t,e,r){if(e=K1(e),K1(t)!==e&&r)throw Error(Q(425))}function ld(){}var _m=null,Sm=null;function Im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pm=typeof setTimeout=="function"?setTimeout:void 0,IC=typeof clearTimeout=="function"?clearTimeout:void 0,W1=typeof Promise=="function"?Promise:void 0,PC=typeof queueMicrotask=="function"?queueMicrotask:typeof W1<"u"?function(t){return W1.resolve(null).then(t).catch(CC)}:Pm;function CC(t){setTimeout(function(){throw t})}function O0(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Pu(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Pu(e)}function _o(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function G1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ac=Math.random().toString(36).slice(2),Ti="__reactFiber$"+ac,ku="__reactProps$"+ac,As="__reactContainer$"+ac,Cm="__reactEvents$"+ac,OC="__reactListeners$"+ac,NC="__reactHandles$"+ac;function pa(t){var e=t[Ti];if(e)return e;for(var r=t.parentNode;r;){if(e=r[As]||r[Ti]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=G1(t);t!==null;){if(r=t[Ti])return r;t=G1(t)}return e}t=r,r=t.parentNode}return null}function af(t){return t=t[Ti]||t[As],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function op(t){return t[ku]||null}var Om=[],gl=-1;function Uo(t){return{current:t}}function wt(t){0>gl||(t.current=Om[gl],Om[gl]=null,gl--)}function Ke(t,e){gl++,Om[gl]=t.current,t.current=e}var ko={},Nr=Uo(ko),Zr=Uo(!1),Sa=ko;function Vl(t,e){var r=t.type.contextTypes;if(!r)return ko;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xr(t){return t=t.childContextTypes,t!=null}function cd(){wt(Zr),wt(Nr)}function Y1(t,e,r){if(Nr.current!==ko)throw Error(Q(168));Ke(Nr,e),Ke(Zr,r)}function p_(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Q(108,p5(t)||"Unknown",i));return It({},r,n)}function ud(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ko,Sa=Nr.current,Ke(Nr,t),Ke(Zr,Zr.current),!0}function Q1(t,e,r){var n=t.stateNode;if(!n)throw Error(Q(169));r?(t=p_(t,e,Sa),n.__reactInternalMemoizedMergedChildContext=t,wt(Zr),wt(Nr),Ke(Nr,t)):wt(Zr),Ke(Zr,r)}var us=null,ap=!1,N0=!1;function g_(t){us===null?us=[t]:us.push(t)}function TC(t){ap=!0,g_(t)}function Lo(){if(!N0&&us!==null){N0=!0;var t=0,e=ke;try{var r=us;for(ke=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}us=null,ap=!1}catch(i){throw us!==null&&(us=us.slice(t+1)),FA(bw,Lo),i}finally{ke=e,N0=!1}}return null}var ml=[],yl=0,fd=null,hd=0,$n=[],Mn=0,Ia=null,gs=1,ms="";function oa(t,e){ml[yl++]=hd,ml[yl++]=fd,fd=t,hd=e}function m_(t,e,r){$n[Mn++]=gs,$n[Mn++]=ms,$n[Mn++]=Ia,Ia=t;var n=gs;t=ms;var i=32-ci(n)-1;n&=~(1<<i),r+=1;var s=32-ci(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,gs=1<<32-ci(e)+i|r<<i|n,ms=s+t}else gs=1<<s|r<<i|n,ms=t}function Ow(t){t.return!==null&&(oa(t,1),m_(t,1,0))}function Nw(t){for(;t===fd;)fd=ml[--yl],ml[yl]=null,hd=ml[--yl],ml[yl]=null;for(;t===Ia;)Ia=$n[--Mn],$n[Mn]=null,ms=$n[--Mn],$n[Mn]=null,gs=$n[--Mn],$n[Mn]=null}var wn=null,gn=null,vt=!1,oi=null;function y_(t,e){var r=Bn(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function J1(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,gn=_o(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Ia!==null?{id:gs,overflow:ms}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Bn(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,wn=t,gn=null,!0):!1;default:return!1}}function Nm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Tm(t){if(vt){var e=gn;if(e){var r=e;if(!J1(t,e)){if(Nm(t))throw Error(Q(418));e=_o(r.nextSibling);var n=wn;e&&J1(t,e)?y_(n,r):(t.flags=t.flags&-4097|2,vt=!1,wn=t)}}else{if(Nm(t))throw Error(Q(418));t.flags=t.flags&-4097|2,vt=!1,wn=t}}}function Z1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function jf(t){if(t!==wn)return!1;if(!vt)return Z1(t),vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Im(t.type,t.memoizedProps)),e&&(e=gn)){if(Nm(t))throw w_(),Error(Q(418));for(;e;)y_(t,e),e=_o(e.nextSibling)}if(Z1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){gn=_o(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=wn?_o(t.stateNode.nextSibling):null;return!0}function w_(){for(var t=gn;t;)t=_o(t.nextSibling)}function Kl(){gn=wn=null,vt=!1}function Tw(t){oi===null?oi=[t]:oi.push(t)}var kC=ks.ReactCurrentBatchConfig;function _c(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,t))}return t}function zf(t,e){throw t=Object.prototype.toString.call(e),Error(Q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X1(t){var e=t._init;return e(t._payload)}function v_(t){function e(A,I){if(t){var _=A.deletions;_===null?(A.deletions=[I],A.flags|=16):_.push(I)}}function r(A,I){if(!t)return null;for(;I!==null;)e(A,I),I=I.sibling;return null}function n(A,I){for(A=new Map;I!==null;)I.key!==null?A.set(I.key,I):A.set(I.index,I),I=I.sibling;return A}function i(A,I){return A=Co(A,I),A.index=0,A.sibling=null,A}function s(A,I,_){return A.index=_,t?(_=A.alternate,_!==null?(_=_.index,_<I?(A.flags|=2,I):_):(A.flags|=2,I)):(A.flags|=1048576,I)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function a(A,I,_,T){return I===null||I.tag!==6?(I=B0(_,A.mode,T),I.return=A,I):(I=i(I,_),I.return=A,I)}function l(A,I,_,T){var D=_.type;return D===ul?u(A,I,_.props.children,T,_.key):I!==null&&(I.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===no&&X1(D)===I.type)?(T=i(I,_.props),T.ref=_c(A,I,_),T.return=A,T):(T=$h(_.type,_.key,_.props,null,A.mode,T),T.ref=_c(A,I,_),T.return=A,T)}function c(A,I,_,T){return I===null||I.tag!==4||I.stateNode.containerInfo!==_.containerInfo||I.stateNode.implementation!==_.implementation?(I=U0(_,A.mode,T),I.return=A,I):(I=i(I,_.children||[]),I.return=A,I)}function u(A,I,_,T,D){return I===null||I.tag!==7?(I=Aa(_,A.mode,T,D),I.return=A,I):(I=i(I,_),I.return=A,I)}function f(A,I,_){if(typeof I=="string"&&I!==""||typeof I=="number")return I=B0(""+I,A.mode,_),I.return=A,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Tf:return _=$h(I.type,I.key,I.props,null,A.mode,_),_.ref=_c(A,null,I),_.return=A,_;case cl:return I=U0(I,A.mode,_),I.return=A,I;case no:var T=I._init;return f(A,T(I._payload),_)}if(Qc(I)||vc(I))return I=Aa(I,A.mode,_,null),I.return=A,I;zf(A,I)}return null}function h(A,I,_,T){var D=I!==null?I.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return D!==null?null:a(A,I,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Tf:return _.key===D?l(A,I,_,T):null;case cl:return _.key===D?c(A,I,_,T):null;case no:return D=_._init,h(A,I,D(_._payload),T)}if(Qc(_)||vc(_))return D!==null?null:u(A,I,_,T,null);zf(A,_)}return null}function g(A,I,_,T,D){if(typeof T=="string"&&T!==""||typeof T=="number")return A=A.get(_)||null,a(I,A,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Tf:return A=A.get(T.key===null?_:T.key)||null,l(I,A,T,D);case cl:return A=A.get(T.key===null?_:T.key)||null,c(I,A,T,D);case no:var R=T._init;return g(A,I,_,R(T._payload),D)}if(Qc(T)||vc(T))return A=A.get(_)||null,u(I,A,T,D,null);zf(I,T)}return null}function w(A,I,_,T){for(var D=null,R=null,$=I,M=I=0,B=null;$!==null&&M<_.length;M++){$.index>M?(B=$,$=null):B=$.sibling;var z=h(A,$,_[M],T);if(z===null){$===null&&($=B);break}t&&$&&z.alternate===null&&e(A,$),I=s(z,I,M),R===null?D=z:R.sibling=z,R=z,$=B}if(M===_.length)return r(A,$),vt&&oa(A,M),D;if($===null){for(;M<_.length;M++)$=f(A,_[M],T),$!==null&&(I=s($,I,M),R===null?D=$:R.sibling=$,R=$);return vt&&oa(A,M),D}for($=n(A,$);M<_.length;M++)B=g($,A,M,_[M],T),B!==null&&(t&&B.alternate!==null&&$.delete(B.key===null?M:B.key),I=s(B,I,M),R===null?D=B:R.sibling=B,R=B);return t&&$.forEach(function(K){return e(A,K)}),vt&&oa(A,M),D}function v(A,I,_,T){var D=vc(_);if(typeof D!="function")throw Error(Q(150));if(_=D.call(_),_==null)throw Error(Q(151));for(var R=D=null,$=I,M=I=0,B=null,z=_.next();$!==null&&!z.done;M++,z=_.next()){$.index>M?(B=$,$=null):B=$.sibling;var K=h(A,$,z.value,T);if(K===null){$===null&&($=B);break}t&&$&&K.alternate===null&&e(A,$),I=s(K,I,M),R===null?D=K:R.sibling=K,R=K,$=B}if(z.done)return r(A,$),vt&&oa(A,M),D;if($===null){for(;!z.done;M++,z=_.next())z=f(A,z.value,T),z!==null&&(I=s(z,I,M),R===null?D=z:R.sibling=z,R=z);return vt&&oa(A,M),D}for($=n(A,$);!z.done;M++,z=_.next())z=g($,A,M,z.value,T),z!==null&&(t&&z.alternate!==null&&$.delete(z.key===null?M:z.key),I=s(z,I,M),R===null?D=z:R.sibling=z,R=z);return t&&$.forEach(function(L){return e(A,L)}),vt&&oa(A,M),D}function O(A,I,_,T){if(typeof _=="object"&&_!==null&&_.type===ul&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Tf:e:{for(var D=_.key,R=I;R!==null;){if(R.key===D){if(D=_.type,D===ul){if(R.tag===7){r(A,R.sibling),I=i(R,_.props.children),I.return=A,A=I;break e}}else if(R.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===no&&X1(D)===R.type){r(A,R.sibling),I=i(R,_.props),I.ref=_c(A,R,_),I.return=A,A=I;break e}r(A,R);break}else e(A,R);R=R.sibling}_.type===ul?(I=Aa(_.props.children,A.mode,T,_.key),I.return=A,A=I):(T=$h(_.type,_.key,_.props,null,A.mode,T),T.ref=_c(A,I,_),T.return=A,A=T)}return o(A);case cl:e:{for(R=_.key;I!==null;){if(I.key===R)if(I.tag===4&&I.stateNode.containerInfo===_.containerInfo&&I.stateNode.implementation===_.implementation){r(A,I.sibling),I=i(I,_.children||[]),I.return=A,A=I;break e}else{r(A,I);break}else e(A,I);I=I.sibling}I=U0(_,A.mode,T),I.return=A,A=I}return o(A);case no:return R=_._init,O(A,I,R(_._payload),T)}if(Qc(_))return w(A,I,_,T);if(vc(_))return v(A,I,_,T);zf(A,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,I!==null&&I.tag===6?(r(A,I.sibling),I=i(I,_),I.return=A,A=I):(r(A,I),I=B0(_,A.mode,T),I.return=A,A=I),o(A)):r(A,I)}return O}var Wl=v_(!0),b_=v_(!1),dd=Uo(null),pd=null,wl=null,kw=null;function Dw(){kw=wl=pd=null}function Rw(t){var e=dd.current;wt(dd),t._currentValue=e}function km(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function kl(t,e){pd=t,kw=wl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yr=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(kw!==t)if(t={context:t,memoizedValue:e,next:null},wl===null){if(pd===null)throw Error(Q(308));wl=t,pd.dependencies={lanes:0,firstContext:t}}else wl=wl.next=t;return e}var ga=null;function $w(t){ga===null?ga=[t]:ga.push(t)}function E_(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,$w(e)):(r.next=i.next,i.next=r),e.interleaved=r,_s(t,n)}function _s(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var io=!1;function Mw(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function vs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function So(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ae&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,_s(t,r)}return i=n.interleaved,i===null?(e.next=e,$w(n)):(e.next=i.next,i.next=e),n.interleaved=e,_s(t,r)}function Oh(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ew(t,r)}}function eb(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function gd(t,e,r,n){var i=t.updateQueue;io=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,g=a.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=t,v=a;switch(h=e,g=r,v.tag){case 1:if(w=v.payload,typeof w=="function"){f=w.call(g,f,h);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=v.payload,h=typeof w=="function"?w.call(g,f,h):w,h==null)break e;f=It({},f,h);break e;case 2:io=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else g={eventTime:g,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=f):u=u.next=g,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ca|=o,t.lanes=o,t.memoizedState=f}}function tb(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Q(191,i));i.call(n)}}}var lf={},Bi=Uo(lf),Du=Uo(lf),Ru=Uo(lf);function ma(t){if(t===lf)throw Error(Q(174));return t}function Bw(t,e){switch(Ke(Ru,e),Ke(Du,t),Ke(Bi,lf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hm(e,t)}wt(Bi),Ke(Bi,e)}function Gl(){wt(Bi),wt(Du),wt(Ru)}function A_(t){ma(Ru.current);var e=ma(Bi.current),r=hm(e,t.type);e!==r&&(Ke(Du,t),Ke(Bi,r))}function Uw(t){Du.current===t&&(wt(Bi),wt(Du))}var _t=Uo(0);function md(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var T0=[];function Lw(){for(var t=0;t<T0.length;t++)T0[t]._workInProgressVersionPrimary=null;T0.length=0}var Nh=ks.ReactCurrentDispatcher,k0=ks.ReactCurrentBatchConfig,Pa=0,St=null,jt=null,Qt=null,yd=!1,cu=!1,$u=0,DC=0;function yr(){throw Error(Q(321))}function Fw(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!hi(t[r],e[r]))return!1;return!0}function jw(t,e,r,n,i,s){if(Pa=s,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Nh.current=t===null||t.memoizedState===null?BC:UC,t=r(n,i),cu){s=0;do{if(cu=!1,$u=0,25<=s)throw Error(Q(301));s+=1,Qt=jt=null,e.updateQueue=null,Nh.current=LC,t=r(n,i)}while(cu)}if(Nh.current=wd,e=jt!==null&&jt.next!==null,Pa=0,Qt=jt=St=null,yd=!1,e)throw Error(Q(300));return t}function zw(){var t=$u!==0;return $u=0,t}function Si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?St.memoizedState=Qt=t:Qt=Qt.next=t,Qt}function zn(){if(jt===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Qt===null?St.memoizedState:Qt.next;if(e!==null)Qt=e,jt=t;else{if(t===null)throw Error(Q(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Qt===null?St.memoizedState=Qt=t:Qt=Qt.next=t}return Qt}function Mu(t,e){return typeof e=="function"?e(t):e}function D0(t){var e=zn(),r=e.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=t;var n=jt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Pa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=n):l=l.next=f,St.lanes|=u,Ca|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,hi(n,e.memoizedState)||(Yr=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,St.lanes|=s,Ca|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function R0(t){var e=zn(),r=e.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);hi(s,e.memoizedState)||(Yr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function __(){}function S_(t,e){var r=St,n=zn(),i=e(),s=!hi(n.memoizedState,i);if(s&&(n.memoizedState=i,Yr=!0),n=n.queue,qw(C_.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||Qt!==null&&Qt.memoizedState.tag&1){if(r.flags|=2048,Bu(9,P_.bind(null,r,n,i,e),void 0,null),er===null)throw Error(Q(349));Pa&30||I_(r,e,i)}return i}function I_(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function P_(t,e,r,n){e.value=r,e.getSnapshot=n,O_(e)&&N_(t)}function C_(t,e,r){return r(function(){O_(e)&&N_(t)})}function O_(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!hi(t,r)}catch{return!0}}function N_(t){var e=_s(t,1);e!==null&&ui(e,t,1,-1)}function rb(t){var e=Si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:t},e.queue=t,t=t.dispatch=MC.bind(null,St,t),[e.memoizedState,t]}function Bu(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function T_(){return zn().memoizedState}function Th(t,e,r,n){var i=Si();St.flags|=t,i.memoizedState=Bu(1|e,r,void 0,n===void 0?null:n)}function lp(t,e,r,n){var i=zn();n=n===void 0?null:n;var s=void 0;if(jt!==null){var o=jt.memoizedState;if(s=o.destroy,n!==null&&Fw(n,o.deps)){i.memoizedState=Bu(e,r,s,n);return}}St.flags|=t,i.memoizedState=Bu(1|e,r,s,n)}function nb(t,e){return Th(8390656,8,t,e)}function qw(t,e){return lp(2048,8,t,e)}function k_(t,e){return lp(4,2,t,e)}function D_(t,e){return lp(4,4,t,e)}function R_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $_(t,e,r){return r=r!=null?r.concat([t]):null,lp(4,4,R_.bind(null,e,t),r)}function Hw(){}function M_(t,e){var r=zn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Fw(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function B_(t,e){var r=zn();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Fw(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function U_(t,e,r){return Pa&21?(hi(r,e)||(r=qA(),St.lanes|=r,Ca|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yr=!0),t.memoizedState=r)}function RC(t,e){var r=ke;ke=r!==0&&4>r?r:4,t(!0);var n=k0.transition;k0.transition={};try{t(!1),e()}finally{ke=r,k0.transition=n}}function L_(){return zn().memoizedState}function $C(t,e,r){var n=Po(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},F_(t))j_(e,r);else if(r=E_(t,e,r,n),r!==null){var i=Dr();ui(r,t,n,i),z_(r,e,n)}}function MC(t,e,r){var n=Po(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(F_(t))j_(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,hi(a,o)){var l=e.interleaved;l===null?(i.next=i,$w(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=E_(t,e,i,n),r!==null&&(i=Dr(),ui(r,t,n,i),z_(r,e,n))}}function F_(t){var e=t.alternate;return t===St||e!==null&&e===St}function j_(t,e){cu=yd=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function z_(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Ew(t,r)}}var wd={readContext:jn,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useInsertionEffect:yr,useLayoutEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useMutableSource:yr,useSyncExternalStore:yr,useId:yr,unstable_isNewReconciler:!1},BC={readContext:jn,useCallback:function(t,e){return Si().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:nb,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Th(4194308,4,R_.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Th(4194308,4,t,e)},useInsertionEffect:function(t,e){return Th(4,2,t,e)},useMemo:function(t,e){var r=Si();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Si();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=$C.bind(null,St,t),[n.memoizedState,t]},useRef:function(t){var e=Si();return t={current:t},e.memoizedState=t},useState:rb,useDebugValue:Hw,useDeferredValue:function(t){return Si().memoizedState=t},useTransition:function(){var t=rb(!1),e=t[0];return t=RC.bind(null,t[1]),Si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=St,i=Si();if(vt){if(r===void 0)throw Error(Q(407));r=r()}else{if(r=e(),er===null)throw Error(Q(349));Pa&30||I_(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,nb(C_.bind(null,n,s,t),[t]),n.flags|=2048,Bu(9,P_.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Si(),e=er.identifierPrefix;if(vt){var r=ms,n=gs;r=(n&~(1<<32-ci(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=$u++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=DC++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UC={readContext:jn,useCallback:M_,useContext:jn,useEffect:qw,useImperativeHandle:$_,useInsertionEffect:k_,useLayoutEffect:D_,useMemo:B_,useReducer:D0,useRef:T_,useState:function(){return D0(Mu)},useDebugValue:Hw,useDeferredValue:function(t){var e=zn();return U_(e,jt.memoizedState,t)},useTransition:function(){var t=D0(Mu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:__,useSyncExternalStore:S_,useId:L_,unstable_isNewReconciler:!1},LC={readContext:jn,useCallback:M_,useContext:jn,useEffect:qw,useImperativeHandle:$_,useInsertionEffect:k_,useLayoutEffect:D_,useMemo:B_,useReducer:R0,useRef:T_,useState:function(){return R0(Mu)},useDebugValue:Hw,useDeferredValue:function(t){var e=zn();return jt===null?e.memoizedState=t:U_(e,jt.memoizedState,t)},useTransition:function(){var t=R0(Mu)[0],e=zn().memoizedState;return[t,e]},useMutableSource:__,useSyncExternalStore:S_,useId:L_,unstable_isNewReconciler:!1};function ri(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Dm(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:It({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var cp={isMounted:function(t){return(t=t._reactInternals)?Fa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Dr(),i=Po(t),s=vs(n,i);s.payload=e,r!=null&&(s.callback=r),e=So(t,s,i),e!==null&&(ui(e,t,i,n),Oh(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Dr(),i=Po(t),s=vs(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=So(t,s,i),e!==null&&(ui(e,t,i,n),Oh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Dr(),n=Po(t),i=vs(r,n);i.tag=2,e!=null&&(i.callback=e),e=So(t,i,n),e!==null&&(ui(e,t,n,r),Oh(e,t,n))}};function ib(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ou(r,n)||!Ou(i,s):!0}function q_(t,e,r){var n=!1,i=ko,s=e.contextType;return typeof s=="object"&&s!==null?s=jn(s):(i=Xr(e)?Sa:Nr.current,n=e.contextTypes,s=(n=n!=null)?Vl(t,i):ko),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cp,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sb(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&cp.enqueueReplaceState(e,e.state,null)}function Rm(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Mw(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jn(s):(s=Xr(e)?Sa:Nr.current,i.context=Vl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dm(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cp.enqueueReplaceState(i,i.state,null),gd(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Yl(t,e){try{var r="",n=e;do r+=d5(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function $0(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function $m(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var FC=typeof WeakMap=="function"?WeakMap:Map;function H_(t,e,r){r=vs(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){bd||(bd=!0,Vm=n),$m(t,e)},r}function V_(t,e,r){r=vs(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){$m(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){$m(t,e),typeof n!="function"&&(Io===null?Io=new Set([this]):Io.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function ob(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new FC;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=eO.bind(null,t,e,r),e.then(t,t))}function ab(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lb(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=vs(-1,1),e.tag=2,So(r,e,1))),r.lanes|=1),t)}var jC=ks.ReactCurrentOwner,Yr=!1;function Tr(t,e,r,n){e.child=t===null?b_(e,null,r,n):Wl(e,t.child,r,n)}function cb(t,e,r,n,i){r=r.render;var s=e.ref;return kl(e,i),n=jw(t,e,r,n,s,i),r=zw(),t!==null&&!Yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(vt&&r&&Ow(e),e.flags|=1,Tr(t,e,n,i),e.child)}function ub(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!Zw(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,K_(t,e,s,n,i)):(t=$h(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Ou,r(o,n)&&t.ref===e.ref)return Ss(t,e,i)}return e.flags|=1,t=Co(s,n),t.ref=e.ref,t.return=e,e.child=t}function K_(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Ou(s,n)&&t.ref===e.ref)if(Yr=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(Yr=!0);else return e.lanes=t.lanes,Ss(t,e,i)}return Mm(t,e,r,n,i)}function W_(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(bl,un),un|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(bl,un),un|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Ke(bl,un),un|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,Ke(bl,un),un|=n;return Tr(t,e,i,r),e.child}function G_(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Mm(t,e,r,n,i){var s=Xr(r)?Sa:Nr.current;return s=Vl(e,s),kl(e,i),r=jw(t,e,r,n,s,i),n=zw(),t!==null&&!Yr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(vt&&n&&Ow(e),e.flags|=1,Tr(t,e,r,i),e.child)}function fb(t,e,r,n,i){if(Xr(r)){var s=!0;ud(e)}else s=!1;if(kl(e,i),e.stateNode===null)kh(t,e),q_(e,r,n),Rm(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=jn(c):(c=Xr(r)?Sa:Nr.current,c=Vl(e,c));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&sb(e,o,n,c),io=!1;var h=e.memoizedState;o.state=h,gd(e,n,o,i),l=e.memoizedState,a!==n||h!==l||Zr.current||io?(typeof u=="function"&&(Dm(e,r,u,n),l=e.memoizedState),(a=io||ib(e,r,a,n,h,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,x_(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ri(e.type,a),o.props=c,f=e.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=jn(l):(l=Xr(r)?Sa:Nr.current,l=Vl(e,l));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&sb(e,o,n,l),io=!1,h=e.memoizedState,o.state=h,gd(e,n,o,i);var w=e.memoizedState;a!==f||h!==w||Zr.current||io?(typeof g=="function"&&(Dm(e,r,g,n),w=e.memoizedState),(c=io||ib(e,r,c,n,h,w,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,w,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,w,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=w),o.props=n,o.state=w,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Bm(t,e,r,n,s,i)}function Bm(t,e,r,n,i,s){G_(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Q1(e,r,!1),Ss(t,e,s);n=e.stateNode,jC.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Wl(e,t.child,null,s),e.child=Wl(e,null,a,s)):Tr(t,e,a,s),e.memoizedState=n.state,i&&Q1(e,r,!0),e.child}function Y_(t){var e=t.stateNode;e.pendingContext?Y1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Y1(t,e.context,!1),Bw(t,e.containerInfo)}function hb(t,e,r,n,i){return Kl(),Tw(i),e.flags|=256,Tr(t,e,r,n),e.child}var Um={dehydrated:null,treeContext:null,retryLane:0};function Lm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q_(t,e,r){var n=e.pendingProps,i=_t.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ke(_t,i&1),t===null)return Tm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=hp(o,n,0,null),t=Aa(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Lm(r),e.memoizedState=Um,t):Vw(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zC(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Co(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Co(a,s):(s=Aa(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?Lm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=Um,n}return s=t.child,t=s.sibling,n=Co(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Vw(t,e){return e=hp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qf(t,e,r,n){return n!==null&&Tw(n),Wl(e,t.child,null,r),t=Vw(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zC(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=$0(Error(Q(422))),qf(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=hp({mode:"visible",children:n.children},i,0,null),s=Aa(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Wl(e,t.child,null,o),e.child.memoizedState=Lm(o),e.memoizedState=Um,s);if(!(e.mode&1))return qf(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(Q(419)),n=$0(s,n,void 0),qf(t,e,o,n)}if(a=(o&t.childLanes)!==0,Yr||a){if(n=er,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,_s(t,i),ui(n,t,i,-1))}return Jw(),n=$0(Error(Q(421))),qf(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,gn=_o(i.nextSibling),wn=e,vt=!0,oi=null,t!==null&&($n[Mn++]=gs,$n[Mn++]=ms,$n[Mn++]=Ia,gs=t.id,ms=t.overflow,Ia=e),e=Vw(e,n.children),e.flags|=4096,e)}function db(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),km(t.return,e,r)}function M0(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function J_(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Tr(t,e,n.children,r),n=_t.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&db(t,r,e);else if(t.tag===19)db(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ke(_t,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&md(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),M0(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&md(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}M0(e,!0,r,null,s);break;case"together":M0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ca|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,r=Co(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Co(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function qC(t,e,r){switch(e.tag){case 3:Y_(e),Kl();break;case 5:A_(e);break;case 1:Xr(e.type)&&ud(e);break;case 4:Bw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ke(dd,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Ke(_t,_t.current&1),e.flags|=128,null):r&e.child.childLanes?Q_(t,e,r):(Ke(_t,_t.current&1),t=Ss(t,e,r),t!==null?t.sibling:null);Ke(_t,_t.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return J_(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ke(_t,_t.current),n)break;return null;case 22:case 23:return e.lanes=0,W_(t,e,r)}return Ss(t,e,r)}var Z_,Fm,X_,eS;Z_=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Fm=function(){};X_=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ma(Bi.current);var s=null;switch(r){case"input":i=lm(t,i),n=lm(t,n),s=[];break;case"select":i=It({},i,{value:void 0}),n=It({},n,{value:void 0}),s=[];break;case"textarea":i=fm(t,i),n=fm(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ld)}dm(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&gt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};eS=function(t,e,r,n){r!==n&&(e.flags|=4)};function Sc(t,e){if(!vt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function wr(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function HC(t,e,r){var n=e.pendingProps;switch(Nw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(e),null;case 1:return Xr(e.type)&&cd(),wr(e),null;case 3:return n=e.stateNode,Gl(),wt(Zr),wt(Nr),Lw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(jf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,oi!==null&&(Gm(oi),oi=null))),Fm(t,e),wr(e),null;case 5:Uw(e);var i=ma(Ru.current);if(r=e.type,t!==null&&e.stateNode!=null)X_(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Q(166));return wr(e),null}if(t=ma(Bi.current),jf(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[Ti]=e,n[ku]=s,t=(e.mode&1)!==0,r){case"dialog":gt("cancel",n),gt("close",n);break;case"iframe":case"object":case"embed":gt("load",n);break;case"video":case"audio":for(i=0;i<Zc.length;i++)gt(Zc[i],n);break;case"source":gt("error",n);break;case"img":case"image":case"link":gt("error",n),gt("load",n);break;case"details":gt("toggle",n);break;case"input":x1(n,s),gt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},gt("invalid",n);break;case"textarea":_1(n,s),gt("invalid",n)}dm(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ff(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ff(n.textContent,a,t),i=["children",""+a]):xu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&gt("scroll",n)}switch(r){case"input":kf(n),A1(n,s,!0);break;case"textarea":kf(n),S1(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=ld)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CA(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ti]=e,t[ku]=n,Z_(t,e,!1,!1),e.stateNode=t;e:{switch(o=pm(r,n),r){case"dialog":gt("cancel",t),gt("close",t),i=n;break;case"iframe":case"object":case"embed":gt("load",t),i=n;break;case"video":case"audio":for(i=0;i<Zc.length;i++)gt(Zc[i],t);i=n;break;case"source":gt("error",t),i=n;break;case"img":case"image":case"link":gt("error",t),gt("load",t),i=n;break;case"details":gt("toggle",t),i=n;break;case"input":x1(t,n),i=lm(t,n),gt("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=It({},n,{value:void 0}),gt("invalid",t);break;case"textarea":_1(t,n),i=fm(t,n),gt("invalid",t);break;default:i=n}dm(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?TA(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OA(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Au(t,l):typeof l=="number"&&Au(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&gt("scroll",t):l!=null&&gw(t,s,l,o))}switch(r){case"input":kf(t),A1(t,n,!1);break;case"textarea":kf(t),S1(t);break;case"option":n.value!=null&&t.setAttribute("value",""+To(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Cl(t,!!n.multiple,s,!1):n.defaultValue!=null&&Cl(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ld)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wr(e),null;case 6:if(t&&e.stateNode!=null)eS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Q(166));if(r=ma(Ru.current),ma(Bi.current),jf(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ti]=e,(s=n.nodeValue!==r)&&(t=wn,t!==null))switch(t.tag){case 3:Ff(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ff(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ti]=e,e.stateNode=n}return wr(e),null;case 13:if(wt(_t),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vt&&gn!==null&&e.mode&1&&!(e.flags&128))w_(),Kl(),e.flags|=98560,s=!1;else if(s=jf(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(Q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Q(317));s[Ti]=e}else Kl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wr(e),s=!1}else oi!==null&&(Gm(oi),oi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Ht===0&&(Ht=3):Jw())),e.updateQueue!==null&&(e.flags|=4),wr(e),null);case 4:return Gl(),Fm(t,e),t===null&&Nu(e.stateNode.containerInfo),wr(e),null;case 10:return Rw(e.type._context),wr(e),null;case 17:return Xr(e.type)&&cd(),wr(e),null;case 19:if(wt(_t),s=e.memoizedState,s===null)return wr(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Sc(s,!1);else{if(Ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=md(t),o!==null){for(e.flags|=128,Sc(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ke(_t,_t.current&1|2),e.child}t=t.sibling}s.tail!==null&&Nt()>Ql&&(e.flags|=128,n=!0,Sc(s,!1),e.lanes=4194304)}else{if(!n)if(t=md(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Sc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!vt)return wr(e),null}else 2*Nt()-s.renderingStartTime>Ql&&r!==1073741824&&(e.flags|=128,n=!0,Sc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Nt(),e.sibling=null,r=_t.current,Ke(_t,n?r&1|2:r&1),e):(wr(e),null);case 22:case 23:return Qw(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?un&1073741824&&(wr(e),e.subtreeFlags&6&&(e.flags|=8192)):wr(e),null;case 24:return null;case 25:return null}throw Error(Q(156,e.tag))}function VC(t,e){switch(Nw(e),e.tag){case 1:return Xr(e.type)&&cd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gl(),wt(Zr),wt(Nr),Lw(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Uw(e),null;case 13:if(wt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Q(340));Kl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return wt(_t),null;case 4:return Gl(),null;case 10:return Rw(e.type._context),null;case 22:case 23:return Qw(),null;case 24:return null;default:return null}}var Hf=!1,Pr=!1,KC=typeof WeakSet=="function"?WeakSet:Set,oe=null;function vl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ct(t,e,n)}else r.current=null}function jm(t,e,r){try{r()}catch(n){Ct(t,e,n)}}var pb=!1;function WC(t,e){if(_m=sd,t=s_(),Cw(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,h=null;t:for(;;){for(var g;f!==r||i!==0&&f.nodeType!==3||(a=o+i),f!==s||n!==0&&f.nodeType!==3||(l=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===t)break t;if(h===r&&++c===i&&(a=o),h===s&&++u===n&&(l=o),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Sm={focusedElem:t,selectionRange:r},sd=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var v=w.memoizedProps,O=w.memoizedState,A=e.stateNode,I=A.getSnapshotBeforeUpdate(e.elementType===e.type?v:ri(e.type,v),O);A.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(T){Ct(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return w=pb,pb=!1,w}function uu(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&jm(e,r,s)}i=i.next}while(i!==n)}}function up(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function zm(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function tS(t){var e=t.alternate;e!==null&&(t.alternate=null,tS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ti],delete e[ku],delete e[Cm],delete e[OC],delete e[NC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rS(t){return t.tag===5||t.tag===3||t.tag===4}function gb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ld));else if(n!==4&&(t=t.child,t!==null))for(qm(t,e,r),t=t.sibling;t!==null;)qm(t,e,r),t=t.sibling}function Hm(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Hm(t,e,r),t=t.sibling;t!==null;)Hm(t,e,r),t=t.sibling}var lr=null,si=!1;function Fs(t,e,r){for(r=r.child;r!==null;)nS(t,e,r),r=r.sibling}function nS(t,e,r){if(Mi&&typeof Mi.onCommitFiberUnmount=="function")try{Mi.onCommitFiberUnmount(rp,r)}catch{}switch(r.tag){case 5:Pr||vl(r,e);case 6:var n=lr,i=si;lr=null,Fs(t,e,r),lr=n,si=i,lr!==null&&(si?(t=lr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):lr.removeChild(r.stateNode));break;case 18:lr!==null&&(si?(t=lr,r=r.stateNode,t.nodeType===8?O0(t.parentNode,r):t.nodeType===1&&O0(t,r),Pu(t)):O0(lr,r.stateNode));break;case 4:n=lr,i=si,lr=r.stateNode.containerInfo,si=!0,Fs(t,e,r),lr=n,si=i;break;case 0:case 11:case 14:case 15:if(!Pr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&jm(r,e,o),i=i.next}while(i!==n)}Fs(t,e,r);break;case 1:if(!Pr&&(vl(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Ct(r,e,a)}Fs(t,e,r);break;case 21:Fs(t,e,r);break;case 22:r.mode&1?(Pr=(n=Pr)||r.memoizedState!==null,Fs(t,e,r),Pr=n):Fs(t,e,r);break;default:Fs(t,e,r)}}function mb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new KC),e.forEach(function(n){var i=rO.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Wn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lr=a.stateNode,si=!1;break e;case 3:lr=a.stateNode.containerInfo,si=!0;break e;case 4:lr=a.stateNode.containerInfo,si=!0;break e}a=a.return}if(lr===null)throw Error(Q(160));nS(s,o,i),lr=null,si=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Ct(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iS(e,t),e=e.sibling}function iS(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),wi(t),n&4){try{uu(3,t,t.return),up(3,t)}catch(v){Ct(t,t.return,v)}try{uu(5,t,t.return)}catch(v){Ct(t,t.return,v)}}break;case 1:Wn(e,t),wi(t),n&512&&r!==null&&vl(r,r.return);break;case 5:if(Wn(e,t),wi(t),n&512&&r!==null&&vl(r,r.return),t.flags&32){var i=t.stateNode;try{Au(i,"")}catch(v){Ct(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&IA(i,s),pm(a,o);var c=pm(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?TA(i,f):u==="dangerouslySetInnerHTML"?OA(i,f):u==="children"?Au(i,f):gw(i,u,f,c)}switch(a){case"input":cm(i,s);break;case"textarea":PA(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Cl(i,!!s.multiple,g,!1):h!==!!s.multiple&&(s.defaultValue!=null?Cl(i,!!s.multiple,s.defaultValue,!0):Cl(i,!!s.multiple,s.multiple?[]:"",!1))}i[ku]=s}catch(v){Ct(t,t.return,v)}}break;case 6:if(Wn(e,t),wi(t),n&4){if(t.stateNode===null)throw Error(Q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ct(t,t.return,v)}}break;case 3:if(Wn(e,t),wi(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Pu(e.containerInfo)}catch(v){Ct(t,t.return,v)}break;case 4:Wn(e,t),wi(t);break;case 13:Wn(e,t),wi(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Gw=Nt())),n&4&&mb(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(Pr=(c=Pr)||u,Wn(e,t),Pr=c):Wn(e,t),wi(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(oe=t,u=t.child;u!==null;){for(f=oe=u;oe!==null;){switch(h=oe,g=h.child,h.tag){case 0:case 11:case 14:case 15:uu(4,h,h.return);break;case 1:vl(h,h.return);var w=h.stateNode;if(typeof w.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(v){Ct(n,r,v)}}break;case 5:vl(h,h.return);break;case 22:if(h.memoizedState!==null){wb(f);continue}}g!==null?(g.return=h,oe=g):wb(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=NA("display",o))}catch(v){Ct(t,t.return,v)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Ct(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Wn(e,t),wi(t),n&4&&mb(t);break;case 21:break;default:Wn(e,t),wi(t)}}function wi(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(rS(r)){var n=r;break e}r=r.return}throw Error(Q(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Au(i,""),n.flags&=-33);var s=gb(t);Hm(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=gb(t);qm(t,a,o);break;default:throw Error(Q(161))}}catch(l){Ct(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GC(t,e,r){oe=t,sS(t)}function sS(t,e,r){for(var n=(t.mode&1)!==0;oe!==null;){var i=oe,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Hf;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Pr;a=Hf;var c=Pr;if(Hf=o,(Pr=l)&&!c)for(oe=i;oe!==null;)o=oe,l=o.child,o.tag===22&&o.memoizedState!==null?vb(i):l!==null?(l.return=o,oe=l):vb(i);for(;s!==null;)oe=s,sS(s),s=s.sibling;oe=i,Hf=a,Pr=c}yb(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,oe=s):yb(t)}}function yb(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Pr||up(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Pr)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:ri(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&tb(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}tb(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Pu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}Pr||e.flags&512&&zm(e)}catch(h){Ct(e,e.return,h)}}if(e===t){oe=null;break}if(r=e.sibling,r!==null){r.return=e.return,oe=r;break}oe=e.return}}function wb(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,oe=r;break}oe=e.return}}function vb(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{up(4,e)}catch(l){Ct(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){Ct(e,i,l)}}var s=e.return;try{zm(e)}catch(l){Ct(e,s,l)}break;case 5:var o=e.return;try{zm(e)}catch(l){Ct(e,o,l)}}}catch(l){Ct(e,e.return,l)}if(e===t){oe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,oe=a;break}oe=e.return}}var YC=Math.ceil,vd=ks.ReactCurrentDispatcher,Kw=ks.ReactCurrentOwner,Ln=ks.ReactCurrentBatchConfig,Ae=0,er=null,Ut=null,cr=0,un=0,bl=Uo(0),Ht=0,Uu=null,Ca=0,fp=0,Ww=0,fu=null,Wr=null,Gw=0,Ql=1/0,os=null,bd=!1,Vm=null,Io=null,Vf=!1,yo=null,Ed=0,hu=0,Km=null,Dh=-1,Rh=0;function Dr(){return Ae&6?Nt():Dh!==-1?Dh:Dh=Nt()}function Po(t){return t.mode&1?Ae&2&&cr!==0?cr&-cr:kC.transition!==null?(Rh===0&&(Rh=qA()),Rh):(t=ke,t!==0||(t=window.event,t=t===void 0?16:QA(t.type)),t):1}function ui(t,e,r,n){if(50<hu)throw hu=0,Km=null,Error(Q(185));sf(t,r,n),(!(Ae&2)||t!==er)&&(t===er&&(!(Ae&2)&&(fp|=r),Ht===4&&uo(t,cr)),en(t,n),r===1&&Ae===0&&!(e.mode&1)&&(Ql=Nt()+500,ap&&Lo()))}function en(t,e){var r=t.callbackNode;k5(t,e);var n=id(t,t===er?cr:0);if(n===0)r!==null&&C1(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&C1(r),e===1)t.tag===0?TC(bb.bind(null,t)):g_(bb.bind(null,t)),PC(function(){!(Ae&6)&&Lo()}),r=null;else{switch(HA(n)){case 1:r=bw;break;case 4:r=jA;break;case 16:r=nd;break;case 536870912:r=zA;break;default:r=nd}r=dS(r,oS.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function oS(t,e){if(Dh=-1,Rh=0,Ae&6)throw Error(Q(327));var r=t.callbackNode;if(Dl()&&t.callbackNode!==r)return null;var n=id(t,t===er?cr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=xd(t,n);else{e=n;var i=Ae;Ae|=2;var s=lS();(er!==t||cr!==e)&&(os=null,Ql=Nt()+500,xa(t,e));do try{ZC();break}catch(a){aS(t,a)}while(!0);Dw(),vd.current=s,Ae=i,Ut!==null?e=0:(er=null,cr=0,e=Ht)}if(e!==0){if(e===2&&(i=vm(t),i!==0&&(n=i,e=Wm(t,i))),e===1)throw r=Uu,xa(t,0),uo(t,n),en(t,Nt()),r;if(e===6)uo(t,n);else{if(i=t.current.alternate,!(n&30)&&!QC(i)&&(e=xd(t,n),e===2&&(s=vm(t),s!==0&&(n=s,e=Wm(t,s))),e===1))throw r=Uu,xa(t,0),uo(t,n),en(t,Nt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Q(345));case 2:aa(t,Wr,os);break;case 3:if(uo(t,n),(n&130023424)===n&&(e=Gw+500-Nt(),10<e)){if(id(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Dr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pm(aa.bind(null,t,Wr,os),e);break}aa(t,Wr,os);break;case 4:if(uo(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-ci(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Nt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*YC(n/1960))-n,10<n){t.timeoutHandle=Pm(aa.bind(null,t,Wr,os),n);break}aa(t,Wr,os);break;case 5:aa(t,Wr,os);break;default:throw Error(Q(329))}}}return en(t,Nt()),t.callbackNode===r?oS.bind(null,t):null}function Wm(t,e){var r=fu;return t.current.memoizedState.isDehydrated&&(xa(t,e).flags|=256),t=xd(t,e),t!==2&&(e=Wr,Wr=r,e!==null&&Gm(e)),t}function Gm(t){Wr===null?Wr=t:Wr.push.apply(Wr,t)}function QC(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!hi(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function uo(t,e){for(e&=~Ww,e&=~fp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-ci(e),n=1<<r;t[r]=-1,e&=~n}}function bb(t){if(Ae&6)throw Error(Q(327));Dl();var e=id(t,0);if(!(e&1))return en(t,Nt()),null;var r=xd(t,e);if(t.tag!==0&&r===2){var n=vm(t);n!==0&&(e=n,r=Wm(t,n))}if(r===1)throw r=Uu,xa(t,0),uo(t,e),en(t,Nt()),r;if(r===6)throw Error(Q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,aa(t,Wr,os),en(t,Nt()),null}function Yw(t,e){var r=Ae;Ae|=1;try{return t(e)}finally{Ae=r,Ae===0&&(Ql=Nt()+500,ap&&Lo())}}function Oa(t){yo!==null&&yo.tag===0&&!(Ae&6)&&Dl();var e=Ae;Ae|=1;var r=Ln.transition,n=ke;try{if(Ln.transition=null,ke=1,t)return t()}finally{ke=n,Ln.transition=r,Ae=e,!(Ae&6)&&Lo()}}function Qw(){un=bl.current,wt(bl)}function xa(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,IC(r)),Ut!==null)for(r=Ut.return;r!==null;){var n=r;switch(Nw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&cd();break;case 3:Gl(),wt(Zr),wt(Nr),Lw();break;case 5:Uw(n);break;case 4:Gl();break;case 13:wt(_t);break;case 19:wt(_t);break;case 10:Rw(n.type._context);break;case 22:case 23:Qw()}r=r.return}if(er=t,Ut=t=Co(t.current,null),cr=un=e,Ht=0,Uu=null,Ww=fp=Ca=0,Wr=fu=null,ga!==null){for(e=0;e<ga.length;e++)if(r=ga[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}ga=null}return t}function aS(t,e){do{var r=Ut;try{if(Dw(),Nh.current=wd,yd){for(var n=St.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}yd=!1}if(Pa=0,Qt=jt=St=null,cu=!1,$u=0,Kw.current=null,r===null||r.return===null){Ht=1,Uu=e,Ut=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=cr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=ab(o);if(g!==null){g.flags&=-257,lb(g,o,a,s,e),g.mode&1&&ob(s,c,e),e=g,l=c;var w=e.updateQueue;if(w===null){var v=new Set;v.add(l),e.updateQueue=v}else w.add(l);break e}else{if(!(e&1)){ob(s,c,e),Jw();break e}l=Error(Q(426))}}else if(vt&&a.mode&1){var O=ab(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),lb(O,o,a,s,e),Tw(Yl(l,a));break e}}s=l=Yl(l,a),Ht!==4&&(Ht=2),fu===null?fu=[s]:fu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=H_(s,l,e);eb(s,A);break e;case 1:a=l;var I=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof I.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Io===null||!Io.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=V_(s,a,e);eb(s,T);break e}}s=s.return}while(s!==null)}uS(r)}catch(D){e=D,Ut===r&&r!==null&&(Ut=r=r.return);continue}break}while(!0)}function lS(){var t=vd.current;return vd.current=wd,t===null?wd:t}function Jw(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),er===null||!(Ca&268435455)&&!(fp&268435455)||uo(er,cr)}function xd(t,e){var r=Ae;Ae|=2;var n=lS();(er!==t||cr!==e)&&(os=null,xa(t,e));do try{JC();break}catch(i){aS(t,i)}while(!0);if(Dw(),Ae=r,vd.current=n,Ut!==null)throw Error(Q(261));return er=null,cr=0,Ht}function JC(){for(;Ut!==null;)cS(Ut)}function ZC(){for(;Ut!==null&&!A5();)cS(Ut)}function cS(t){var e=hS(t.alternate,t,un);t.memoizedProps=t.pendingProps,e===null?uS(t):Ut=e,Kw.current=null}function uS(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=VC(r,e),r!==null){r.flags&=32767,Ut=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,Ut=null;return}}else if(r=HC(r,e,un),r!==null){Ut=r;return}if(e=e.sibling,e!==null){Ut=e;return}Ut=e=t}while(e!==null);Ht===0&&(Ht=5)}function aa(t,e,r){var n=ke,i=Ln.transition;try{Ln.transition=null,ke=1,XC(t,e,r,n)}finally{Ln.transition=i,ke=n}return null}function XC(t,e,r,n){do Dl();while(yo!==null);if(Ae&6)throw Error(Q(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Q(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(D5(t,s),t===er&&(Ut=er=null,cr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Vf||(Vf=!0,dS(nd,function(){return Dl(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Ln.transition,Ln.transition=null;var o=ke;ke=1;var a=Ae;Ae|=4,Kw.current=null,WC(t,r),iS(r,t),vC(Sm),sd=!!_m,Sm=_m=null,t.current=r,GC(r),_5(),Ae=a,ke=o,Ln.transition=s}else t.current=r;if(Vf&&(Vf=!1,yo=t,Ed=i),s=t.pendingLanes,s===0&&(Io=null),P5(r.stateNode),en(t,Nt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(bd)throw bd=!1,t=Vm,Vm=null,t;return Ed&1&&t.tag!==0&&Dl(),s=t.pendingLanes,s&1?t===Km?hu++:(hu=0,Km=t):hu=0,Lo(),null}function Dl(){if(yo!==null){var t=HA(Ed),e=Ln.transition,r=ke;try{if(Ln.transition=null,ke=16>t?16:t,yo===null)var n=!1;else{if(t=yo,yo=null,Ed=0,Ae&6)throw Error(Q(331));var i=Ae;for(Ae|=4,oe=t.current;oe!==null;){var s=oe,o=s.child;if(oe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(oe=c;oe!==null;){var u=oe;switch(u.tag){case 0:case 11:case 15:uu(8,u,s)}var f=u.child;if(f!==null)f.return=u,oe=f;else for(;oe!==null;){u=oe;var h=u.sibling,g=u.return;if(tS(u),u===c){oe=null;break}if(h!==null){h.return=g,oe=h;break}oe=g}}}var w=s.alternate;if(w!==null){var v=w.child;if(v!==null){w.child=null;do{var O=v.sibling;v.sibling=null,v=O}while(v!==null)}}oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,oe=o;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:uu(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,oe=A;break e}oe=s.return}}var I=t.current;for(oe=I;oe!==null;){o=oe;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,oe=_;else e:for(o=I;oe!==null;){if(a=oe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:up(9,a)}}catch(D){Ct(a,a.return,D)}if(a===o){oe=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,oe=T;break e}oe=a.return}}if(Ae=i,Lo(),Mi&&typeof Mi.onPostCommitFiberRoot=="function")try{Mi.onPostCommitFiberRoot(rp,t)}catch{}n=!0}return n}finally{ke=r,Ln.transition=e}}return!1}function Eb(t,e,r){e=Yl(r,e),e=H_(t,e,1),t=So(t,e,1),e=Dr(),t!==null&&(sf(t,1,e),en(t,e))}function Ct(t,e,r){if(t.tag===3)Eb(t,t,r);else for(;e!==null;){if(e.tag===3){Eb(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Io===null||!Io.has(n))){t=Yl(r,t),t=V_(e,t,1),e=So(e,t,1),t=Dr(),e!==null&&(sf(e,1,t),en(e,t));break}}e=e.return}}function eO(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Dr(),t.pingedLanes|=t.suspendedLanes&r,er===t&&(cr&r)===r&&(Ht===4||Ht===3&&(cr&130023424)===cr&&500>Nt()-Gw?xa(t,0):Ww|=r),en(t,e)}function fS(t,e){e===0&&(t.mode&1?(e=$f,$f<<=1,!($f&130023424)&&($f=4194304)):e=1);var r=Dr();t=_s(t,e),t!==null&&(sf(t,e,r),en(t,r))}function tO(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),fS(t,r)}function rO(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Q(314))}n!==null&&n.delete(e),fS(t,r)}var hS;hS=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Zr.current)Yr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Yr=!1,qC(t,e,r);Yr=!!(t.flags&131072)}else Yr=!1,vt&&e.flags&1048576&&m_(e,hd,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;kh(t,e),t=e.pendingProps;var i=Vl(e,Nr.current);kl(e,r),i=jw(null,e,n,t,i,r);var s=zw();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xr(n)?(s=!0,ud(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Mw(e),i.updater=cp,e.stateNode=i,i._reactInternals=e,Rm(e,n,t,r),e=Bm(null,e,n,!0,s,r)):(e.tag=0,vt&&s&&Ow(e),Tr(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(kh(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=iO(n),t=ri(n,t),i){case 0:e=Mm(null,e,n,t,r);break e;case 1:e=fb(null,e,n,t,r);break e;case 11:e=cb(null,e,n,t,r);break e;case 14:e=ub(null,e,n,ri(n.type,t),r);break e}throw Error(Q(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ri(n,i),Mm(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ri(n,i),fb(t,e,n,i,r);case 3:e:{if(Y_(e),t===null)throw Error(Q(387));n=e.pendingProps,s=e.memoizedState,i=s.element,x_(t,e),gd(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Yl(Error(Q(423)),e),e=hb(t,e,n,r,i);break e}else if(n!==i){i=Yl(Error(Q(424)),e),e=hb(t,e,n,r,i);break e}else for(gn=_o(e.stateNode.containerInfo.firstChild),wn=e,vt=!0,oi=null,r=b_(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Kl(),n===i){e=Ss(t,e,r);break e}Tr(t,e,n,r)}e=e.child}return e;case 5:return A_(e),t===null&&Tm(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Im(n,i)?o=null:s!==null&&Im(n,s)&&(e.flags|=32),G_(t,e),Tr(t,e,o,r),e.child;case 6:return t===null&&Tm(e),null;case 13:return Q_(t,e,r);case 4:return Bw(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Wl(e,null,n,r):Tr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ri(n,i),cb(t,e,n,i,r);case 7:return Tr(t,e,e.pendingProps,r),e.child;case 8:return Tr(t,e,e.pendingProps.children,r),e.child;case 12:return Tr(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ke(dd,n._currentValue),n._currentValue=o,s!==null)if(hi(s.value,o)){if(s.children===i.children&&!Zr.current){e=Ss(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=vs(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),km(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Q(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),km(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,kl(e,r),i=jn(i),n=n(i),e.flags|=1,Tr(t,e,n,r),e.child;case 14:return n=e.type,i=ri(n,e.pendingProps),i=ri(n.type,i),ub(t,e,n,i,r);case 15:return K_(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:ri(n,i),kh(t,e),e.tag=1,Xr(n)?(t=!0,ud(e)):t=!1,kl(e,r),q_(e,n,i),Rm(e,n,i,r),Bm(null,e,n,!0,t,r);case 19:return J_(t,e,r);case 22:return W_(t,e,r)}throw Error(Q(156,e.tag))};function dS(t,e){return FA(t,e)}function nO(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,r,n){return new nO(t,e,r,n)}function Zw(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iO(t){if(typeof t=="function")return Zw(t)?1:0;if(t!=null){if(t=t.$$typeof,t===yw)return 11;if(t===ww)return 14}return 2}function Co(t,e){var r=t.alternate;return r===null?(r=Bn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function $h(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")Zw(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ul:return Aa(r.children,i,s,e);case mw:o=8,i|=8;break;case im:return t=Bn(12,r,e,i|2),t.elementType=im,t.lanes=s,t;case sm:return t=Bn(13,r,e,i),t.elementType=sm,t.lanes=s,t;case om:return t=Bn(19,r,e,i),t.elementType=om,t.lanes=s,t;case AA:return hp(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case EA:o=10;break e;case xA:o=9;break e;case yw:o=11;break e;case ww:o=14;break e;case no:o=16,n=null;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Bn(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function Aa(t,e,r,n){return t=Bn(7,t,n,e),t.lanes=r,t}function hp(t,e,r,n){return t=Bn(22,t,n,e),t.elementType=AA,t.lanes=r,t.stateNode={isHidden:!1},t}function B0(t,e,r){return t=Bn(6,t,null,e),t.lanes=r,t}function U0(t,e,r){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sO(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w0(0),this.expirationTimes=w0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w0(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xw(t,e,r,n,i,s,o,a,l){return t=new sO(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Bn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mw(s),t}function oO(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cl,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function pS(t){if(!t)return ko;t=t._reactInternals;e:{if(Fa(t)!==t||t.tag!==1)throw Error(Q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Q(171))}if(t.tag===1){var r=t.type;if(Xr(r))return p_(t,r,e)}return e}function gS(t,e,r,n,i,s,o,a,l){return t=Xw(r,n,!0,t,i,s,o,a,l),t.context=pS(null),r=t.current,n=Dr(),i=Po(r),s=vs(n,i),s.callback=e??null,So(r,s,i),t.current.lanes=i,sf(t,i,n),en(t,n),t}function dp(t,e,r,n){var i=e.current,s=Dr(),o=Po(i);return r=pS(r),e.context===null?e.context=r:e.pendingContext=r,e=vs(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=So(i,e,o),t!==null&&(ui(t,i,o,s),Oh(t,i,o)),o}function Ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ev(t,e){xb(t,e),(t=t.alternate)&&xb(t,e)}function aO(){return null}var mS=typeof reportError=="function"?reportError:function(t){console.error(t)};function tv(t){this._internalRoot=t}pp.prototype.render=tv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Q(409));dp(t,e,null,null)};pp.prototype.unmount=tv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oa(function(){dp(null,t,null,null)}),e[As]=null}};function pp(t){this._internalRoot=t}pp.prototype.unstable_scheduleHydration=function(t){if(t){var e=WA();t={blockedOn:null,target:t,priority:e};for(var r=0;r<co.length&&e!==0&&e<co[r].priority;r++);co.splice(r,0,t),r===0&&YA(t)}};function rv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ab(){}function lO(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=Ad(o);s.call(c)}}var o=gS(e,n,t,0,null,!1,!1,"",Ab);return t._reactRootContainer=o,t[As]=o.current,Nu(t.nodeType===8?t.parentNode:t),Oa(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=Ad(l);a.call(c)}}var l=Xw(t,0,!1,null,null,!1,!1,"",Ab);return t._reactRootContainer=l,t[As]=l.current,Nu(t.nodeType===8?t.parentNode:t),Oa(function(){dp(e,l,r,n)}),l}function mp(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ad(o);a.call(l)}}dp(e,o,t,i)}else o=lO(r,e,t,i,n);return Ad(o)}VA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Jc(e.pendingLanes);r!==0&&(Ew(e,r|1),en(e,Nt()),!(Ae&6)&&(Ql=Nt()+500,Lo()))}break;case 13:Oa(function(){var n=_s(t,1);if(n!==null){var i=Dr();ui(n,t,1,i)}}),ev(t,1)}};xw=function(t){if(t.tag===13){var e=_s(t,134217728);if(e!==null){var r=Dr();ui(e,t,134217728,r)}ev(t,134217728)}};KA=function(t){if(t.tag===13){var e=Po(t),r=_s(t,e);if(r!==null){var n=Dr();ui(r,t,e,n)}ev(t,e)}};WA=function(){return ke};GA=function(t,e){var r=ke;try{return ke=t,e()}finally{ke=r}};mm=function(t,e,r){switch(e){case"input":if(cm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=op(n);if(!i)throw Error(Q(90));SA(n),cm(n,i)}}}break;case"textarea":PA(t,r);break;case"select":e=r.value,e!=null&&Cl(t,!!r.multiple,e,!1)}};RA=Yw;$A=Oa;var cO={usingClientEntryPoint:!1,Events:[af,pl,op,kA,DA,Yw]},Ic={findFiberByHostInstance:pa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uO={bundleType:Ic.bundleType,version:Ic.version,rendererPackageName:Ic.rendererPackageName,rendererConfig:Ic.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=UA(t),t===null?null:t.stateNode},findFiberByHostInstance:Ic.findFiberByHostInstance||aO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{rp=Kf.inject(uO),Mi=Kf}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cO;bn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rv(e))throw Error(Q(200));return oO(t,e,null,r)};bn.createRoot=function(t,e){if(!rv(t))throw Error(Q(299));var r=!1,n="",i=mS;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xw(t,1,!1,null,null,r,!1,n,i),t[As]=e.current,Nu(t.nodeType===8?t.parentNode:t),new tv(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):(t=Object.keys(t).join(","),Error(Q(268,t)));return t=UA(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return Oa(t)};bn.hydrate=function(t,e,r){if(!gp(e))throw Error(Q(200));return mp(null,t,e,!0,r)};bn.hydrateRoot=function(t,e,r){if(!rv(t))throw Error(Q(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=mS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=gS(e,null,t,1,r??null,i,!1,s,o),t[As]=e.current,Nu(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new pp(e)};bn.render=function(t,e,r){if(!gp(e))throw Error(Q(200));return mp(null,t,e,!1,r)};bn.unmountComponentAtNode=function(t){if(!gp(t))throw Error(Q(40));return t._reactRootContainer?(Oa(function(){mp(null,null,t,!1,function(){t._reactRootContainer=null,t[As]=null})}),!0):!1};bn.unstable_batchedUpdates=Yw;bn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!gp(r))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return mp(t,e,r,!1,n)};bn.version="18.3.1-next-f1338f8080-20240426";function yS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yS)}catch(t){console.error(t)}}yS(),yA.exports=bn;var fO=yA.exports,_b=fO;rm.createRoot=_b.createRoot,rm.hydrateRoot=_b.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Lu.apply(this,arguments)}var wo;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(wo||(wo={}));const Sb="popstate";function hO(t){t===void 0&&(t={});function e(n,i){let{pathname:s,search:o,hash:a}=n.location;return Ym("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:_d(i)}return pO(e,r,null,t)}function Lt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dO(){return Math.random().toString(36).substr(2,8)}function Ib(t,e){return{usr:t.state,key:t.key,idx:e}}function Ym(t,e,r,n){return r===void 0&&(r=null),Lu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lc(e):e,{state:r,key:e&&e.key||n||dO()})}function _d(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function lc(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function pO(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=wo.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Lu({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=wo.Pop;let O=u(),A=O==null?null:O-c;c=O,l&&l({action:a,location:v.location,delta:A})}function h(O,A){a=wo.Push;let I=Ym(v.location,O,A);c=u()+1;let _=Ib(I,c),T=v.createHref(I);try{o.pushState(_,"",T)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(T)}s&&l&&l({action:a,location:v.location,delta:1})}function g(O,A){a=wo.Replace;let I=Ym(v.location,O,A);c=u();let _=Ib(I,c),T=v.createHref(I);o.replaceState(_,"",T),s&&l&&l({action:a,location:v.location,delta:0})}function w(O){let A=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof O=="string"?O:_d(O);return I=I.replace(/ $/,"%20"),Lt(A,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,A)}let v={get action(){return a},get location(){return t(i,o)},listen(O){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Sb,f),l=O,()=>{i.removeEventListener(Sb,f),l=null}},createHref(O){return e(i,O)},createURL:w,encodeLocation(O){let A=w(O);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:h,replace:g,go(O){return o.go(O)}};return v}var Pb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Pb||(Pb={}));function gO(t,e,r){return r===void 0&&(r="/"),mO(t,e,r)}function mO(t,e,r,n){let i=typeof e=="string"?lc(e):e,s=iv(i.pathname||"/",r);if(s==null)return null;let o=wS(t);yO(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=OO(s);a=IO(o[l],c)}return a}function wS(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Lt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=Oo([n,l.relativePath]),u=r.concat(l);s.children&&s.children.length>0&&(Lt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),wS(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:_O(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of vS(s.path))i(s,o,l)}),e}function vS(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=vS(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function yO(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:SO(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const wO=/^:[\w-]+$/,vO=3,bO=2,EO=1,xO=10,AO=-2,Cb=t=>t==="*";function _O(t,e){let r=t.split("/"),n=r.length;return r.some(Cb)&&(n+=AO),e&&(n+=bO),r.filter(i=>!Cb(i)).reduce((i,s)=>i+(wO.test(s)?vO:s===""?EO:xO),n)}function SO(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function IO(t,e,r){let{routesMeta:n}=t,i={},s="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],c=a===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=PO({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Oo([s,f.pathname]),pathnameBase:RO(Oo([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Oo([s,f.pathnameBase]))}return o}function PO(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=CO(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,u,f)=>{let{paramName:h,isOptional:g}=u;if(h==="*"){let v=a[f]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const w=a[f];return g&&!w?c[h]=void 0:c[h]=(w||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function CO(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),nv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function OO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function iv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const NO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,TO=t=>NO.test(t);function kO(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?lc(t):t,s;if(r)if(TO(r))s=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),nv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?s=Ob(r.substring(1),"/"):s=Ob(r,e)}else s=e;return{pathname:s,search:$O(n),hash:MO(i)}}function Ob(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function L0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function DO(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function bS(t,e){let r=DO(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ES(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=lc(t):(i=Lu({},t),Lt(!i.pathname||!i.pathname.includes("?"),L0("?","pathname","search",i)),Lt(!i.pathname||!i.pathname.includes("#"),L0("#","pathname","hash",i)),Lt(!i.search||!i.search.includes("#"),L0("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let f=e.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=kO(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Oo=t=>t.join("/").replace(/\/\/+/g,"/"),RO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),$O=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BO(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const xS=["post","put","patch","delete"];new Set(xS);const UO=["get",...xS];new Set(UO);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fu.apply(this,arguments)}const sv=Y.createContext(null),LO=Y.createContext(null),ja=Y.createContext(null),yp=Y.createContext(null),za=Y.createContext({outlet:null,matches:[],isDataRoute:!1}),AS=Y.createContext(null);function FO(t,e){let{relative:r}=e===void 0?{}:e;cf()||Lt(!1);let{basename:n,navigator:i}=Y.useContext(ja),{hash:s,pathname:o,search:a}=SS(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:Oo([n,o])),i.createHref({pathname:l,search:a,hash:s})}function cf(){return Y.useContext(yp)!=null}function uf(){return cf()||Lt(!1),Y.useContext(yp).location}function _S(t){Y.useContext(ja).static||Y.useLayoutEffect(t)}function jO(){let{isDataRoute:t}=Y.useContext(za);return t?eN():zO()}function zO(){cf()||Lt(!1);let t=Y.useContext(sv),{basename:e,future:r,navigator:n}=Y.useContext(ja),{matches:i}=Y.useContext(za),{pathname:s}=uf(),o=JSON.stringify(bS(i,r.v7_relativeSplatPath)),a=Y.useRef(!1);return _S(()=>{a.current=!0}),Y.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){n.go(c);return}let f=ES(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Oo([e,f.pathname])),(u.replace?n.replace:n.push)(f,u.state,u)},[e,n,o,s,t])}function SS(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=Y.useContext(ja),{matches:i}=Y.useContext(za),{pathname:s}=uf(),o=JSON.stringify(bS(i,n.v7_relativeSplatPath));return Y.useMemo(()=>ES(t,JSON.parse(o),s,r==="path"),[t,o,s,r])}function qO(t,e){return HO(t,e)}function HO(t,e,r,n){cf()||Lt(!1);let{navigator:i}=Y.useContext(ja),{matches:s}=Y.useContext(za),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=uf(),u;if(e){var f;let O=typeof e=="string"?lc(e):e;l==="/"||(f=O.pathname)!=null&&f.startsWith(l)||Lt(!1),u=O}else u=c;let h=u.pathname||"/",g=h;if(l!=="/"){let O=l.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(O.length).join("/")}let w=gO(t,{pathname:g}),v=YO(w&&w.map(O=>Object.assign({},O,{params:Object.assign({},a,O.params),pathname:Oo([l,i.encodeLocation?i.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?l:Oo([l,i.encodeLocation?i.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),s,r,n);return e&&v?Y.createElement(yp.Provider,{value:{location:Fu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:wo.Pop}},v):v}function VO(){let t=XO(),e=BO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),r?Y.createElement("pre",{style:i},r):null,null)}const KO=Y.createElement(VO,null);class WO extends Y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?Y.createElement(za.Provider,{value:this.props.routeContext},Y.createElement(AS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GO(t){let{routeContext:e,match:r,children:n}=t,i=Y.useContext(sv);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),Y.createElement(za.Provider,{value:e},n)}function YO(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var s;if(!r)return null;if(r.errors)t=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(i=r)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Lt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:h,errors:g}=r,w=f.route.loader&&h[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||w){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,h)=>{let g,w=!1,v=null,O=null;r&&(g=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||KO,l&&(c<0&&h===0?(tN("route-fallback"),w=!0,O=null):c===h&&(w=!0,O=f.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,h+1)),I=()=>{let _;return g?_=v:w?_=O:f.route.Component?_=Y.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=u,Y.createElement(GO,{match:f,routeContext:{outlet:u,matches:A,isDataRoute:r!=null},children:_})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?Y.createElement(WO,{location:r.location,revalidation:r.revalidation,component:v,error:g,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}var IS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(IS||{}),PS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(PS||{});function QO(t){let e=Y.useContext(sv);return e||Lt(!1),e}function JO(t){let e=Y.useContext(LO);return e||Lt(!1),e}function ZO(t){let e=Y.useContext(za);return e||Lt(!1),e}function CS(t){let e=ZO(),r=e.matches[e.matches.length-1];return r.route.id||Lt(!1),r.route.id}function XO(){var t;let e=Y.useContext(AS),r=JO(),n=CS();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function eN(){let{router:t}=QO(IS.UseNavigateStable),e=CS(PS.UseNavigateStable),r=Y.useRef(!1);return _S(()=>{r.current=!0}),Y.useCallback(function(i,s){s===void 0&&(s={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Fu({fromRouteId:e},s)))},[t,e])}const Nb={};function tN(t,e,r){Nb[t]||(Nb[t]=!0)}function rN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Mh(t){Lt(!1)}function nN(t){let{basename:e="/",children:r=null,location:n,navigationType:i=wo.Pop,navigator:s,static:o=!1,future:a}=t;cf()&&Lt(!1);let l=e.replace(/^\/*/,"/"),c=Y.useMemo(()=>({basename:l,navigator:s,static:o,future:Fu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=lc(n));let{pathname:u="/",search:f="",hash:h="",state:g=null,key:w="default"}=n,v=Y.useMemo(()=>{let O=iv(u,l);return O==null?null:{location:{pathname:O,search:f,hash:h,state:g,key:w},navigationType:i}},[l,u,f,h,g,w,i]);return v==null?null:Y.createElement(ja.Provider,{value:c},Y.createElement(yp.Provider,{children:r,value:v}))}function iN(t){let{children:e,location:r}=t;return qO(Qm(e),r)}new Promise(()=>{});function Qm(t,e){e===void 0&&(e=[]);let r=[];return Y.Children.forEach(t,(n,i)=>{if(!Y.isValidElement(n))return;let s=[...e,i];if(n.type===Y.Fragment){r.push.apply(r,Qm(n.props.children,s));return}n.type!==Mh&&Lt(!1),!n.props.index||!n.props.children||Lt(!1);let o={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Qm(n.props.children,s)),r.push(o)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jm(){return Jm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jm.apply(this,arguments)}function sN(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function oN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aN(t,e){return t.button===0&&(!e||e==="_self")&&!oN(t)}const lN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],cN="6";try{window.__reactRouterVersion=cN}catch{}const uN="startTransition",Tb=e5[uN];function fN(t){let{basename:e,children:r,future:n,window:i}=t,s=Y.useRef();s.current==null&&(s.current=hO({window:i,v5Compat:!0}));let o=s.current,[a,l]=Y.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},u=Y.useCallback(f=>{c&&Tb?Tb(()=>l(f)):l(f)},[l,c]);return Y.useLayoutEffect(()=>o.listen(u),[o,u]),Y.useEffect(()=>rN(n),[n]),Y.createElement(nN,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const hN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Sd=Y.forwardRef(function(e,r){let{onClick:n,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f}=e,h=sN(e,lN),{basename:g}=Y.useContext(ja),w,v=!1;if(typeof c=="string"&&dN.test(c)&&(w=c,hN))try{let _=new URL(window.location.href),T=c.startsWith("//")?new URL(_.protocol+c):new URL(c),D=iv(T.pathname,g);T.origin===_.origin&&D!=null?c=D+T.search+T.hash:v=!0}catch{}let O=FO(c,{relative:i}),A=pN(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:f});function I(_){n&&n(_),_.defaultPrevented||A(_)}return Y.createElement("a",Jm({},h,{href:w||O,onClick:v||s?n:I,ref:r,target:l}))});var kb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kb||(kb={}));var Db;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Db||(Db={}));function pN(t,e){let{target:r,replace:n,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=jO(),c=uf(),u=SS(t,{relative:o});return Y.useCallback(f=>{if(aN(f,r)){f.preventDefault();let h=n!==void 0?n:_d(c)===_d(u);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,n,i,r,t,s,o,a])}var ov={exports:{}};const gN={},mN=Object.freeze(Object.defineProperty({__proto__:null,default:gN},Symbol.toStringTag,{value:"Module"})),yN=iA(mN);ov.exports;(function(t){(function(e,r){function n(P,p){if(!P)throw new Error(p||"Assertion failed")}function i(P,p){P.super_=p;var d=function(){};d.prototype=p.prototype,P.prototype=new d,P.prototype.constructor=P}function s(P,p,d){if(s.isBN(P))return P;this.negative=0,this.words=null,this.length=0,this.red=null,P!==null&&((p==="le"||p==="be")&&(d=p,p=10),this._init(P||0,p||10,d||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=yN.Buffer}catch{}s.isBN=function(p){return p instanceof s?!0:p!==null&&typeof p=="object"&&p.constructor.wordSize===s.wordSize&&Array.isArray(p.words)},s.max=function(p,d){return p.cmp(d)>0?p:d},s.min=function(p,d){return p.cmp(d)<0?p:d},s.prototype._init=function(p,d,m){if(typeof p=="number")return this._initNumber(p,d,m);if(typeof p=="object")return this._initArray(p,d,m);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),p=p.toString().replace(/\s+/g,"");var b=0;p[0]==="-"&&(b++,this.negative=1),b<p.length&&(d===16?this._parseHex(p,b,m):(this._parseBase(p,d,b),m==="le"&&this._initArray(this.toArray(),d,m)))},s.prototype._initNumber=function(p,d,m){p<0&&(this.negative=1,p=-p),p<67108864?(this.words=[p&67108863],this.length=1):p<4503599627370496?(this.words=[p&67108863,p/67108864&67108863],this.length=2):(n(p<9007199254740992),this.words=[p&67108863,p/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),d,m)},s.prototype._initArray=function(p,d,m){if(n(typeof p.length=="number"),p.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(p.length/3),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var E,S,N=0;if(m==="be")for(b=p.length-1,E=0;b>=0;b-=3)S=p[b]|p[b-1]<<8|p[b-2]<<16,this.words[E]|=S<<N&67108863,this.words[E+1]=S>>>26-N&67108863,N+=24,N>=26&&(N-=26,E++);else if(m==="le")for(b=0,E=0;b<p.length;b+=3)S=p[b]|p[b+1]<<8|p[b+2]<<16,this.words[E]|=S<<N&67108863,this.words[E+1]=S>>>26-N&67108863,N+=24,N>=26&&(N-=26,E++);return this._strip()};function a(P,p){var d=P.charCodeAt(p);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+P)}function l(P,p,d){var m=a(P,d);return d-1>=p&&(m|=a(P,d-1)<<4),m}s.prototype._parseHex=function(p,d,m){this.length=Math.ceil((p.length-d)/6),this.words=new Array(this.length);for(var b=0;b<this.length;b++)this.words[b]=0;var E=0,S=0,N;if(m==="be")for(b=p.length-1;b>=d;b-=2)N=l(p,d,b)<<E,this.words[S]|=N&67108863,E>=18?(E-=18,S+=1,this.words[S]|=N>>>26):E+=8;else{var C=p.length-d;for(b=C%2===0?d+1:d;b<p.length;b+=2)N=l(p,d,b)<<E,this.words[S]|=N&67108863,E>=18?(E-=18,S+=1,this.words[S]|=N>>>26):E+=8}this._strip()};function c(P,p,d,m){for(var b=0,E=0,S=Math.min(P.length,d),N=p;N<S;N++){var C=P.charCodeAt(N)-48;b*=m,C>=49?E=C-49+10:C>=17?E=C-17+10:E=C,n(C>=0&&E<m,"Invalid character"),b+=E}return b}s.prototype._parseBase=function(p,d,m){this.words=[0],this.length=1;for(var b=0,E=1;E<=67108863;E*=d)b++;b--,E=E/d|0;for(var S=p.length-m,N=S%b,C=Math.min(S,S-N)+m,y=0,k=m;k<C;k+=b)y=c(p,k,k+b,d),this.imuln(E),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(N!==0){var q=1;for(y=c(p,k,p.length,d),k=0;k<N;k++)q*=d;this.imuln(q),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this._strip()},s.prototype.copy=function(p){p.words=new Array(this.length);for(var d=0;d<this.length;d++)p.words[d]=this.words[d];p.length=this.length,p.negative=this.negative,p.red=this.red};function u(P,p){P.words=p.words,P.length=p.length,P.negative=p.negative,P.red=p.red}if(s.prototype._move=function(p){u(p,this)},s.prototype.clone=function(){var p=new s(null);return this.copy(p),p},s.prototype._expand=function(p){for(;this.length<p;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch{s.prototype.inspect=f}else s.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(p,d){p=p||10,d=d|0||1;var m;if(p===16||p==="hex"){m="";for(var b=0,E=0,S=0;S<this.length;S++){var N=this.words[S],C=((N<<b|E)&16777215).toString(16);E=N>>>24-b&16777215,b+=2,b>=26&&(b-=26,S--),E!==0||S!==this.length-1?m=h[6-C.length]+C+m:m=C+m}for(E!==0&&(m=E.toString(16)+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(p===(p|0)&&p>=2&&p<=36){var y=g[p],k=w[p];m="";var q=this.clone();for(q.negative=0;!q.isZero();){var x=q.modrn(k).toString(p);q=q.idivn(k),q.isZero()?m=x+m:m=h[y-x.length]+x+m}for(this.isZero()&&(m="0"+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var p=this.words[0];return this.length===2?p+=this.words[1]*67108864:this.length===3&&this.words[2]===1?p+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-p:p},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(p,d){return this.toArrayLike(o,p,d)}),s.prototype.toArray=function(p,d){return this.toArrayLike(Array,p,d)};var v=function(p,d){return p.allocUnsafe?p.allocUnsafe(d):new p(d)};s.prototype.toArrayLike=function(p,d,m){this._strip();var b=this.byteLength(),E=m||Math.max(1,b);n(b<=E,"byte array longer than desired length"),n(E>0,"Requested array length <= 0");var S=v(p,E),N=d==="le"?"LE":"BE";return this["_toArrayLike"+N](S,b),S},s.prototype._toArrayLikeLE=function(p,d){for(var m=0,b=0,E=0,S=0;E<this.length;E++){var N=this.words[E]<<S|b;p[m++]=N&255,m<p.length&&(p[m++]=N>>8&255),m<p.length&&(p[m++]=N>>16&255),S===6?(m<p.length&&(p[m++]=N>>24&255),b=0,S=0):(b=N>>>24,S+=2)}if(m<p.length)for(p[m++]=b;m<p.length;)p[m++]=0},s.prototype._toArrayLikeBE=function(p,d){for(var m=p.length-1,b=0,E=0,S=0;E<this.length;E++){var N=this.words[E]<<S|b;p[m--]=N&255,m>=0&&(p[m--]=N>>8&255),m>=0&&(p[m--]=N>>16&255),S===6?(m>=0&&(p[m--]=N>>24&255),b=0,S=0):(b=N>>>24,S+=2)}if(m>=0)for(p[m--]=b;m>=0;)p[m--]=0},Math.clz32?s.prototype._countBits=function(p){return 32-Math.clz32(p)}:s.prototype._countBits=function(p){var d=p,m=0;return d>=4096&&(m+=13,d>>>=13),d>=64&&(m+=7,d>>>=7),d>=8&&(m+=4,d>>>=4),d>=2&&(m+=2,d>>>=2),m+d},s.prototype._zeroBits=function(p){if(p===0)return 26;var d=p,m=0;return d&8191||(m+=13,d>>>=13),d&127||(m+=7,d>>>=7),d&15||(m+=4,d>>>=4),d&3||(m+=2,d>>>=2),d&1||m++,m},s.prototype.bitLength=function(){var p=this.words[this.length-1],d=this._countBits(p);return(this.length-1)*26+d};function O(P){for(var p=new Array(P.bitLength()),d=0;d<p.length;d++){var m=d/26|0,b=d%26;p[d]=P.words[m]>>>b&1}return p}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var p=0,d=0;d<this.length;d++){var m=this._zeroBits(this.words[d]);if(p+=m,m!==26)break}return p},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(p){return this.negative!==0?this.abs().inotn(p).iaddn(1):this.clone()},s.prototype.fromTwos=function(p){return this.testn(p-1)?this.notn(p).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(p){for(;this.length<p.length;)this.words[this.length++]=0;for(var d=0;d<p.length;d++)this.words[d]=this.words[d]|p.words[d];return this._strip()},s.prototype.ior=function(p){return n((this.negative|p.negative)===0),this.iuor(p)},s.prototype.or=function(p){return this.length>p.length?this.clone().ior(p):p.clone().ior(this)},s.prototype.uor=function(p){return this.length>p.length?this.clone().iuor(p):p.clone().iuor(this)},s.prototype.iuand=function(p){var d;this.length>p.length?d=p:d=this;for(var m=0;m<d.length;m++)this.words[m]=this.words[m]&p.words[m];return this.length=d.length,this._strip()},s.prototype.iand=function(p){return n((this.negative|p.negative)===0),this.iuand(p)},s.prototype.and=function(p){return this.length>p.length?this.clone().iand(p):p.clone().iand(this)},s.prototype.uand=function(p){return this.length>p.length?this.clone().iuand(p):p.clone().iuand(this)},s.prototype.iuxor=function(p){var d,m;this.length>p.length?(d=this,m=p):(d=p,m=this);for(var b=0;b<m.length;b++)this.words[b]=d.words[b]^m.words[b];if(this!==d)for(;b<d.length;b++)this.words[b]=d.words[b];return this.length=d.length,this._strip()},s.prototype.ixor=function(p){return n((this.negative|p.negative)===0),this.iuxor(p)},s.prototype.xor=function(p){return this.length>p.length?this.clone().ixor(p):p.clone().ixor(this)},s.prototype.uxor=function(p){return this.length>p.length?this.clone().iuxor(p):p.clone().iuxor(this)},s.prototype.inotn=function(p){n(typeof p=="number"&&p>=0);var d=Math.ceil(p/26)|0,m=p%26;this._expand(d),m>0&&d--;for(var b=0;b<d;b++)this.words[b]=~this.words[b]&67108863;return m>0&&(this.words[b]=~this.words[b]&67108863>>26-m),this._strip()},s.prototype.notn=function(p){return this.clone().inotn(p)},s.prototype.setn=function(p,d){n(typeof p=="number"&&p>=0);var m=p/26|0,b=p%26;return this._expand(m+1),d?this.words[m]=this.words[m]|1<<b:this.words[m]=this.words[m]&~(1<<b),this._strip()},s.prototype.iadd=function(p){var d;if(this.negative!==0&&p.negative===0)return this.negative=0,d=this.isub(p),this.negative^=1,this._normSign();if(this.negative===0&&p.negative!==0)return p.negative=0,d=this.isub(p),p.negative=1,d._normSign();var m,b;this.length>p.length?(m=this,b=p):(m=p,b=this);for(var E=0,S=0;S<b.length;S++)d=(m.words[S]|0)+(b.words[S]|0)+E,this.words[S]=d&67108863,E=d>>>26;for(;E!==0&&S<m.length;S++)d=(m.words[S]|0)+E,this.words[S]=d&67108863,E=d>>>26;if(this.length=m.length,E!==0)this.words[this.length]=E,this.length++;else if(m!==this)for(;S<m.length;S++)this.words[S]=m.words[S];return this},s.prototype.add=function(p){var d;return p.negative!==0&&this.negative===0?(p.negative=0,d=this.sub(p),p.negative^=1,d):p.negative===0&&this.negative!==0?(this.negative=0,d=p.sub(this),this.negative=1,d):this.length>p.length?this.clone().iadd(p):p.clone().iadd(this)},s.prototype.isub=function(p){if(p.negative!==0){p.negative=0;var d=this.iadd(p);return p.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(p),this.negative=1,this._normSign();var m=this.cmp(p);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var b,E;m>0?(b=this,E=p):(b=p,E=this);for(var S=0,N=0;N<E.length;N++)d=(b.words[N]|0)-(E.words[N]|0)+S,S=d>>26,this.words[N]=d&67108863;for(;S!==0&&N<b.length;N++)d=(b.words[N]|0)+S,S=d>>26,this.words[N]=d&67108863;if(S===0&&N<b.length&&b!==this)for(;N<b.length;N++)this.words[N]=b.words[N];return this.length=Math.max(this.length,N),b!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(p){return this.clone().isub(p)};function A(P,p,d){d.negative=p.negative^P.negative;var m=P.length+p.length|0;d.length=m,m=m-1|0;var b=P.words[0]|0,E=p.words[0]|0,S=b*E,N=S&67108863,C=S/67108864|0;d.words[0]=N;for(var y=1;y<m;y++){for(var k=C>>>26,q=C&67108863,x=Math.min(y,p.length-1),U=Math.max(0,y-P.length+1);U<=x;U++){var F=y-U|0;b=P.words[F]|0,E=p.words[U]|0,S=b*E+q,k+=S/67108864|0,q=S&67108863}d.words[y]=q|0,C=k|0}return C!==0?d.words[y]=C|0:d.length--,d._strip()}var I=function(p,d,m){var b=p.words,E=d.words,S=m.words,N=0,C,y,k,q=b[0]|0,x=q&8191,U=q>>>13,F=b[1]|0,H=F&8191,V=F>>>13,Z=b[2]|0,X=Z&8191,J=Z>>>13,de=b[3]|0,ie=de&8191,ce=de>>>13,mr=b[4]|0,Ue=mr&8191,Le=mr>>>13,gi=b[5]|0,De=gi&8191,Ne=gi>>>13,mi=b[6]|0,Re=mi&8191,$e=mi>>>13,yi=b[7]|0,Me=yi&8191,Fe=yi>>>13,Yi=b[8]|0,je=Yi&8191,ze=Yi>>>13,qo=b[9]|0,We=qo&8191,Ge=qo>>>13,Ho=E[0]|0,Ye=Ho&8191,Qe=Ho>>>13,Vo=E[1]|0,Je=Vo&8191,Ze=Vo>>>13,Ko=E[2]|0,Xe=Ko&8191,et=Ko>>>13,Wo=E[3]|0,tt=Wo&8191,rt=Wo>>>13,Go=E[4]|0,nt=Go&8191,it=Go>>>13,Yo=E[5]|0,st=Yo&8191,ot=Yo>>>13,Qo=E[6]|0,at=Qo&8191,lt=Qo>>>13,Jo=E[7]|0,ct=Jo&8191,ut=Jo>>>13,Zo=E[8]|0,ft=Zo&8191,ht=Zo>>>13,Xo=E[9]|0,dt=Xo&8191,pt=Xo>>>13;m.negative=p.negative^d.negative,m.length=19,C=Math.imul(x,Ye),y=Math.imul(x,Qe),y=y+Math.imul(U,Ye)|0,k=Math.imul(U,Qe);var $s=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+($s>>>26)|0,$s&=67108863,C=Math.imul(H,Ye),y=Math.imul(H,Qe),y=y+Math.imul(V,Ye)|0,k=Math.imul(V,Qe),C=C+Math.imul(x,Je)|0,y=y+Math.imul(x,Ze)|0,y=y+Math.imul(U,Je)|0,k=k+Math.imul(U,Ze)|0;var Ms=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,C=Math.imul(X,Ye),y=Math.imul(X,Qe),y=y+Math.imul(J,Ye)|0,k=Math.imul(J,Qe),C=C+Math.imul(H,Je)|0,y=y+Math.imul(H,Ze)|0,y=y+Math.imul(V,Je)|0,k=k+Math.imul(V,Ze)|0,C=C+Math.imul(x,Xe)|0,y=y+Math.imul(x,et)|0,y=y+Math.imul(U,Xe)|0,k=k+Math.imul(U,et)|0;var Bs=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,C=Math.imul(ie,Ye),y=Math.imul(ie,Qe),y=y+Math.imul(ce,Ye)|0,k=Math.imul(ce,Qe),C=C+Math.imul(X,Je)|0,y=y+Math.imul(X,Ze)|0,y=y+Math.imul(J,Je)|0,k=k+Math.imul(J,Ze)|0,C=C+Math.imul(H,Xe)|0,y=y+Math.imul(H,et)|0,y=y+Math.imul(V,Xe)|0,k=k+Math.imul(V,et)|0,C=C+Math.imul(x,tt)|0,y=y+Math.imul(x,rt)|0,y=y+Math.imul(U,tt)|0,k=k+Math.imul(U,rt)|0;var Us=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(Us>>>26)|0,Us&=67108863,C=Math.imul(Ue,Ye),y=Math.imul(Ue,Qe),y=y+Math.imul(Le,Ye)|0,k=Math.imul(Le,Qe),C=C+Math.imul(ie,Je)|0,y=y+Math.imul(ie,Ze)|0,y=y+Math.imul(ce,Je)|0,k=k+Math.imul(ce,Ze)|0,C=C+Math.imul(X,Xe)|0,y=y+Math.imul(X,et)|0,y=y+Math.imul(J,Xe)|0,k=k+Math.imul(J,et)|0,C=C+Math.imul(H,tt)|0,y=y+Math.imul(H,rt)|0,y=y+Math.imul(V,tt)|0,k=k+Math.imul(V,rt)|0,C=C+Math.imul(x,nt)|0,y=y+Math.imul(x,it)|0,y=y+Math.imul(U,nt)|0,k=k+Math.imul(U,it)|0;var Ls=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,C=Math.imul(De,Ye),y=Math.imul(De,Qe),y=y+Math.imul(Ne,Ye)|0,k=Math.imul(Ne,Qe),C=C+Math.imul(Ue,Je)|0,y=y+Math.imul(Ue,Ze)|0,y=y+Math.imul(Le,Je)|0,k=k+Math.imul(Le,Ze)|0,C=C+Math.imul(ie,Xe)|0,y=y+Math.imul(ie,et)|0,y=y+Math.imul(ce,Xe)|0,k=k+Math.imul(ce,et)|0,C=C+Math.imul(X,tt)|0,y=y+Math.imul(X,rt)|0,y=y+Math.imul(J,tt)|0,k=k+Math.imul(J,rt)|0,C=C+Math.imul(H,nt)|0,y=y+Math.imul(H,it)|0,y=y+Math.imul(V,nt)|0,k=k+Math.imul(V,it)|0,C=C+Math.imul(x,st)|0,y=y+Math.imul(x,ot)|0,y=y+Math.imul(U,st)|0,k=k+Math.imul(U,ot)|0;var Xp=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(Xp>>>26)|0,Xp&=67108863,C=Math.imul(Re,Ye),y=Math.imul(Re,Qe),y=y+Math.imul($e,Ye)|0,k=Math.imul($e,Qe),C=C+Math.imul(De,Je)|0,y=y+Math.imul(De,Ze)|0,y=y+Math.imul(Ne,Je)|0,k=k+Math.imul(Ne,Ze)|0,C=C+Math.imul(Ue,Xe)|0,y=y+Math.imul(Ue,et)|0,y=y+Math.imul(Le,Xe)|0,k=k+Math.imul(Le,et)|0,C=C+Math.imul(ie,tt)|0,y=y+Math.imul(ie,rt)|0,y=y+Math.imul(ce,tt)|0,k=k+Math.imul(ce,rt)|0,C=C+Math.imul(X,nt)|0,y=y+Math.imul(X,it)|0,y=y+Math.imul(J,nt)|0,k=k+Math.imul(J,it)|0,C=C+Math.imul(H,st)|0,y=y+Math.imul(H,ot)|0,y=y+Math.imul(V,st)|0,k=k+Math.imul(V,ot)|0,C=C+Math.imul(x,at)|0,y=y+Math.imul(x,lt)|0,y=y+Math.imul(U,at)|0,k=k+Math.imul(U,lt)|0;var e0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(e0>>>26)|0,e0&=67108863,C=Math.imul(Me,Ye),y=Math.imul(Me,Qe),y=y+Math.imul(Fe,Ye)|0,k=Math.imul(Fe,Qe),C=C+Math.imul(Re,Je)|0,y=y+Math.imul(Re,Ze)|0,y=y+Math.imul($e,Je)|0,k=k+Math.imul($e,Ze)|0,C=C+Math.imul(De,Xe)|0,y=y+Math.imul(De,et)|0,y=y+Math.imul(Ne,Xe)|0,k=k+Math.imul(Ne,et)|0,C=C+Math.imul(Ue,tt)|0,y=y+Math.imul(Ue,rt)|0,y=y+Math.imul(Le,tt)|0,k=k+Math.imul(Le,rt)|0,C=C+Math.imul(ie,nt)|0,y=y+Math.imul(ie,it)|0,y=y+Math.imul(ce,nt)|0,k=k+Math.imul(ce,it)|0,C=C+Math.imul(X,st)|0,y=y+Math.imul(X,ot)|0,y=y+Math.imul(J,st)|0,k=k+Math.imul(J,ot)|0,C=C+Math.imul(H,at)|0,y=y+Math.imul(H,lt)|0,y=y+Math.imul(V,at)|0,k=k+Math.imul(V,lt)|0,C=C+Math.imul(x,ct)|0,y=y+Math.imul(x,ut)|0,y=y+Math.imul(U,ct)|0,k=k+Math.imul(U,ut)|0;var t0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(t0>>>26)|0,t0&=67108863,C=Math.imul(je,Ye),y=Math.imul(je,Qe),y=y+Math.imul(ze,Ye)|0,k=Math.imul(ze,Qe),C=C+Math.imul(Me,Je)|0,y=y+Math.imul(Me,Ze)|0,y=y+Math.imul(Fe,Je)|0,k=k+Math.imul(Fe,Ze)|0,C=C+Math.imul(Re,Xe)|0,y=y+Math.imul(Re,et)|0,y=y+Math.imul($e,Xe)|0,k=k+Math.imul($e,et)|0,C=C+Math.imul(De,tt)|0,y=y+Math.imul(De,rt)|0,y=y+Math.imul(Ne,tt)|0,k=k+Math.imul(Ne,rt)|0,C=C+Math.imul(Ue,nt)|0,y=y+Math.imul(Ue,it)|0,y=y+Math.imul(Le,nt)|0,k=k+Math.imul(Le,it)|0,C=C+Math.imul(ie,st)|0,y=y+Math.imul(ie,ot)|0,y=y+Math.imul(ce,st)|0,k=k+Math.imul(ce,ot)|0,C=C+Math.imul(X,at)|0,y=y+Math.imul(X,lt)|0,y=y+Math.imul(J,at)|0,k=k+Math.imul(J,lt)|0,C=C+Math.imul(H,ct)|0,y=y+Math.imul(H,ut)|0,y=y+Math.imul(V,ct)|0,k=k+Math.imul(V,ut)|0,C=C+Math.imul(x,ft)|0,y=y+Math.imul(x,ht)|0,y=y+Math.imul(U,ft)|0,k=k+Math.imul(U,ht)|0;var r0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(r0>>>26)|0,r0&=67108863,C=Math.imul(We,Ye),y=Math.imul(We,Qe),y=y+Math.imul(Ge,Ye)|0,k=Math.imul(Ge,Qe),C=C+Math.imul(je,Je)|0,y=y+Math.imul(je,Ze)|0,y=y+Math.imul(ze,Je)|0,k=k+Math.imul(ze,Ze)|0,C=C+Math.imul(Me,Xe)|0,y=y+Math.imul(Me,et)|0,y=y+Math.imul(Fe,Xe)|0,k=k+Math.imul(Fe,et)|0,C=C+Math.imul(Re,tt)|0,y=y+Math.imul(Re,rt)|0,y=y+Math.imul($e,tt)|0,k=k+Math.imul($e,rt)|0,C=C+Math.imul(De,nt)|0,y=y+Math.imul(De,it)|0,y=y+Math.imul(Ne,nt)|0,k=k+Math.imul(Ne,it)|0,C=C+Math.imul(Ue,st)|0,y=y+Math.imul(Ue,ot)|0,y=y+Math.imul(Le,st)|0,k=k+Math.imul(Le,ot)|0,C=C+Math.imul(ie,at)|0,y=y+Math.imul(ie,lt)|0,y=y+Math.imul(ce,at)|0,k=k+Math.imul(ce,lt)|0,C=C+Math.imul(X,ct)|0,y=y+Math.imul(X,ut)|0,y=y+Math.imul(J,ct)|0,k=k+Math.imul(J,ut)|0,C=C+Math.imul(H,ft)|0,y=y+Math.imul(H,ht)|0,y=y+Math.imul(V,ft)|0,k=k+Math.imul(V,ht)|0,C=C+Math.imul(x,dt)|0,y=y+Math.imul(x,pt)|0,y=y+Math.imul(U,dt)|0,k=k+Math.imul(U,pt)|0;var n0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(n0>>>26)|0,n0&=67108863,C=Math.imul(We,Je),y=Math.imul(We,Ze),y=y+Math.imul(Ge,Je)|0,k=Math.imul(Ge,Ze),C=C+Math.imul(je,Xe)|0,y=y+Math.imul(je,et)|0,y=y+Math.imul(ze,Xe)|0,k=k+Math.imul(ze,et)|0,C=C+Math.imul(Me,tt)|0,y=y+Math.imul(Me,rt)|0,y=y+Math.imul(Fe,tt)|0,k=k+Math.imul(Fe,rt)|0,C=C+Math.imul(Re,nt)|0,y=y+Math.imul(Re,it)|0,y=y+Math.imul($e,nt)|0,k=k+Math.imul($e,it)|0,C=C+Math.imul(De,st)|0,y=y+Math.imul(De,ot)|0,y=y+Math.imul(Ne,st)|0,k=k+Math.imul(Ne,ot)|0,C=C+Math.imul(Ue,at)|0,y=y+Math.imul(Ue,lt)|0,y=y+Math.imul(Le,at)|0,k=k+Math.imul(Le,lt)|0,C=C+Math.imul(ie,ct)|0,y=y+Math.imul(ie,ut)|0,y=y+Math.imul(ce,ct)|0,k=k+Math.imul(ce,ut)|0,C=C+Math.imul(X,ft)|0,y=y+Math.imul(X,ht)|0,y=y+Math.imul(J,ft)|0,k=k+Math.imul(J,ht)|0,C=C+Math.imul(H,dt)|0,y=y+Math.imul(H,pt)|0,y=y+Math.imul(V,dt)|0,k=k+Math.imul(V,pt)|0;var i0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(i0>>>26)|0,i0&=67108863,C=Math.imul(We,Xe),y=Math.imul(We,et),y=y+Math.imul(Ge,Xe)|0,k=Math.imul(Ge,et),C=C+Math.imul(je,tt)|0,y=y+Math.imul(je,rt)|0,y=y+Math.imul(ze,tt)|0,k=k+Math.imul(ze,rt)|0,C=C+Math.imul(Me,nt)|0,y=y+Math.imul(Me,it)|0,y=y+Math.imul(Fe,nt)|0,k=k+Math.imul(Fe,it)|0,C=C+Math.imul(Re,st)|0,y=y+Math.imul(Re,ot)|0,y=y+Math.imul($e,st)|0,k=k+Math.imul($e,ot)|0,C=C+Math.imul(De,at)|0,y=y+Math.imul(De,lt)|0,y=y+Math.imul(Ne,at)|0,k=k+Math.imul(Ne,lt)|0,C=C+Math.imul(Ue,ct)|0,y=y+Math.imul(Ue,ut)|0,y=y+Math.imul(Le,ct)|0,k=k+Math.imul(Le,ut)|0,C=C+Math.imul(ie,ft)|0,y=y+Math.imul(ie,ht)|0,y=y+Math.imul(ce,ft)|0,k=k+Math.imul(ce,ht)|0,C=C+Math.imul(X,dt)|0,y=y+Math.imul(X,pt)|0,y=y+Math.imul(J,dt)|0,k=k+Math.imul(J,pt)|0;var s0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(s0>>>26)|0,s0&=67108863,C=Math.imul(We,tt),y=Math.imul(We,rt),y=y+Math.imul(Ge,tt)|0,k=Math.imul(Ge,rt),C=C+Math.imul(je,nt)|0,y=y+Math.imul(je,it)|0,y=y+Math.imul(ze,nt)|0,k=k+Math.imul(ze,it)|0,C=C+Math.imul(Me,st)|0,y=y+Math.imul(Me,ot)|0,y=y+Math.imul(Fe,st)|0,k=k+Math.imul(Fe,ot)|0,C=C+Math.imul(Re,at)|0,y=y+Math.imul(Re,lt)|0,y=y+Math.imul($e,at)|0,k=k+Math.imul($e,lt)|0,C=C+Math.imul(De,ct)|0,y=y+Math.imul(De,ut)|0,y=y+Math.imul(Ne,ct)|0,k=k+Math.imul(Ne,ut)|0,C=C+Math.imul(Ue,ft)|0,y=y+Math.imul(Ue,ht)|0,y=y+Math.imul(Le,ft)|0,k=k+Math.imul(Le,ht)|0,C=C+Math.imul(ie,dt)|0,y=y+Math.imul(ie,pt)|0,y=y+Math.imul(ce,dt)|0,k=k+Math.imul(ce,pt)|0;var o0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(o0>>>26)|0,o0&=67108863,C=Math.imul(We,nt),y=Math.imul(We,it),y=y+Math.imul(Ge,nt)|0,k=Math.imul(Ge,it),C=C+Math.imul(je,st)|0,y=y+Math.imul(je,ot)|0,y=y+Math.imul(ze,st)|0,k=k+Math.imul(ze,ot)|0,C=C+Math.imul(Me,at)|0,y=y+Math.imul(Me,lt)|0,y=y+Math.imul(Fe,at)|0,k=k+Math.imul(Fe,lt)|0,C=C+Math.imul(Re,ct)|0,y=y+Math.imul(Re,ut)|0,y=y+Math.imul($e,ct)|0,k=k+Math.imul($e,ut)|0,C=C+Math.imul(De,ft)|0,y=y+Math.imul(De,ht)|0,y=y+Math.imul(Ne,ft)|0,k=k+Math.imul(Ne,ht)|0,C=C+Math.imul(Ue,dt)|0,y=y+Math.imul(Ue,pt)|0,y=y+Math.imul(Le,dt)|0,k=k+Math.imul(Le,pt)|0;var a0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(a0>>>26)|0,a0&=67108863,C=Math.imul(We,st),y=Math.imul(We,ot),y=y+Math.imul(Ge,st)|0,k=Math.imul(Ge,ot),C=C+Math.imul(je,at)|0,y=y+Math.imul(je,lt)|0,y=y+Math.imul(ze,at)|0,k=k+Math.imul(ze,lt)|0,C=C+Math.imul(Me,ct)|0,y=y+Math.imul(Me,ut)|0,y=y+Math.imul(Fe,ct)|0,k=k+Math.imul(Fe,ut)|0,C=C+Math.imul(Re,ft)|0,y=y+Math.imul(Re,ht)|0,y=y+Math.imul($e,ft)|0,k=k+Math.imul($e,ht)|0,C=C+Math.imul(De,dt)|0,y=y+Math.imul(De,pt)|0,y=y+Math.imul(Ne,dt)|0,k=k+Math.imul(Ne,pt)|0;var l0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(l0>>>26)|0,l0&=67108863,C=Math.imul(We,at),y=Math.imul(We,lt),y=y+Math.imul(Ge,at)|0,k=Math.imul(Ge,lt),C=C+Math.imul(je,ct)|0,y=y+Math.imul(je,ut)|0,y=y+Math.imul(ze,ct)|0,k=k+Math.imul(ze,ut)|0,C=C+Math.imul(Me,ft)|0,y=y+Math.imul(Me,ht)|0,y=y+Math.imul(Fe,ft)|0,k=k+Math.imul(Fe,ht)|0,C=C+Math.imul(Re,dt)|0,y=y+Math.imul(Re,pt)|0,y=y+Math.imul($e,dt)|0,k=k+Math.imul($e,pt)|0;var c0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(c0>>>26)|0,c0&=67108863,C=Math.imul(We,ct),y=Math.imul(We,ut),y=y+Math.imul(Ge,ct)|0,k=Math.imul(Ge,ut),C=C+Math.imul(je,ft)|0,y=y+Math.imul(je,ht)|0,y=y+Math.imul(ze,ft)|0,k=k+Math.imul(ze,ht)|0,C=C+Math.imul(Me,dt)|0,y=y+Math.imul(Me,pt)|0,y=y+Math.imul(Fe,dt)|0,k=k+Math.imul(Fe,pt)|0;var u0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(u0>>>26)|0,u0&=67108863,C=Math.imul(We,ft),y=Math.imul(We,ht),y=y+Math.imul(Ge,ft)|0,k=Math.imul(Ge,ht),C=C+Math.imul(je,dt)|0,y=y+Math.imul(je,pt)|0,y=y+Math.imul(ze,dt)|0,k=k+Math.imul(ze,pt)|0;var f0=(N+C|0)+((y&8191)<<13)|0;N=(k+(y>>>13)|0)+(f0>>>26)|0,f0&=67108863,C=Math.imul(We,dt),y=Math.imul(We,pt),y=y+Math.imul(Ge,dt)|0,k=Math.imul(Ge,pt);var h0=(N+C|0)+((y&8191)<<13)|0;return N=(k+(y>>>13)|0)+(h0>>>26)|0,h0&=67108863,S[0]=$s,S[1]=Ms,S[2]=Bs,S[3]=Us,S[4]=Ls,S[5]=Xp,S[6]=e0,S[7]=t0,S[8]=r0,S[9]=n0,S[10]=i0,S[11]=s0,S[12]=o0,S[13]=a0,S[14]=l0,S[15]=c0,S[16]=u0,S[17]=f0,S[18]=h0,N!==0&&(S[19]=N,m.length++),m};Math.imul||(I=A);function _(P,p,d){d.negative=p.negative^P.negative,d.length=P.length+p.length;for(var m=0,b=0,E=0;E<d.length-1;E++){var S=b;b=0;for(var N=m&67108863,C=Math.min(E,p.length-1),y=Math.max(0,E-P.length+1);y<=C;y++){var k=E-y,q=P.words[k]|0,x=p.words[y]|0,U=q*x,F=U&67108863;S=S+(U/67108864|0)|0,F=F+N|0,N=F&67108863,S=S+(F>>>26)|0,b+=S>>>26,S&=67108863}d.words[E]=N,m=S,S=b}return m!==0?d.words[E]=m:d.length--,d._strip()}function T(P,p,d){return _(P,p,d)}s.prototype.mulTo=function(p,d){var m,b=this.length+p.length;return this.length===10&&p.length===10?m=I(this,p,d):b<63?m=A(this,p,d):b<1024?m=_(this,p,d):m=T(this,p,d),m},s.prototype.mul=function(p){var d=new s(null);return d.words=new Array(this.length+p.length),this.mulTo(p,d)},s.prototype.mulf=function(p){var d=new s(null);return d.words=new Array(this.length+p.length),T(this,p,d)},s.prototype.imul=function(p){return this.clone().mulTo(p,this)},s.prototype.imuln=function(p){var d=p<0;d&&(p=-p),n(typeof p=="number"),n(p<67108864);for(var m=0,b=0;b<this.length;b++){var E=(this.words[b]|0)*p,S=(E&67108863)+(m&67108863);m>>=26,m+=E/67108864|0,m+=S>>>26,this.words[b]=S&67108863}return m!==0&&(this.words[b]=m,this.length++),this.length=p===0?1:this.length,d?this.ineg():this},s.prototype.muln=function(p){return this.clone().imuln(p)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(p){var d=O(p);if(d.length===0)return new s(1);for(var m=this,b=0;b<d.length&&d[b]===0;b++,m=m.sqr());if(++b<d.length)for(var E=m.sqr();b<d.length;b++,E=E.sqr())d[b]!==0&&(m=m.mul(E));return m},s.prototype.iushln=function(p){n(typeof p=="number"&&p>=0);var d=p%26,m=(p-d)/26,b=67108863>>>26-d<<26-d,E;if(d!==0){var S=0;for(E=0;E<this.length;E++){var N=this.words[E]&b,C=(this.words[E]|0)-N<<d;this.words[E]=C|S,S=N>>>26-d}S&&(this.words[E]=S,this.length++)}if(m!==0){for(E=this.length-1;E>=0;E--)this.words[E+m]=this.words[E];for(E=0;E<m;E++)this.words[E]=0;this.length+=m}return this._strip()},s.prototype.ishln=function(p){return n(this.negative===0),this.iushln(p)},s.prototype.iushrn=function(p,d,m){n(typeof p=="number"&&p>=0);var b;d?b=(d-d%26)/26:b=0;var E=p%26,S=Math.min((p-E)/26,this.length),N=67108863^67108863>>>E<<E,C=m;if(b-=S,b=Math.max(0,b),C){for(var y=0;y<S;y++)C.words[y]=this.words[y];C.length=S}if(S!==0)if(this.length>S)for(this.length-=S,y=0;y<this.length;y++)this.words[y]=this.words[y+S];else this.words[0]=0,this.length=1;var k=0;for(y=this.length-1;y>=0&&(k!==0||y>=b);y--){var q=this.words[y]|0;this.words[y]=k<<26-E|q>>>E,k=q&N}return C&&k!==0&&(C.words[C.length++]=k),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(p,d,m){return n(this.negative===0),this.iushrn(p,d,m)},s.prototype.shln=function(p){return this.clone().ishln(p)},s.prototype.ushln=function(p){return this.clone().iushln(p)},s.prototype.shrn=function(p){return this.clone().ishrn(p)},s.prototype.ushrn=function(p){return this.clone().iushrn(p)},s.prototype.testn=function(p){n(typeof p=="number"&&p>=0);var d=p%26,m=(p-d)/26,b=1<<d;if(this.length<=m)return!1;var E=this.words[m];return!!(E&b)},s.prototype.imaskn=function(p){n(typeof p=="number"&&p>=0);var d=p%26,m=(p-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(d!==0&&m++,this.length=Math.min(m,this.length),d!==0){var b=67108863^67108863>>>d<<d;this.words[this.length-1]&=b}return this._strip()},s.prototype.maskn=function(p){return this.clone().imaskn(p)},s.prototype.iaddn=function(p){return n(typeof p=="number"),n(p<67108864),p<0?this.isubn(-p):this.negative!==0?this.length===1&&(this.words[0]|0)<=p?(this.words[0]=p-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(p),this.negative=1,this):this._iaddn(p)},s.prototype._iaddn=function(p){this.words[0]+=p;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(p){if(n(typeof p=="number"),n(p<67108864),p<0)return this.iaddn(-p);if(this.negative!==0)return this.negative=0,this.iaddn(p),this.negative=1,this;if(this.words[0]-=p,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},s.prototype.addn=function(p){return this.clone().iaddn(p)},s.prototype.subn=function(p){return this.clone().isubn(p)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(p,d,m){var b=p.length+m,E;this._expand(b);var S,N=0;for(E=0;E<p.length;E++){S=(this.words[E+m]|0)+N;var C=(p.words[E]|0)*d;S-=C&67108863,N=(S>>26)-(C/67108864|0),this.words[E+m]=S&67108863}for(;E<this.length-m;E++)S=(this.words[E+m]|0)+N,N=S>>26,this.words[E+m]=S&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,E=0;E<this.length;E++)S=-(this.words[E]|0)+N,N=S>>26,this.words[E]=S&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(p,d){var m=this.length-p.length,b=this.clone(),E=p,S=E.words[E.length-1]|0,N=this._countBits(S);m=26-N,m!==0&&(E=E.ushln(m),b.iushln(m),S=E.words[E.length-1]|0);var C=b.length-E.length,y;if(d!=="mod"){y=new s(null),y.length=C+1,y.words=new Array(y.length);for(var k=0;k<y.length;k++)y.words[k]=0}var q=b.clone()._ishlnsubmul(E,1,C);q.negative===0&&(b=q,y&&(y.words[C]=1));for(var x=C-1;x>=0;x--){var U=(b.words[E.length+x]|0)*67108864+(b.words[E.length+x-1]|0);for(U=Math.min(U/S|0,67108863),b._ishlnsubmul(E,U,x);b.negative!==0;)U--,b.negative=0,b._ishlnsubmul(E,1,x),b.isZero()||(b.negative^=1);y&&(y.words[x]=U)}return y&&y._strip(),b._strip(),d!=="div"&&m!==0&&b.iushrn(m),{div:y||null,mod:b}},s.prototype.divmod=function(p,d,m){if(n(!p.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var b,E,S;return this.negative!==0&&p.negative===0?(S=this.neg().divmod(p,d),d!=="mod"&&(b=S.div.neg()),d!=="div"&&(E=S.mod.neg(),m&&E.negative!==0&&E.iadd(p)),{div:b,mod:E}):this.negative===0&&p.negative!==0?(S=this.divmod(p.neg(),d),d!=="mod"&&(b=S.div.neg()),{div:b,mod:S.mod}):this.negative&p.negative?(S=this.neg().divmod(p.neg(),d),d!=="div"&&(E=S.mod.neg(),m&&E.negative!==0&&E.isub(p)),{div:S.div,mod:E}):p.length>this.length||this.cmp(p)<0?{div:new s(0),mod:this}:p.length===1?d==="div"?{div:this.divn(p.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modrn(p.words[0]))}:{div:this.divn(p.words[0]),mod:new s(this.modrn(p.words[0]))}:this._wordDiv(p,d)},s.prototype.div=function(p){return this.divmod(p,"div",!1).div},s.prototype.mod=function(p){return this.divmod(p,"mod",!1).mod},s.prototype.umod=function(p){return this.divmod(p,"mod",!0).mod},s.prototype.divRound=function(p){var d=this.divmod(p);if(d.mod.isZero())return d.div;var m=d.div.negative!==0?d.mod.isub(p):d.mod,b=p.ushrn(1),E=p.andln(1),S=m.cmp(b);return S<0||E===1&&S===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modrn=function(p){var d=p<0;d&&(p=-p),n(p<=67108863);for(var m=(1<<26)%p,b=0,E=this.length-1;E>=0;E--)b=(m*b+(this.words[E]|0))%p;return d?-b:b},s.prototype.modn=function(p){return this.modrn(p)},s.prototype.idivn=function(p){var d=p<0;d&&(p=-p),n(p<=67108863);for(var m=0,b=this.length-1;b>=0;b--){var E=(this.words[b]|0)+m*67108864;this.words[b]=E/p|0,m=E%p}return this._strip(),d?this.ineg():this},s.prototype.divn=function(p){return this.clone().idivn(p)},s.prototype.egcd=function(p){n(p.negative===0),n(!p.isZero());var d=this,m=p.clone();d.negative!==0?d=d.umod(p):d=d.clone();for(var b=new s(1),E=new s(0),S=new s(0),N=new s(1),C=0;d.isEven()&&m.isEven();)d.iushrn(1),m.iushrn(1),++C;for(var y=m.clone(),k=d.clone();!d.isZero();){for(var q=0,x=1;!(d.words[0]&x)&&q<26;++q,x<<=1);if(q>0)for(d.iushrn(q);q-- >0;)(b.isOdd()||E.isOdd())&&(b.iadd(y),E.isub(k)),b.iushrn(1),E.iushrn(1);for(var U=0,F=1;!(m.words[0]&F)&&U<26;++U,F<<=1);if(U>0)for(m.iushrn(U);U-- >0;)(S.isOdd()||N.isOdd())&&(S.iadd(y),N.isub(k)),S.iushrn(1),N.iushrn(1);d.cmp(m)>=0?(d.isub(m),b.isub(S),E.isub(N)):(m.isub(d),S.isub(b),N.isub(E))}return{a:S,b:N,gcd:m.iushln(C)}},s.prototype._invmp=function(p){n(p.negative===0),n(!p.isZero());var d=this,m=p.clone();d.negative!==0?d=d.umod(p):d=d.clone();for(var b=new s(1),E=new s(0),S=m.clone();d.cmpn(1)>0&&m.cmpn(1)>0;){for(var N=0,C=1;!(d.words[0]&C)&&N<26;++N,C<<=1);if(N>0)for(d.iushrn(N);N-- >0;)b.isOdd()&&b.iadd(S),b.iushrn(1);for(var y=0,k=1;!(m.words[0]&k)&&y<26;++y,k<<=1);if(y>0)for(m.iushrn(y);y-- >0;)E.isOdd()&&E.iadd(S),E.iushrn(1);d.cmp(m)>=0?(d.isub(m),b.isub(E)):(m.isub(d),E.isub(b))}var q;return d.cmpn(1)===0?q=b:q=E,q.cmpn(0)<0&&q.iadd(p),q},s.prototype.gcd=function(p){if(this.isZero())return p.abs();if(p.isZero())return this.abs();var d=this.clone(),m=p.clone();d.negative=0,m.negative=0;for(var b=0;d.isEven()&&m.isEven();b++)d.iushrn(1),m.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;m.isEven();)m.iushrn(1);var E=d.cmp(m);if(E<0){var S=d;d=m,m=S}else if(E===0||m.cmpn(1)===0)break;d.isub(m)}while(!0);return m.iushln(b)},s.prototype.invm=function(p){return this.egcd(p).a.umod(p)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(p){return this.words[0]&p},s.prototype.bincn=function(p){n(typeof p=="number");var d=p%26,m=(p-d)/26,b=1<<d;if(this.length<=m)return this._expand(m+1),this.words[m]|=b,this;for(var E=b,S=m;E!==0&&S<this.length;S++){var N=this.words[S]|0;N+=E,E=N>>>26,N&=67108863,this.words[S]=N}return E!==0&&(this.words[S]=E,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(p){var d=p<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var m;if(this.length>1)m=1;else{d&&(p=-p),n(p<=67108863,"Number is too big");var b=this.words[0]|0;m=b===p?0:b<p?-1:1}return this.negative!==0?-m|0:m},s.prototype.cmp=function(p){if(this.negative!==0&&p.negative===0)return-1;if(this.negative===0&&p.negative!==0)return 1;var d=this.ucmp(p);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(p){if(this.length>p.length)return 1;if(this.length<p.length)return-1;for(var d=0,m=this.length-1;m>=0;m--){var b=this.words[m]|0,E=p.words[m]|0;if(b!==E){b<E?d=-1:b>E&&(d=1);break}}return d},s.prototype.gtn=function(p){return this.cmpn(p)===1},s.prototype.gt=function(p){return this.cmp(p)===1},s.prototype.gten=function(p){return this.cmpn(p)>=0},s.prototype.gte=function(p){return this.cmp(p)>=0},s.prototype.ltn=function(p){return this.cmpn(p)===-1},s.prototype.lt=function(p){return this.cmp(p)===-1},s.prototype.lten=function(p){return this.cmpn(p)<=0},s.prototype.lte=function(p){return this.cmp(p)<=0},s.prototype.eqn=function(p){return this.cmpn(p)===0},s.prototype.eq=function(p){return this.cmp(p)===0},s.red=function(p){return new K(p)},s.prototype.toRed=function(p){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),p.convertTo(this)._forceRed(p)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(p){return this.red=p,this},s.prototype.forceRed=function(p){return n(!this.red,"Already a number in reduction context"),this._forceRed(p)},s.prototype.redAdd=function(p){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,p)},s.prototype.redIAdd=function(p){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,p)},s.prototype.redSub=function(p){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,p)},s.prototype.redISub=function(p){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,p)},s.prototype.redShl=function(p){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,p)},s.prototype.redMul=function(p){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.mul(this,p)},s.prototype.redIMul=function(p){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,p),this.red.imul(this,p)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(p){return n(this.red&&!p.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,p)};var D={k256:null,p224:null,p192:null,p25519:null};function R(P,p){this.name=P,this.p=new s(p,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}R.prototype._tmp=function(){var p=new s(null);return p.words=new Array(Math.ceil(this.n/13)),p},R.prototype.ireduce=function(p){var d=p,m;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),m=d.bitLength();while(m>this.n);var b=m<this.n?-1:d.ucmp(this.p);return b===0?(d.words[0]=0,d.length=1):b>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},R.prototype.split=function(p,d){p.iushrn(this.n,0,d)},R.prototype.imulK=function(p){return p.imul(this.k)};function $(){R.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i($,R),$.prototype.split=function(p,d){for(var m=4194303,b=Math.min(p.length,9),E=0;E<b;E++)d.words[E]=p.words[E];if(d.length=b,p.length<=9){p.words[0]=0,p.length=1;return}var S=p.words[9];for(d.words[d.length++]=S&m,E=10;E<p.length;E++){var N=p.words[E]|0;p.words[E-10]=(N&m)<<4|S>>>22,S=N}S>>>=22,p.words[E-10]=S,S===0&&p.length>10?p.length-=10:p.length-=9},$.prototype.imulK=function(p){p.words[p.length]=0,p.words[p.length+1]=0,p.length+=2;for(var d=0,m=0;m<p.length;m++){var b=p.words[m]|0;d+=b*977,p.words[m]=d&67108863,d=b*64+(d/67108864|0)}return p.words[p.length-1]===0&&(p.length--,p.words[p.length-1]===0&&p.length--),p};function M(){R.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(M,R);function B(){R.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(B,R);function z(){R.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(z,R),z.prototype.imulK=function(p){for(var d=0,m=0;m<p.length;m++){var b=(p.words[m]|0)*19+d,E=b&67108863;b>>>=26,p.words[m]=E,d=b}return d!==0&&(p.words[p.length++]=d),p},s._prime=function(p){if(D[p])return D[p];var d;if(p==="k256")d=new $;else if(p==="p224")d=new M;else if(p==="p192")d=new B;else if(p==="p25519")d=new z;else throw new Error("Unknown prime "+p);return D[p]=d,d};function K(P){if(typeof P=="string"){var p=s._prime(P);this.m=p.p,this.prime=p}else n(P.gtn(1),"modulus must be greater than 1"),this.m=P,this.prime=null}K.prototype._verify1=function(p){n(p.negative===0,"red works only with positives"),n(p.red,"red works only with red numbers")},K.prototype._verify2=function(p,d){n((p.negative|d.negative)===0,"red works only with positives"),n(p.red&&p.red===d.red,"red works only with red numbers")},K.prototype.imod=function(p){return this.prime?this.prime.ireduce(p)._forceRed(this):(u(p,p.umod(this.m)._forceRed(this)),p)},K.prototype.neg=function(p){return p.isZero()?p.clone():this.m.sub(p)._forceRed(this)},K.prototype.add=function(p,d){this._verify2(p,d);var m=p.add(d);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},K.prototype.iadd=function(p,d){this._verify2(p,d);var m=p.iadd(d);return m.cmp(this.m)>=0&&m.isub(this.m),m},K.prototype.sub=function(p,d){this._verify2(p,d);var m=p.sub(d);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},K.prototype.isub=function(p,d){this._verify2(p,d);var m=p.isub(d);return m.cmpn(0)<0&&m.iadd(this.m),m},K.prototype.shl=function(p,d){return this._verify1(p),this.imod(p.ushln(d))},K.prototype.imul=function(p,d){return this._verify2(p,d),this.imod(p.imul(d))},K.prototype.mul=function(p,d){return this._verify2(p,d),this.imod(p.mul(d))},K.prototype.isqr=function(p){return this.imul(p,p.clone())},K.prototype.sqr=function(p){return this.mul(p,p)},K.prototype.sqrt=function(p){if(p.isZero())return p.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var m=this.m.add(new s(1)).iushrn(2);return this.pow(p,m)}for(var b=this.m.subn(1),E=0;!b.isZero()&&b.andln(1)===0;)E++,b.iushrn(1);n(!b.isZero());var S=new s(1).toRed(this),N=S.redNeg(),C=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new s(2*y*y).toRed(this);this.pow(y,C).cmp(N)!==0;)y.redIAdd(N);for(var k=this.pow(y,b),q=this.pow(p,b.addn(1).iushrn(1)),x=this.pow(p,b),U=E;x.cmp(S)!==0;){for(var F=x,H=0;F.cmp(S)!==0;H++)F=F.redSqr();n(H<U);var V=this.pow(k,new s(1).iushln(U-H-1));q=q.redMul(V),k=V.redSqr(),x=x.redMul(k),U=H}return q},K.prototype.invm=function(p){var d=p._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},K.prototype.pow=function(p,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return p.clone();var m=4,b=new Array(1<<m);b[0]=new s(1).toRed(this),b[1]=p;for(var E=2;E<b.length;E++)b[E]=this.mul(b[E-1],p);var S=b[0],N=0,C=0,y=d.bitLength()%26;for(y===0&&(y=26),E=d.length-1;E>=0;E--){for(var k=d.words[E],q=y-1;q>=0;q--){var x=k>>q&1;if(S!==b[0]&&(S=this.sqr(S)),x===0&&N===0){C=0;continue}N<<=1,N|=x,C++,!(C!==m&&(E!==0||q!==0))&&(S=this.mul(S,b[N]),C=0,N=0)}y=26}return S},K.prototype.convertTo=function(p){var d=p.umod(this.m);return d===p?d.clone():d},K.prototype.convertFrom=function(p){var d=p.clone();return d.red=null,d},s.mont=function(p){return new L(p)};function L(P){K.call(this,P),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(L,K),L.prototype.convertTo=function(p){return this.imod(p.ushln(this.shift))},L.prototype.convertFrom=function(p){var d=this.imod(p.mul(this.rinv));return d.red=null,d},L.prototype.imul=function(p,d){if(p.isZero()||d.isZero())return p.words[0]=0,p.length=1,p;var m=p.imul(d),b=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(b).iushrn(this.shift),S=E;return E.cmp(this.m)>=0?S=E.isub(this.m):E.cmpn(0)<0&&(S=E.iadd(this.m)),S._forceRed(this)},L.prototype.mul=function(p,d){if(p.isZero()||d.isZero())return new s(0)._forceRed(this);var m=p.mul(d),b=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=m.isub(b).iushrn(this.shift),S=E;return E.cmp(this.m)>=0?S=E.isub(this.m):E.cmpn(0)<0&&(S=E.iadd(this.m)),S._forceRed(this)},L.prototype.invm=function(p){var d=this.imod(p._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(t,Rn)})(ov);var wN=ov.exports;const fe=Mo(wN),vN="logger/5.8.0";let Rb=!1,$b=!1;const Bh={debug:1,default:2,info:2,warning:3,error:4,off:5};let Mb=Bh.default,F0=null;function bN(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("".normalize("NFD")!=="e")throw new Error("broken implementation")}catch(t){return t.message}return null}const Bb=bN();var Zm;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Zm||(Zm={}));var ni;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(ni||(ni={}));const Ub="0123456789abcdef";class j{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();Bh[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Mb>Bh[n])&&console.log.apply(console,r)}debug(...e){this._log(j.levels.DEBUG,e)}info(...e){this._log(j.levels.INFO,e)}warn(...e){this._log(j.levels.WARNING,e)}makeError(e,r,n){if($b)return this.makeError("censored error",r,{});r||(r=j.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(l=>{const c=n[l];try{if(c instanceof Uint8Array){let u="";for(let f=0;f<c.length;f++)u+=Ub[c[f]>>4],u+=Ub[c[f]&15];i.push(l+"=Uint8Array(0x"+u+")")}else i.push(l+"="+JSON.stringify(c))}catch{i.push(l+"="+JSON.stringify(n[l].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case ni.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case ni.CALL_EXCEPTION:case ni.INSUFFICIENT_FUNDS:case ni.MISSING_NEW:case ni.NONCE_EXPIRED:case ni.REPLACEMENT_UNDERPRICED:case ni.TRANSACTION_REPLACED:case ni.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(n).forEach(function(l){a[l]=n[l]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,j.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){Bb&&this.throwError("platform missing String.prototype.normalize",j.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Bb})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,j.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,j.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,j.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,j.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",j.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",j.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",j.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return F0||(F0=new j(vN)),F0}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",j.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Rb){if(!e)return;this.globalLogger().throwError("error censorship permanent",j.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}$b=!!e,Rb=!!r}static setLogLevel(e){const r=Bh[e.toLowerCase()];if(r==null){j.globalLogger().warn("invalid log level - "+e);return}Mb=r}static from(e){return new j(e)}}j.errors=ni;j.levels=Zm;const EN="bytes/5.8.0",Pt=new j(EN);function OS(t){return!!t.toHexString}function Rl(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return Rl(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function av(t){return Ce(t)&&!(t.length%2)||cc(t)}function Lb(t){return typeof t=="number"&&t==t&&t%1===0}function cc(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Lb(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!Lb(r)||r<0||r>=256)return!1}return!0}function ue(t,e){if(e||(e={}),typeof t=="number"){Pt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),Rl(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),OS(t)&&(t=t.toHexString()),Ce(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":Pt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return Rl(new Uint8Array(n))}return cc(t)?Rl(new Uint8Array(t)):Pt.throwArgumentError("invalid arrayify value","value",t)}function mn(t){const e=t.map(i=>ue(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),Rl(n)}function Jl(t){let e=ue(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function xN(t,e){t=ue(t),t.length>e&&Pt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),Rl(r)}function Ce(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const j0="0123456789abcdef";function le(t,e){if(e||(e={}),typeof t=="number"){Pt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=j0[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),OS(t))return t.toHexString();if(Ce(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":Pt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(cc(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=j0[(i&240)>>4]+j0[i&15]}return r}return Pt.throwArgumentError("invalid hexlify value","value",t)}function Na(t){if(typeof t!="string")t=le(t);else if(!Ce(t)||t.length%2)return null;return(t.length-2)/2}function Ir(t,e,r){return typeof t!="string"?t=le(t):(!Ce(t)||t.length%2)&&Pt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function Gr(t){let e="0x";return t.forEach(r=>{e+=le(r).substring(2)}),e}function lv(t){const e=AN(le(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function AN(t){typeof t!="string"&&(t=le(t)),Ce(t)||Pt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function bt(t,e){for(typeof t!="string"?t=le(t):Ce(t)||Pt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Pt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function wp(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(av(t)){let r=ue(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=le(r.slice(0,32)),e.s=le(r.slice(32,64))):r.length===65?(e.r=le(r.slice(0,32)),e.s=le(r.slice(32,64)),e.v=r[64]):Pt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:Pt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=le(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=xN(ue(e._vs),32);e._vs=le(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&Pt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=le(i);e.s==null?e.s=o:e.s!==o&&Pt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?Pt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&Pt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!Ce(e.r)?Pt.throwArgumentError("signature missing or invalid r","signature",t):e.r=bt(e.r,32),e.s==null||!Ce(e.s)?Pt.throwArgumentError("signature missing or invalid s","signature",t):e.s=bt(e.s,32);const r=ue(e.s);r[0]>=128&&Pt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=le(r);e._vs&&(Ce(e._vs)||Pt.throwArgumentError("signature invalid _vs","signature",t),e._vs=bt(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&Pt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const NS="bignumber/5.8.0";var Id=fe.BN;const as=new j(NS),z0={},Fb=9007199254740991;function _N(t){return t!=null&&(re.isBigNumber(t)||typeof t=="number"&&t%1===0||typeof t=="string"&&!!t.match(/^-?[0-9]+$/)||Ce(t)||typeof t=="bigint"||cc(t))}let jb=!1;class re{constructor(e,r){e!==z0&&as.throwError("cannot call constructor directly; use BigNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return Lr(we(this).fromTwos(e))}toTwos(e){return Lr(we(this).toTwos(e))}abs(){return this._hex[0]==="-"?re.from(this._hex.substring(1)):this}add(e){return Lr(we(this).add(we(e)))}sub(e){return Lr(we(this).sub(we(e)))}div(e){return re.from(e).isZero()&&Sn("division-by-zero","div"),Lr(we(this).div(we(e)))}mul(e){return Lr(we(this).mul(we(e)))}mod(e){const r=we(e);return r.isNeg()&&Sn("division-by-zero","mod"),Lr(we(this).umod(r))}pow(e){const r=we(e);return r.isNeg()&&Sn("negative-power","pow"),Lr(we(this).pow(r))}and(e){const r=we(e);return(this.isNegative()||r.isNeg())&&Sn("unbound-bitwise-result","and"),Lr(we(this).and(r))}or(e){const r=we(e);return(this.isNegative()||r.isNeg())&&Sn("unbound-bitwise-result","or"),Lr(we(this).or(r))}xor(e){const r=we(e);return(this.isNegative()||r.isNeg())&&Sn("unbound-bitwise-result","xor"),Lr(we(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Sn("negative-width","mask"),Lr(we(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Sn("negative-width","shl"),Lr(we(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Sn("negative-width","shr"),Lr(we(this).shrn(e))}eq(e){return we(this).eq(we(e))}lt(e){return we(this).lt(we(e))}lte(e){return we(this).lte(we(e))}gt(e){return we(this).gt(we(e))}gte(e){return we(this).gte(we(e))}isNegative(){return this._hex[0]==="-"}isZero(){return we(this).isZero()}toNumber(){try{return we(this).toNumber()}catch{Sn("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return as.throwError("this platform does not support BigInt",j.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?jb||(jb=!0,as.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?as.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",j.errors.UNEXPECTED_ARGUMENT,{}):as.throwError("BigNumber.toString does not accept parameters",j.errors.UNEXPECTED_ARGUMENT,{})),we(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof re)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new re(z0,ju(e)):e.match(/^-?[0-9]+$/)?new re(z0,ju(new Id(e))):as.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Sn("underflow","BigNumber.from",e),(e>=Fb||e<=-Fb)&&Sn("overflow","BigNumber.from",e),re.from(String(e));const r=e;if(typeof r=="bigint")return re.from(r.toString());if(cc(r))return re.from(le(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return re.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(Ce(n)||n[0]==="-"&&Ce(n.substring(1))))return re.from(n)}return as.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function ju(t){if(typeof t!="string")return ju(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&as.throwArgumentError("invalid hex","value",t),t=ju(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function Lr(t){return re.from(ju(t))}function we(t){const e=re.from(t).toHexString();return e[0]==="-"?new Id("-"+e.substring(3),16):new Id(e.substring(2),16)}function Sn(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),as.throwError(t,j.errors.NUMERIC_FAULT,n)}function SN(t){return new Id(t,36).toString(16)}const kr=new j(NS),du={},TS=re.from(0),kS=re.from(-1);function DS(t,e,r,n){const i={fault:e,operation:r};return n!==void 0&&(i.value=n),kr.throwError(t,j.errors.NUMERIC_FAULT,i)}let pu="0";for(;pu.length<256;)pu+=pu;function cv(t){if(typeof t!="number")try{t=re.from(t).toNumber()}catch{}return typeof t=="number"&&t>=0&&t<=256&&!(t%1)?"1"+pu.substring(0,t):kr.throwArgumentError("invalid decimal size","decimals",t)}function Uh(t,e){e==null&&(e=0);const r=cv(e);t=re.from(t);const n=t.lt(TS);n&&(t=t.mul(kS));let i=t.mod(r).toString();for(;i.length<r.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=t.div(r).toString();return r.length===1?t=s:t=s+"."+i,n&&(t="-"+t),t}function Qi(t,e){e==null&&(e=0);const r=cv(e);(typeof t!="string"||!t.match(/^-?[0-9.]+$/))&&kr.throwArgumentError("invalid decimal value","value",t);const n=t.substring(0,1)==="-";n&&(t=t.substring(1)),t==="."&&kr.throwArgumentError("missing value","value",t);const i=t.split(".");i.length>2&&kr.throwArgumentError("too many decimal points","value",t);let s=i[0],o=i[1];for(s||(s="0"),o||(o="0");o[o.length-1]==="0";)o=o.substring(0,o.length-1);for(o.length>r.length-1&&DS("fractional component exceeds decimals","underflow","parseFixed"),o===""&&(o="0");o.length<r.length-1;)o+="0";const a=re.from(s),l=re.from(o);let c=a.mul(r).add(l);return n&&(c=c.mul(kS)),c}class $l{constructor(e,r,n,i){e!==du&&kr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=n,this.decimals=i,this.name=(r?"":"u")+"fixed"+String(n)+"x"+String(i),this._multiplier=cv(i),Object.freeze(this)}static from(e){if(e instanceof $l)return e;typeof e=="number"&&(e=`fixed128x${e}`);let r=!0,n=128,i=18;if(typeof e=="string"){if(e!=="fixed")if(e==="ufixed")r=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||kr.throwArgumentError("invalid fixed format","format",e),r=s[1]!=="u",n=parseInt(s[2]),i=parseInt(s[3])}}else if(e){const s=(o,a,l)=>e[o]==null?l:(typeof e[o]!==a&&kr.throwArgumentError("invalid fixed format ("+o+" not "+a+")","format."+o,e[o]),e[o]);r=s("signed","boolean",r),n=s("width","number",n),i=s("decimals","number",i)}return n%8&&kr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),i>80&&kr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new $l(du,r,n,i)}}class ar{constructor(e,r,n,i){e!==du&&kr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",j.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=r,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&kr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);const r=Qi(this._value,this.format.decimals),n=Qi(e._value,e.format.decimals);return ar.fromValue(r.add(n),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);const r=Qi(this._value,this.format.decimals),n=Qi(e._value,e.format.decimals);return ar.fromValue(r.sub(n),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);const r=Qi(this._value,this.format.decimals),n=Qi(e._value,e.format.decimals);return ar.fromValue(r.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);const r=Qi(this._value,this.format.decimals),n=Qi(e._value,e.format.decimals);return ar.fromValue(r.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=ar.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return this.isNegative()&&n&&(r=r.subUnsafe(zb.toFormat(r.format))),r}ceiling(){const e=this.toString().split(".");e.length===1&&e.push("0");let r=ar.from(e[0],this.format);const n=!e[1].match(/^(0*)$/);return!this.isNegative()&&n&&(r=r.addUnsafe(zb.toFormat(r.format))),r}round(e){e==null&&(e=0);const r=this.toString().split(".");if(r.length===1&&r.push("0"),(e<0||e>80||e%1)&&kr.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;const n=ar.from("1"+pu.substring(0,e),this.format),i=IN.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(i).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(e){if(e==null)return this._hex;e%8&&kr.throwArgumentError("invalid byte width","width",e);const r=re.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString();return bt(r,e/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return ar.fromString(this._value,e)}static fromValue(e,r,n){return n==null&&r!=null&&!_N(r)&&(n=r,r=null),r==null&&(r=0),n==null&&(n="fixed"),ar.fromString(Uh(e,r),$l.from(n))}static fromString(e,r){r==null&&(r="fixed");const n=$l.from(r),i=Qi(e,n.decimals);!n.signed&&i.lt(TS)&&DS("unsigned value cannot be negative","overflow","value",e);let s=null;n.signed?s=i.toTwos(n.width).toHexString():(s=i.toHexString(),s=bt(s,n.width/8));const o=Uh(i,n.decimals);return new ar(du,s,o,n)}static fromBytes(e,r){r==null&&(r="fixed");const n=$l.from(r);if(ue(e).length>n.width/8)throw new Error("overflow");let i=re.from(e);n.signed&&(i=i.fromTwos(n.width));const s=i.toTwos((n.signed?0:1)+n.width).toHexString(),o=Uh(i,n.decimals);return new ar(du,s,o,n)}static from(e,r){if(typeof e=="string")return ar.fromString(e,r);if(cc(e))return ar.fromBytes(e,r);try{return ar.fromValue(e,0,r)}catch(n){if(n.code!==j.errors.INVALID_ARGUMENT)throw n}return kr.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!!(e&&e._isFixedNumber)}}const zb=ar.from(1),IN=ar.from("0.5"),PN="properties/5.8.0";var CN=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Pd=new j(PN);function ee(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function Ri(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function Rt(t){return CN(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function ON(t,e){(!t||typeof t!="object")&&Pd.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(r=>{e[r]||Pd.throwArgumentError("invalid object key - "+r,"transaction:"+r,t)})}function Vt(t){const e={};for(const r in t)e[r]=t[r];return e}const NN={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function RS(t){if(t==null||NN[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!RS(n))return!1}return!0}return Pd.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function TN(t){if(RS(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>Is(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&ee(e,r,Is(n))}return e}return Pd.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function Is(t){return TN(t)}class ff{constructor(e){for(const r in e)this[r]=Is(e[r])}}const hf="abi/5.8.0",xe=new j(hf),Ta={};let qb={calldata:!0,memory:!0,storage:!0},kN={calldata:!0,memory:!0};function Wf(t,e){if(t==="bytes"||t==="string"){if(qb[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&kN[e])return!0;return(qb[e]||e==="payable")&&xe.throwArgumentError("invalid modifier","name",e),!1}function DN(t,e){let r=t;function n(a){xe.throwArgumentError(`unexpected character at position ${a}`,"param",t)}t=t.replace(/\s/g," ");function i(a){let l={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<t.length;a++){let l=t[a];switch(l){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=al(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),Wf(o.type,o.name)&&(o.name=""),o.type=al(o.type);let c=o;o=o.parent,o||n(a),delete c.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),Wf(o.type,o.name)&&(o.name=""),o.type=al(o.type);let u=i(o.parent);o.parent.components.push(u),delete o.parent,o=u;break;case" ":o.state.allowType&&o.type!==""&&(o.type=al(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):Wf(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=l,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=l,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=l,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=l,delete o.state.allowArray):o.state.readArray?o.type+=l:n(a)}}return o.parent&&xe.throwArgumentError("unexpected eof","param",t),delete s.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):Wf(o.type,o.name)&&(o.name=""),s.type=al(s.type),s}function Lh(t,e){for(let r in e)ee(t,r,e[r])}const Pe=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),RN=new RegExp(/^(.*)\[([0-9]*)\]$/);class Jt{constructor(e,r){e!==Ta&&xe.throwError("use fromString",j.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),Lh(this,r);let n=this.type.match(RN);n?Lh(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:Jt.fromObject({type:n[1],components:this.components}),baseType:"array"}):Lh(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=Pe.sighash),Pe[e]||xe.throwArgumentError("invalid format type","format",e),e===Pe.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==Pe.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===Pe.full?", ":",")+")"):r+=this.type,e!==Pe.sighash&&(this.indexed===!0&&(r+=" indexed"),e===Pe.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?Jt.fromString(e,r):Jt.fromObject(e)}static fromObject(e){return Jt.isParamType(e)?e:new Jt(Ta,{name:e.name||null,type:al(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(Jt.fromObject):null})}static fromString(e,r){function n(i){return Jt.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(DN(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function zu(t,e){return MN(t).map(r=>Jt.fromString(r,e))}class ys{constructor(e,r){e!==Ta&&xe.throwError("use a static from method",j.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),Lh(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return ys.isFragment(e)?e:typeof e=="string"?ys.fromString(e):ys.fromObject(e)}static fromObject(e){if(ys.isFragment(e))return e;switch(e.type){case"function":return Di.fromObject(e);case"event":return ds.fromObject(e);case"constructor":return ki.fromObject(e);case"error":return fo.fromObject(e);case"fallback":case"receive":return null}return xe.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?ds.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?Di.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?ki.fromString(e.trim()):e.split(" ")[0]==="error"?fo.fromString(e.substring(5).trim()):xe.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class ds extends ys{format(e){if(e||(e=Pe.sighash),Pe[e]||xe.throwArgumentError("invalid format type","format",e),e===Pe.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Pe.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Pe.full?", ":",")+") ",e!==Pe.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?ds.fromString(e):ds.fromObject(e)}static fromObject(e){if(ds.isEventFragment(e))return e;e.type!=="event"&&xe.throwArgumentError("invalid event object","value",e);const r={name:qu(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(Jt.fromObject):[],type:"event"};return new ds(Ta,r)}static fromString(e){let r=e.match(Hu);r||xe.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:xe.warn("unknown modifier: "+i)}}),ds.fromObject({name:r[1].trim(),anonymous:n,inputs:zu(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function $S(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&xe.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||xe.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=re.from(r[1]),r[0]):t}function MS(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function BS(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&xe.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&xe.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&xe.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&xe.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&xe.throwArgumentError("unable to determine stateMutability","value",t),e}class ki extends ys{format(e){if(e||(e=Pe.sighash),Pe[e]||xe.throwArgumentError("invalid format type","format",e),e===Pe.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===Pe.sighash&&xe.throwError("cannot format a constructor for sighash",j.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===Pe.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?ki.fromString(e):ki.fromObject(e)}static fromObject(e){if(ki.isConstructorFragment(e))return e;e.type!=="constructor"&&xe.throwArgumentError("invalid constructor object","value",e);let r=BS(e);r.constant&&xe.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(Jt.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?re.from(e.gas):null};return new ki(Ta,n)}static fromString(e){let r={type:"constructor"};e=$S(e,r);let n=e.match(Hu);return(!n||n[1].trim()!=="constructor")&&xe.throwArgumentError("invalid constructor string","value",e),r.inputs=zu(n[2].trim(),!1),MS(n[3].trim(),r),ki.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class Di extends ki{format(e){if(e||(e=Pe.sighash),Pe[e]||xe.throwArgumentError("invalid format type","format",e),e===Pe.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Pe.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Pe.full?", ":",")+") ",e!==Pe.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?Di.fromString(e):Di.fromObject(e)}static fromObject(e){if(Di.isFunctionFragment(e))return e;e.type!=="function"&&xe.throwArgumentError("invalid function object","value",e);let r=BS(e);const n={type:e.type,name:qu(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(Jt.fromObject):[],outputs:e.outputs?e.outputs.map(Jt.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?re.from(e.gas):null};return new Di(Ta,n)}static fromString(e){let r={type:"function"};e=$S(e,r);let n=e.split(" returns ");n.length>2&&xe.throwArgumentError("invalid function string","value",e);let i=n[0].match(Hu);if(i||xe.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&qu(r.name),r.inputs=zu(i[2],!1),MS(i[3].trim(),r),n.length>1){let s=n[1].match(Hu);(s[1].trim()!=""||s[3].trim()!="")&&xe.throwArgumentError("unexpected tokens","value",e),r.outputs=zu(s[2],!1)}else r.outputs=[];return Di.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function Hb(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&xe.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class fo extends ys{format(e){if(e||(e=Pe.sighash),Pe[e]||xe.throwArgumentError("invalid format type","format",e),e===Pe.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==Pe.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===Pe.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?fo.fromString(e):fo.fromObject(e)}static fromObject(e){if(fo.isErrorFragment(e))return e;e.type!=="error"&&xe.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:qu(e.name),inputs:e.inputs?e.inputs.map(Jt.fromObject):[]};return Hb(new fo(Ta,r))}static fromString(e){let r={type:"error"},n=e.match(Hu);return n||xe.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&qu(r.name),r.inputs=zu(n[2],!1),Hb(fo.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function al(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const $N=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function qu(t){return(!t||!t.match($N))&&xe.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Hu=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function MN(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&xe.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const uv=new j(hf);function BN(t){const e=[],r=function(n,i){if(Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{r(o,i[s])}catch(a){e.push({path:o,error:a})}}};return r([],t),e}class Ds{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){uv.throwArgumentError(e,this.localName,r)}}class Xm{constructor(e){ee(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return Gr(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(mn(e._data))}writeBytes(e){let r=ue(e);const n=r.length%this.wordSize;return n&&(r=mn([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=ue(re.from(e));return r.length>this.wordSize&&uv.throwError("value out-of-bounds",j.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=mn([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class Cd{constructor(e,r,n,i){ee(this,"_data",ue(e)),ee(this,"wordSize",r||32),ee(this,"_coerceFunc",n),ee(this,"allowLoose",i),this._offset=0}get data(){return le(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):Cd.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:uv.throwError("data out-of-bounds",j.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Cd(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return re.from(this.readBytes(this.wordSize))}}var US={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=Rn:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",c="0123456789abcdef".split(""),u=[31,7936,2031616,520093696],f=[4,1024,262144,67108864],h=[1,256,65536,16777216],g=[6,1536,393216,100663296],w=[0,8,16,24],v=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],O=[224,256,384,512],A=[128,256],I=["hex","buffer","arrayBuffer","array","digest"],_={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(x){return typeof x=="object"&&x.buffer&&x.buffer.constructor===ArrayBuffer});for(var T=function(x,U,F){return function(H){return new y(x,U,x).update(H)[F]()}},D=function(x,U,F){return function(H,V){return new y(x,U,V).update(H)[F]()}},R=function(x,U,F){return function(H,V,Z,X){return p["cshake"+x].update(H,V,Z,X)[F]()}},$=function(x,U,F){return function(H,V,Z,X){return p["kmac"+x].update(H,V,Z,X)[F]()}},M=function(x,U,F,H){for(var V=0;V<I.length;++V){var Z=I[V];x[Z]=U(F,H,Z)}return x},B=function(x,U){var F=T(x,U,"hex");return F.create=function(){return new y(x,U,x)},F.update=function(H){return F.create().update(H)},M(F,T,x,U)},z=function(x,U){var F=D(x,U,"hex");return F.create=function(H){return new y(x,U,H)},F.update=function(H,V){return F.create(V).update(H)},M(F,D,x,U)},K=function(x,U){var F=_[x],H=R(x,U,"hex");return H.create=function(V,Z,X){return!Z&&!X?p["shake"+x].create(V):new y(x,U,V).bytepad([Z,X],F)},H.update=function(V,Z,X,J){return H.create(Z,X,J).update(V)},M(H,R,x,U)},L=function(x,U){var F=_[x],H=$(x,U,"hex");return H.create=function(V,Z,X){return new k(x,U,Z).bytepad(["KMAC",X],F).bytepad([V],F)},H.update=function(V,Z,X,J){return H.create(V,X,J).update(Z)},M(H,$,x,U)},P=[{name:"keccak",padding:h,bits:O,createMethod:B},{name:"sha3",padding:g,bits:O,createMethod:B},{name:"shake",padding:u,bits:A,createMethod:z},{name:"cshake",padding:f,bits:A,createMethod:K},{name:"kmac",padding:f,bits:A,createMethod:L}],p={},d=[],m=0;m<P.length;++m)for(var b=P[m],E=b.bits,S=0;S<E.length;++S){var N=b.name+"_"+E[S];if(d.push(N),p[N]=b.createMethod(E[S],b.padding),b.name!=="sha3"){var C=b.name+E[S];d.push(C),p[C]=p[N]}}function y(x,U,F){this.blocks=[],this.s=[],this.padding=U,this.outputBits=F,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(x<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=F>>5,this.extraBytes=(F&31)>>3;for(var H=0;H<50;++H)this.s[H]=0}y.prototype.update=function(x){if(this.finalized)throw new Error(r);var U,F=typeof x;if(F!=="string"){if(F==="object"){if(x===null)throw new Error(e);if(l&&x.constructor===ArrayBuffer)x=new Uint8Array(x);else if(!Array.isArray(x)&&(!l||!ArrayBuffer.isView(x)))throw new Error(e)}else throw new Error(e);U=!0}for(var H=this.blocks,V=this.byteCount,Z=x.length,X=this.blockCount,J=0,de=this.s,ie,ce;J<Z;){if(this.reset)for(this.reset=!1,H[0]=this.block,ie=1;ie<X+1;++ie)H[ie]=0;if(U)for(ie=this.start;J<Z&&ie<V;++J)H[ie>>2]|=x[J]<<w[ie++&3];else for(ie=this.start;J<Z&&ie<V;++J)ce=x.charCodeAt(J),ce<128?H[ie>>2]|=ce<<w[ie++&3]:ce<2048?(H[ie>>2]|=(192|ce>>6)<<w[ie++&3],H[ie>>2]|=(128|ce&63)<<w[ie++&3]):ce<55296||ce>=57344?(H[ie>>2]|=(224|ce>>12)<<w[ie++&3],H[ie>>2]|=(128|ce>>6&63)<<w[ie++&3],H[ie>>2]|=(128|ce&63)<<w[ie++&3]):(ce=65536+((ce&1023)<<10|x.charCodeAt(++J)&1023),H[ie>>2]|=(240|ce>>18)<<w[ie++&3],H[ie>>2]|=(128|ce>>12&63)<<w[ie++&3],H[ie>>2]|=(128|ce>>6&63)<<w[ie++&3],H[ie>>2]|=(128|ce&63)<<w[ie++&3]);if(this.lastByteIndex=ie,ie>=V){for(this.start=ie-V,this.block=H[X],ie=0;ie<X;++ie)de[ie]^=H[ie];q(de),this.reset=!0}else this.start=ie}return this},y.prototype.encode=function(x,U){var F=x&255,H=1,V=[F];for(x=x>>8,F=x&255;F>0;)V.unshift(F),x=x>>8,F=x&255,++H;return U?V.push(H):V.unshift(H),this.update(V),V.length},y.prototype.encodeString=function(x){var U,F=typeof x;if(F!=="string"){if(F==="object"){if(x===null)throw new Error(e);if(l&&x.constructor===ArrayBuffer)x=new Uint8Array(x);else if(!Array.isArray(x)&&(!l||!ArrayBuffer.isView(x)))throw new Error(e)}else throw new Error(e);U=!0}var H=0,V=x.length;if(U)H=V;else for(var Z=0;Z<x.length;++Z){var X=x.charCodeAt(Z);X<128?H+=1:X<2048?H+=2:X<55296||X>=57344?H+=3:(X=65536+((X&1023)<<10|x.charCodeAt(++Z)&1023),H+=4)}return H+=this.encode(H*8),this.update(x),H},y.prototype.bytepad=function(x,U){for(var F=this.encode(U),H=0;H<x.length;++H)F+=this.encodeString(x[H]);var V=U-F%U,Z=[];return Z.length=V,this.update(Z),this},y.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var x=this.blocks,U=this.lastByteIndex,F=this.blockCount,H=this.s;if(x[U>>2]|=this.padding[U&3],this.lastByteIndex===this.byteCount)for(x[0]=x[F],U=1;U<F+1;++U)x[U]=0;for(x[F-1]|=2147483648,U=0;U<F;++U)H[U]^=x[U];q(H)}},y.prototype.toString=y.prototype.hex=function(){this.finalize();for(var x=this.blockCount,U=this.s,F=this.outputBlocks,H=this.extraBytes,V=0,Z=0,X="",J;Z<F;){for(V=0;V<x&&Z<F;++V,++Z)J=U[V],X+=c[J>>4&15]+c[J&15]+c[J>>12&15]+c[J>>8&15]+c[J>>20&15]+c[J>>16&15]+c[J>>28&15]+c[J>>24&15];Z%x===0&&(q(U),V=0)}return H&&(J=U[V],X+=c[J>>4&15]+c[J&15],H>1&&(X+=c[J>>12&15]+c[J>>8&15]),H>2&&(X+=c[J>>20&15]+c[J>>16&15])),X},y.prototype.arrayBuffer=function(){this.finalize();var x=this.blockCount,U=this.s,F=this.outputBlocks,H=this.extraBytes,V=0,Z=0,X=this.outputBits>>3,J;H?J=new ArrayBuffer(F+1<<2):J=new ArrayBuffer(X);for(var de=new Uint32Array(J);Z<F;){for(V=0;V<x&&Z<F;++V,++Z)de[Z]=U[V];Z%x===0&&q(U)}return H&&(de[V]=U[V],J=J.slice(0,X)),J},y.prototype.buffer=y.prototype.arrayBuffer,y.prototype.digest=y.prototype.array=function(){this.finalize();for(var x=this.blockCount,U=this.s,F=this.outputBlocks,H=this.extraBytes,V=0,Z=0,X=[],J,de;Z<F;){for(V=0;V<x&&Z<F;++V,++Z)J=Z<<2,de=U[V],X[J]=de&255,X[J+1]=de>>8&255,X[J+2]=de>>16&255,X[J+3]=de>>24&255;Z%x===0&&q(U)}return H&&(J=Z<<2,de=U[V],X[J]=de&255,H>1&&(X[J+1]=de>>8&255),H>2&&(X[J+2]=de>>16&255)),X};function k(x,U,F){y.call(this,x,U,F)}k.prototype=new y,k.prototype.finalize=function(){return this.encode(this.outputBits,!0),y.prototype.finalize.call(this)};var q=function(x){var U,F,H,V,Z,X,J,de,ie,ce,mr,Ue,Le,gi,De,Ne,mi,Re,$e,yi,Me,Fe,Yi,je,ze,qo,We,Ge,Ho,Ye,Qe,Vo,Je,Ze,Ko,Xe,et,Wo,tt,rt,Go,nt,it,Yo,st,ot,Qo,at,lt,Jo,ct,ut,Zo,ft,ht,Xo,dt,pt,$s,Ms,Bs,Us,Ls;for(H=0;H<48;H+=2)V=x[0]^x[10]^x[20]^x[30]^x[40],Z=x[1]^x[11]^x[21]^x[31]^x[41],X=x[2]^x[12]^x[22]^x[32]^x[42],J=x[3]^x[13]^x[23]^x[33]^x[43],de=x[4]^x[14]^x[24]^x[34]^x[44],ie=x[5]^x[15]^x[25]^x[35]^x[45],ce=x[6]^x[16]^x[26]^x[36]^x[46],mr=x[7]^x[17]^x[27]^x[37]^x[47],Ue=x[8]^x[18]^x[28]^x[38]^x[48],Le=x[9]^x[19]^x[29]^x[39]^x[49],U=Ue^(X<<1|J>>>31),F=Le^(J<<1|X>>>31),x[0]^=U,x[1]^=F,x[10]^=U,x[11]^=F,x[20]^=U,x[21]^=F,x[30]^=U,x[31]^=F,x[40]^=U,x[41]^=F,U=V^(de<<1|ie>>>31),F=Z^(ie<<1|de>>>31),x[2]^=U,x[3]^=F,x[12]^=U,x[13]^=F,x[22]^=U,x[23]^=F,x[32]^=U,x[33]^=F,x[42]^=U,x[43]^=F,U=X^(ce<<1|mr>>>31),F=J^(mr<<1|ce>>>31),x[4]^=U,x[5]^=F,x[14]^=U,x[15]^=F,x[24]^=U,x[25]^=F,x[34]^=U,x[35]^=F,x[44]^=U,x[45]^=F,U=de^(Ue<<1|Le>>>31),F=ie^(Le<<1|Ue>>>31),x[6]^=U,x[7]^=F,x[16]^=U,x[17]^=F,x[26]^=U,x[27]^=F,x[36]^=U,x[37]^=F,x[46]^=U,x[47]^=F,U=ce^(V<<1|Z>>>31),F=mr^(Z<<1|V>>>31),x[8]^=U,x[9]^=F,x[18]^=U,x[19]^=F,x[28]^=U,x[29]^=F,x[38]^=U,x[39]^=F,x[48]^=U,x[49]^=F,gi=x[0],De=x[1],ot=x[11]<<4|x[10]>>>28,Qo=x[10]<<4|x[11]>>>28,Ge=x[20]<<3|x[21]>>>29,Ho=x[21]<<3|x[20]>>>29,Ms=x[31]<<9|x[30]>>>23,Bs=x[30]<<9|x[31]>>>23,nt=x[40]<<18|x[41]>>>14,it=x[41]<<18|x[40]>>>14,Ze=x[2]<<1|x[3]>>>31,Ko=x[3]<<1|x[2]>>>31,Ne=x[13]<<12|x[12]>>>20,mi=x[12]<<12|x[13]>>>20,at=x[22]<<10|x[23]>>>22,lt=x[23]<<10|x[22]>>>22,Ye=x[33]<<13|x[32]>>>19,Qe=x[32]<<13|x[33]>>>19,Us=x[42]<<2|x[43]>>>30,Ls=x[43]<<2|x[42]>>>30,ft=x[5]<<30|x[4]>>>2,ht=x[4]<<30|x[5]>>>2,Xe=x[14]<<6|x[15]>>>26,et=x[15]<<6|x[14]>>>26,Re=x[25]<<11|x[24]>>>21,$e=x[24]<<11|x[25]>>>21,Jo=x[34]<<15|x[35]>>>17,ct=x[35]<<15|x[34]>>>17,Vo=x[45]<<29|x[44]>>>3,Je=x[44]<<29|x[45]>>>3,je=x[6]<<28|x[7]>>>4,ze=x[7]<<28|x[6]>>>4,Xo=x[17]<<23|x[16]>>>9,dt=x[16]<<23|x[17]>>>9,Wo=x[26]<<25|x[27]>>>7,tt=x[27]<<25|x[26]>>>7,yi=x[36]<<21|x[37]>>>11,Me=x[37]<<21|x[36]>>>11,ut=x[47]<<24|x[46]>>>8,Zo=x[46]<<24|x[47]>>>8,Yo=x[8]<<27|x[9]>>>5,st=x[9]<<27|x[8]>>>5,qo=x[18]<<20|x[19]>>>12,We=x[19]<<20|x[18]>>>12,pt=x[29]<<7|x[28]>>>25,$s=x[28]<<7|x[29]>>>25,rt=x[38]<<8|x[39]>>>24,Go=x[39]<<8|x[38]>>>24,Fe=x[48]<<14|x[49]>>>18,Yi=x[49]<<14|x[48]>>>18,x[0]=gi^~Ne&Re,x[1]=De^~mi&$e,x[10]=je^~qo&Ge,x[11]=ze^~We&Ho,x[20]=Ze^~Xe&Wo,x[21]=Ko^~et&tt,x[30]=Yo^~ot&at,x[31]=st^~Qo&lt,x[40]=ft^~Xo&pt,x[41]=ht^~dt&$s,x[2]=Ne^~Re&yi,x[3]=mi^~$e&Me,x[12]=qo^~Ge&Ye,x[13]=We^~Ho&Qe,x[22]=Xe^~Wo&rt,x[23]=et^~tt&Go,x[32]=ot^~at&Jo,x[33]=Qo^~lt&ct,x[42]=Xo^~pt&Ms,x[43]=dt^~$s&Bs,x[4]=Re^~yi&Fe,x[5]=$e^~Me&Yi,x[14]=Ge^~Ye&Vo,x[15]=Ho^~Qe&Je,x[24]=Wo^~rt&nt,x[25]=tt^~Go&it,x[34]=at^~Jo&ut,x[35]=lt^~ct&Zo,x[44]=pt^~Ms&Us,x[45]=$s^~Bs&Ls,x[6]=yi^~Fe&gi,x[7]=Me^~Yi&De,x[16]=Ye^~Vo&je,x[17]=Qe^~Je&ze,x[26]=rt^~nt&Ze,x[27]=Go^~it&Ko,x[36]=Jo^~ut&Yo,x[37]=ct^~Zo&st,x[46]=Ms^~Us&ft,x[47]=Bs^~Ls&ht,x[8]=Fe^~gi&Ne,x[9]=Yi^~De&mi,x[18]=Vo^~je&qo,x[19]=Je^~ze&We,x[28]=nt^~Ze&Xe,x[29]=it^~Ko&et,x[38]=ut^~Yo&ot,x[39]=Zo^~st&Qo,x[48]=Us^~ft&Xo,x[49]=Ls^~ht&dt,x[0]^=v[H],x[1]^=v[H+1]};if(a)t.exports=p;else for(m=0;m<d.length;++m)i[d[m]]=p[d[m]]})()})(US);var UN=US.exports;const LN=Mo(UN);function qt(t){return"0x"+LN.keccak_256(ue(t))}const FN="rlp/5.8.0",Oi=new j(FN);function Vb(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function Kb(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function LS(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(LS(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=Vb(n.length);return i.unshift(247+i.length),i.concat(n)}av(t)||Oi.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(ue(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=Vb(e.length);return r.unshift(183+r.length),r.concat(e)}function vp(t){return le(LS(t))}function Wb(t,e,r,n){const i=[];for(;r<e+1+n;){const s=FS(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&Oi.throwError("child data too short",j.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function FS(t,e){if(t.length===0&&Oi.throwError("data too short",j.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Oi.throwError("data short segment too short",j.errors.BUFFER_OVERRUN,{});const n=Kb(t,e+1,r);return e+1+r+n>t.length&&Oi.throwError("data long segment too short",j.errors.BUFFER_OVERRUN,{}),Wb(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Oi.throwError("data array too short",j.errors.BUFFER_OVERRUN,{}),Wb(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Oi.throwError("data array too short",j.errors.BUFFER_OVERRUN,{});const n=Kb(t,e+1,r);e+1+r+n>t.length&&Oi.throwError("data array too short",j.errors.BUFFER_OVERRUN,{});const i=le(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Oi.throwError("data too short",j.errors.BUFFER_OVERRUN,{});const n=le(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:le(t[e])}}function fv(t){const e=ue(t),r=FS(e,0);return r.consumed!==e.length&&Oi.throwArgumentError("invalid rlp data","data",t),r.result}const jN="address/5.8.0",El=new j(jN);function Gb(t){Ce(t,20)||El.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=ue(qt(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const zN=9007199254740991;function qN(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const hv={};for(let t=0;t<10;t++)hv[String(t)]=String(t);for(let t=0;t<26;t++)hv[String.fromCharCode(65+t)]=String(10+t);const Yb=Math.floor(qN(zN));function HN(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>hv[n]).join("");for(;e.length>=Yb;){let n=e.substring(0,Yb);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function fr(t){let e=null;if(typeof t!="string"&&El.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=Gb(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&El.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==HN(t)&&El.throwArgumentError("bad icap checksum","address",t),e=SN(t.substring(4));e.length<40;)e="0"+e;e=Gb("0x"+e)}else El.throwArgumentError("invalid address","address",t);return e}function jS(t){let e=null;try{e=fr(t.from)}catch{El.throwArgumentError("missing from address","transaction",t)}const r=Jl(ue(re.from(t.nonce).toHexString()));return fr(Ir(qt(vp([e,r])),12))}class VN extends Ds{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=fr(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return fr(bt(e.readValue().toHexString(),20))}}class KN extends Ds{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const xl=new j(hf);function zS(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let l={};n=e.map(c=>{const u=c.localName;return u||xl.throwError("cannot encode object for signature with missing names",j.errors.INVALID_ARGUMENT,{argument:"values",coder:c,value:r}),l[u]&&xl.throwError("cannot encode object for signature with duplicate names",j.errors.INVALID_ARGUMENT,{argument:"values",coder:c,value:r}),l[u]=!0,r[u]})}else xl.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&xl.throwArgumentError("types/value length mismatch","tuple",r);let i=new Xm(t.wordSize),s=new Xm(t.wordSize),o=[];e.forEach((l,c)=>{let u=n[c];if(l.dynamic){let f=s.length;l.encode(s,u);let h=i.writeUpdatableValue();o.push(g=>{h(g+f)})}else l.encode(i,u)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function qS(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readValue(),l=n.subReader(a.toNumber());try{o=s.decode(l)}catch(c){if(c.code===j.errors.BUFFER_OVERRUN)throw c;o=c,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(a.code===j.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&r.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),r[a]!=null))return;const l=r[o];l instanceof Error?Object.defineProperty(r,a,{enumerable:!0,get:()=>{throw l}}):r[a]=l});for(let s=0;s<r.length;s++){const o=r[s];o instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class WN extends Ds{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),xl.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return zS(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&xl.throwError("insufficient data length",j.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new KN(this.coder));return e.coerce(this.name,qS(e,n))}}class GN extends Ds{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class HS extends Ds{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=ue(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class YN extends HS{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,le(super.decode(e)))}}class QN extends Ds{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=ue(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,le(e.readBytes(this.size)))}}class JN extends Ds{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const ZN="0x0000000000000000000000000000000000000000",XN=re.from(-1),VS=re.from(0),eT=re.from(1),tT=re.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),rT="0x0000000000000000000000000000000000000000000000000000000000000000";class nT extends Ds{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=re.from(r),i=tT.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(eT).mul(XN)))&&this._throwError("value out-of-bounds",r)}else(n.lt(VS)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const iT="strings/5.8.0",KS=new j(iT);var Vu;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Vu||(Vu={}));var dn;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(dn||(dn={}));function sT(t,e,r,n,i){return KS.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function WS(t,e,r,n,i){if(t===dn.BAD_PREFIX||t===dn.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===dn.OVERRUN?r.length-e-1:0}function oT(t,e,r,n,i){return t===dn.OVERLONG?(n.push(i),0):(n.push(65533),WS(t,e,r))}const aT=Object.freeze({error:sT,ignore:WS,replace:oT});function GS(t,e){e==null&&(e=aT.error),t=ue(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(!(i>>7)){r.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(dn.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(dn.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(dn.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let c=t[n];if((c&192)!=128){n+=e(dn.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|c&63,n++}if(a!==null){if(a>1114111){n+=e(dn.OUT_OF_RANGE,n-1-s,t,r,a);continue}if(a>=55296&&a<=57343){n+=e(dn.UTF16_SURROGATE,n-1-s,t,r,a);continue}if(a<=o){n+=e(dn.OVERLONG,n-1-s,t,r,a);continue}r.push(a)}}return r}function qi(t,e=Vu.current){e!=Vu.current&&(KS.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return ue(r)}function lT(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function df(t,e){return lT(GS(t,e))}function cT(t,e=Vu.current){return GS(qi(t,e))}class uT extends HS{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,qi(r))}decode(e){return df(super.decode(e))}}class Gf extends Ds{constructor(e,r){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return zS(e,this.coders,r)}decode(e){return e.coerce(this.name,qS(e,this.coders))}}const Yf=new j(hf),fT=new RegExp(/^bytes([0-9]*)$/),hT=new RegExp(/^(u?int)([0-9]*)$/);class dT{constructor(e){ee(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new VN(e.name);case"bool":return new GN(e.name);case"string":return new uT(e.name);case"bytes":return new YN(e.name);case"array":return new WN(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new Gf((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new JN(e.name)}let r=e.type.match(hT);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&Yf.throwArgumentError("invalid "+r[1]+" bit length","param",e),new nT(n/8,r[1]==="int",e.name)}if(r=e.type.match(fT),r){let n=parseInt(r[1]);return(n===0||n>32)&&Yf.throwArgumentError("invalid bytes length","param",e),new QN(n,e.name)}return Yf.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new Cd(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new Xm(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(Jt.from(i)));return new Gf(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&Yf.throwError("types/values length mismatch",j.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(Jt.from(o))),i=new Gf(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(o=>this._getCoder(Jt.from(o)));return new Gf(i,"_").decode(this._getReader(ue(r),n))}}const pT=new dT;function Al(t){return qt(qi(t))}const YS="hash/5.8.0";function QS(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return ue(e)}function JS(t){t=ue(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function ZS(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):r.push(a)})};return i(t,e),r}function gT(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function mT(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let D=1;D<n;D++)s.push(i+=r());let o=r(),a=e;e+=o;let l=0,c=0;function u(){return l==0&&(c=c<<8|t[e++],l=8),c>>--l&1}const f=31,h=Math.pow(2,f),g=h>>>1,w=g>>1,v=h-1;let O=0;for(let D=0;D<f;D++)O=O<<1|u();let A=[],I=0,_=h;for(;;){let D=Math.floor(((O-I+1)*i-1)/_),R=0,$=n;for(;$-R>1;){let z=R+$>>>1;D<s[z]?$=z:R=z}if(R==0)break;A.push(R);let M=I+Math.floor(_*s[R]/i),B=I+Math.floor(_*s[R+1]/i)-1;for(;!((M^B)&g);)O=O<<1&v|u(),M=M<<1&v,B=B<<1&v|1;for(;M&~B&w;)O=O&g|O<<1&v>>>1|u(),M=M<<1^g,B=(B^g)<<1|g|1;I=M,_=1+B-M}let T=n-4;return A.map(D=>{switch(D-T){case 3:return T+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return T+256+(t[a++]<<8|t[a++]);case 1:return T+t[a++];default:return D-1}})}function yT(t){let e=0;return()=>t[e++]}function wT(t){return yT(mT(t))}function vT(t){return t&1?~t>>1:t>>1}function bT(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function Qb(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function ET(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=vT(e());return r}function Od(t,e){let r=Qb(t(),t),n=t(),i=Qb(n,t),s=bT(n,t);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)r.push(i[o]+a);return e?r.map(o=>e[o]):r}function xT(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(_T(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(ST(r,t))}return gT(ZS(e))}function AT(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function XS(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)ET(t,r).forEach((s,o)=>n[o].push(s));return n}function _T(t,e){let r=1+e(),n=e(),i=AT(e),s=XS(i.length,1+t,e);return ZS(s.map((o,a)=>{const l=o[0],c=o.slice(1);return Array(i[a]).fill(void 0).map((u,f)=>{let h=f*n;return[l+f*r,c.map(g=>g+h)]})}))}function ST(t,e){let r=1+e();return XS(r,1+t,e).map(i=>[i[0],i.slice(1)])}function IT(t){let e=Od(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let c=Od(t,e);if(c.length==0)break;n.push({set:new Set(c),node:r()})}n.sort((c,u)=>u.set.size-c.set.size);let i=t(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,l=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:l}}}function PT(){return wT(QS("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const bp=PT(),CT=new Set(Od(bp)),OT=new Set(Od(bp)),NT=xT(bp),TT=IT(bp),Jb=45,Zb=95;function eI(t){return cT(t)}function kT(t){return t.filter(e=>e!=65039)}function tI(t){for(let e of t.split(".")){let r=eI(e);try{for(let n=r.lastIndexOf(Zb)-1;n>=0;n--)if(r[n]!==Zb)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===Jb&&r[3]===Jb)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function DT(t){return tI(RT(t,kT))}function RT(t,e){let r=eI(t).reverse(),n=[];for(;r.length;){let i=MT(r);if(i){n.push(...e(i));continue}let s=r.pop();if(CT.has(s)){n.push(s);continue}if(OT.has(s))continue;let o=NT[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return tI($T(String.fromCodePoint(...n)))}function $T(t){return t.normalize("NFC")}function MT(t,e){var r;let n=TT,i,s,o=[],a=t.length;for(;a;){let l=t[--a];if(n=(r=n.branches.find(c=>c.set.has(l)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=l;else if(n.check&&l===s)break;o.push(l),n.fe0f&&(o.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),t.length=a)}return i}const BT=new j(YS),rI=new Uint8Array(32);rI.fill(0);function Xb(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function nI(t){const e=qi(DT(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(Xb(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(Xb(e.slice(n))),r}function Fh(t){typeof t!="string"&&BT.throwArgumentError("invalid ENS name; not a string","name",t);let e=rI;const r=nI(t);for(;r.length;)e=qt(mn([e,qt(r.pop())]));return le(e)}function UT(t){return le(mn(nI(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}var LT=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const At=new j(YS),iI=new Uint8Array(32);iI.fill(0);const FT=re.from(-1),sI=re.from(0),oI=re.from(1),jT=re.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function zT(t){const e=ue(t),r=e.length%32;return r?Gr([e,iI.slice(r)]):le(e)}const qT=bt(oI.toHexString(),32),HT=bt(sI.toHexString(),32),e2={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},q0=["name","version","chainId","verifyingContract","salt"];function t2(t){return function(e){return typeof e!="string"&&At.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const VT={name:t2("name"),version:t2("version"),chainId:function(t){try{return re.from(t).toString()}catch{}return At.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return fr(t).toLowerCase()}catch{}return At.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=ue(t);if(e.length!==32)throw new Error("bad length");return le(e)}catch{}return At.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function H0(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&At.throwArgumentError("invalid numeric width","type",t);const i=jT.mask(r?n-1:n),s=r?i.add(oI).mul(FT):sI;return function(o){const a=re.from(o);return(a.lt(s)||a.gt(i))&&At.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),bt(a.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&At.throwArgumentError("invalid bytes width","type",t),function(n){return ue(n).length!==r&&At.throwArgumentError(`invalid length for ${t}`,"value",n),zT(n)}}}switch(t){case"address":return function(e){return bt(fr(e),32)};case"bool":return function(e){return e?qT:HT};case"bytes":return function(e){return qt(e)};case"string":return function(e){return Al(e)}}return null}function r2(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class cn{constructor(e){ee(this,"types",Object.freeze(Is(e))),ee(this,"_encoderCache",{}),ee(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(a=>{r[a]={},n[a]=[],i[a]={}});for(const a in e){const l={};e[a].forEach(c=>{l[c.name]&&At.throwArgumentError(`duplicate variable name ${JSON.stringify(c.name)} in ${JSON.stringify(a)}`,"types",e),l[c.name]=!0;const u=c.type.match(/^([^\x5b]*)(\x5b|$)/)[1];u===a&&At.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),!H0(u)&&(n[u]||At.throwArgumentError(`unknown type ${JSON.stringify(u)}`,"types",e),n[u].push(a),r[a][u]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?At.throwArgumentError("missing primary type","types",e):s.length>1&&At.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),ee(this,"primaryType",s[0]);function o(a,l){l[a]&&At.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(r[a]).forEach(c=>{n[c]&&(o(c,l),Object.keys(l).forEach(u=>{i[u][c]=!0}))}),delete l[a]}o(this.primaryType,{});for(const a in i){const l=Object.keys(i[a]);l.sort(),this._types[a]=r2(a,e[a])+l.map(c=>r2(c,e[c])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=H0(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),o=parseInt(r[3]);return a=>{o>=0&&a.length!==o&&At.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(s);return this._types[i]&&(l=l.map(qt)),qt(Gr(l))}}const n=this.types[e];if(n){const i=Al(this._types[e]);return s=>{const o=n.map(({name:a,type:l})=>{const c=this.getEncoder(l)(s[a]);return this._types[l]?qt(c):c});return o.unshift(i),Gr(o)}}return At.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||At.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return qt(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(H0(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&r.length!==a&&At.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(l=>this._visit(o,l,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,r[a],n),o),{}):At.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new cn(e)}static getPrimaryType(e){return cn.from(e).primaryType}static hashStruct(e,r,n){return cn.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=e2[n];i||At.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>q0.indexOf(n.name)-q0.indexOf(i.name)),cn.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return Gr(["0x1901",cn.hashDomain(e),cn.from(r).hash(n)])}static hash(e,r,n){return qt(cn.encode(e,r,n))}static resolveNames(e,r,n,i){return LT(this,void 0,void 0,function*(){e=Vt(e);const s={};e.verifyingContract&&!Ce(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=cn.from(r);o.visit(n,(a,l)=>(a==="address"&&!Ce(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:n}})}static getPayload(e,r,n){cn.hashDomain(e);const i={},s=[];q0.forEach(l=>{const c=e[l];c!=null&&(i[l]=VT[l](c),s.push({name:l,type:e2[l]}))});const o=cn.from(r),a=Vt(r);return a.EIP712Domain?At.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(l,c)=>{if(l.match(/^bytes(\d*)/))return le(ue(c));if(l.match(/^u?int/))return re.from(c).toString();switch(l){case"address":return c.toLowerCase();case"bool":return!!c;case"string":return typeof c!="string"&&At.throwArgumentError("invalid string","value",c),c}return At.throwArgumentError("unsupported type","type",l)})}}}const xt=new j(hf);class KT extends ff{}class WT extends ff{}class GT extends ff{}class ey extends ff{static isIndexed(e){return!!(e&&e._isIndexed)}}const YT={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function n2(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class i2{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,ee(this,"fragments",r.map(n=>ys.from(n)).filter(n=>n!=null)),ee(this,"_abiCoder",Ri(new.target,"getAbiCoder")()),ee(this,"functions",{}),ee(this,"errors",{}),ee(this,"events",{}),ee(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){xt.warn("duplicate definition - constructor");return}ee(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){xt.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||ee(this,"deploy",ki.from({payable:!1,type:"constructor"})),ee(this,"_isInterface",!0)}format(e){e||(e=Pe.full),e===Pe.sighash&&xt.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===Pe.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return pT}static getAddress(e){return fr(e)}static getSighash(e){return Ir(Al(e.format()),0,4)}static getEventTopic(e){return Al(e.format())}getFunction(e){if(Ce(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];xt.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?xt.throwArgumentError("no matching function","name",n):i.length>1&&xt.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[Di.fromString(e).format()];return r||xt.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(Ce(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];xt.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?xt.throwArgumentError("no matching event","name",n):i.length>1&&xt.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[ds.fromString(e).format()];return r||xt.throwArgumentError("no matching event","signature",e),r}getError(e){if(Ce(e)){const n=Ri(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}xt.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?xt.throwArgumentError("no matching error","name",n):i.length>1&&xt.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[Di.fromString(e).format()];return r||xt.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return Ri(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),Ri(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=ue(r);return le(n.slice(0,4))!==this.getSighash(e)&&xt.throwArgumentError(`data signature does not match error ${e.name}.`,"data",le(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),le(mn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=ue(r);return le(n.slice(0,4))!==this.getSighash(e)&&xt.throwArgumentError(`data signature does not match function ${e.name}.`,"data",le(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),le(mn([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=ue(r),i=null,s="",o=null,a=null,l=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const c=le(n.slice(0,4)),u=YT[c];if(u)o=this._abiCoder.decode(u.inputs,n.slice(4)),a=u.name,l=u.signature,u.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const f=this.getError(c);o=this._abiCoder.decode(f.inputs,n.slice(4)),a=f.name,l=f.format()}catch{}break}}return xt.throwError("call revert exception"+s,j.errors.CALL_EXCEPTION,{method:e.format(),data:le(r),errorArgs:o,errorName:a,errorSignature:l,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),le(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&xt.throwError("too many arguments for "+e.format(),j.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?Al(o):s.type==="bytes"?qt(le(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=re.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),bt(le(o),32));for(r.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&xt.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?xt.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(l=>i(a,l))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&xt.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const l=r[a];if(o.indexed)if(o.type==="string")n.push(Al(l));else if(o.type==="bytes")n.push(qt(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let h=this.getEventTopic(e);(!Ce(n[0],32)||n[0].toLowerCase()!==h)&&xt.throwError("fragment/topic mismatch",j.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:h,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((h,g)=>{h.indexed?h.type==="string"||h.type==="bytes"||h.baseType==="tuple"||h.baseType==="array"?(i.push(Jt.fromObject({type:"bytes32",name:h.name})),o.push(!0)):(i.push(h),o.push(!1)):(s.push(h),o.push(!1))});let a=n!=null?this._abiCoder.decode(i,mn(n)):null,l=this._abiCoder.decode(s,r,!0),c=[],u=0,f=0;e.inputs.forEach((h,g)=>{if(h.indexed)if(a==null)c[g]=new ey({_isIndexed:!0,hash:null});else if(o[g])c[g]=new ey({_isIndexed:!0,hash:a[f++]});else try{c[g]=a[f++]}catch(w){c[g]=w}else try{c[g]=l[u++]}catch(w){c[g]=w}if(h.name&&c[h.name]==null){const w=c[g];w instanceof Error?Object.defineProperty(c,h.name,{enumerable:!0,get:()=>{throw n2(`property ${JSON.stringify(h.name)}`,w)}}):c[h.name]=w}});for(let h=0;h<c.length;h++){const g=c[h];g instanceof Error&&Object.defineProperty(c,h,{enumerable:!0,get:()=>{throw n2(`index ${h}`,g)}})}return Object.freeze(c)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new WT({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:re.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new KT({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=le(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new GT({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const QT="abstract-provider/5.8.0";var JT=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const ZT=new j(QT);class XT extends ff{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Ep{constructor(){ZT.checkAbstract(new.target,Ep),ee(this,"_isProvider",!0)}getFeeData(){return JT(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield Rt({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=re.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const ek="abstract-signer/5.8.0";var Gn=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const On=new j(ek),tk=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],rk=[j.errors.INSUFFICIENT_FUNDS,j.errors.NONCE_EXPIRED,j.errors.REPLACEMENT_UNDERPRICED];class pf{constructor(){On.checkAbstract(new.target,pf),ee(this,"_isSigner",!0)}getBalance(e){return Gn(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Gn(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Gn(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield Rt(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Gn(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield Rt(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Gn(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Gn(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Gn(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Gn(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Gn(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)tk.indexOf(n)===-1&&On.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Vt(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&On.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Gn(this,void 0,void 0,function*(){const r=yield Rt(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Gn(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&On.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?On.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&On.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&On.throwError("network does not support EIP-1559",j.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):On.throwError("failed to get consistent fee data",j.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(rk.indexOf(i.code)>=0)throw i;return On.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&On.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield Rt(r)})}_checkProvider(e){this.provider||On.throwError("missing provider",j.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}class dv extends pf{constructor(e,r){super(),ee(this,"address",e),ee(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{On.throwError(e,j.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new dv(this.address,e)}}var aI={},ve={},gf=lI;function lI(t,e){if(!t)throw new Error(e||"Assertion failed")}lI.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var ty={exports:{}};typeof Object.create=="function"?ty.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ty.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var nk=ty.exports,ik=gf,sk=nk;ve.inherits=sk;function ok(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function ak(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):ok(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}ve.toArray=ak;function lk(t){for(var e="",r=0;r<t.length;r++)e+=uI(t[r].toString(16));return e}ve.toHex=lk;function cI(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}ve.htonl=cI;function ck(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=cI(i)),r+=fI(i.toString(16))}return r}ve.toHex32=ck;function uI(t){return t.length===1?"0"+t:t}ve.zero2=uI;function fI(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}ve.zero8=fI;function uk(t,e,r,n){var i=r-e;ik(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var l;n==="big"?l=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:l=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=l>>>0}return s}ve.join32=uk;function fk(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}ve.split32=fk;function hk(t,e){return t>>>e|t<<32-e}ve.rotr32=hk;function dk(t,e){return t<<e|t>>>32-e}ve.rotl32=dk;function pk(t,e){return t+e>>>0}ve.sum32=pk;function gk(t,e,r){return t+e+r>>>0}ve.sum32_3=gk;function mk(t,e,r,n){return t+e+r+n>>>0}ve.sum32_4=mk;function yk(t,e,r,n,i){return t+e+r+n+i>>>0}ve.sum32_5=yk;function wk(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}ve.sum64=wk;function vk(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}ve.sum64_hi=vk;function bk(t,e,r,n){var i=e+n;return i>>>0}ve.sum64_lo=bk;function Ek(t,e,r,n,i,s,o,a){var l=0,c=e;c=c+n>>>0,l+=c<e?1:0,c=c+s>>>0,l+=c<s?1:0,c=c+a>>>0,l+=c<a?1:0;var u=t+r+i+o+l;return u>>>0}ve.sum64_4_hi=Ek;function xk(t,e,r,n,i,s,o,a){var l=e+n+s+a;return l>>>0}ve.sum64_4_lo=xk;function Ak(t,e,r,n,i,s,o,a,l,c){var u=0,f=e;f=f+n>>>0,u+=f<e?1:0,f=f+s>>>0,u+=f<s?1:0,f=f+a>>>0,u+=f<a?1:0,f=f+c>>>0,u+=f<c?1:0;var h=t+r+i+o+l+u;return h>>>0}ve.sum64_5_hi=Ak;function _k(t,e,r,n,i,s,o,a,l,c){var u=e+n+s+a+c;return u>>>0}ve.sum64_5_lo=_k;function Sk(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}ve.rotr64_hi=Sk;function Ik(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}ve.rotr64_lo=Ik;function Pk(t,e,r){return t>>>r}ve.shr64_hi=Pk;function Ck(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}ve.shr64_lo=Ck;var uc={},s2=ve,Ok=gf;function xp(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}uc.BlockHash=xp;xp.prototype.update=function(e,r){if(e=s2.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=s2.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};xp.prototype.digest=function(e){return this.update(this._pad()),Ok(this.pending===null),this._digest(e)};xp.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var fc={},Gi={},Nk=ve,Ui=Nk.rotr32;function Tk(t,e,r,n){if(t===0)return hI(e,r,n);if(t===1||t===3)return pI(e,r,n);if(t===2)return dI(e,r,n)}Gi.ft_1=Tk;function hI(t,e,r){return t&e^~t&r}Gi.ch32=hI;function dI(t,e,r){return t&e^t&r^e&r}Gi.maj32=dI;function pI(t,e,r){return t^e^r}Gi.p32=pI;function kk(t){return Ui(t,2)^Ui(t,13)^Ui(t,22)}Gi.s0_256=kk;function Dk(t){return Ui(t,6)^Ui(t,11)^Ui(t,25)}Gi.s1_256=Dk;function Rk(t){return Ui(t,7)^Ui(t,18)^t>>>3}Gi.g0_256=Rk;function $k(t){return Ui(t,17)^Ui(t,19)^t>>>10}Gi.g1_256=$k;var Zl=ve,Mk=uc,Bk=Gi,V0=Zl.rotl32,Pc=Zl.sum32,Uk=Zl.sum32_5,Lk=Bk.ft_1,gI=Mk.BlockHash,Fk=[1518500249,1859775393,2400959708,3395469782];function Hi(){if(!(this instanceof Hi))return new Hi;gI.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Zl.inherits(Hi,gI);var jk=Hi;Hi.blockSize=512;Hi.outSize=160;Hi.hmacStrength=80;Hi.padLength=64;Hi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=V0(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],c=this.h[4];for(i=0;i<n.length;i++){var u=~~(i/20),f=Uk(V0(s,5),Lk(u,o,a,l),c,n[i],Fk[u]);c=l,l=a,a=V0(o,30),o=s,s=f}this.h[0]=Pc(this.h[0],s),this.h[1]=Pc(this.h[1],o),this.h[2]=Pc(this.h[2],a),this.h[3]=Pc(this.h[3],l),this.h[4]=Pc(this.h[4],c)};Hi.prototype._digest=function(e){return e==="hex"?Zl.toHex32(this.h,"big"):Zl.split32(this.h,"big")};var Xl=ve,zk=uc,hc=Gi,qk=gf,Yn=Xl.sum32,Hk=Xl.sum32_4,Vk=Xl.sum32_5,Kk=hc.ch32,Wk=hc.maj32,Gk=hc.s0_256,Yk=hc.s1_256,Qk=hc.g0_256,Jk=hc.g1_256,mI=zk.BlockHash,Zk=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Vi(){if(!(this instanceof Vi))return new Vi;mI.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Zk,this.W=new Array(64)}Xl.inherits(Vi,mI);var yI=Vi;Vi.blockSize=512;Vi.outSize=256;Vi.hmacStrength=192;Vi.padLength=64;Vi.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Hk(Jk(n[i-2]),n[i-7],Qk(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],c=this.h[4],u=this.h[5],f=this.h[6],h=this.h[7];for(qk(this.k.length===n.length),i=0;i<n.length;i++){var g=Vk(h,Yk(c),Kk(c,u,f),this.k[i],n[i]),w=Yn(Gk(s),Wk(s,o,a));h=f,f=u,u=c,c=Yn(l,g),l=a,a=o,o=s,s=Yn(g,w)}this.h[0]=Yn(this.h[0],s),this.h[1]=Yn(this.h[1],o),this.h[2]=Yn(this.h[2],a),this.h[3]=Yn(this.h[3],l),this.h[4]=Yn(this.h[4],c),this.h[5]=Yn(this.h[5],u),this.h[6]=Yn(this.h[6],f),this.h[7]=Yn(this.h[7],h)};Vi.prototype._digest=function(e){return e==="hex"?Xl.toHex32(this.h,"big"):Xl.split32(this.h,"big")};var ry=ve,wI=yI;function Ps(){if(!(this instanceof Ps))return new Ps;wI.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}ry.inherits(Ps,wI);var Xk=Ps;Ps.blockSize=512;Ps.outSize=224;Ps.hmacStrength=192;Ps.padLength=64;Ps.prototype._digest=function(e){return e==="hex"?ry.toHex32(this.h.slice(0,7),"big"):ry.split32(this.h.slice(0,7),"big")};var rn=ve,eD=uc,tD=gf,Li=rn.rotr64_hi,Fi=rn.rotr64_lo,vI=rn.shr64_hi,bI=rn.shr64_lo,js=rn.sum64,K0=rn.sum64_hi,W0=rn.sum64_lo,rD=rn.sum64_4_hi,nD=rn.sum64_4_lo,iD=rn.sum64_5_hi,sD=rn.sum64_5_lo,EI=eD.BlockHash,oD=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function di(){if(!(this instanceof di))return new di;EI.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=oD,this.W=new Array(160)}rn.inherits(di,EI);var xI=di;di.blockSize=1024;di.outSize=512;di.hmacStrength=192;di.padLength=128;di.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=yD(n[i-4],n[i-3]),o=wD(n[i-4],n[i-3]),a=n[i-14],l=n[i-13],c=gD(n[i-30],n[i-29]),u=mD(n[i-30],n[i-29]),f=n[i-32],h=n[i-31];n[i]=rD(s,o,a,l,c,u,f,h),n[i+1]=nD(s,o,a,l,c,u,f,h)}};di.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],c=this.h[5],u=this.h[6],f=this.h[7],h=this.h[8],g=this.h[9],w=this.h[10],v=this.h[11],O=this.h[12],A=this.h[13],I=this.h[14],_=this.h[15];tD(this.k.length===n.length);for(var T=0;T<n.length;T+=2){var D=I,R=_,$=dD(h,g),M=pD(h,g),B=aD(h,g,w,v,O),z=lD(h,g,w,v,O,A),K=this.k[T],L=this.k[T+1],P=n[T],p=n[T+1],d=iD(D,R,$,M,B,z,K,L,P,p),m=sD(D,R,$,M,B,z,K,L,P,p);D=fD(i,s),R=hD(i,s),$=cD(i,s,o,a,l),M=uD(i,s,o,a,l,c);var b=K0(D,R,$,M),E=W0(D,R,$,M);I=O,_=A,O=w,A=v,w=h,v=g,h=K0(u,f,d,m),g=W0(f,f,d,m),u=l,f=c,l=o,c=a,o=i,a=s,i=K0(d,m,b,E),s=W0(d,m,b,E)}js(this.h,0,i,s),js(this.h,2,o,a),js(this.h,4,l,c),js(this.h,6,u,f),js(this.h,8,h,g),js(this.h,10,w,v),js(this.h,12,O,A),js(this.h,14,I,_)};di.prototype._digest=function(e){return e==="hex"?rn.toHex32(this.h,"big"):rn.split32(this.h,"big")};function aD(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function lD(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function cD(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function uD(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function fD(t,e){var r=Li(t,e,28),n=Li(e,t,2),i=Li(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function hD(t,e){var r=Fi(t,e,28),n=Fi(e,t,2),i=Fi(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function dD(t,e){var r=Li(t,e,14),n=Li(t,e,18),i=Li(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function pD(t,e){var r=Fi(t,e,14),n=Fi(t,e,18),i=Fi(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function gD(t,e){var r=Li(t,e,1),n=Li(t,e,8),i=vI(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function mD(t,e){var r=Fi(t,e,1),n=Fi(t,e,8),i=bI(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function yD(t,e){var r=Li(t,e,19),n=Li(e,t,29),i=vI(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function wD(t,e){var r=Fi(t,e,19),n=Fi(e,t,29),i=bI(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var ny=ve,AI=xI;function Cs(){if(!(this instanceof Cs))return new Cs;AI.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}ny.inherits(Cs,AI);var vD=Cs;Cs.blockSize=1024;Cs.outSize=384;Cs.hmacStrength=192;Cs.padLength=128;Cs.prototype._digest=function(e){return e==="hex"?ny.toHex32(this.h.slice(0,12),"big"):ny.split32(this.h.slice(0,12),"big")};fc.sha1=jk;fc.sha224=Xk;fc.sha256=yI;fc.sha384=vD;fc.sha512=xI;var _I={},ka=ve,bD=uc,Qf=ka.rotl32,o2=ka.sum32,Cc=ka.sum32_3,a2=ka.sum32_4,SI=bD.BlockHash;function Ki(){if(!(this instanceof Ki))return new Ki;SI.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}ka.inherits(Ki,SI);_I.ripemd160=Ki;Ki.blockSize=512;Ki.outSize=160;Ki.hmacStrength=192;Ki.padLength=64;Ki.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=n,c=i,u=s,f=o,h=a,g=0;g<80;g++){var w=o2(Qf(a2(n,l2(g,i,s,o),e[AD[g]+r],ED(g)),SD[g]),a);n=a,a=o,o=Qf(s,10),s=i,i=w,w=o2(Qf(a2(l,l2(79-g,c,u,f),e[_D[g]+r],xD(g)),ID[g]),h),l=h,h=f,f=Qf(u,10),u=c,c=w}w=Cc(this.h[1],s,f),this.h[1]=Cc(this.h[2],o,h),this.h[2]=Cc(this.h[3],a,l),this.h[3]=Cc(this.h[4],n,c),this.h[4]=Cc(this.h[0],i,u),this.h[0]=w};Ki.prototype._digest=function(e){return e==="hex"?ka.toHex32(this.h,"little"):ka.split32(this.h,"little")};function l2(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function ED(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function xD(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var AD=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_D=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],SD=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],ID=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],PD=ve,CD=gf;function ec(t,e,r){if(!(this instanceof ec))return new ec(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(PD.toArray(e,r))}var OD=ec;ec.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),CD(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};ec.prototype.update=function(e,r){return this.inner.update(e,r),this};ec.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=ve,e.common=uc,e.sha=fc,e.ripemd=_I,e.hmac=OD,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(aI);const Ii=Mo(aI);function dc(t,e,r){return r={path:e,exports:{},require:function(n,i){return ND(n,i??r.path)}},t(r,r.exports),r.exports}function ND(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var pv=II;function II(t,e){if(!t)throw new Error(e||"Assertion failed")}II.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var li=dc(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var c=0;c<o.length;c++)l[c]=o[c]|0;return l}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var c=0;c<o.length;c+=2)l.push(parseInt(o[c]+o[c+1],16))}else for(var c=0;c<o.length;c++){var u=o.charCodeAt(c),f=u>>8,h=u&255;f?l.push(f,h):l.push(h)}return l}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a}r.toHex=s,r.encode=function(a,l){return l==="hex"?s(a):a}}),xn=dc(function(t,e){var r=e;r.assert=pv,r.toArray=li.toArray,r.zero2=li.zero2,r.toHex=li.toHex,r.encode=li.encode;function n(l,c,u){var f=new Array(Math.max(l.bitLength(),u)+1),h;for(h=0;h<f.length;h+=1)f[h]=0;var g=1<<c+1,w=l.clone();for(h=0;h<f.length;h++){var v,O=w.andln(g-1);w.isOdd()?(O>(g>>1)-1?v=(g>>1)-O:v=O,w.isubn(v)):v=0,f[h]=v,w.iushrn(1)}return f}r.getNAF=n;function i(l,c){var u=[[],[]];l=l.clone(),c=c.clone();for(var f=0,h=0,g;l.cmpn(-f)>0||c.cmpn(-h)>0;){var w=l.andln(3)+f&3,v=c.andln(3)+h&3;w===3&&(w=-1),v===3&&(v=-1);var O;w&1?(g=l.andln(7)+f&7,(g===3||g===5)&&v===2?O=-w:O=w):O=0,u[0].push(O);var A;v&1?(g=c.andln(7)+h&7,(g===3||g===5)&&w===2?A=-v:A=v):A=0,u[1].push(A),2*f===O+1&&(f=1-f),2*h===A+1&&(h=1-h),l.iushrn(1),c.iushrn(1)}return u}r.getJSF=i;function s(l,c,u){var f="_"+c;l.prototype[c]=function(){return this[f]!==void 0?this[f]:this[f]=u.call(this)}}r.cachedProperty=s;function o(l){return typeof l=="string"?r.toArray(l,"hex"):l}r.parseBytes=o;function a(l){return new fe(l,"hex","le")}r.intFromLE=a}),Nd=xn.getNAF,TD=xn.getJSF,Td=xn.assert;function Fo(t,e){this.type=t,this.p=new fe(e.p,16),this.red=e.prime?fe.red(e.prime):fe.mont(this.p),this.zero=new fe(0).toRed(this.red),this.one=new fe(1).toRed(this.red),this.two=new fe(2).toRed(this.red),this.n=e.n&&new fe(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var qa=Fo;Fo.prototype.point=function(){throw new Error("Not implemented")};Fo.prototype.validate=function(){throw new Error("Not implemented")};Fo.prototype._fixedNafMul=function(e,r){Td(e.precomputed);var n=e._getDoubles(),i=Nd(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,l;for(a=0;a<i.length;a+=n.step){l=0;for(var c=a+n.step-1;c>=a;c--)l=(l<<1)+i[c];o.push(l)}for(var u=this.jpoint(null,null,null),f=this.jpoint(null,null,null),h=s;h>0;h--){for(a=0;a<o.length;a++)l=o[a],l===h?f=f.mixedAdd(n.points[a]):l===-h&&(f=f.mixedAdd(n.points[a].neg()));u=u.add(f)}return u.toP()};Fo.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Nd(r,n,this._bitLength),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var c=0;l>=0&&o[l]===0;l--)c++;if(l>=0&&c++,a=a.dblp(c),l<0)break;var u=o[l];Td(u!==0),e.type==="affine"?u>0?a=a.mixedAdd(s[u-1>>1]):a=a.mixedAdd(s[-u-1>>1].neg()):u>0?a=a.add(s[u-1>>1]):a=a.add(s[-u-1>>1].neg())}return e.type==="affine"?a.toP():a};Fo.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,l=this._wnafT3,c=0,u,f,h;for(u=0;u<i;u++){h=r[u];var g=h._getNAFPoints(e);o[u]=g.wnd,a[u]=g.points}for(u=i-1;u>=1;u-=2){var w=u-1,v=u;if(o[w]!==1||o[v]!==1){l[w]=Nd(n[w],o[w],this._bitLength),l[v]=Nd(n[v],o[v],this._bitLength),c=Math.max(l[w].length,c),c=Math.max(l[v].length,c);continue}var O=[r[w],null,null,r[v]];r[w].y.cmp(r[v].y)===0?(O[1]=r[w].add(r[v]),O[2]=r[w].toJ().mixedAdd(r[v].neg())):r[w].y.cmp(r[v].y.redNeg())===0?(O[1]=r[w].toJ().mixedAdd(r[v]),O[2]=r[w].add(r[v].neg())):(O[1]=r[w].toJ().mixedAdd(r[v]),O[2]=r[w].toJ().mixedAdd(r[v].neg()));var A=[-3,-1,-5,-7,0,7,5,1,3],I=TD(n[w],n[v]);for(c=Math.max(I[0].length,c),l[w]=new Array(c),l[v]=new Array(c),f=0;f<c;f++){var _=I[0][f]|0,T=I[1][f]|0;l[w][f]=A[(_+1)*3+(T+1)],l[v][f]=0,a[w]=O}}var D=this.jpoint(null,null,null),R=this._wnafT4;for(u=c;u>=0;u--){for(var $=0;u>=0;){var M=!0;for(f=0;f<i;f++)R[f]=l[f][u]|0,R[f]!==0&&(M=!1);if(!M)break;$++,u--}if(u>=0&&$++,D=D.dblp($),u<0)break;for(f=0;f<i;f++){var B=R[f];B!==0&&(B>0?h=a[f][B-1>>1]:B<0&&(h=a[f][-B-1>>1].neg()),h.type==="affine"?D=D.mixedAdd(h):D=D.add(h))}}for(u=0;u<i;u++)a[u]=null;return s?D:D.toP()};function Vn(t,e){this.curve=t,this.type=e,this.precomputed=null}Fo.BasePoint=Vn;Vn.prototype.eq=function(){throw new Error("Not implemented")};Vn.prototype.validate=function(){return this.curve.validate(this)};Fo.prototype.decodePoint=function(e,r){e=xn.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Td(e[e.length-1]%2===0):e[0]===7&&Td(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Vn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Vn.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Vn.prototype.encode=function(e,r){return xn.encode(this._encode(r),e)};Vn.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Vn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Vn.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Vn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Vn.prototype._getBeta=function(){return null};Vn.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var gv=dc(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),kD=xn.assert;function Kn(t){qa.call(this,"short",t),this.a=new fe(t.a,16).toRed(this.red),this.b=new fe(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}gv(Kn,qa);var DD=Kn;Kn.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new fe(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new fe(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],kD(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new fe(a.a,16),b:new fe(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Kn.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:fe.mont(e),n=new fe(2).toRed(r).redInvm(),i=n.redNeg(),s=new fe(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Kn.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new fe(1),o=new fe(0),a=new fe(0),l=new fe(1),c,u,f,h,g,w,v,O=0,A,I;n.cmpn(0)!==0;){var _=i.div(n);A=i.sub(_.mul(n)),I=a.sub(_.mul(s));var T=l.sub(_.mul(o));if(!f&&A.cmp(r)<0)c=v.neg(),u=s,f=A.neg(),h=I;else if(f&&++O===2)break;v=A,i=n,n=A,a=s,s=I,l=o,o=T}g=A.neg(),w=I;var D=f.sqr().add(h.sqr()),R=g.sqr().add(w.sqr());return R.cmp(D)>=0&&(g=c,w=u),f.negative&&(f=f.neg(),h=h.neg()),g.negative&&(g=g.neg(),w=w.neg()),[{a:f,b:h},{a:g,b:w}]};Kn.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),l=o.mul(i.a),c=s.mul(n.b),u=o.mul(i.b),f=e.sub(a).sub(l),h=c.add(u).neg();return{k1:f,k2:h}};Kn.prototype.pointFromX=function(e,r){e=new fe(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};Kn.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Kn.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),l=e[o],c=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),c=c.neg(!0)),i[o*2]=l,i[o*2+1]=c,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var u=this._wnafMulAdd(1,i,s,o*2,n),f=0;f<o*2;f++)i[f]=null,s[f]=null;return u};function tr(t,e,r,n){qa.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new fe(e,16),this.y=new fe(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}gv(tr,qa.BasePoint);Kn.prototype.point=function(e,r,n){return new tr(this,e,r,n)};Kn.prototype.pointFromJSON=function(e,r){return tr.fromJSON(this,e,r)};tr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};tr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};tr.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};tr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};tr.prototype.isInfinity=function(){return this.inf};tr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};tr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};tr.prototype.getX=function(){return this.x.fromRed()};tr.prototype.getY=function(){return this.y.fromRed()};tr.prototype.mul=function(e){return e=new fe(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};tr.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};tr.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};tr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};tr.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};tr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function hr(t,e,r,n){qa.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new fe(0)):(this.x=new fe(e,16),this.y=new fe(r,16),this.z=new fe(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}gv(hr,qa.BasePoint);Kn.prototype.jpoint=function(e,r,n){return new hr(this,e,r,n)};hr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};hr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};hr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),l=i.redSub(s),c=o.redSub(a);if(l.cmpn(0)===0)return c.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=l.redSqr(),f=u.redMul(l),h=i.redMul(u),g=c.redSqr().redIAdd(f).redISub(h).redISub(h),w=c.redMul(h.redISub(g)).redISub(o.redMul(f)),v=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(g,w,v)};hr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),u=c.redMul(a),f=n.redMul(c),h=l.redSqr().redIAdd(u).redISub(f).redISub(f),g=l.redMul(f.redISub(h)).redISub(s.redMul(u)),w=this.z.redMul(a);return this.curve.jpoint(h,g,w)};hr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,l=this.z,c=l.redSqr().redSqr(),u=a.redAdd(a);for(r=0;r<e;r++){var f=o.redSqr(),h=u.redSqr(),g=h.redSqr(),w=f.redAdd(f).redIAdd(f).redIAdd(i.redMul(c)),v=o.redMul(h),O=w.redSqr().redISub(v.redAdd(v)),A=v.redISub(O),I=w.redMul(A);I=I.redIAdd(I).redISub(g);var _=u.redMul(l);r+1<e&&(c=c.redMul(g)),o=O,l=_,u=I}return this.curve.jpoint(o,u.redMul(s),l)};hr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};hr.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i),c=l.redSqr().redISub(a).redISub(a),u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),e=c,r=l.redMul(a.redISub(c)).redISub(u),n=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),h=this.y.redSqr(),g=h.redSqr(),w=this.x.redAdd(h).redSqr().redISub(f).redISub(g);w=w.redIAdd(w);var v=f.redAdd(f).redIAdd(f),O=v.redSqr(),A=g.redIAdd(g);A=A.redIAdd(A),A=A.redIAdd(A),e=O.redISub(w).redISub(w),r=v.redMul(w.redISub(e)).redISub(A),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};hr.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=l.redSqr().redISub(a).redISub(a);e=c;var u=o.redIAdd(o);u=u.redIAdd(u),u=u.redIAdd(u),r=l.redMul(a.redISub(c)).redISub(u),n=this.y.redAdd(this.y)}else{var f=this.z.redSqr(),h=this.y.redSqr(),g=this.x.redMul(h),w=this.x.redSub(f).redMul(this.x.redAdd(f));w=w.redAdd(w).redIAdd(w);var v=g.redIAdd(g);v=v.redIAdd(v);var O=v.redAdd(v);e=w.redSqr().redISub(O),n=this.y.redAdd(this.z).redSqr().redISub(h).redISub(f);var A=h.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A),r=w.redMul(v.redISub(e)).redISub(A)}return this.curve.jpoint(e,r,n)};hr.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),c=r.redAdd(r);c=c.redIAdd(c);var u=c.redMul(a),f=l.redSqr().redISub(u.redAdd(u)),h=u.redISub(f),g=a.redSqr();g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var w=l.redMul(h).redISub(g),v=n.redAdd(n).redMul(i);return this.curve.jpoint(f,w,v)};hr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var l=a.redSqr(),c=i.redIAdd(i);c=c.redIAdd(c),c=c.redIAdd(c),c=c.redIAdd(c);var u=s.redIAdd(a).redSqr().redISub(o).redISub(l).redISub(c),f=r.redMul(u);f=f.redIAdd(f),f=f.redIAdd(f);var h=this.x.redMul(l).redISub(f);h=h.redIAdd(h),h=h.redIAdd(h);var g=this.y.redMul(u.redMul(c.redISub(u)).redISub(a.redMul(l)));g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var w=this.z.redAdd(a).redSqr().redISub(n).redISub(l);return this.curve.jpoint(h,g,w)};hr.prototype.mul=function(e,r){return e=new fe(e,r),this.curve._wnafMul(this,e)};hr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};hr.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};hr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};hr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var jh=dc(function(t,e){var r=e;r.base=qa,r.short=DD,r.mont=null,r.edwards=null}),zh=dc(function(t,e){var r=e,n=xn.assert;function i(a){a.type==="short"?this.curve=new jh.short(a):a.type==="edwards"?this.curve=new jh.edwards(a):this.curve=new jh.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(a,l){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var c=new i(l);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:c}),c}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Ii.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Ii.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Ii.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Ii.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Ii.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ii.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Ii.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Ii.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Do(t){if(!(this instanceof Do))return new Do(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=li.toArray(t.entropy,t.entropyEnc||"hex"),r=li.toArray(t.nonce,t.nonceEnc||"hex"),n=li.toArray(t.pers,t.persEnc||"hex");pv(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var PI=Do;Do.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Do.prototype._hmac=function(){return new Ii.hmac(this.hash,this.K)};Do.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Do.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=li.toArray(e,r),n=li.toArray(n,i),pv(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Do.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=li.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,li.encode(o,r)};var iy=xn.assert;function Or(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var mv=Or;Or.fromPublic=function(e,r,n){return r instanceof Or?r:new Or(e,{pub:r,pubEnc:n})};Or.fromPrivate=function(e,r,n){return r instanceof Or?r:new Or(e,{priv:r,privEnc:n})};Or.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Or.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};Or.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Or.prototype._importPrivate=function(e,r){this.priv=new fe(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};Or.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?iy(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&iy(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};Or.prototype.derive=function(e){return e.validate()||iy(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Or.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};Or.prototype.verify=function(e,r,n){return this.ec.verify(e,r,this,void 0,n)};Or.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var RD=xn.assert;function Ap(t,e){if(t instanceof Ap)return t;this._importDER(t,e)||(RD(t.r&&t.s,"Signature without r or s"),this.r=new fe(t.r,16),this.s=new fe(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var _p=Ap;function $D(){this.place=0}function G0(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4||t[e.place]===0)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function c2(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Ap.prototype._importDER=function(e,r){e=xn.toArray(e,r);var n=new $D;if(e[n.place++]!==48)return!1;var i=G0(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=G0(e,n);if(s===!1||e[n.place]&128)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=G0(e,n);if(a===!1||e.length!==a+n.place||e[n.place]&128)return!1;var l=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new fe(o),this.s=new fe(l),this.recoveryParam=null,!0};function Y0(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Ap.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=c2(r),n=c2(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Y0(i,r.length),i=i.concat(r),i.push(2),Y0(i,n.length);var s=i.concat(n),o=[48];return Y0(o,s.length),o=o.concat(s),xn.encode(o,e)};var MD=function(){throw new Error("unsupported")},ua=xn.assert;function qn(t){if(!(this instanceof qn))return new qn(t);typeof t=="string"&&(ua(Object.prototype.hasOwnProperty.call(zh,t),"Unknown curve "+t),t=zh[t]),t instanceof zh.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var BD=qn;qn.prototype.keyPair=function(e){return new mv(this,e)};qn.prototype.keyFromPrivate=function(e,r){return mv.fromPrivate(this,e,r)};qn.prototype.keyFromPublic=function(e,r){return mv.fromPublic(this,e,r)};qn.prototype.genKeyPair=function(e){e||(e={});for(var r=new PI({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||MD(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new fe(2));;){var s=new fe(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};qn.prototype._truncateToN=function(e,r,n){var i;if(fe.isBN(e)||typeof e=="number")e=new fe(e,16),i=e.byteLength();else if(typeof e=="object")i=e.length,e=new fe(e,16);else{var s=e.toString();i=s.length+1>>>1,e=new fe(s,16)}typeof n!="number"&&(n=i*8);var o=n-this.n.bitLength();return o>0&&(e=e.ushrn(o)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};qn.prototype.sign=function(e,r,n,i){if(typeof n=="object"&&(i=n,n=null),i||(i={}),typeof e!="string"&&typeof e!="number"&&!fe.isBN(e)){ua(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),ua(e.length>>>0===e.length);for(var s=0;s<e.length;s++)ua((e[s]&255)===e[s])}r=this.keyFromPrivate(r,n),e=this._truncateToN(e,!1,i.msgBitLength),ua(!e.isNeg(),"Can not sign a negative message");var o=this.n.byteLength(),a=r.getPrivate().toArray("be",o),l=e.toArray("be",o);ua(new fe(l).eq(e),"Can not sign message");for(var c=new PI({hash:this.hash,entropy:a,nonce:l,pers:i.pers,persEnc:i.persEnc||"utf8"}),u=this.n.sub(new fe(1)),f=0;;f++){var h=i.k?i.k(f):new fe(c.generate(this.n.byteLength()));if(h=this._truncateToN(h,!0),!(h.cmpn(1)<=0||h.cmp(u)>=0)){var g=this.g.mul(h);if(!g.isInfinity()){var w=g.getX(),v=w.umod(this.n);if(v.cmpn(0)!==0){var O=h.invm(this.n).mul(v.mul(r.getPrivate()).iadd(e));if(O=O.umod(this.n),O.cmpn(0)!==0){var A=(g.getY().isOdd()?1:0)|(w.cmp(v)!==0?2:0);return i.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),A^=1),new _p({r:v,s:O,recoveryParam:A})}}}}}};qn.prototype.verify=function(e,r,n,i,s){s||(s={}),e=this._truncateToN(e,!1,s.msgBitLength),n=this.keyFromPublic(n,i),r=new _p(r,"hex");var o=r.r,a=r.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var l=a.invm(this.n),c=l.mul(e).umod(this.n),u=l.mul(o).umod(this.n),f;return this.curve._maxwellTrick?(f=this.g.jmulAdd(c,n.getPublic(),u),f.isInfinity()?!1:f.eqXToP(o)):(f=this.g.mulAdd(c,n.getPublic(),u),f.isInfinity()?!1:f.getX().umod(this.n).cmp(o)===0)};qn.prototype.recoverPubKey=function(t,e,r,n){ua((3&r)===r,"The recovery param is more than two bits"),e=new _p(e,n);var i=this.n,s=new fe(t),o=e.r,a=e.s,l=r&1,c=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&c)throw new Error("Unable to find sencond key candinate");c?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var u=e.r.invm(i),f=i.sub(s).mul(u).umod(i),h=a.mul(u).umod(i);return this.g.mulAdd(f,o,h)};qn.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new _p(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var UD=dc(function(t,e){var r=e;r.version="6.6.1",r.utils=xn,r.rand=function(){throw new Error("unsupported")},r.curve=jh,r.curves=zh,r.ec=BD,r.eddsa=null}),LD=UD.ec;const FD="signing-key/5.8.0",sy=new j(FD);let Q0=null;function so(){return Q0||(Q0=new LD("secp256k1")),Q0}class jD{constructor(e){ee(this,"curve","secp256k1"),ee(this,"privateKey",le(e)),Na(this.privateKey)!==32&&sy.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=so().keyFromPrivate(ue(this.privateKey));ee(this,"publicKey","0x"+r.getPublic(!1,"hex")),ee(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),ee(this,"_isSigningKey",!0)}_addPoint(e){const r=so().keyFromPublic(ue(this.publicKey)),n=so().keyFromPublic(ue(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=so().keyFromPrivate(ue(this.privateKey)),n=ue(e);n.length!==32&&sy.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return wp({recoveryParam:i.recoveryParam,r:bt("0x"+i.r.toString(16),32),s:bt("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=so().keyFromPrivate(ue(this.privateKey)),n=so().keyFromPublic(ue(CI(e)));return bt("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function zD(t,e){const r=wp(e),n={r:ue(r.r),s:ue(r.s)};return"0x"+so().recoverPubKey(ue(t),n,r.recoveryParam).encode("hex",!1)}function CI(t,e){const r=ue(t);return r.length===32?new jD(r).publicKey:r.length===33?"0x"+so().keyFromPublic(r).getPublic(!1,"hex"):r.length===65?le(r):sy.throwArgumentError("invalid public or private key","key","[REDACTED]")}const qD="transactions/5.8.0",Rs=new j(qD);var u2;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(u2||(u2={}));function yv(t){return t==="0x"?null:fr(t)}function Cr(t){return t==="0x"?VS:re.from(t)}function HD(t){const e=CI(t);return fr(Ir(qt(Ir(e,1)),12))}function OI(t,e){return HD(zD(ue(t),e))}function pn(t,e){const r=Jl(re.from(t).toHexString());return r.length>32&&Rs.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function J0(t,e){return{address:fr(t),storageKeys:(e||[]).map((r,n)=>(Na(r)!==32&&Rs.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function pc(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&Rs.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),J0(r[0],r[1])):J0(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return J0(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function NI(t){return pc(t).map(e=>[e.address,e.storageKeys])}function VD(t,e){if(t.gasPrice!=null){const n=re.from(t.gasPrice),i=re.from(t.maxFeePerGas||0);n.eq(i)||Rs.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[pn(t.chainId||0,"chainId"),pn(t.nonce||0,"nonce"),pn(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),pn(t.maxFeePerGas||0,"maxFeePerGas"),pn(t.gasLimit||0,"gasLimit"),t.to!=null?fr(t.to):"0x",pn(t.value||0,"value"),t.data||"0x",NI(t.accessList||[])];if(e){const n=wp(e);r.push(pn(n.recoveryParam,"recoveryParam")),r.push(Jl(n.r)),r.push(Jl(n.s))}return Gr(["0x02",vp(r)])}function KD(t,e){const r=[pn(t.chainId||0,"chainId"),pn(t.nonce||0,"nonce"),pn(t.gasPrice||0,"gasPrice"),pn(t.gasLimit||0,"gasLimit"),t.to!=null?fr(t.to):"0x",pn(t.value||0,"value"),t.data||"0x",NI(t.accessList||[])];if(e){const n=wp(e);r.push(pn(n.recoveryParam,"recoveryParam")),r.push(Jl(n.r)),r.push(Jl(n.s))}return Gr(["0x01",vp(r)])}function TI(t,e,r){try{const n=Cr(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{Rs.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=bt(e[1],32),t.s=bt(e[2],32);try{const n=qt(r(t));t.from=OI(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function WD(t){const e=fv(t.slice(1));e.length!==9&&e.length!==12&&Rs.throwArgumentError("invalid component count for transaction type: 2","payload",le(t));const r=Cr(e[2]),n=Cr(e[3]),i={type:2,chainId:Cr(e[0]).toNumber(),nonce:Cr(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:Cr(e[4]),to:yv(e[5]),value:Cr(e[6]),data:e[7],accessList:pc(e[8])};return e.length===9||(i.hash=qt(t),TI(i,e.slice(9),VD)),i}function GD(t){const e=fv(t.slice(1));e.length!==8&&e.length!==11&&Rs.throwArgumentError("invalid component count for transaction type: 1","payload",le(t));const r={type:1,chainId:Cr(e[0]).toNumber(),nonce:Cr(e[1]).toNumber(),gasPrice:Cr(e[2]),gasLimit:Cr(e[3]),to:yv(e[4]),value:Cr(e[5]),data:e[6],accessList:pc(e[7])};return e.length===8||(r.hash=qt(t),TI(r,e.slice(8),KD)),r}function YD(t){const e=fv(t);e.length!==9&&e.length!==6&&Rs.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:Cr(e[0]).toNumber(),gasPrice:Cr(e[1]),gasLimit:Cr(e[2]),to:yv(e[3]),value:Cr(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=re.from(e[6]).toNumber()}catch{return r}if(r.r=bt(e[7],32),r.s=bt(e[8],32),re.from(r.r).isZero()&&re.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(le(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=qt(vp(i));try{r.from=OI(s,{r:le(r.r),s:le(r.s),recoveryParam:n})}catch{}r.hash=qt(t)}return r.type=null,r}function QD(t){const e=ue(t);if(e[0]>127)return YD(e);switch(e[0]){case 1:return GD(e);case 2:return WD(e)}return Rs.throwError(`unsupported transaction type: ${e[0]}`,j.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const JD="contracts/5.8.0";var Da=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Ot=new j(JD);function kd(t,e){return Da(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&Ot.throwArgumentError("invalid address or ENS name","name",r);try{return fr(r)}catch{}t||Ot.throwError("a provider or signer is needed to resolve ENS names",j.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&Ot.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function qh(t,e,r){return Da(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>qh(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield kd(t,e):r.type==="tuple"?yield qh(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>qh(t,n,r.arrayChildren))):Promise.reject(Ot.makeError("invalid value for array",j.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Sp(t,e,r){return Da(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=Vt(r.pop())),Ot.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=Rt({override:kd(t.signer,n.from),signer:t.signer.getAddress()}).then(c=>Da(this,void 0,void 0,function*(){return fr(c.signer)!==c.override&&Ot.throwError("Contract with a Signer cannot override from",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),c.override})):n.from=t.signer.getAddress():n.from&&(n.from=kd(t.provider,n.from));const i=yield Rt({args:qh(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:Rt(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=re.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=re.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=re.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=re.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=re.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=pc(a.accessList)),o.gasLimit==null&&e.gas!=null){let c=21e3;const u=ue(s);for(let f=0;f<u.length;f++)c+=4,u[f]&&(c+=64);o.gasLimit=re.from(e.gas).add(c)}if(a.value){const c=re.from(a.value);!c.isZero()&&!e.payable&&Ot.throwError("non-payable method cannot override value",j.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=c}a.customData&&(o.customData=Vt(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const l=Object.keys(n).filter(c=>n[c]!=null);return l.length&&Ot.throwError(`cannot override ${l.map(c=>JSON.stringify(c)).join(",")}`,j.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function ZD(t,e){return function(...r){return Sp(t,e,r)}}function XD(t,e){const r=t.signer||t.provider;return function(...n){return Da(this,void 0,void 0,function*(){r||Ot.throwError("estimate require a provider or signer",j.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Sp(t,e,n);return yield r.estimateGas(i)})}}function eR(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let o=Is(s),a=null;try{a=t.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(l,c)=>t.interface.decodeEventLog(a.eventFragment,l,c),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(i.blockHash),o.getTransaction=()=>t.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function kI(t,e,r){const n=t.signer||t.provider;return function(...i){return Da(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=Vt(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}t.deployTransaction!=null&&(yield t._deployed(s));const o=yield Sp(t,e,i),a=yield n.call(o,s);try{let l=t.interface.decodeFunctionResult(e,a);return r&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===j.errors.CALL_EXCEPTION&&(l.address=t.address,l.args=i,l.transaction=o),l}})}}function tR(t,e){return function(...r){return Da(this,void 0,void 0,function*(){t.signer||Ot.throwError("sending a transaction requires a signer",j.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield Sp(t,e,r),i=yield t.signer.sendTransaction(n);return eR(t,i),i})}}function f2(t,e,r){return e.constant?kI(t,e,r):tR(t,e)}function DI(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Ku{constructor(e,r){ee(this,"tag",e),ee(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class rR extends Ku{constructor(){super("error",null)}}class h2 extends Ku{constructor(e,r,n,i){const s={address:e};let o=r.getEventTopic(n);i?(o!==i[0]&&Ot.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(DI(s),s),ee(this,"address",e),ee(this,"interface",r),ee(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=BN(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class d2 extends Ku{constructor(e,r){super("*",{address:e}),ee(this,"address",e),ee(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class nR{constructor(e,r,n){ee(this,"interface",Ri(new.target,"getInterface")(r)),n==null?(ee(this,"provider",null),ee(this,"signer",null)):pf.isSigner(n)?(ee(this,"provider",n.provider||null),ee(this,"signer",n)):Ep.isProvider(n)?(ee(this,"provider",n),ee(this,"signer",null)):Ot.throwArgumentError("invalid signer or provider","signerOrProvider",n),ee(this,"callStatic",{}),ee(this,"estimateGas",{}),ee(this,"functions",{}),ee(this,"populateTransaction",{}),ee(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const l=this.interface.events[a];ee(this.filters,a,(...c)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,c)})),o[l.name]||(o[l.name]=[]),o[l.name].push(a)}),Object.keys(o).forEach(a=>{const l=o[a];l.length===1?ee(this.filters,a,this.filters[l[0]]):Ot.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(ee(this,"_runningEvents",{}),ee(this,"_wrappedEmits",{}),e==null&&Ot.throwArgumentError("invalid contract address or ENS name","addressOrName",e),ee(this,"address",e),this.provider)ee(this,"resolvedAddress",kd(this.provider,e));else try{ee(this,"resolvedAddress",Promise.resolve(fr(e)))}catch{Ot.throwError("provider is required to use ENS name as contract address",j.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){Ot.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const l=a.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(o)}this[o]==null&&ee(this,o,f2(this,a,!0)),this.functions[o]==null&&ee(this.functions,o,f2(this,a,!1)),this.callStatic[o]==null&&ee(this.callStatic,o,kI(this,a,!0)),this.populateTransaction[o]==null&&ee(this.populateTransaction,o,ZD(this,a)),this.estimateGas[o]==null&&ee(this.estimateGas,o,XD(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const l=a[0];try{this[o]==null&&ee(this,o,this[l])}catch{}this.functions[o]==null&&ee(this.functions,o,this.functions[l]),this.callStatic[o]==null&&ee(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&ee(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&ee(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(e){return jS(e)}static getInterface(e){return i2.isInterface(e)?e:new i2(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&Ot.throwError("contract not deployed",j.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||Ot.throwError("sending a transactions require a signer",j.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=Vt(e||{});return["from","to"].forEach(function(n){r[n]!=null&&Ot.throwError("cannot override "+n,j.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new dv(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&ee(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return ey.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new rR);if(e==="event")return this._normalizeRunningEvent(new Ku("event",null));if(e==="*")return this._normalizeRunningEvent(new d2(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new h2(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new h2(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Ku(DI(r),r))}return this._normalizeRunningEvent(new d2(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=Is(r);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||Ot.throwError("events require a provider or a signer with a provider",j.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,r);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=Vt(i.filter);return typeof r=="string"&&Ce(r,32)?(n!=null&&Ot.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class RI extends nR{}class $I{constructor(e){ee(this,"alphabet",e),ee(this,"base",e.length),ee(this,"_alphabetMap",{}),ee(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=ue(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let o=r[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<r.length;++o)s+=r[o]*this.base,r[o]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return ue(new Uint8Array(r.reverse()))}}new $I("abcdefghijklmnopqrstuvwxyz234567");const oy=new $I("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function p2(t){return"0x"+Ii.sha256().update(ue(t)).digest("hex")}const iR="networks/5.8.0",g2=new j(iR);function sR(t){return t&&typeof t.renetwork=="function"}function ii(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(r.QuickNodeProvider&&n.quicknode!=="-")try{i.push(new r.QuickNodeProvider(t,n.quicknode))}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return ii(r)},e}function Dd(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return Dd(t,n)},r}const m2={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:ii("homestead")},y2={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:ii("ropsten")},w2={chainId:63,name:"classicMordor",_defaultProvider:Dd("https://www.ethercluster.com/mordor","classicMordor")},Jf={unspecified:{chainId:0,name:"unspecified"},homestead:m2,mainnet:m2,morden:{chainId:2,name:"morden"},ropsten:y2,testnet:y2,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:ii("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:ii("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:ii("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"sepolia",_defaultProvider:ii("sepolia")},holesky:{chainId:17e3,name:"holesky",_defaultProvider:ii("holesky")},classic:{chainId:61,name:"classic",_defaultProvider:Dd("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:w2,classicTestnet:w2,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Dd("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:ii("matic")},maticmum:{chainId:80001,name:"maticmum",_defaultProvider:ii("maticmum")},optimism:{chainId:10,name:"optimism",_defaultProvider:ii("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},"optimism-sepolia":{chainId:11155420,name:"optimism-sepolia"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"arbitrum-sepolia":{chainId:421614,name:"arbitrum-sepolia"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function oR(t){if(t==null)return null;if(typeof t=="number"){for(const n in Jf){const i=Jf[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=Jf[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=Jf[t.name];if(!e)return typeof t.chainId!="number"&&g2.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&g2.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(sR(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const aR="web/5.8.0";var lR=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};function cR(t,e){return lR(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:ue(new Uint8Array(i))}})}var uR=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const Xn=new j(aR);function v2(t){return new Promise(e=>{setTimeout(e,t)})}function zs(t,e){if(t==null)return null;if(typeof t=="string")return t;if(av(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return df(t)}catch{}return le(t)}return t}function fR(t){return qi(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function hR(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;Xn.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;Xn.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof t=="object"?!!t.errorPassThrough:!1,a={};let l=null;const c={method:"GET"};let u=!1,f=2*60*1e3;if(typeof t=="string")l=t;else if(typeof t=="object"){if((t==null||t.url==null)&&Xn.throwArgumentError("missing URL","connection.url",t),l=t.url,typeof t.timeout=="number"&&t.timeout>0&&(f=t.timeout),t.headers)for(const A in t.headers)a[A.toLowerCase()]={key:A,value:String(t.headers[A])},["if-none-match","if-modified-since"].indexOf(A.toLowerCase())>=0&&(u=!0);if(c.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){l.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&Xn.throwError("basic authentication requires a secure https url",j.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:t.user,password:"[REDACTED]"});const A=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+JS(qi(A))}}t.skipFetchSetup!=null&&(c.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(c.fetchOptions=Vt(t.fetchOptions))}const h=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),g=l?l.match(h):null;if(g)try{const A={statusCode:200,statusMessage:"OK",headers:{"content-type":g[1]||"text/plain"},body:g[2]?QS(g[3]):fR(g[3])};let I=A.body;return r&&(I=r(A.body,A)),Promise.resolve(I)}catch(A){Xn.throwError("processing response error",j.errors.SERVER_ERROR,{body:zs(g[1],g[2]),error:A,requestBody:null,requestMethod:"GET",url:l})}e&&(c.method="POST",c.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const w={};Object.keys(a).forEach(A=>{const I=a[A];w[I.key]=I.value}),c.headers=w;const v=function(){let A=null;return{promise:new Promise(function(T,D){f&&(A=setTimeout(()=>{A!=null&&(A=null,D(Xn.makeError("timeout",j.errors.TIMEOUT,{requestBody:zs(c.body,w["content-type"]),requestMethod:c.method,timeout:f,url:l})))},f))}),cancel:function(){A!=null&&(clearTimeout(A),A=null)}}}(),O=function(){return uR(this,void 0,void 0,function*(){for(let A=0;A<n;A++){let I=null;try{if(I=yield cR(l,c),A<n){if(I.statusCode===301||I.statusCode===302){const T=I.headers.location||"";if(c.method==="GET"&&T.match(/^https:/)){l=I.headers.location;continue}}else if(I.statusCode===429){let T=!0;if(i&&(T=yield i(A,l)),T){let D=0;const R=I.headers["retry-after"];typeof R=="string"&&R.match(/^[1-9][0-9]*$/)?D=parseInt(R)*1e3:D=s*parseInt(String(Math.random()*Math.pow(2,A))),yield v2(D);continue}}}}catch(T){I=T.response,I==null&&(v.cancel(),Xn.throwError("missing response",j.errors.SERVER_ERROR,{requestBody:zs(c.body,w["content-type"]),requestMethod:c.method,serverError:T,url:l}))}let _=I.body;if(u&&I.statusCode===304?_=null:!o&&(I.statusCode<200||I.statusCode>=300)&&(v.cancel(),Xn.throwError("bad response",j.errors.SERVER_ERROR,{status:I.statusCode,headers:I.headers,body:zs(_,I.headers?I.headers["content-type"]:null),requestBody:zs(c.body,w["content-type"]),requestMethod:c.method,url:l})),r)try{const T=yield r(_,I);return v.cancel(),T}catch(T){if(T.throttleRetry&&A<n){let D=!0;if(i&&(D=yield i(A,l)),D){const R=s*parseInt(String(Math.random()*Math.pow(2,A)));yield v2(R);continue}}v.cancel(),Xn.throwError("processing response error",j.errors.SERVER_ERROR,{body:zs(_,I.headers?I.headers["content-type"]:null),error:T,requestBody:zs(c.body,w["content-type"]),requestMethod:c.method,url:l})}return v.cancel(),_}return Xn.throwError("failed response",j.errors.SERVER_ERROR,{requestBody:zs(c.body,w["content-type"]),requestMethod:c.method,url:l})})}();return Promise.race([v.promise,O])}function wv(t,e,r){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(df(s))}catch(l){Xn.throwError("invalid JSON",j.errors.SERVER_ERROR,{body:s,error:l})}return r&&(a=r(a,o)),a},i=null;if(e!=null){i=qi(e);const s=typeof t=="string"?{url:t}:Vt(t);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Vt(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return hR(t,i,n)}function Xc(t,e){return e||(e={}),e=Vt(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let l=0;function c(){return t().then(function(u){if(u!==void 0)o()&&r(u);else if(e.oncePoll)e.oncePoll.once("poll",c);else if(e.onceBlock)e.onceBlock.once("block",c);else if(!s){if(l++,l>a){o()&&n(new Error("retry limit reached"));return}let f=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));f<e.floor&&(f=e.floor),f>e.ceiling&&(f=e.ceiling),setTimeout(c,f)}return null},function(u){o()&&n(u)})}c()})}var Rd="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ay={};for(var Zf=0;Zf<Rd.length;Zf++){var Z0=Rd.charAt(Zf);if(ay[Z0]!==void 0)throw new TypeError(Z0+" is ambiguous");ay[Z0]=Zf}function Ml(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function MI(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=Ml(e)^n>>5}for(e=Ml(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=Ml(e)^i&31}return e}function dR(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=MI(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");n=Ml(n)^o,i+=Rd.charAt(o)}for(s=0;s<6;++s)n=Ml(n);for(n^=1,s=0;s<6;++s){var a=n>>(5-s)*5&31;i+=Rd.charAt(a)}return i}function BI(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var a=MI(s);if(typeof a=="string")return a;for(var l=[],c=0;c<o.length;++c){var u=o.charAt(c),f=ay[u];if(f===void 0)return"Unknown character "+u;a=Ml(a)^f,!(c+6>=o.length)&&l.push(f)}return a!==1?"Invalid checksum for "+t:{prefix:s,words:l}}function pR(){var t=BI.apply(null,arguments);if(typeof t=="object")return t}function gR(t){var e=BI.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function Ip(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],l=0;l<t.length;++l)for(i=i<<e|t[l],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function mR(t){var e=Ip(t,8,5,!0);if(Array.isArray(e))return e}function yR(t){var e=Ip(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function wR(t){var e=Ip(t,5,8,!1);if(Array.isArray(e))return e}function vR(t){var e=Ip(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var bR={decodeUnsafe:pR,decode:gR,encode:dR,toWordsUnsafe:mR,toWords:yR,fromWordsUnsafe:wR,fromWords:vR};const b2=Mo(bR),Pp="providers/5.8.0",Oc=new j(Pp);class ae{constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),c=this.type.bind(this),u=f=>this.data(f,!0);return e.transaction={hash:o,type:c,accessList:ae.allowNull(this.accessList.bind(this),null),blockHash:ae.allowNull(o,null),blockNumber:ae.allowNull(l,null),transactionIndex:ae.allowNull(l,null),confirmations:ae.allowNull(l,null),from:r,gasPrice:ae.allowNull(n),maxPriorityFeePerGas:ae.allowNull(n),maxFeePerGas:ae.allowNull(n),gasLimit:n,to:ae.allowNull(r,null),value:n,nonce:l,data:s,r:ae.allowNull(this.uint256),s:ae.allowNull(this.uint256),v:ae.allowNull(l),creates:ae.allowNull(r,null),raw:ae.allowNull(s)},e.transactionRequest={from:ae.allowNull(r),nonce:ae.allowNull(l),gasLimit:ae.allowNull(n),gasPrice:ae.allowNull(n),maxPriorityFeePerGas:ae.allowNull(n),maxFeePerGas:ae.allowNull(n),to:ae.allowNull(r),value:ae.allowNull(n),data:ae.allowNull(u),type:ae.allowNull(l),accessList:ae.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:r,topics:ae.arrayOf(o),data:s,logIndex:l,blockHash:o},e.receipt={to:ae.allowNull(this.address,null),from:ae.allowNull(this.address,null),contractAddress:ae.allowNull(r,null),transactionIndex:l,root:ae.allowNull(a),gasUsed:n,logsBloom:ae.allowNull(s),blockHash:o,transactionHash:o,logs:ae.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:ae.allowNull(l,null),cumulativeGasUsed:n,effectiveGasPrice:ae.allowNull(n),status:ae.allowNull(l),type:c},e.block={hash:ae.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:ae.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:ae.allowNull(r),extraData:s,transactions:ae.allowNull(ae.arrayOf(o)),baseFeePerGas:ae.allowNull(n)},e.blockWithTransactions=Vt(e.block),e.blockWithTransactions.transactions=ae.allowNull(ae.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:ae.allowNull(i,void 0),toBlock:ae.allowNull(i,void 0),blockHash:ae.allowNull(o,void 0),address:ae.allowNull(r,void 0),topics:ae.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:ae.allowNull(l),blockHash:ae.allowNull(o),transactionIndex:l,removed:ae.allowNull(this.boolean.bind(this)),address:r,data:ae.allowFalsish(s,"0x"),topics:ae.arrayOf(o),transactionHash:o,logIndex:l},e}accessList(e){return pc(e||[])}number(e){return e==="0x"?0:re.from(e).toNumber()}type(e){return e==="0x"||e==null?0:re.from(e).toNumber()}bigNumber(e){return re.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),Ce(e))?e.toLowerCase():Oc.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return fr(e)}callAddress(e){if(!Ce(e,32))return null;const r=fr(Ir(e,12));return r===ZN?null:r}contractAddress(e){return jS(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||Ce(e))return lv(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return Na(n)!==32?Oc.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=re.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!Ce(e))throw new Error("invalid uint256");return bt(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=ae.check(r,e);return i._difficulty=n==null?null:re.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return ae.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&re.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=ae.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;Ce(n)&&(n=re.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),Ce(n)&&(n=re.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return QD(e)}receiptLog(e){return ae.check(this.formats.receiptLog,e)}receipt(e){const r=ae.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=re.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&Oc.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Oc.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&Oc.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return ae.check(this.formats.filter,e)}filterLog(e){return ae.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}var he=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const me=new j(Pp),ER=10;function E2(t){return t==null?"null":(Na(t)!==32&&me.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function x2(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[E2(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return E2(e)}).join("&")}function xR(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function Ja(t){if(typeof t=="string"){if(t=t.toLowerCase(),Na(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+x2(t);if(XT.isForkEvent(t))throw me.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+x2(t.topics||[])}throw new Error("invalid event - "+t)}function Nc(){return new Date().getTime()}function A2(t){return new Promise(e=>{setTimeout(e,t)})}const AR=["block","network","pending","poll"];let _R=class{constructor(e,r,n){ee(this,"tag",e),ee(this,"listener",r),ee(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=xR(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||AR.indexOf(this.tag)>=0}};const SR={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function X0(t){return bt(re.from(t).toHexString(),32)}function _2(t){return oy.encode(mn([t,Ir(p2(p2(t)),0,4)]))}const UI=new RegExp("^(ipfs)://(.*)$","i"),S2=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),UI,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Hh(t,e){try{return df(Wu(t,e))}catch{}return null}function Wu(t,e){if(t==="0x")return null;const r=re.from(Ir(t,e,e+32)).toNumber(),n=re.from(Ir(t,r,r+32)).toNumber();return Ir(t,r+32,r+32+n)}function eg(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):me.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function I2(t){const e=ue(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function IR(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function LI(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=ue(t[n]);e[n]=I2(r),e.push(I2(i.length)),e.push(IR(i)),r+=32+Math.ceil(i.length/32)*32}return Gr(e)}class P2{constructor(e,r,n,i){ee(this,"provider",e),ee(this,"name",n),ee(this,"address",e.formatter.address(r)),ee(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>re.from(e).eq(1)).catch(e=>{if(e.code===j.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return he(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:Gr([e,Fh(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=Gr(["0x9061b923",LI([UT(this.name),n.data])]));try{let s=yield this.provider.call(n);return ue(s).length%32===4&&me.throwError("resolver threw error",j.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=Wu(s,0)),s}catch(s){if(s.code===j.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return he(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?Wu(n,0):null})}_getAddress(e,r){const n=SR[String(e)];if(n==null&&me.throwError(`unsupported coin type: ${e}`,j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=ue(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return _2(mn([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return _2(mn([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=b2.toWords(i.slice(2));return a.unshift(o),b2.encode(n.prefix,a)}}return null}getAddress(e){return he(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===rT?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===j.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",X0(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&me.throwError("invalid or unsupported coin data",j.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return he(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<S2.length;n++){const i=r.match(S2[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:eg(r)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const a=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const c=yield this.provider.formatter.address(l[0]),u=bt(re.from(l[1]).toHexString(),32);if(s==="erc721"){const v=this.provider.formatter.callAddress(yield this.provider.call({to:c,data:Gr(["0x6352211e",u])}));if(a!==v)return null;e.push({type:"owner",content:v})}else if(s==="erc1155"){const v=re.from(yield this.provider.call({to:c,data:Gr(["0x00fdd58e",bt(a,32),u])}));if(v.isZero())return null;e.push({type:"balance",content:v.toString()})}const f={to:this.provider.formatter.address(l[0]),data:Gr([o,u])};let h=Hh(yield this.provider.call(f),0);if(h==null)return null;e.push({type:"metadata-url-base",content:h}),s==="erc1155"&&(h=h.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:h})),h.match(/^ipfs:/i)&&(h=eg(h)),e.push({type:"metadata-url",content:h});const g=yield wv(h);if(!g)return null;e.push({type:"metadata",content:JSON.stringify(g)});let w=g.image;if(typeof w!="string")return null;if(!w.match(/^(https:\/\/|data:)/i)){if(w.match(UI)==null)return null;e.push({type:"url-ipfs",content:w}),w=eg(w)}return e.push({type:"url",content:w}),{linkage:e,url:w}}}}}catch{}return null})}getContentHash(){return he(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+oy.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+oy.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+JS("0x"+s[1]).replace(/[=+\/]/g,l=>o[l])}return me.throwError("invalid or unsupported content hash data",j.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return he(this,void 0,void 0,function*(){let r=qi(e);r=mn([X0(64),X0(r.length),r]),r.length%32!==0&&(r=mn([r,bt("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",le(r));return n==null||n==="0x"?null:df(n)})}}let tg=null,PR=1;class CR extends Ep{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),ee(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=Ri(new.target,"getNetwork")(e);r?(ee(this,"_network",r),this.emit("network",r,null)):me.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return he(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||me.throwError("no network detected",j.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:ee(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Xc(()=>this._ready().then(e=>e,e=>{if(!(e.code===j.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return tg==null&&(tg=new ae),tg}static getNetwork(e){return oR(e??"homestead")}ccipReadFetch(e,r,n){return he(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const l=n[a],c=l.replace("{sender}",i).replace("{data}",s),u=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),f=yield wv({url:c,errorPassThrough:!0},u,(g,w)=>(g.status=w.statusCode,g));if(f.data)return f.data;const h=f.message||"unknown error";if(f.status>=400&&f.status<500)return me.throwError(`response not found during CCIP fetch: ${h}`,j.errors.SERVER_ERROR,{url:l,errorMessage:h});o.push(h)}return me.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,j.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return he(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Nc()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=Nc(),n=Rt({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=Nc();return i=re.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return he(this,void 0,void 0,function*(){const e=PR++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)me.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",me.makeError("network block skew detected",j.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});r.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(c=>{c.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=c.blockNumber),this._emitted["b:"+c.blockHash]=c.blockNumber,this._emitted["t:"+c.transactionHash]=c.blockNumber,this.emit(s,c)})}).catch(l=>{this.emit("error",l),i._inflight=!1});r.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return he(this,void 0,void 0,function*(){return me.throwError("provider does not support network detection",j.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return he(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield A2(0),this._network;const n=me.makeError("underlying network changed",j.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Nc();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Nc(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return he(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return he(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((o,a)=>{const l=[];let c=!1;const u=function(){return c?!0:(c=!0,l.forEach(h=>{h()}),!1)},f=h=>{h.confirmations<r||u()||o(h)};if(this.on(e,f),l.push(()=>{this.removeListener(e,f)}),i){let h=i.startBlock,g=null;const w=v=>he(this,void 0,void 0,function*(){c||(yield A2(1e3),this.getTransactionCount(i.from).then(O=>he(this,void 0,void 0,function*(){if(!c){if(O<=i.nonce)h=v;else{{const A=yield this.getTransaction(e);if(A&&A.blockNumber!=null)return}for(g==null&&(g=h-3,g<i.startBlock&&(g=i.startBlock));g<=v;){if(c)return;const A=yield this.getBlockWithTransactions(g);for(let I=0;I<A.transactions.length;I++){const _=A.transactions[I];if(_.hash===e)return;if(_.from===i.from&&_.nonce===i.nonce){if(c)return;const T=yield this.waitForTransaction(_.hash,r);if(u())return;let D="replaced";_.data===i.data&&_.to===i.to&&_.value.eq(i.value)?D="repriced":_.data==="0x"&&_.from===_.to&&_.value.isZero()&&(D="cancelled"),a(me.makeError("transaction was replaced",j.errors.TRANSACTION_REPLACED,{cancelled:D==="replaced"||D==="cancelled",reason:D,replacement:this._wrapTransaction(_),hash:e,receipt:T}));return}}g++}}c||this.once("block",w)}}),O=>{c||this.once("block",w)}))});if(c)return;this.once("block",w),l.push(()=>{this.removeListener("block",w)})}if(typeof n=="number"&&n>0){const h=setTimeout(()=>{u()||a(me.makeError("timeout exceeded",j.errors.TIMEOUT,{timeout:n}))},n);h.unref&&h.unref(),l.push(()=>{clearTimeout(h)})}})})}getBlockNumber(){return he(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return he(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return re.from(e)}catch(r){return me.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return he(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Rt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return re.from(i)}catch(s){return me.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return he(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Rt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return re.from(i).toNumber()}catch(s){return me.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return he(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Rt({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return le(i)}catch(s){return me.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return he(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield Rt({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>lv(o))}),s=yield this.perform("getStorageAt",i);try{return le(s)}catch(o){return me.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&Na(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&me.throwError("Transaction hash mismatch from Provider.sendTransaction.",j.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,o)=>he(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const l=yield this._waitForTransaction(e.hash,s,o,a);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&me.throwError("transaction failed",j.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return he(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>le(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return he(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?re.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?le(s):null))}),this.formatter.transactionRequest(yield Rt(n))})}_getFilter(e){return he(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield Rt(r))})}_call(e,r,n){return he(this,void 0,void 0,function*(){n>=ER&&me.throwError("CCIP read exceeded maximum redirections",j.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&Na(s)%32===4)try{const o=Ir(s,4),a=Ir(o,0,32);re.from(a).eq(i)||me.throwError("CCIP Read sender did not match",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],c=re.from(Ir(o,32,64)).toNumber(),u=re.from(Ir(o,c,c+32)).toNumber(),f=Ir(o,c+32);for(let A=0;A<u;A++){const I=Hh(f,A*32);I==null&&me.throwError("CCIP Read contained corrupt URL string",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(I)}const h=Wu(o,64);re.from(Ir(o,100,128)).isZero()||me.throwError("CCIP Read callback selector included junk",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const g=Ir(o,96,100),w=Wu(o,128),v=yield this.ccipReadFetch(e,h,l);v==null&&me.throwError("CCIP Read disabled or provided no URLs",j.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const O={to:i,data:Gr([g,LI([v,w])])};return this._call(O,r,n+1)}catch(o){if(o.code===j.errors.SERVER_ERROR)throw o}try{return le(s)}catch(o){return me.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:o})}})}call(e,r){return he(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield Rt({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return he(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Rt({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return re.from(n)}catch(i){return me.throwError("bad result from backend",j.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return he(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&me.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&me.throwError("ENS name not configured",j.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return he(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(Ce(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),Ce(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{me.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Xc(()=>he(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let l=0;l<s.transactions.length;l++){const c=s.transactions[l];if(c.blockNumber==null)c.confirmations=0;else if(c.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let u=o-c.blockNumber+1;u<=0&&(u=1),c.confirmations=u}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return he(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Xc(()=>he(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return he(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Xc(()=>he(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return he(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Rt({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),ae.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return he(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return he(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&me.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return he(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new P2(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return he(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||me.throwError("network does not support ENS",j.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+Fh(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return he(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(Ce(e))throw n}typeof e!="string"&&me.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return he(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=Hh(yield this.call({to:n,data:"0x691f3431"+Fh(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return he(this,void 0,void 0,function*(){let r=null;if(Ce(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;r=new P2(this,o,s);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==j.errors.CALL_EXCEPTION)throw a}try{const a=Hh(yield this.call({to:o,data:"0x691f3431"+Fh(s).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==j.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return me.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new _R(Ja(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=Ja(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=Ja(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=Ja(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=Ja(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=r||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=Ja(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}var ls=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})};const $t=new j(Pp),OR=["call","estimateGas"];function gu(t,e){if(t==null)return null;if(typeof t.message=="string"&&t.message.match("reverted")){const r=Ce(t.data)?t.data:null;if(!e||r)return{message:t.message,data:r}}if(typeof t=="object"){for(const r in t){const n=gu(t[r],e);if(n)return n}return null}if(typeof t=="string")try{return gu(JSON.parse(t),e)}catch{}return null}function FI(t,e,r){const n=r.transaction||r.signedTransaction;if(t==="call"){const s=gu(e,!0);if(s)return s.data;$t.throwError("missing revert data in call exception; Transaction reverted without a reason string",j.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:e})}if(t==="estimateGas"){let s=gu(e.body,!1);s==null&&(s=gu(e,!1)),s&&$t.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{reason:s.message,method:t,transaction:n,error:e})}let i=e.message;throw e.code===j.errors.SERVER_ERROR&&e.error&&typeof e.error.message=="string"?i=e.error.message:typeof e.body=="string"?i=e.body:typeof e.responseText=="string"&&(i=e.responseText),i=(i||"").toLowerCase(),i.match(/insufficient funds|base fee exceeds gas limit|InsufficientFunds/i)&&$t.throwError("insufficient funds for intrinsic transaction cost",j.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),i.match(/nonce (is )?too low/i)&&$t.throwError("nonce has already been used",j.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),i.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&$t.throwError("replacement fee too low",j.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),i.match(/only replay-protected/i)&&$t.throwError("legacy pre-eip-155 transactions not supported",j.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:n}),OR.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted|revert/)&&$t.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",j.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}function C2(t){return new Promise(function(e){setTimeout(e,t)})}function NR(t){if(t.error){const e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Tc(t){return t&&t.toLowerCase()}const ly={};class jI extends pf{constructor(e,r,n){if(super(),e!==ly)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");ee(this,"provider",r),n==null&&(n=0),typeof n=="string"?(ee(this,"_address",this.provider.formatter.address(n)),ee(this,"_index",null)):typeof n=="number"?(ee(this,"_index",n),ee(this,"_address",null)):$t.throwArgumentError("invalid address or index","addressOrIndex",n)}connect(e){return $t.throwError("cannot alter JSON-RPC Signer connection",j.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new TR(ly,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&$t.throwError("unknown account #"+this._index,j.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=Vt(e);const r=this.getAddress().then(n=>(n&&(n=n.toLowerCase()),n));if(e.gasLimit==null){const n=Vt(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return e.to!=null&&(e.to=Promise.resolve(e.to).then(n=>ls(this,void 0,void 0,function*(){if(n==null)return null;const i=yield this.provider.resolveName(n);return i==null&&$t.throwArgumentError("provided ENS name resolves to null","tx.to",n),i}))),Rt({tx:Rt(e),sender:r}).then(({tx:n,sender:i})=>{n.from!=null?n.from.toLowerCase()!==i&&$t.throwArgumentError("from address mismatch","transaction",e):n.from=i;const s=this.provider.constructor.hexlifyTransaction(n,{from:!0});return this.provider.send("eth_sendTransaction",[s]).then(o=>o,o=>(typeof o.message=="string"&&o.message.match(/user denied/i)&&$t.throwError("user rejected transaction",j.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),FI("sendTransaction",o,s)))})}signTransaction(e){return $t.throwError("signing transactions is unsupported",j.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return ls(this,void 0,void 0,function*(){const r=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),n=yield this.sendUncheckedTransaction(e);try{return yield Xc(()=>ls(this,void 0,void 0,function*(){const i=yield this.provider.getTransaction(n);if(i!==null)return this.provider._wrapTransaction(i,n,r)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=n,i}})}signMessage(e){return ls(this,void 0,void 0,function*(){const r=typeof e=="string"?qi(e):e,n=yield this.getAddress();try{return yield this.provider.send("personal_sign",[le(r),n.toLowerCase()])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&$t.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"signMessage",from:n,messageData:e}),i}})}_legacySignMessage(e){return ls(this,void 0,void 0,function*(){const r=typeof e=="string"?qi(e):e,n=yield this.getAddress();try{return yield this.provider.send("eth_sign",[n.toLowerCase(),le(r)])}catch(i){throw typeof i.message=="string"&&i.message.match(/user denied/i)&&$t.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:n,messageData:e}),i}})}_signTypedData(e,r,n){return ls(this,void 0,void 0,function*(){const i=yield cn.resolveNames(e,r,n,o=>this.provider.resolveName(o)),s=yield this.getAddress();try{return yield this.provider.send("eth_signTypedData_v4",[s.toLowerCase(),JSON.stringify(cn.getPayload(i.domain,r,i.value))])}catch(o){throw typeof o.message=="string"&&o.message.match(/user denied/i)&&$t.throwError("user rejected signing",j.errors.ACTION_REJECTED,{action:"_signTypedData",from:s,messageData:{domain:i.domain,types:r,value:i.value}}),o}})}unlock(e){return ls(this,void 0,void 0,function*(){const r=this.provider,n=yield this.getAddress();return r.send("personal_unlockAccount",[n.toLowerCase(),e,null])})}}class TR extends jI{sendTransaction(e){return this.sendUncheckedTransaction(e).then(r=>({hash:r,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:n=>this.provider.waitForTransaction(r,n)}))}}const kR={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class DR extends CR{constructor(e,r){let n=r;n==null&&(n=new Promise((i,s)=>{setTimeout(()=>{this.detectNetwork().then(o=>{i(o)},o=>{s(o)})},0)})),super(n),e||(e=Ri(this.constructor,"defaultUrl")()),typeof e=="string"?ee(this,"connection",Object.freeze({url:e})):ee(this,"connection",Object.freeze(Vt(e))),this._nextId=42}get _cache(){return this._eventLoopCache==null&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return ls(this,void 0,void 0,function*(){yield C2(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch{try{e=yield this.send("net_version",[])}catch{}}if(e!=null){const r=Ri(this.constructor,"getNetwork");try{return r(re.from(e).toNumber())}catch(n){return $t.throwError("could not detect network",j.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return $t.throwError("could not detect network",j.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new jI(ly,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(r=>this.formatter.address(r)))}send(e,r){const n={method:e,params:r,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Is(n),provider:this});const i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];const s=wv(this.connection,JSON.stringify(n),NR).then(o=>(this.emit("debug",{action:"response",request:n,response:o,provider:this}),o),o=>{throw this.emit("debug",{action:"response",error:o,request:n,provider:this}),o});return i&&(this._cache[e]=s,setTimeout(()=>{this._cache[e]=null},0)),s}prepareRequest(e,r){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Tc(r.address),r.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Tc(r.address),r.blockTag]];case"getCode":return["eth_getCode",[Tc(r.address),r.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Tc(r.address),bt(r.position,32),r.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[r.signedTransaction]];case"getBlock":return r.blockTag?["eth_getBlockByNumber",[r.blockTag,!!r.includeTransactions]]:r.blockHash?["eth_getBlockByHash",[r.blockHash,!!r.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[r.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[r.transactionHash]];case"call":return["eth_call",[Ri(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0}),r.blockTag]];case"estimateGas":return["eth_estimateGas",[Ri(this.constructor,"hexlifyTransaction")(r.transaction,{from:!0})]];case"getLogs":return r.filter&&r.filter.address!=null&&(r.filter.address=Tc(r.filter.address)),["eth_getLogs",[r.filter]]}return null}perform(e,r){return ls(this,void 0,void 0,function*(){if(e==="call"||e==="estimateGas"){const i=r.transaction;if(i&&i.type!=null&&re.from(i.type).isZero()&&i.maxFeePerGas==null&&i.maxPriorityFeePerGas==null){const s=yield this.getFeeData();s.maxFeePerGas==null&&s.maxPriorityFeePerGas==null&&(r=Vt(r),r.transaction=Vt(i),delete r.transaction.type)}}const n=this.prepareRequest(e,r);n==null&&$t.throwError(e+" not implemented",j.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(i){return FI(e,i,r)}})}_startEvent(e){e.tag==="pending"&&this._startPending(),super._startEvent(e)}_startPending(){if(this._pendingFilter!=null)return;const e=this,r=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=r,r.then(function(n){function i(){e.send("eth_getFilterChanges",[n]).then(function(s){if(e._pendingFilter!=r)return null;let o=Promise.resolve();return s.forEach(function(a){e._emitted["t:"+a.toLowerCase()]="pending",o=o.then(function(){return e.getTransaction(a).then(function(l){return e.emit("pending",l),null})})}),o.then(function(){return C2(1e3)})}).then(function(){if(e._pendingFilter!=r){e.send("eth_uninstallFilter",[n]);return}return setTimeout(function(){i()},0),null}).catch(s=>{})}return i(),n}).catch(n=>{})}_stopEvent(e){e.tag==="pending"&&this.listenerCount("pending")===0&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,r){const n=Vt(kR);if(r)for(const s in r)r[s]&&(n[s]=!0);ON(e,n);const i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(s){if(e[s]==null)return;const o=lv(re.from(e[s]));s==="gasLimit"&&(s="gas"),i[s]=o}),["from","to","data"].forEach(function(s){e[s]!=null&&(i[s]=le(e[s]))}),e.accessList&&(i.accessList=pc(e.accessList)),i}}const O2=new j(Pp);let RR=1;function N2(t,e){const r="Web3LegacyFetcher";return function(n,i){const s={method:n,params:i,id:RR++,jsonrpc:"2.0"};return new Promise((o,a)=>{this.emit("debug",{action:"request",fetcher:r,request:Is(s),provider:this}),e(s,(l,c)=>{if(l)return this.emit("debug",{action:"response",fetcher:r,error:l,request:s,provider:this}),a(l);if(this.emit("debug",{action:"response",fetcher:r,request:s,response:c,provider:this}),c.error){const u=new Error(c.error.message);return u.code=c.error.code,u.data=c.error.data,a(u)}o(c.result)})})}}function $R(t){return function(e,r){r==null&&(r=[]);const n={method:e,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Is(n),provider:this}),t.request(n).then(i=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,response:i,provider:this}),i),i=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:n,error:i,provider:this}),i})}}class T2 extends DR{constructor(e,r){e==null&&O2.throwArgumentError("missing provider","provider",e);let n=null,i=null,s=null;typeof e=="function"?(n="unknown:",i=e):(n=e.host||e.path||"",!n&&e.isMetaMask&&(n="metamask"),s=e,e.request?(n===""&&(n="eip-1193:"),i=$R(e)):e.sendAsync?i=N2(e,e.sendAsync.bind(e)):e.send?i=N2(e,e.send.bind(e)):O2.throwArgumentError("unsupported provider","provider",e),n||(n="unknown:")),super(n,r),ee(this,"jsonRpcFetchFunc",i),ee(this,"provider",s)}send(e,r){return this.jsonRpcFetchFunc(e,r)}}function MR(t,e){return Uh(t,e)}function BR(t){return MR(t,18)}const UR="modulepreload",LR=function(t){return"/CeloModuleX/"+t},k2={},FR=function(e,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=LR(l),l in k2)return;k2[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":UR,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((h,g)=>{f.addEventListener("load",h),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var vv={exports:{}},Bl=typeof Reflect=="object"?Reflect:null,D2=Bl&&typeof Bl.apply=="function"?Bl.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Vh;Bl&&typeof Bl.ownKeys=="function"?Vh=Bl.ownKeys:Object.getOwnPropertySymbols?Vh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Vh=function(e){return Object.getOwnPropertyNames(e)};function jR(t){console&&console.warn&&console.warn(t)}var zI=Number.isNaN||function(e){return e!==e};function Be(){Be.init.call(this)}vv.exports=Be;vv.exports.once=VR;Be.EventEmitter=Be;Be.prototype._events=void 0;Be.prototype._eventsCount=0;Be.prototype._maxListeners=void 0;var R2=10;function Cp(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Be,"defaultMaxListeners",{enumerable:!0,get:function(){return R2},set:function(t){if(typeof t!="number"||t<0||zI(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");R2=t}});Be.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Be.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||zI(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function qI(t){return t._maxListeners===void 0?Be.defaultMaxListeners:t._maxListeners}Be.prototype.getMaxListeners=function(){return qI(this)};Be.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")D2(l,this,r);else for(var c=l.length,u=GI(l,c),n=0;n<c;++n)D2(u[n],this,r);return!0};function HI(t,e,r,n){var i,s,o;if(Cp(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=qI(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,jR(a)}return t}Be.prototype.addListener=function(e,r){return HI(this,e,r,!1)};Be.prototype.on=Be.prototype.addListener;Be.prototype.prependListener=function(e,r){return HI(this,e,r,!0)};function zR(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function VI(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=zR.bind(n);return i.listener=r,n.wrapFn=i,i}Be.prototype.once=function(e,r){return Cp(r),this.on(e,VI(this,e,r)),this};Be.prototype.prependOnceListener=function(e,r){return Cp(r),this.prependListener(e,VI(this,e,r)),this};Be.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Cp(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():qR(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};Be.prototype.off=Be.prototype.removeListener;Be.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function KI(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?HR(i):GI(i,i.length)}Be.prototype.listeners=function(e){return KI(this,e,!0)};Be.prototype.rawListeners=function(e){return KI(this,e,!1)};Be.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):WI.call(t,e)};Be.prototype.listenerCount=WI;function WI(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Be.prototype.eventNames=function(){return this._eventsCount>0?Vh(this._events):[]};function GI(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function qR(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function HR(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function VR(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}YI(t,e,s,{once:!0}),e!=="error"&&KR(t,i,{once:!0})})}function KR(t,e,r){typeof t.on=="function"&&YI(t,"error",e,r)}function YI(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var An=vv.exports;const bv=Mo(An);var $2=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},WR=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),GR=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),YR=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),QR=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),JR=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),ZR=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,XR=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,M2=3,e$=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ZR]],B2=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function t$(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new JR:typeof navigator<"u"?n$(navigator.userAgent):s$()}function r$(t){return t!==""&&e$.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var s=i.exec(t);return!!s&&[n,s]},!1)}function n$(t){var e=r$(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new QR;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<M2&&(i=$2($2([],i,!0),o$(M2-i.length),!0)):i=[];var s=i.join("."),o=i$(t),a=XR.exec(t);return a&&a[1]?new YR(r,s,o,a[1]):new WR(r,s,o)}function i$(t){for(var e=0,r=B2.length;e<r;e++){var n=B2[e],i=n[0],s=n[1],o=s.exec(t);if(o)return i}return null}function s$(){var t=typeof process<"u"&&process.version;return t?new GR(process.version.slice(1)):null}function o$(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}var te={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var cy=function(t,e){return cy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},cy(t,e)};function a$(t,e){cy(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var uy=function(){return uy=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},uy.apply(this,arguments)};function l$(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function c$(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,r,s):o(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function u$(t,e){return function(r,n){e(r,n,t)}}function f$(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function h$(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(t,e||[])).next())})}function d$(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){r.label=c[1];break}if(c[0]===6&&r.label<s[1]){r.label=s[1],s=c;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(c);break}s[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function p$(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function g$(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function fy(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function QI(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function m$(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(QI(arguments[e]));return t}function y$(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function Gu(t){return this instanceof Gu?(this.v=t,this):new Gu(t)}function w$(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){n[h]&&(i[h]=function(g){return new Promise(function(w,v){s.push([h,g,w,v])>1||a(h,g)})})}function a(h,g){try{l(n[h](g))}catch(w){f(s[0][3],w)}}function l(h){h.value instanceof Gu?Promise.resolve(h.value.v).then(c,u):f(s[0][2],h)}function c(h){a("next",h)}function u(h){a("throw",h)}function f(h,g){h(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v$(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(o){return(r=!r)?{value:Gu(t[i](o)),done:i==="return"}:s?s(o):o}:s}}function b$(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof fy=="function"?fy(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function E$(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x$(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function A$(t){return t&&t.__esModule?t:{default:t}}function _$(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S$(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}const I$=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return uy},__asyncDelegator:v$,__asyncGenerator:w$,__asyncValues:b$,__await:Gu,__awaiter:h$,__classPrivateFieldGet:_$,__classPrivateFieldSet:S$,__createBinding:p$,__decorate:c$,__exportStar:g$,__extends:a$,__generator:d$,__importDefault:A$,__importStar:x$,__makeTemplateObject:E$,__metadata:f$,__param:u$,__read:QI,__rest:l$,__spread:m$,__spreadArrays:y$,__values:fy},Symbol.toStringTag,{value:"Module"})),mf=iA(I$);var rg={},kc={},U2;function P$(){if(U2)return kc;U2=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.delay=void 0;function t(e){return new Promise(r=>{setTimeout(()=>{r(!0)},e)})}return kc.delay=t,kc}var ea={},ng={},ta={},L2;function C$(){return L2||(L2=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.ONE_THOUSAND=ta.ONE_HUNDRED=void 0,ta.ONE_HUNDRED=100,ta.ONE_THOUSAND=1e3),ta}var ig={},F2;function O$(){return F2||(F2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=t.ONE_MINUTE*5,t.TEN_MINUTES=t.ONE_MINUTE*10,t.THIRTY_MINUTES=t.ONE_MINUTE*30,t.SIXTY_MINUTES=t.ONE_MINUTE*60,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=t.ONE_HOUR*3,t.SIX_HOURS=t.ONE_HOUR*6,t.TWELVE_HOURS=t.ONE_HOUR*12,t.TWENTY_FOUR_HOURS=t.ONE_HOUR*24,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=t.ONE_DAY*3,t.FIVE_DAYS=t.ONE_DAY*5,t.SEVEN_DAYS=t.ONE_DAY*7,t.THIRTY_DAYS=t.ONE_DAY*30,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=t.ONE_WEEK*2,t.THREE_WEEKS=t.ONE_WEEK*3,t.FOUR_WEEKS=t.ONE_WEEK*4,t.ONE_YEAR=t.ONE_DAY*365}(ig)),ig}var j2;function JI(){return j2||(j2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=mf;e.__exportStar(C$(),t),e.__exportStar(O$(),t)}(ng)),ng}var z2;function N$(){if(z2)return ea;z2=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.fromMiliseconds=ea.toMiliseconds=void 0;const t=JI();function e(n){return n*t.ONE_THOUSAND}ea.toMiliseconds=e;function r(n){return Math.floor(n/t.ONE_THOUSAND)}return ea.fromMiliseconds=r,ea}var q2;function T$(){return q2||(q2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=mf;e.__exportStar(P$(),t),e.__exportStar(N$(),t)}(rg)),rg}var Za={},H2;function k$(){if(H2)return Za;H2=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.Watch=void 0;class t{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const n=this.get(r);if(typeof n.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const i=Date.now()-n.started;this.timestamps.set(r,{started:n.started,elapsed:i})}get(r){const n=this.timestamps.get(r);if(typeof n>"u")throw new Error(`No timestamp found for label: ${r}`);return n}elapsed(r){const n=this.get(r);return n.elapsed||Date.now()-n.started}}return Za.Watch=t,Za.default=t,Za}var sg={},Dc={},V2;function D$(){if(V2)return Dc;V2=1,Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.IWatch=void 0;class t{}return Dc.IWatch=t,Dc}var K2;function R$(){return K2||(K2=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),mf.__exportStar(D$(),t)}(sg)),sg}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=mf;e.__exportStar(T$(),t),e.__exportStar(k$(),t),e.__exportStar(R$(),t),e.__exportStar(JI(),t)})(te);var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.getLocalStorage=Ve.getLocalStorageOrThrow=Ve.getCrypto=Ve.getCryptoOrThrow=ZI=Ve.getLocation=Ve.getLocationOrThrow=Ev=Ve.getNavigator=Ve.getNavigatorOrThrow=Ra=Ve.getDocument=Ve.getDocumentOrThrow=Ve.getFromWindowOrThrow=Ve.getFromWindow=void 0;function Ha(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}Ve.getFromWindow=Ha;function gc(t){const e=Ha(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}Ve.getFromWindowOrThrow=gc;function $$(){return gc("document")}Ve.getDocumentOrThrow=$$;function M$(){return Ha("document")}var Ra=Ve.getDocument=M$;function B$(){return gc("navigator")}Ve.getNavigatorOrThrow=B$;function U$(){return Ha("navigator")}var Ev=Ve.getNavigator=U$;function L$(){return gc("location")}Ve.getLocationOrThrow=L$;function F$(){return Ha("location")}var ZI=Ve.getLocation=F$;function j$(){return gc("crypto")}Ve.getCryptoOrThrow=j$;function z$(){return Ha("crypto")}Ve.getCrypto=z$;function q$(){return gc("localStorage")}Ve.getLocalStorageOrThrow=q$;function H$(){return Ha("localStorage")}Ve.getLocalStorage=H$;var xv={};Object.defineProperty(xv,"__esModule",{value:!0});var XI=xv.getWindowMetadata=void 0;const W2=Ve;function V$(){let t,e;try{t=W2.getDocumentOrThrow(),e=W2.getLocationOrThrow()}catch{return null}function r(){const f=t.getElementsByTagName("link"),h=[];for(let g=0;g<f.length;g++){const w=f[g],v=w.getAttribute("rel");if(v&&v.toLowerCase().indexOf("icon")>-1){const O=w.getAttribute("href");if(O)if(O.toLowerCase().indexOf("https:")===-1&&O.toLowerCase().indexOf("http:")===-1&&O.indexOf("//")!==0){let A=e.protocol+"//"+e.host;if(O.indexOf("/")===0)A+=O;else{const I=e.pathname.split("/");I.pop();const _=I.join("/");A+=_+"/"+O}h.push(A)}else if(O.indexOf("//")===0){const A=e.protocol+O;h.push(A)}else h.push(O)}}return h}function n(...f){const h=t.getElementsByTagName("meta");for(let g=0;g<h.length;g++){const w=h[g],v=["itemprop","property","name"].map(O=>w.getAttribute(O)).filter(O=>O?f.includes(O):!1);if(v.length&&v){const O=w.getAttribute("content");if(O)return O}}return""}function i(){let f=n("name","og:site_name","og:title","twitter:title");return f||(f=t.title),f}function s(){return n("description","og:description","twitter:description","keywords")}const o=i(),a=s(),l=e.origin,c=r();return{description:a,url:l,icons:c,name:o}}XI=xv.getWindowMetadata=V$;const K$="0.1.1";function W$(){return K$}class Et extends Error{constructor(e,r={}){const n=(()=>{var l;if(r.cause instanceof Et){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:(l=r.cause)!=null&&l.message?r.cause.message:r.details})(),i=r.cause instanceof Et&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${i??""}`,a=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||i?["",n?`Details: ${n}`:void 0,i?`See: ${o}`:void 0]:[]].filter(l=>typeof l=="string").join(`
`);super(a,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${W$()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=i,this.shortMessage=e}walk(e){return e6(this,e)}}function e6(t,e){return e!=null&&e(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?e6(t.cause,e):e?null:t}const Xa=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function G$(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Yu(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function $a(t,...e){if(!G$(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Y$(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Yu(t.outputLen),Yu(t.blockLen)}function tc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function t6(t,e){$a(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Q$(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function rc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function og(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function vi(t,e){return t<<32-e|t>>>e}const J$=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Z$(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function X$(t){for(let e=0;e<t.length;e++)t[e]=Z$(t[e]);return t}const G2=J$?t=>t:X$;function eM(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Op(t){return typeof t=="string"&&(t=eM(t)),$a(t),t}function tM(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];$a(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}class Av{}function r6(t){const e=n=>t().update(Op(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function rM(t=32){if(Xa&&typeof Xa.getRandomValues=="function")return Xa.getRandomValues(new Uint8Array(t));if(Xa&&typeof Xa.randomBytes=="function")return Uint8Array.from(Xa.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function nM(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),l=n?4:0,c=n?0:4;t.setUint32(e+l,o,n),t.setUint32(e+c,a,n)}function iM(t,e,r){return t&e^~t&r}function sM(t,e,r){return t&e^t&r^e&r}class oM extends Av{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=og(this.buffer)}update(e){tc(this),e=Op(e),$a(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=og(e);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){tc(this),t6(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,rc(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)r[f]=0;nM(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=og(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const qs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Xf=BigInt(2**32-1),Y2=BigInt(32);function aM(t,e=!1){return e?{h:Number(t&Xf),l:Number(t>>Y2&Xf)}:{h:Number(t>>Y2&Xf)|0,l:Number(t&Xf)|0}}function lM(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=aM(t[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const cM=(t,e,r)=>t<<r|e>>>32-r,uM=(t,e,r)=>e<<r|t>>>32-r,fM=(t,e,r)=>e<<r-32|t>>>64-r,hM=(t,e,r)=>t<<r-32|e>>>64-r,dM=BigInt(0),Rc=BigInt(1),pM=BigInt(2),gM=BigInt(7),mM=BigInt(256),yM=BigInt(113),n6=[],i6=[],s6=[];for(let t=0,e=Rc,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],n6.push(2*(5*n+r)),i6.push((t+1)*(t+2)/2%64);let i=dM;for(let s=0;s<7;s++)e=(e<<Rc^(e>>gM)*yM)%mM,e&pM&&(i^=Rc<<(Rc<<BigInt(s))-Rc);s6.push(i)}const o6=lM(s6,!0),wM=o6[0],vM=o6[1],Q2=(t,e,r)=>r>32?fM(t,e,r):cM(t,e,r),J2=(t,e,r)=>r>32?hM(t,e,r):uM(t,e,r);function bM(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=r[l],u=r[l+1],f=Q2(c,u,1)^r[a],h=J2(c,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=f,t[o+g+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=i6[o],l=Q2(i,s,a),c=J2(i,s,a),u=n6[o];i=t[u],s=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=wM[n],t[1]^=vM[n]}rc(r)}class _v extends Av{constructor(e,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,Yu(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Q$(this.state)}clone(){return this._cloneInto()}keccak(){G2(this.state32),bM(this.state32,this.rounds),G2(this.state32),this.posOut=0,this.pos=0}update(e){tc(this),e=Op(e),$a(e);const{blockLen:r,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){tc(this,!1),$a(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Yu(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(t6(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,rc(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new _v(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const EM=(t,e,r)=>r6(()=>new _v(e,t,r)),xM=EM(1,136,256/8),AM=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Hs=new Uint32Array(64);class _M extends oM{constructor(e=32){super(64,e,8,!1),this.A=qs[0]|0,this.B=qs[1]|0,this.C=qs[2]|0,this.D=qs[3]|0,this.E=qs[4]|0,this.F=qs[5]|0,this.G=qs[6]|0,this.H=qs[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[e,r,n,i,s,o,a,l]}set(e,r,n,i,s,o,a,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,r){for(let f=0;f<16;f++,r+=4)Hs[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){const h=Hs[f-15],g=Hs[f-2],w=vi(h,7)^vi(h,18)^h>>>3,v=vi(g,17)^vi(g,19)^g>>>10;Hs[f]=v+Hs[f-7]+w+Hs[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let f=0;f<64;f++){const h=vi(a,6)^vi(a,11)^vi(a,25),g=u+h+iM(a,l,c)+AM[f]+Hs[f]|0,v=(vi(n,2)^vi(n,13)^vi(n,22))+sM(n,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=n,n=g+v|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,l,c,u)}roundClean(){rc(Hs)}destroy(){this.set(0,0,0,0,0,0,0,0),rc(this.buffer)}}const SM=r6(()=>new _M);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sv=BigInt(0),hy=BigInt(1);function yf(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Iv(t){if(!yf(t))throw new Error("Uint8Array expected")}function Qu(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}function eh(t){const e=t.toString(16);return e.length&1?"0"+e:e}function a6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Sv:BigInt("0x"+t)}const l6=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",IM=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ju(t){if(Iv(t),l6)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=IM[t[r]];return e}const Ji={_0:48,_9:57,A:65,F:70,a:97,f:102};function Z2(t){if(t>=Ji._0&&t<=Ji._9)return t-Ji._0;if(t>=Ji.A&&t<=Ji.F)return t-(Ji.A-10);if(t>=Ji.a&&t<=Ji.f)return t-(Ji.a-10)}function $d(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(l6)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=Z2(t.charCodeAt(s)),a=Z2(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}n[i]=o*16+a}return n}function _a(t){return a6(Ju(t))}function c6(t){return Iv(t),a6(Ju(Uint8Array.from(t).reverse()))}function wf(t,e){return $d(t.toString(16).padStart(e*2,"0"))}function u6(t,e){return wf(t,e).reverse()}function Tn(t,e,r){let n;if(typeof e=="string")try{n=$d(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(yf(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function Md(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];Iv(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const ag=t=>typeof t=="bigint"&&Sv<=t;function Pv(t,e,r){return ag(t)&&ag(e)&&ag(r)&&e<=t&&t<r}function Ul(t,e,r,n){if(!Pv(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function PM(t){let e;for(e=0;t>Sv;t>>=hy,e+=1);return e}const Np=t=>(hy<<BigInt(t))-hy,lg=t=>new Uint8Array(t),X2=t=>Uint8Array.from(t);function CM(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=lg(t),i=lg(t),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...f)=>r(i,n,...f),l=(f=lg(0))=>{i=a(X2([0]),f),n=a(),f.length!==0&&(i=a(X2([1]),f),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const h=[];for(;f<e;){n=a();const g=n.slice();h.push(g),f+=n.length}return Md(...h)};return(f,h)=>{o(),l(f);let g;for(;!(g=h(c()));)l();return o(),g}}const OM={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||yf(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Tp(t,e,r={}){const n=(i,s,o)=>{const a=OM[s];if(typeof a!="function")throw new Error("invalid validator function");const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+l)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function eE(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}function NM(t,e){if(iE(t)>e)throw new JM({givenSize:iE(t),maxSize:e})}const Zi={zero:48,nine:57,A:65,F:70,a:97,f:102};function tE(t){if(t>=Zi.zero&&t<=Zi.nine)return t-Zi.zero;if(t>=Zi.A&&t<=Zi.F)return t-(Zi.A-10);if(t>=Zi.a&&t<=Zi.f)return t-(Zi.a-10)}function TM(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;if(t.length>n)throw new ZM({size:t.length,targetSize:n,type:"Bytes"});const i=new Uint8Array(n);for(let s=0;s<n;s++){const o=r==="right";i[o?s:n-s-1]=t[o?s:t.length-s-1]}return i}function f6(t,e){if(Ro(t)>e)throw new jM({givenSize:Ro(t),maxSize:e})}function kM(t,e){if(typeof e=="number"&&e>0&&e>Ro(t)-1)throw new p6({offset:e,position:"start",size:Ro(t)})}function DM(t,e,r){if(typeof e=="number"&&typeof r=="number"&&Ro(t)!==r-e)throw new p6({offset:r,position:"end",size:Ro(t)})}function h6(t,e={}){const{dir:r,size:n=32}=e;if(n===0)return t;const i=t.replace("0x","");if(i.length>n*2)throw new zM({size:Math.ceil(i.length/2),targetSize:n,type:"Hex"});return`0x${i[r==="right"?"padEnd":"padStart"](n*2,"0")}`}const RM="#__bigint";function Cv(t,e,r){return JSON.stringify(t,(n,i)=>typeof i=="bigint"?i.toString()+RM:i,r)}const $M=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function MM(t,e={}){const{strict:r=!1}=e;if(!t)throw new rE(t);if(typeof t!="string")throw new rE(t);if(r&&!/^0x[0-9a-fA-F]*$/.test(t))throw new nE(t);if(!t.startsWith("0x"))throw new nE(t)}function BM(...t){return`0x${t.reduce((e,r)=>e+r.replace("0x",""),"")}`}function Ov(t){return t instanceof Uint8Array?Bd(t):Array.isArray(t)?Bd(new Uint8Array(t)):t}function Bd(t,e={}){let r="";for(let i=0;i<t.length;i++)r+=$M[t[i]];const n=`0x${r}`;return typeof e.size=="number"?(f6(n,e.size),d6(n,e.size)):n}function cg(t,e={}){const{signed:r,size:n}=e,i=BigInt(t);let s;n?r?s=(1n<<BigInt(n)*8n-1n)-1n:s=2n**(BigInt(n)*8n)-1n:typeof t=="number"&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof s=="bigint"&&r?-s-1n:0;if(s&&i>s||i<o){const c=typeof t=="bigint"?"n":"";throw new FM({max:s?`${s}${c}`:void 0,min:`${o}${c}`,signed:r,size:n,value:`${t}${c}`})}const l=`0x${(r&&i<0?(1n<<BigInt(n*8))+BigInt(i):i).toString(16)}`;return n?UM(l,n):l}function UM(t,e){return h6(t,{dir:"left",size:e})}function d6(t,e){return h6(t,{dir:"right",size:e})}function cs(t,e,r,n={}){const{strict:i}=n;kM(t,e);const s=`0x${t.replace("0x","").slice((e??0)*2,(r??t.length)*2)}`;return i&&DM(s,e,r),s}function Ro(t){return Math.ceil((t.length-2)/2)}function LM(t,e={}){const{strict:r=!1}=e;try{return MM(t,{strict:r}),!0}catch{return!1}}class FM extends Et{constructor({max:e,min:r,signed:n,size:i,value:s}){super(`Number \`${s}\` is not in safe${i?` ${i*8}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${r}\` to \`${e}\`)`:`(above \`${r}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class rE extends Et{constructor(e){super(`Value \`${typeof e=="object"?Cv(e):e}\` of type \`${typeof e}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class nE extends Et{constructor(e){super(`Value \`${e}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let jM=class extends Et{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class p6 extends Et{constructor({offset:e,position:r,size:n}){super(`Slice ${r==="start"?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let zM=class extends Et{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const qM=new TextEncoder;function HM(t){if(!(t instanceof Uint8Array)){if(!t)throw new th(t);if(typeof t!="object")throw new th(t);if(!("BYTES_PER_ELEMENT"in t))throw new th(t);if(t.BYTES_PER_ELEMENT!==1||t.constructor.name!=="Uint8Array")throw new th(t)}}function VM(t){return t instanceof Uint8Array?t:typeof t=="string"?WM(t):KM(t)}function KM(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function WM(t,e={}){const{size:r}=e;let n=t;r&&(f6(t,r),n=d6(t,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);const s=i.length/2,o=new Uint8Array(s);for(let a=0,l=0;a<s;a++){const c=tE(i.charCodeAt(l++)),u=tE(i.charCodeAt(l++));if(c===void 0||u===void 0)throw new Et(`Invalid byte sequence ("${i[l-2]}${i[l-1]}" in "${i}").`);o[a]=c*16+u}return o}function GM(t,e={}){const{size:r}=e,n=qM.encode(t);return typeof r=="number"?(NM(n,r),YM(n,r)):n}function YM(t,e){return TM(t,{dir:"right",size:e})}function iE(t){return t.length}function QM(t){try{return HM(t),!0}catch{return!1}}class th extends Et{constructor(e){super(`Value \`${typeof e=="object"?Cv(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class JM extends Et{constructor({givenSize:e,maxSize:r}){super(`Size cannot exceed \`${r}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class ZM extends Et{constructor({size:e,targetSize:r,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function g6(t,e={}){const{as:r=typeof t=="string"?"Hex":"Bytes"}=e,n=xM(VM(t));return r==="Bytes"?n:Bd(n)}class XM extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const r=super.get(e);return super.has(e)&&r!==void 0&&(this.delete(e),super.set(e,r)),r}set(e,r){if(super.set(e,r),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const eB={checksum:new XM(8192)},ug=eB.checksum;function m6(t,e={}){const{compressed:r}=e,{prefix:n,x:i,y:s}=t;if(r===!1||typeof i=="bigint"&&typeof s=="bigint"){if(n!==4)throw new sE({prefix:n,cause:new oB});return}if(r===!0||typeof i=="bigint"&&typeof s>"u"){if(n!==3&&n!==2)throw new sE({prefix:n,cause:new sB});return}throw new iB({publicKey:t})}function tB(t){const e=(()=>{if(LM(t))return y6(t);if(QM(t))return rB(t);const{prefix:r,x:n,y:i}=t;return typeof n=="bigint"&&typeof i=="bigint"?{prefix:r??4,x:n,y:i}:{prefix:r,x:n}})();return m6(e),e}function rB(t){return y6(Bd(t))}function y6(t){if(t.length!==132&&t.length!==130&&t.length!==68)throw new aB({publicKey:t});if(t.length===130){const n=BigInt(cs(t,0,32)),i=BigInt(cs(t,32,64));return{prefix:4,x:n,y:i}}if(t.length===132){const n=Number(cs(t,0,1)),i=BigInt(cs(t,1,33)),s=BigInt(cs(t,33,65));return{prefix:n,x:i,y:s}}const e=Number(cs(t,0,1)),r=BigInt(cs(t,1,33));return{prefix:e,x:r}}function nB(t,e={}){m6(t);const{prefix:r,x:n,y:i}=t,{includePrefix:s=!0}=e;return BM(s?cg(r,{size:1}):"0x",cg(n,{size:32}),typeof i=="bigint"?cg(i,{size:32}):"0x")}class iB extends Et{constructor({publicKey:e}){super(`Value \`${Cv(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class sE extends Et{constructor({prefix:e,cause:r}){super(`Prefix "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class sB extends Et{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class oB extends Et{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let aB=class extends Et{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${Ro(Ov(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const lB=/^0x[a-fA-F0-9]{40}$/;function w6(t,e={}){const{strict:r=!0}=e;if(!lB.test(t))throw new oE({address:t,cause:new fB});if(r){if(t.toLowerCase()===t)return;if(v6(t)!==t)throw new oE({address:t,cause:new hB})}}function v6(t){if(ug.has(t))return ug.get(t);w6(t,{strict:!1});const e=t.substring(2).toLowerCase(),r=g6(GM(e),{as:"Bytes"}),n=e.split("");for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&n[s]&&(n[s]=n[s].toUpperCase()),(r[s>>1]&15)>=8&&n[s+1]&&(n[s+1]=n[s+1].toUpperCase());const i=`0x${n.join("")}`;return ug.set(t,i),i}function cB(t,e={}){const{checksum:r=!1}=e;return w6(t),r?v6(t):t}function uB(t,e={}){const r=g6(`0x${nB(t).slice(4)}`).substring(26);return cB(`0x${r}`,e)}class oE extends Et{constructor({address:e,cause:r}){super(`Address "${e}" is invalid.`,{cause:r}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class fB extends Et{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class hB extends Et{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}class b6 extends Av{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Y$(e);const n=Op(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),rc(s)}update(e){return tc(this),this.iHash.update(e),this}digestInto(e){tc(this),$a(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const E6=(t,e,r)=>new b6(t,e).update(r).digest();E6.create=(t,e)=>new b6(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Qr=BigInt(0),Rr=BigInt(1),ya=BigInt(2),dB=BigInt(3),x6=BigInt(4),A6=BigInt(5),_6=BigInt(8);function Hr(t,e){const r=t%e;return r>=Qr?r:e+r}function In(t,e,r){let n=t;for(;e-- >Qr;)n*=n,n%=r;return n}function dy(t,e){if(t===Qr)throw new Error("invert: expected non-zero number");if(e<=Qr)throw new Error("invert: expected positive modulus, got "+e);let r=Hr(t,e),n=e,i=Qr,s=Rr;for(;r!==Qr;){const a=n/r,l=n%r,c=i-s*a;n=r,r=l,i=s,s=c}if(n!==Rr)throw new Error("invert: does not exist");return Hr(i,e)}function S6(t,e){const r=(t.ORDER+Rr)/x6,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function pB(t,e){const r=(t.ORDER-A6)/_6,n=t.mul(e,ya),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,ya),i),a=t.mul(s,t.sub(o,t.ONE));if(!t.eql(t.sqr(a),e))throw new Error("Cannot find square root");return a}function gB(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");let e=t-Rr,r=0;for(;e%ya===Qr;)e/=ya,r++;let n=ya;const i=Nv(t);for(;aE(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return S6;let s=i.pow(n,e);const o=(e+Rr)/ya;return function(l,c){if(l.is0(c))return c;if(aE(l,c)!==1)throw new Error("Cannot find square root");let u=r,f=l.mul(l.ONE,s),h=l.pow(c,e),g=l.pow(c,o);for(;!l.eql(h,l.ONE);){if(l.is0(h))return l.ZERO;let w=1,v=l.sqr(h);for(;!l.eql(v,l.ONE);)if(w++,v=l.sqr(v),w===u)throw new Error("Cannot find square root");const O=Rr<<BigInt(u-w-1),A=l.pow(f,O);u=w,f=l.sqr(A),h=l.mul(h,f),g=l.mul(g,A)}return g}}function mB(t){return t%x6===dB?S6:t%_6===A6?pB:gB(t)}const yB=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function wB(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=yB.reduce((n,i)=>(n[i]="function",n),e);return Tp(t,r)}function vB(t,e,r){if(r<Qr)throw new Error("invalid exponent, negatives unsupported");if(r===Qr)return t.ONE;if(r===Rr)return e;let n=t.ONE,i=e;for(;r>Qr;)r&Rr&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Rr;return n}function I6(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,l)=>t.is0(a)?o:(n[l]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,l)=>t.is0(a)?o:(n[l]=t.mul(o,n[l]),t.mul(o,a)),s),n}function aE(t,e){const r=(t.ORDER-Rr)/ya,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function P6(t,e){e!==void 0&&Yu(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Nv(t,e,r=!1,n={}){if(t<=Qr)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=P6(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:Np(i),ZERO:Qr,ONE:Rr,create:l=>Hr(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Qr<=l&&l<t},is0:l=>l===Qr,isOdd:l=>(l&Rr)===Rr,neg:l=>Hr(-l,t),eql:(l,c)=>l===c,sqr:l=>Hr(l*l,t),add:(l,c)=>Hr(l+c,t),sub:(l,c)=>Hr(l-c,t),mul:(l,c)=>Hr(l*c,t),pow:(l,c)=>vB(a,l,c),div:(l,c)=>Hr(l*dy(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>dy(l,t),sqrt:n.sqrt||(l=>(o||(o=mB(t)),o(a,l))),toBytes:l=>r?u6(l,s):wf(l,s),fromBytes:l=>{if(l.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);return r?c6(l):_a(l)},invertBatch:l=>I6(a,l),cmov:(l,c,u)=>u?c:l});return Object.freeze(a)}function C6(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function O6(t){const e=C6(t);return e+Math.ceil(e/2)}function bB(t,e,r=!1){const n=t.length,i=C6(e),s=O6(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?c6(t):_a(t),a=Hr(o,e-Rr)+Rr;return r?u6(a,i):wf(a,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lE=BigInt(0),py=BigInt(1);function fg(t,e){const r=e.negate();return t?r:e}function N6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function hg(t,e){N6(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=Np(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function cE(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),l=t>>o;a>n&&(a-=s,l+=py);const c=e*n,u=c+Math.abs(a)-1,f=a===0,h=a<0,g=e%2!==0;return{nextN:l,offset:u,isZero:f,isNeg:h,isNegF:g,offsetF:c}}function EB(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function xB(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const dg=new WeakMap,T6=new WeakMap;function pg(t){return T6.get(t)||1}function AB(t,e){return{constTimeNegate:fg,hasPrecomputes(r){return pg(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>lE;)n&py&&(i=i.add(s)),s=s.double(),n>>=py;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=hg(n,e),o=[];let a=r,l=a;for(let c=0;c<i;c++){l=a,o.push(l);for(let u=1;u<s;u++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(r,n,i){let s=t.ZERO,o=t.BASE;const a=hg(r,e);for(let l=0;l<a.windows;l++){const{nextN:c,offset:u,isZero:f,isNeg:h,isNegF:g,offsetF:w}=cE(i,l,a);i=c,f?o=o.add(fg(g,n[w])):s=s.add(fg(h,n[u]))}return{p:s,f:o}},wNAFUnsafe(r,n,i,s=t.ZERO){const o=hg(r,e);for(let a=0;a<o.windows&&i!==lE;a++){const{nextN:l,offset:c,isZero:u,isNeg:f}=cE(i,a,o);if(i=l,!u){const h=n[c];s=s.add(f?h.negate():h)}}return s},getPrecomputes(r,n,i){let s=dg.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&dg.set(n,i(s))),s},wNAFCached(r,n,i){const s=pg(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=pg(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){N6(n,e),T6.set(r,n),dg.delete(r)}}}function _B(t,e,r,n){EB(r,t),xB(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=PM(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=Np(l),u=new Array(Number(c)+1).fill(o),f=Math.floor((e.BITS-1)/l)*l;let h=o;for(let g=f;g>=0;g-=l){u.fill(o);for(let v=0;v<s;v++){const O=n[v],A=Number(O>>BigInt(g)&c);u[A]=u[A].add(r[v])}let w=o;for(let v=u.length-1,O=o;v>0;v--)O=O.add(u[v]),w=w.add(O);if(h=h.add(w),g!==0)for(let v=0;v<l;v++)h=h.double()}return h}function k6(t){return wB(t.Fp),Tp(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...P6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function uE(t){t.lowS!==void 0&&Qu("lowS",t.lowS),t.prehash!==void 0&&Qu("prehash",t.prehash)}function SB(t){const e=k6(t);Tp(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...e})}class IB extends Error{constructor(e=""){super(e)}}const fs={Err:IB,_tlv:{encode:(t,e)=>{const{Err:r}=fs;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=eh(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?eh(i.length/2|128):"";return eh(t)+s+i+e},decode(t,e){const{Err:r}=fs;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new r("tlv.decode(long): indefinite length not supported");if(l>4)throw new r("tlv.decode(long): byte length is too big");const c=e.subarray(n,n+l);if(c.length!==l)throw new r("tlv.decode: length bytes not complete");if(c[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(n+=l,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=fs;if(t<ps)throw new e("integer: negative integers are not allowed");let r=eh(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=fs;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return _a(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=fs,i=Tn("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=n.decode(2,s),{v:c,l:u}=n.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(t){const{_tlv:e,_int:r}=fs,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}};function gg(t,e){return Ju(wf(t,e))}const ps=BigInt(0),Yt=BigInt(1);BigInt(2);const mg=BigInt(3),PB=BigInt(4);function CB(t){const e=SB(t),{Fp:r}=e,n=Nv(e.n,e.nBitLength),i=e.toBytes||((_,T,D)=>{const R=T.toAffine();return Md(Uint8Array.from([4]),r.toBytes(R.x),r.toBytes(R.y))}),s=e.fromBytes||(_=>{const T=_.subarray(1),D=r.fromBytes(T.subarray(0,r.BYTES)),R=r.fromBytes(T.subarray(r.BYTES,2*r.BYTES));return{x:D,y:R}});function o(_){const{a:T,b:D}=e,R=r.sqr(_),$=r.mul(R,_);return r.add(r.add($,r.mul(_,T)),D)}function a(_,T){const D=r.sqr(T),R=o(_);return r.eql(D,R)}if(!a(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const l=r.mul(r.pow(e.a,mg),PB),c=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(l,c)))throw new Error("bad curve params: a or b");function u(_){return Pv(_,Yt,e.n)}function f(_){const{allowedPrivateKeyLengths:T,nByteLength:D,wrapPrivateKey:R,n:$}=e;if(T&&typeof _!="bigint"){if(yf(_)&&(_=Ju(_)),typeof _!="string"||!T.includes(_.length))throw new Error("invalid private key");_=_.padStart(D*2,"0")}let M;try{M=typeof _=="bigint"?_:_a(Tn("private key",_,D))}catch{throw new Error("invalid private key, expected hex or "+D+" bytes, got "+typeof _)}return R&&(M=Hr(M,$)),Ul("private key",M,Yt,$),M}function h(_){if(!(_ instanceof v))throw new Error("ProjectivePoint expected")}const g=eE((_,T)=>{const{px:D,py:R,pz:$}=_;if(r.eql($,r.ONE))return{x:D,y:R};const M=_.is0();T==null&&(T=M?r.ONE:r.inv($));const B=r.mul(D,T),z=r.mul(R,T),K=r.mul($,T);if(M)return{x:r.ZERO,y:r.ZERO};if(!r.eql(K,r.ONE))throw new Error("invZ was invalid");return{x:B,y:z}}),w=eE(_=>{if(_.is0()){if(e.allowInfinityPoint&&!r.is0(_.py))return;throw new Error("bad point: ZERO")}const{x:T,y:D}=_.toAffine();if(!r.isValid(T)||!r.isValid(D))throw new Error("bad point: x or y not FE");if(!a(T,D))throw new Error("bad point: equation left != right");if(!_.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class v{constructor(T,D,R){if(T==null||!r.isValid(T))throw new Error("x required");if(D==null||!r.isValid(D)||r.is0(D))throw new Error("y required");if(R==null||!r.isValid(R))throw new Error("z required");this.px=T,this.py=D,this.pz=R,Object.freeze(this)}static fromAffine(T){const{x:D,y:R}=T||{};if(!T||!r.isValid(D)||!r.isValid(R))throw new Error("invalid affine point");if(T instanceof v)throw new Error("projective point not allowed");const $=M=>r.eql(M,r.ZERO);return $(D)&&$(R)?v.ZERO:new v(D,R,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(T){const D=I6(r,T.map(R=>R.pz));return T.map((R,$)=>R.toAffine(D[$])).map(v.fromAffine)}static fromHex(T){const D=v.fromAffine(s(Tn("pointHex",T)));return D.assertValidity(),D}static fromPrivateKey(T){return v.BASE.multiply(f(T))}static msm(T,D){return _B(v,n,T,D)}_setWindowSize(T){I.setWindowSize(this,T)}assertValidity(){w(this)}hasEvenY(){const{y:T}=this.toAffine();if(r.isOdd)return!r.isOdd(T);throw new Error("Field doesn't support isOdd")}equals(T){h(T);const{px:D,py:R,pz:$}=this,{px:M,py:B,pz:z}=T,K=r.eql(r.mul(D,z),r.mul(M,$)),L=r.eql(r.mul(R,z),r.mul(B,$));return K&&L}negate(){return new v(this.px,r.neg(this.py),this.pz)}double(){const{a:T,b:D}=e,R=r.mul(D,mg),{px:$,py:M,pz:B}=this;let z=r.ZERO,K=r.ZERO,L=r.ZERO,P=r.mul($,$),p=r.mul(M,M),d=r.mul(B,B),m=r.mul($,M);return m=r.add(m,m),L=r.mul($,B),L=r.add(L,L),z=r.mul(T,L),K=r.mul(R,d),K=r.add(z,K),z=r.sub(p,K),K=r.add(p,K),K=r.mul(z,K),z=r.mul(m,z),L=r.mul(R,L),d=r.mul(T,d),m=r.sub(P,d),m=r.mul(T,m),m=r.add(m,L),L=r.add(P,P),P=r.add(L,P),P=r.add(P,d),P=r.mul(P,m),K=r.add(K,P),d=r.mul(M,B),d=r.add(d,d),P=r.mul(d,m),z=r.sub(z,P),L=r.mul(d,p),L=r.add(L,L),L=r.add(L,L),new v(z,K,L)}add(T){h(T);const{px:D,py:R,pz:$}=this,{px:M,py:B,pz:z}=T;let K=r.ZERO,L=r.ZERO,P=r.ZERO;const p=e.a,d=r.mul(e.b,mg);let m=r.mul(D,M),b=r.mul(R,B),E=r.mul($,z),S=r.add(D,R),N=r.add(M,B);S=r.mul(S,N),N=r.add(m,b),S=r.sub(S,N),N=r.add(D,$);let C=r.add(M,z);return N=r.mul(N,C),C=r.add(m,E),N=r.sub(N,C),C=r.add(R,$),K=r.add(B,z),C=r.mul(C,K),K=r.add(b,E),C=r.sub(C,K),P=r.mul(p,N),K=r.mul(d,E),P=r.add(K,P),K=r.sub(b,P),P=r.add(b,P),L=r.mul(K,P),b=r.add(m,m),b=r.add(b,m),E=r.mul(p,E),N=r.mul(d,N),b=r.add(b,E),E=r.sub(m,E),E=r.mul(p,E),N=r.add(N,E),m=r.mul(b,N),L=r.add(L,m),m=r.mul(C,N),K=r.mul(S,K),K=r.sub(K,m),m=r.mul(S,b),P=r.mul(C,P),P=r.add(P,m),new v(K,L,P)}subtract(T){return this.add(T.negate())}is0(){return this.equals(v.ZERO)}wNAF(T){return I.wNAFCached(this,T,v.normalizeZ)}multiplyUnsafe(T){const{endo:D,n:R}=e;Ul("scalar",T,ps,R);const $=v.ZERO;if(T===ps)return $;if(this.is0()||T===Yt)return this;if(!D||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,T,v.normalizeZ);let{k1neg:M,k1:B,k2neg:z,k2:K}=D.splitScalar(T),L=$,P=$,p=this;for(;B>ps||K>ps;)B&Yt&&(L=L.add(p)),K&Yt&&(P=P.add(p)),p=p.double(),B>>=Yt,K>>=Yt;return M&&(L=L.negate()),z&&(P=P.negate()),P=new v(r.mul(P.px,D.beta),P.py,P.pz),L.add(P)}multiply(T){const{endo:D,n:R}=e;Ul("scalar",T,Yt,R);let $,M;if(D){const{k1neg:B,k1:z,k2neg:K,k2:L}=D.splitScalar(T);let{p:P,f:p}=this.wNAF(z),{p:d,f:m}=this.wNAF(L);P=I.constTimeNegate(B,P),d=I.constTimeNegate(K,d),d=new v(r.mul(d.px,D.beta),d.py,d.pz),$=P.add(d),M=p.add(m)}else{const{p:B,f:z}=this.wNAF(T);$=B,M=z}return v.normalizeZ([$,M])[0]}multiplyAndAddUnsafe(T,D,R){const $=v.BASE,M=(z,K)=>K===ps||K===Yt||!z.equals($)?z.multiplyUnsafe(K):z.multiply(K),B=M(this,D).add(M(T,R));return B.is0()?void 0:B}toAffine(T){return g(this,T)}isTorsionFree(){const{h:T,isTorsionFree:D}=e;if(T===Yt)return!0;if(D)return D(v,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:T,clearCofactor:D}=e;return T===Yt?this:D?D(v,this):this.multiplyUnsafe(e.h)}toRawBytes(T=!0){return Qu("isCompressed",T),this.assertValidity(),i(v,this,T)}toHex(T=!0){return Qu("isCompressed",T),Ju(this.toRawBytes(T))}}v.BASE=new v(e.Gx,e.Gy,r.ONE),v.ZERO=new v(r.ZERO,r.ONE,r.ZERO);const{endo:O,nBitLength:A}=e,I=AB(v,O?Math.ceil(A/2):A);return{CURVE:e,ProjectivePoint:v,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:u}}function OB(t){const e=k6(t);return Tp(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function NB(t){const e=OB(t),{Fp:r,n,nByteLength:i,nBitLength:s}=e,o=r.BYTES+1,a=2*r.BYTES+1;function l(d){return Hr(d,n)}function c(d){return dy(d,n)}const{ProjectivePoint:u,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:g}=CB({...e,toBytes(d,m,b){const E=m.toAffine(),S=r.toBytes(E.x),N=Md;return Qu("isCompressed",b),b?N(Uint8Array.from([m.hasEvenY()?2:3]),S):N(Uint8Array.from([4]),S,r.toBytes(E.y))},fromBytes(d){const m=d.length,b=d[0],E=d.subarray(1);if(m===o&&(b===2||b===3)){const S=_a(E);if(!Pv(S,Yt,r.ORDER))throw new Error("Point is not on curve");const N=h(S);let C;try{C=r.sqrt(N)}catch(q){const x=q instanceof Error?": "+q.message:"";throw new Error("Point is not on curve"+x)}const y=(C&Yt)===Yt;return(b&1)===1!==y&&(C=r.neg(C)),{x:S,y:C}}else if(m===a&&b===4){const S=r.fromBytes(E.subarray(0,r.BYTES)),N=r.fromBytes(E.subarray(r.BYTES,2*r.BYTES));return{x:S,y:N}}else{const S=o,N=a;throw new Error("invalid Point, expected length of "+S+", or uncompressed "+N+", got "+m)}}});function w(d){const m=n>>Yt;return d>m}function v(d){return w(d)?l(-d):d}const O=(d,m,b)=>_a(d.slice(m,b));class A{constructor(m,b,E){Ul("r",m,Yt,n),Ul("s",b,Yt,n),this.r=m,this.s=b,E!=null&&(this.recovery=E),Object.freeze(this)}static fromCompact(m){const b=i;return m=Tn("compactSignature",m,b*2),new A(O(m,0,b),O(m,b,2*b))}static fromDER(m){const{r:b,s:E}=fs.toSig(Tn("DER",m));return new A(b,E)}assertValidity(){}addRecoveryBit(m){return new A(this.r,this.s,m)}recoverPublicKey(m){const{r:b,s:E,recovery:S}=this,N=$(Tn("msgHash",m));if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");const C=S===2||S===3?b+e.n:b;if(C>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const y=S&1?"03":"02",k=u.fromHex(y+gg(C,r.BYTES)),q=c(C),x=l(-N*q),U=l(E*q),F=u.BASE.multiplyAndAddUnsafe(k,x,U);if(!F)throw new Error("point at infinify");return F.assertValidity(),F}hasHighS(){return w(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,l(-this.s),this.recovery):this}toDERRawBytes(){return $d(this.toDERHex())}toDERHex(){return fs.hexFromSig(this)}toCompactRawBytes(){return $d(this.toCompactHex())}toCompactHex(){const m=i;return gg(this.r,m)+gg(this.s,m)}}const I={isValidPrivateKey(d){try{return f(d),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const d=O6(e.n);return bB(e.randomBytes(d),e.n)},precompute(d=8,m=u.BASE){return m._setWindowSize(d),m.multiply(BigInt(3)),m}};function _(d,m=!0){return u.fromPrivateKey(d).toRawBytes(m)}function T(d){if(typeof d=="bigint")return!1;if(d instanceof u)return!0;const b=Tn("key",d).length,E=r.BYTES,S=E+1,N=2*E+1;if(!(e.allowedPrivateKeyLengths||i===S))return b===S||b===N}function D(d,m,b=!0){if(T(d)===!0)throw new Error("first arg must be private key");if(T(m)===!1)throw new Error("second arg must be public key");return u.fromHex(m).multiply(f(d)).toRawBytes(b)}const R=e.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const m=_a(d),b=d.length*8-s;return b>0?m>>BigInt(b):m},$=e.bits2int_modN||function(d){return l(R(d))},M=Np(s);function B(d){return Ul("num < 2^"+s,d,ps,M),wf(d,i)}function z(d,m,b=K){if(["recovered","canonical"].some(V=>V in b))throw new Error("sign() legacy options not supported");const{hash:E,randomBytes:S}=e;let{lowS:N,prehash:C,extraEntropy:y}=b;N==null&&(N=!0),d=Tn("msgHash",d),uE(b),C&&(d=Tn("prehashed msgHash",E(d)));const k=$(d),q=f(m),x=[B(q),B(k)];if(y!=null&&y!==!1){const V=y===!0?S(r.BYTES):y;x.push(Tn("extraEntropy",V))}const U=Md(...x),F=k;function H(V){const Z=R(V);if(!g(Z))return;const X=c(Z),J=u.BASE.multiply(Z).toAffine(),de=l(J.x);if(de===ps)return;const ie=l(X*l(F+de*q));if(ie===ps)return;let ce=(J.x===de?0:2)|Number(J.y&Yt),mr=ie;return N&&w(ie)&&(mr=v(ie),ce^=1),new A(de,mr,ce)}return{seed:U,k2sig:H}}const K={lowS:e.lowS,prehash:!1},L={lowS:e.lowS,prehash:!1};function P(d,m,b=K){const{seed:E,k2sig:S}=z(d,m,b),N=e;return CM(N.hash.outputLen,N.nByteLength,N.hmac)(E,S)}u.BASE._setWindowSize(8);function p(d,m,b,E=L){var ce;const S=d;m=Tn("msgHash",m),b=Tn("publicKey",b);const{lowS:N,prehash:C,format:y}=E;if(uE(E),"strict"in E)throw new Error("options.strict was renamed to lowS");if(y!==void 0&&y!=="compact"&&y!=="der")throw new Error("format must be compact or der");const k=typeof S=="string"||yf(S),q=!k&&!y&&typeof S=="object"&&S!==null&&typeof S.r=="bigint"&&typeof S.s=="bigint";if(!k&&!q)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let x,U;try{if(q&&(x=new A(S.r,S.s)),k){try{y!=="compact"&&(x=A.fromDER(S))}catch(mr){if(!(mr instanceof fs.Err))throw mr}!x&&y!=="der"&&(x=A.fromCompact(S))}U=u.fromHex(b)}catch{return!1}if(!x||N&&x.hasHighS())return!1;C&&(m=e.hash(m));const{r:F,s:H}=x,V=$(m),Z=c(H),X=l(V*Z),J=l(F*Z),de=(ce=u.BASE.multiplyAndAddUnsafe(U,X,J))==null?void 0:ce.toAffine();return de?l(de.x)===F:!1}return{CURVE:e,getPublicKey:_,getSharedSecret:D,sign:P,verify:p,ProjectivePoint:u,Signature:A,utils:I}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function TB(t){return{hash:t,hmac:(e,...r)=>E6(t,e,tM(...r)),randomBytes:rM}}function kB(t,e){const r=n=>NB({...t,...TB(n)});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const D6=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),fE=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),DB=BigInt(0),RB=BigInt(1),gy=BigInt(2),hE=(t,e)=>(t+e/gy)/e;function $B(t){const e=D6,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,f=In(u,r,e)*u%e,h=In(f,r,e)*u%e,g=In(h,gy,e)*c%e,w=In(g,i,e)*g%e,v=In(w,s,e)*w%e,O=In(v,a,e)*v%e,A=In(O,l,e)*O%e,I=In(A,a,e)*v%e,_=In(I,r,e)*u%e,T=In(_,o,e)*w%e,D=In(T,n,e)*c%e,R=In(D,gy,e);if(!my.eql(my.sqr(R),t))throw new Error("Cannot find square root");return R}const my=Nv(D6,void 0,void 0,{sqrt:$B}),MB=kB({a:DB,b:BigInt(7),Fp:my,n:fE,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{const e=fE,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-RB*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=hE(s*t,e),l=hE(-n*t,e);let c=Hr(t-a*r-l*i,e),u=Hr(-a*n-l*s,e);const f=c>o,h=u>o;if(f&&(c=e-c),h&&(u=e-u),c>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:c,k2neg:h,k2:u}}}},SM);function BB(t){if(t.length!==130&&t.length!==132)throw new LB({signature:t});const e=BigInt(cs(t,0,32)),r=BigInt(cs(t,32,64)),n=(()=>{const i=+`0x${t.slice(130)}`;if(!Number.isNaN(i))try{return UB(i)}catch{throw new FB({value:i})}})();return typeof n>"u"?{r:e,s:r}:{r:e,s:r,yParity:n}}function UB(t){if(t===0||t===27)return 0;if(t===1||t===28)return 1;if(t>=35)return t%2===0?1:0;throw new jB({value:t})}class LB extends Et{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Ro(Ov(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class FB extends Et{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class jB extends Et{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zB(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function R6(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function Ud(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Tv(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function yy(t){if(!Array.isArray(t))throw new Error("array expected")}function Ld(t,e){if(!R6(!0,e))throw new Error(`${t}: array of strings expected`)}function qB(t,e){if(!R6(!1,e))throw new Error(`${t}: array of numbers expected`)}function HB(...t){const e=s=>s,r=(s,o)=>a=>s(o(a)),n=t.map(s=>s.encode).reduceRight(r,e),i=t.map(s=>s.decode).reduce(r,e);return{encode:n,decode:i}}function VB(t){const e=typeof t=="string"?t.split(""):t,r=e.length;Ld("alphabet",e);const n=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(yy(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${t}`);return e[s]})),decode:i=>(yy(i),i.map(s=>{Ud("alphabet.decode",s);const o=n.get(s);if(o===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${t}`);return o}))}}function KB(t=""){return Ud("join",t),{encode:e=>(Ld("join.decode",e),e.join(t)),decode:e=>(Ud("join.decode",e),e.split(t))}}function WB(t,e="="){return Tv(t),Ud("padding",e),{encode(r){for(Ld("padding.encode",r);r.length*t%8;)r.push(e);return r},decode(r){Ld("padding.decode",r);let n=r.length;if(n*t%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===e;n--)if((n-1)*t%8===0)throw new Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}const $6=(t,e)=>e===0?t:$6(e,t%e),Fd=(t,e)=>t+(e-$6(t,e)),yg=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function dE(t,e,r,n){if(yy(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(Fd(e,r)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${r} carryBits=${Fd(e,r)}`);let i=0,s=0;const o=yg[e],a=yg[r]-1,l=[];for(const c of t){if(Tv(c),c>=o)throw new Error(`convertRadix2: invalid data word=${c} from=${e}`);if(i=i<<e|c,s+e>32)throw new Error(`convertRadix2: carry overflow pos=${s} from=${e}`);for(s+=e;s>=r;s-=r)l.push((i>>s-r&a)>>>0);const u=yg[s];if(u===void 0)throw new Error("invalid carry");i&=u-1}if(i=i<<r-s&a,!n&&s>=e)throw new Error("Excess padding");if(!n&&i>0)throw new Error(`Non-zero padding: ${i}`);return n&&s>0&&l.push(i>>>0),l}function GB(t,e=!1){if(Tv(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Fd(8,t)>32||Fd(t,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!zB(r))throw new Error("radix2.encode input should be Uint8Array");return dE(Array.from(r),8,t,!e)},decode:r=>(qB("radix2.decode",r),Uint8Array.from(dE(r,t,8,e)))}}const YB=HB(GB(5),VB("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),WB(5),KB(""));function QB(t){return uB(JB(t))}function JB(t){const{payload:e,signature:r}=t,{r:n,s:i,yParity:s}=r,a=new MB.Signature(BigInt(n),BigInt(i)).addRecoveryBit(s).recoverPublicKey(Ov(e).substring(2));return tB(a)}function ZB(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){const u=t.charAt(c),f=u.charCodeAt(0);if(e[f]!==255)throw new TypeError(u+" is ambiguous");e[f]=c}const r=t.length,n=t.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let u=0,f=0,h=0;const g=c.length;for(;h!==g&&c[h]===0;)h++,u++;const w=(g-h)*s+1>>>0,v=new Uint8Array(w);for(;h!==g;){let I=c[h],_=0;for(let T=w-1;(I!==0||_<f)&&T!==-1;T--,_++)I+=256*v[T]>>>0,v[T]=I%r>>>0,I=I/r>>>0;if(I!==0)throw new Error("Non-zero carry");f=_,h++}let O=w-f;for(;O!==w&&v[O]===0;)O++;let A=n.repeat(u);for(;O<w;++O)A+=t.charAt(v[O]);return A}function a(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let u=0,f=0,h=0;for(;c[u]===n;)f++,u++;const g=(c.length-u)*i+1>>>0,w=new Uint8Array(g);for(;u<c.length;){const I=c.charCodeAt(u);if(I>255)return;let _=e[I];if(_===255)return;let T=0;for(let D=g-1;(_!==0||T<h)&&D!==-1;D--,T++)_+=r*w[D]>>>0,w[D]=_%256>>>0,_=_/256>>>0;if(_!==0)throw new Error("Non-zero carry");h=T,u++}let v=g-h;for(;v!==g&&w[v]===0;)v++;const O=new Uint8Array(f+(g-v));let A=f;for(;v!==g;)O[A++]=w[v++];return O}function l(c){const u=a(c);if(u)return u;throw new Error("Non-base"+r+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var XB="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const vf=ZB(XB);function e9(t){const e=t.length;let r=0,n=0;for(;n<e;){let i=t.charCodeAt(n++);if(i&4294967168)if(!(i&4294965248))r+=2;else{if(i>=55296&&i<=56319&&n<e){const s=t.charCodeAt(n);(s&64512)===56320&&(++n,i=((i&1023)<<10)+(s&1023)+65536)}i&4294901760?r+=4:r+=3}else{r++;continue}}return r}function t9(t,e,r){const n=t.length;let i=r,s=0;for(;s<n;){let o=t.charCodeAt(s++);if(o&4294967168)if(!(o&4294965248))e[i++]=o>>6&31|192;else{if(o>=55296&&o<=56319&&s<n){const a=t.charCodeAt(s);(a&64512)===56320&&(++s,o=((o&1023)<<10)+(a&1023)+65536)}o&4294901760?(e[i++]=o>>18&7|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128):(e[i++]=o>>12&15|224,e[i++]=o>>6&63|128)}else{e[i++]=o;continue}e[i++]=o&63|128}}const r9=new TextEncoder,n9=50;function i9(t,e,r){r9.encodeInto(t,e.subarray(r))}function s9(t,e,r){t.length>n9?i9(t,e,r):t9(t,e,r)}const o9=4096;function M6(t,e,r){let n=e;const i=n+r,s=[];let o="";for(;n<i;){const a=t[n++];if(!(a&128))s.push(a);else if((a&224)===192){const l=t[n++]&63;s.push((a&31)<<6|l)}else if((a&240)===224){const l=t[n++]&63,c=t[n++]&63;s.push((a&31)<<12|l<<6|c)}else if((a&248)===240){const l=t[n++]&63,c=t[n++]&63,u=t[n++]&63;let f=(a&7)<<18|l<<12|c<<6|u;f>65535&&(f-=65536,s.push(f>>>10&1023|55296),f=56320|f&1023),s.push(f)}else s.push(a);s.length>=o9&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}const a9=new TextDecoder,l9=200;function c9(t,e,r){const n=t.subarray(e,e+r);return a9.decode(n)}function u9(t,e,r){return r>l9?c9(t,e,r):M6(t,e,r)}class rh{constructor(e,r){this.type=e,this.data=r}}class fn extends Error{constructor(e){super(e);const r=Object.create(fn.prototype);Object.setPrototypeOf(this,r),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:fn.name})}}const $c=4294967295;function f9(t,e,r){const n=r/4294967296,i=r;t.setUint32(e,n),t.setUint32(e+4,i)}function B6(t,e,r){const n=Math.floor(r/4294967296),i=r;t.setUint32(e,n),t.setUint32(e+4,i)}function U6(t,e){const r=t.getInt32(e),n=t.getUint32(e+4);return r*4294967296+n}function h9(t,e){const r=t.getUint32(e),n=t.getUint32(e+4);return r*4294967296+n}const d9=-1,p9=4294967296-1,g9=17179869184-1;function m9({sec:t,nsec:e}){if(t>=0&&e>=0&&t<=g9)if(e===0&&t<=p9){const r=new Uint8Array(4);return new DataView(r.buffer).setUint32(0,t),r}else{const r=t/4294967296,n=t&4294967295,i=new Uint8Array(8),s=new DataView(i.buffer);return s.setUint32(0,e<<2|r&3),s.setUint32(4,n),i}else{const r=new Uint8Array(12),n=new DataView(r.buffer);return n.setUint32(0,e),B6(n,4,t),r}}function y9(t){const e=t.getTime(),r=Math.floor(e/1e3),n=(e-r*1e3)*1e6,i=Math.floor(n/1e9);return{sec:r+i,nsec:n-i*1e9}}function w9(t){if(t instanceof Date){const e=y9(t);return m9(e)}else return null}function v9(t){const e=new DataView(t.buffer,t.byteOffset,t.byteLength);switch(t.byteLength){case 4:return{sec:e.getUint32(0),nsec:0};case 8:{const r=e.getUint32(0),n=e.getUint32(4),i=(r&3)*4294967296+n,s=r>>>2;return{sec:i,nsec:s}}case 12:{const r=U6(e,4),n=e.getUint32(0);return{sec:r,nsec:n}}default:throw new fn(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${t.length}`)}}function b9(t){const e=v9(t);return new Date(e.sec*1e3+e.nsec/1e6)}const E9={type:d9,encode:w9,decode:b9};class jd{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(E9)}register({type:e,encode:r,decode:n}){if(e>=0)this.encoders[e]=r,this.decoders[e]=n;else{const i=-1-e;this.builtInEncoders[i]=r,this.builtInDecoders[i]=n}}tryToEncode(e,r){for(let n=0;n<this.builtInEncoders.length;n++){const i=this.builtInEncoders[n];if(i!=null){const s=i(e,r);if(s!=null){const o=-1-n;return new rh(o,s)}}}for(let n=0;n<this.encoders.length;n++){const i=this.encoders[n];if(i!=null){const s=i(e,r);if(s!=null){const o=n;return new rh(o,s)}}}return e instanceof rh?e:null}decode(e,r,n){const i=r<0?this.builtInDecoders[-1-r]:this.decoders[r];return i?i(e,r,n):new rh(r,e)}}jd.defaultCodec=new jd;function x9(t){return t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer}function wy(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):x9(t)?new Uint8Array(t):Uint8Array.from(t)}const A9=100,_9=2048;let S9=class L6{constructor(e){this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??jd.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.maxDepth=(e==null?void 0:e.maxDepth)??A9,this.initialBufferSize=(e==null?void 0:e.initialBufferSize)??_9,this.sortKeys=(e==null?void 0:e.sortKeys)??!1,this.forceFloat32=(e==null?void 0:e.forceFloat32)??!1,this.ignoreUndefined=(e==null?void 0:e.ignoreUndefined)??!1,this.forceIntegerToFloat=(e==null?void 0:e.forceIntegerToFloat)??!1,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}clone(){return new L6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,maxDepth:this.maxDepth,initialBufferSize:this.initialBufferSize,sortKeys:this.sortKeys,forceFloat32:this.forceFloat32,ignoreUndefined:this.ignoreUndefined,forceIntegerToFloat:this.forceIntegerToFloat})}reinitializeState(){this.pos=0}encodeSharedRef(e){if(this.entered)return this.clone().encodeSharedRef(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}finally{this.entered=!1}}encode(e){if(this.entered)return this.clone().encode(e);try{return this.entered=!0,this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}finally{this.entered=!1}}doEncode(e,r){if(r>this.maxDepth)throw new Error(`Too deep objects in depth ${r}`);e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.forceIntegerToFloat?this.encodeNumberAsFloat(e):this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.useBigInt64&&typeof e=="bigint"?this.encodeBigInt64(e):this.encodeObject(e,r)}ensureBufferSizeToWrite(e){const r=this.pos+e;this.view.byteLength<r&&this.resizeBuffer(r*2)}resizeBuffer(e){const r=new ArrayBuffer(e),n=new Uint8Array(r),i=new DataView(r);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){e===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(e){!this.forceIntegerToFloat&&Number.isSafeInteger(e)?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):this.useBigInt64?this.encodeNumberAsFloat(e):(this.writeU8(211),this.writeI64(e)):this.encodeNumberAsFloat(e)}encodeNumberAsFloat(e){this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}encodeBigInt64(e){e>=BigInt(0)?(this.writeU8(207),this.writeBigUint64(e)):(this.writeU8(211),this.writeBigInt64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){const n=e9(e);this.ensureBufferSizeToWrite(5+n),this.writeStringHeader(n),s9(e,this.bytes,this.pos),this.pos+=n}encodeObject(e,r){const n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,r);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,r);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){const r=e.byteLength;if(r<256)this.writeU8(196),this.writeU8(r);else if(r<65536)this.writeU8(197),this.writeU16(r);else if(r<4294967296)this.writeU8(198),this.writeU32(r);else throw new Error(`Too large binary: ${r}`);const n=wy(e);this.writeU8a(n)}encodeArray(e,r){const n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(const i of e)this.doEncode(i,r+1)}countWithoutUndefined(e,r){let n=0;for(const i of r)e[i]!==void 0&&n++;return n}encodeMap(e,r){const n=Object.keys(e);this.sortKeys&&n.sort();const i=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw new Error(`Too large map object: ${i}`);for(const s of n){const o=e[s];this.ignoreUndefined&&o===void 0||(this.encodeString(s),this.doEncode(o,r+1))}}encodeExtension(e){if(typeof e.data=="function"){const n=e.data(this.pos+6),i=n.length;if(i>=4294967296)throw new Error(`Too large extension object: ${i}`);this.writeU8(201),this.writeU32(i),this.writeI8(e.type),this.writeU8a(n);return}const r=e.data.length;if(r===1)this.writeU8(212);else if(r===2)this.writeU8(213);else if(r===4)this.writeU8(214);else if(r===8)this.writeU8(215);else if(r===16)this.writeU8(216);else if(r<256)this.writeU8(199),this.writeU8(r);else if(r<65536)this.writeU8(200),this.writeU16(r);else if(r<4294967296)this.writeU8(201),this.writeU32(r);else throw new Error(`Too large extension object: ${r}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){const r=e.length;this.ensureBufferSizeToWrite(r),this.bytes.set(e,this.pos),this.pos+=r}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),f9(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),B6(this.view,this.pos,e),this.pos+=8}writeBigUint64(e){this.ensureBufferSizeToWrite(8),this.view.setBigUint64(this.pos,e),this.pos+=8}writeBigInt64(e){this.ensureBufferSizeToWrite(8),this.view.setBigInt64(this.pos,e),this.pos+=8}};function I9(t,e){return new S9(e).encodeSharedRef(t)}function wg(t){return`${t<0?"-":""}0x${Math.abs(t).toString(16).padStart(2,"0")}`}const P9=16,C9=16;class O9{constructor(e=P9,r=C9){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=r,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,r,n){const i=this.caches[n-1];e:for(const s of i){const o=s.bytes;for(let a=0;a<n;a++)if(o[a]!==e[r+a])continue e;return s.str}return null}store(e,r){const n=this.caches[e.length-1],i={bytes:e,str:r};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(e,r,n){const i=this.find(e,r,n);if(i!=null)return this.hit++,i;this.miss++;const s=M6(e,r,n),o=Uint8Array.prototype.slice.call(e,r,r+n);return this.store(o,s),s}}const vy="array",mu="map_key",F6="map_value",N9=t=>{if(typeof t=="string"||typeof t=="number")return t;throw new fn("The type of key must be string or number but "+typeof t)};class T9{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const r=this.getUninitializedStateFromPool();r.type=vy,r.position=0,r.size=e,r.array=new Array(e)}pushMapState(e){const r=this.getUninitializedStateFromPool();r.type=mu,r.readCount=0,r.size=e,r.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===vy){const n=e;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(e.type===mu||e.type===F6){const n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const Mc=-1,kv=new DataView(new ArrayBuffer(0)),k9=new Uint8Array(kv.buffer);try{kv.getInt8(0)}catch(t){if(!(t instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const pE=new RangeError("Insufficient data"),D9=new O9;let R9=class j6{constructor(e){this.totalPos=0,this.pos=0,this.view=kv,this.bytes=k9,this.headByte=Mc,this.stack=new T9,this.entered=!1,this.extensionCodec=(e==null?void 0:e.extensionCodec)??jd.defaultCodec,this.context=e==null?void 0:e.context,this.useBigInt64=(e==null?void 0:e.useBigInt64)??!1,this.rawStrings=(e==null?void 0:e.rawStrings)??!1,this.maxStrLength=(e==null?void 0:e.maxStrLength)??$c,this.maxBinLength=(e==null?void 0:e.maxBinLength)??$c,this.maxArrayLength=(e==null?void 0:e.maxArrayLength)??$c,this.maxMapLength=(e==null?void 0:e.maxMapLength)??$c,this.maxExtLength=(e==null?void 0:e.maxExtLength)??$c,this.keyDecoder=(e==null?void 0:e.keyDecoder)!==void 0?e.keyDecoder:D9,this.mapKeyConverter=(e==null?void 0:e.mapKeyConverter)??N9}clone(){return new j6({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Mc,this.stack.reset()}setBuffer(e){const r=wy(e);this.bytes=r,this.view=new DataView(r.buffer,r.byteOffset,r.byteLength),this.pos=0}appendBuffer(e){if(this.headByte===Mc&&!this.hasRemaining(1))this.setBuffer(e);else{const r=this.bytes.subarray(this.pos),n=wy(e),i=new Uint8Array(r.length+n.length);i.set(r),i.set(n,r.length),this.setBuffer(i)}}hasRemaining(e){return this.view.byteLength-this.pos>=e}createExtraByteError(e){const{view:r,pos:n}=this;return new RangeError(`Extra ${r.byteLength-n} of ${r.byteLength} byte(s) found at buffer[${e}]`)}decode(e){if(this.entered)return this.clone().decode(e);try{this.entered=!0,this.reinitializeState(),this.setBuffer(e);const r=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return r}finally{this.entered=!1}}*decodeMulti(e){if(this.entered){yield*this.clone().decodeMulti(e);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(e);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(e){if(this.entered)return this.clone().decodeAsync(e);try{this.entered=!0;let r=!1,n;for await(const a of e){if(r)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{n=this.doDecodeSync(),r=!0}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}if(r){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}const{headByte:i,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${wg(i)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(e){return this.decodeMultiAsync(e,!0)}decodeStream(e){return this.decodeMultiAsync(e,!1)}async*decodeMultiAsync(e,r){if(this.entered){yield*this.clone().decodeMultiAsync(e,r);return}try{this.entered=!0;let n=r,i=-1;for await(const s of e){if(r&&i===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(i=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--i!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const e=this.readHeadByte();let r;if(e>=224)r=e-256;else if(e<192)if(e<128)r=e;else if(e<144){const i=e-128;if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e<160){const i=e-144;if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else{const i=e-160;r=this.decodeString(i,0)}else if(e===192)r=null;else if(e===194)r=!1;else if(e===195)r=!0;else if(e===202)r=this.readF32();else if(e===203)r=this.readF64();else if(e===204)r=this.readU8();else if(e===205)r=this.readU16();else if(e===206)r=this.readU32();else if(e===207)this.useBigInt64?r=this.readU64AsBigInt():r=this.readU64();else if(e===208)r=this.readI8();else if(e===209)r=this.readI16();else if(e===210)r=this.readI32();else if(e===211)this.useBigInt64?r=this.readI64AsBigInt():r=this.readI64();else if(e===217){const i=this.lookU8();r=this.decodeString(i,1)}else if(e===218){const i=this.lookU16();r=this.decodeString(i,2)}else if(e===219){const i=this.lookU32();r=this.decodeString(i,4)}else if(e===220){const i=this.readU16();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===221){const i=this.readU32();if(i!==0){this.pushArrayState(i),this.complete();continue e}else r=[]}else if(e===222){const i=this.readU16();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===223){const i=this.readU32();if(i!==0){this.pushMapState(i),this.complete();continue e}else r={}}else if(e===196){const i=this.lookU8();r=this.decodeBinary(i,1)}else if(e===197){const i=this.lookU16();r=this.decodeBinary(i,2)}else if(e===198){const i=this.lookU32();r=this.decodeBinary(i,4)}else if(e===212)r=this.decodeExtension(1,0);else if(e===213)r=this.decodeExtension(2,0);else if(e===214)r=this.decodeExtension(4,0);else if(e===215)r=this.decodeExtension(8,0);else if(e===216)r=this.decodeExtension(16,0);else if(e===199){const i=this.lookU8();r=this.decodeExtension(i,1)}else if(e===200){const i=this.lookU16();r=this.decodeExtension(i,2)}else if(e===201){const i=this.lookU32();r=this.decodeExtension(i,4)}else throw new fn(`Unrecognized type byte: ${wg(e)}`);this.complete();const n=this.stack;for(;n.length>0;){const i=n.top();if(i.type===vy)if(i.array[i.position]=r,i.position++,i.position===i.size)r=i.array,n.release(i);else continue e;else if(i.type===mu){if(r==="__proto__")throw new fn("The key __proto__ is not allowed");i.key=this.mapKeyConverter(r),i.type=F6;continue e}else if(i.map[i.key]=r,i.readCount++,i.readCount===i.size)r=i.map,n.release(i);else{i.key=null,i.type=mu;continue e}}return r}}readHeadByte(){return this.headByte===Mc&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Mc}readArraySize(){const e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new fn(`Unrecognized array type byte: ${wg(e)}`)}}}pushMapState(e){if(e>this.maxMapLength)throw new fn(`Max length exceeded: map length (${e}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(e)}pushArrayState(e){if(e>this.maxArrayLength)throw new fn(`Max length exceeded: array length (${e}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(e)}decodeString(e,r){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(e,r):this.decodeBinary(e,r)}decodeUtf8String(e,r){var s;if(e>this.maxStrLength)throw new fn(`Max length exceeded: UTF-8 byte length (${e}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+r+e)throw pE;const n=this.pos+r;let i;return this.stateIsMapKey()&&((s=this.keyDecoder)!=null&&s.canBeCached(e))?i=this.keyDecoder.decode(this.bytes,n,e):i=u9(this.bytes,n,e),this.pos+=r+e,i}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===mu:!1}decodeBinary(e,r){if(e>this.maxBinLength)throw new fn(`Max length exceeded: bin length (${e}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(e+r))throw pE;const n=this.pos+r,i=this.bytes.subarray(n,n+e);return this.pos+=r+e,i}decodeExtension(e,r){if(e>this.maxExtLength)throw new fn(`Max length exceeded: ext length (${e}) > maxExtLength (${this.maxExtLength})`);const n=this.view.getInt8(this.pos+r),i=this.decodeBinary(e,r+1);return this.extensionCodec.decode(i,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const e=this.view.getUint8(this.pos);return this.pos++,e}readI8(){const e=this.view.getInt8(this.pos);return this.pos++,e}readU16(){const e=this.view.getUint16(this.pos);return this.pos+=2,e}readI16(){const e=this.view.getInt16(this.pos);return this.pos+=2,e}readU32(){const e=this.view.getUint32(this.pos);return this.pos+=4,e}readI32(){const e=this.view.getInt32(this.pos);return this.pos+=4,e}readU64(){const e=h9(this.view,this.pos);return this.pos+=8,e}readI64(){const e=U6(this.view,this.pos);return this.pos+=8,e}readU64AsBigInt(){const e=this.view.getBigUint64(this.pos);return this.pos+=8,e}readI64AsBigInt(){const e=this.view.getBigInt64(this.pos);return this.pos+=8,e}readF32(){const e=this.view.getFloat32(this.pos);return this.pos+=4,e}readF64(){const e=this.view.getFloat64(this.pos);return this.pos+=8,e}};function $9(t,e){return new R9(e).decode(t)}const M9=t=>JSON.stringify(t,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),B9=t=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=t.replace(e,'$1"$2n"$3');return JSON.parse(r,(n,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ma(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return B9(t)}catch{return t}}function Os(t){return typeof t=="string"?t:M9(t)||""}function U9(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function z6(t,...e){if(!U9(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function gE(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function L9(t,e){z6(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const el=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vg=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);function F9(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function q6(t){return typeof t=="string"&&(t=F9(t)),z6(t),t}let j9=class{clone(){return this._cloneInto()}};function z9(t){const e=n=>t().update(q6(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function H6(t=32){if(el&&typeof el.getRandomValues=="function")return el.getRandomValues(new Uint8Array(t));if(el&&typeof el.randomBytes=="function")return el.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}function q9(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),l=n?4:0,c=n?0:4;t.setUint32(e+l,o,n),t.setUint32(e+c,a,n)}let H9=class extends j9{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=vg(this.buffer)}update(e){gE(this);const{view:r,buffer:n,blockLen:i}=this;e=q6(e);const s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=vg(e);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gE(this),L9(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)r[f]=0;q9(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=vg(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};const nh=BigInt(2**32-1),by=BigInt(32);function V6(t,e=!1){return e?{h:Number(t&nh),l:Number(t>>by&nh)}:{h:Number(t>>by&nh)|0,l:Number(t&nh)|0}}function V9(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){const{h:s,l:o}=V6(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}const K9=(t,e)=>BigInt(t>>>0)<<by|BigInt(e>>>0),W9=(t,e,r)=>t>>>r,G9=(t,e,r)=>t<<32-r|e>>>r,Y9=(t,e,r)=>t>>>r|e<<32-r,Q9=(t,e,r)=>t<<32-r|e>>>r,J9=(t,e,r)=>t<<64-r|e>>>r-32,Z9=(t,e,r)=>t>>>r-32|e<<64-r,X9=(t,e)=>e,e7=(t,e)=>t,t7=(t,e,r)=>t<<r|e>>>32-r,r7=(t,e,r)=>e<<r|t>>>32-r,n7=(t,e,r)=>e<<r-32|t>>>64-r,i7=(t,e,r)=>t<<r-32|e>>>64-r;function s7(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const o7=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),a7=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,l7=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),c7=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,u7=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),f7=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,ge={fromBig:V6,split:V9,toBig:K9,shrSH:W9,shrSL:G9,rotrSH:Y9,rotrSL:Q9,rotrBH:J9,rotrBL:Z9,rotr32H:X9,rotr32L:e7,rotlSH:t7,rotlSL:r7,rotlBH:n7,rotlBL:i7,add:s7,add3L:o7,add3H:a7,add4L:l7,add4H:c7,add5H:f7,add5L:u7},[h7,d7]=ge.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Vs=new Uint32Array(80),Ks=new Uint32Array(80);let p7=class extends H9{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:f,Fl:h,Gh:g,Gl:w,Hh:v,Hl:O}=this;return[e,r,n,i,s,o,a,l,c,u,f,h,g,w,v,O]}set(e,r,n,i,s,o,a,l,c,u,f,h,g,w,v,O){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=f|0,this.Fl=h|0,this.Gh=g|0,this.Gl=w|0,this.Hh=v|0,this.Hl=O|0}process(e,r){for(let _=0;_<16;_++,r+=4)Vs[_]=e.getUint32(r),Ks[_]=e.getUint32(r+=4);for(let _=16;_<80;_++){const T=Vs[_-15]|0,D=Ks[_-15]|0,R=ge.rotrSH(T,D,1)^ge.rotrSH(T,D,8)^ge.shrSH(T,D,7),$=ge.rotrSL(T,D,1)^ge.rotrSL(T,D,8)^ge.shrSL(T,D,7),M=Vs[_-2]|0,B=Ks[_-2]|0,z=ge.rotrSH(M,B,19)^ge.rotrBH(M,B,61)^ge.shrSH(M,B,6),K=ge.rotrSL(M,B,19)^ge.rotrBL(M,B,61)^ge.shrSL(M,B,6),L=ge.add4L($,K,Ks[_-7],Ks[_-16]),P=ge.add4H(L,R,z,Vs[_-7],Vs[_-16]);Vs[_]=P|0,Ks[_]=L|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:f,El:h,Fh:g,Fl:w,Gh:v,Gl:O,Hh:A,Hl:I}=this;for(let _=0;_<80;_++){const T=ge.rotrSH(f,h,14)^ge.rotrSH(f,h,18)^ge.rotrBH(f,h,41),D=ge.rotrSL(f,h,14)^ge.rotrSL(f,h,18)^ge.rotrBL(f,h,41),R=f&g^~f&v,$=h&w^~h&O,M=ge.add5L(I,D,$,d7[_],Ks[_]),B=ge.add5H(M,A,T,R,h7[_],Vs[_]),z=M|0,K=ge.rotrSH(n,i,28)^ge.rotrBH(n,i,34)^ge.rotrBH(n,i,39),L=ge.rotrSL(n,i,28)^ge.rotrBL(n,i,34)^ge.rotrBL(n,i,39),P=n&s^n&a^s&a,p=i&o^i&l^o&l;A=v|0,I=O|0,v=g|0,O=w|0,g=f|0,w=h|0,{h:f,l:h}=ge.add(c|0,u|0,B|0,z|0),c=a|0,u=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const d=ge.add3L(z,L,p);n=ge.add3H(d,B,K,P),i=d|0}({h:n,l:i}=ge.add(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=ge.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=ge.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=ge.add(this.Dh|0,this.Dl|0,c|0,u|0),{h:f,l:h}=ge.add(this.Eh|0,this.El|0,f|0,h|0),{h:g,l:w}=ge.add(this.Fh|0,this.Fl|0,g|0,w|0),{h:v,l:O}=ge.add(this.Gh|0,this.Gl|0,v|0,O|0),{h:A,l:I}=ge.add(this.Hh|0,this.Hl|0,A|0,I|0),this.set(n,i,s,o,a,l,c,u,f,h,g,w,v,O,A,I)}roundClean(){Vs.fill(0),Ks.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const g7=z9(()=>new p7);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Dv=BigInt(0),K6=BigInt(1),m7=BigInt(2);function Rv(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function $v(t){if(!Rv(t))throw new Error("Uint8Array expected")}function bg(t,e){if(typeof e!="boolean")throw new Error(t+" boolean expected, got "+e)}const y7=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Mv(t){$v(t);let e="";for(let r=0;r<t.length;r++)e+=y7[t[r]];return e}function W6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Dv:BigInt("0x"+t)}const Xi={_0:48,_9:57,A:65,F:70,a:97,f:102};function mE(t){if(t>=Xi._0&&t<=Xi._9)return t-Xi._0;if(t>=Xi.A&&t<=Xi.F)return t-(Xi.A-10);if(t>=Xi.a&&t<=Xi.f)return t-(Xi.a-10)}function G6(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=mE(t.charCodeAt(s)),a=mE(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}n[i]=o*16+a}return n}function w7(t){return W6(Mv(t))}function Kh(t){return $v(t),W6(Mv(Uint8Array.from(t).reverse()))}function Y6(t,e){return G6(t.toString(16).padStart(e*2,"0"))}function Ey(t,e){return Y6(t,e).reverse()}function es(t,e,r){let n;if(typeof e=="string")try{n=G6(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Rv(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}function yE(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];$v(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}const Eg=t=>typeof t=="bigint"&&Dv<=t;function v7(t,e,r){return Eg(t)&&Eg(e)&&Eg(r)&&e<=t&&t<r}function Bc(t,e,r,n){if(!v7(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function b7(t){let e;for(e=0;t>Dv;t>>=K6,e+=1);return e}const E7=t=>(m7<<BigInt(t-1))-K6,x7={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Rv(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function Bv(t,e,r={}){const n=(i,s,o)=>{const a=x7[s];if(typeof a!="function")throw new Error("invalid validator function");const l=t[i];if(!(o&&l===void 0)&&!a(l,t))throw new Error("param "+String(i)+" is invalid. Expected "+s+", got "+l)};for(const[i,s]of Object.entries(e))n(i,s,!1);for(const[i,s]of Object.entries(r))n(i,s,!0);return t}function wE(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const Xt=BigInt(0),Tt=BigInt(1),fa=BigInt(2),A7=BigInt(3),xy=BigInt(4),vE=BigInt(5),bE=BigInt(8);function zt(t,e){const r=t%e;return r>=Xt?r:e+r}function _7(t,e,r){if(e<Xt)throw new Error("invalid exponent, negatives unsupported");if(r<=Xt)throw new Error("invalid modulus");if(r===Tt)return Xt;let n=Tt;for(;e>Xt;)e&Tt&&(n=n*t%r),t=t*t%r,e>>=Tt;return n}function bi(t,e,r){let n=t;for(;e-- >Xt;)n*=n,n%=r;return n}function EE(t,e){if(t===Xt)throw new Error("invert: expected non-zero number");if(e<=Xt)throw new Error("invert: expected positive modulus, got "+e);let r=zt(t,e),n=e,i=Xt,s=Tt;for(;r!==Xt;){const o=n/r,a=n%r,l=i-s*o;n=r,r=a,i=s,s=l}if(n!==Tt)throw new Error("invert: does not exist");return zt(i,e)}function S7(t){const e=(t-Tt)/fa;let r,n,i;for(r=t-Tt,n=0;r%fa===Xt;r/=fa,n++);for(i=fa;i<t&&_7(i,e,t)!==t-Tt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(t+Tt)/xy;return function(a,l){const c=a.pow(l,o);if(!a.eql(a.sqr(c),l))throw new Error("Cannot find square root");return c}}const s=(r+Tt)/fa;return function(o,a){if(o.pow(a,e)===o.neg(o.ONE))throw new Error("Cannot find square root");let l=n,c=o.pow(o.mul(o.ONE,i),r),u=o.pow(a,s),f=o.pow(a,r);for(;!o.eql(f,o.ONE);){if(o.eql(f,o.ZERO))return o.ZERO;let h=1;for(let w=o.sqr(f);h<l&&!o.eql(w,o.ONE);h++)w=o.sqr(w);const g=o.pow(c,Tt<<BigInt(l-h-1));c=o.sqr(g),u=o.mul(u,g),f=o.mul(f,c),l=h}return u}}function I7(t){if(t%xy===A7){const e=(t+Tt)/xy;return function(r,n){const i=r.pow(n,e);if(!r.eql(r.sqr(i),n))throw new Error("Cannot find square root");return i}}if(t%bE===vE){const e=(t-vE)/bE;return function(r,n){const i=r.mul(n,fa),s=r.pow(i,e),o=r.mul(n,s),a=r.mul(r.mul(o,fa),s),l=r.mul(o,r.sub(a,r.ONE));if(!r.eql(r.sqr(l),n))throw new Error("Cannot find square root");return l}}return S7(t)}const P7=(t,e)=>(zt(t,e)&Tt)===Tt,C7=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function O7(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=C7.reduce((n,i)=>(n[i]="function",n),e);return Bv(t,r)}function N7(t,e,r){if(r<Xt)throw new Error("invalid exponent, negatives unsupported");if(r===Xt)return t.ONE;if(r===Tt)return e;let n=t.ONE,i=e;for(;r>Xt;)r&Tt&&(n=t.mul(n,i)),i=t.sqr(i),r>>=Tt;return n}function T7(t,e){const r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function Q6(t,e){const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function J6(t,e,r=!1,n={}){if(t<=Xt)throw new Error("invalid field: expected ORDER > 0, got "+t);const{nBitLength:i,nByteLength:s}=Q6(t,e);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:t,isLE:r,BITS:i,BYTES:s,MASK:E7(i),ZERO:Xt,ONE:Tt,create:l=>zt(l,t),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return Xt<=l&&l<t},is0:l=>l===Xt,isOdd:l=>(l&Tt)===Tt,neg:l=>zt(-l,t),eql:(l,c)=>l===c,sqr:l=>zt(l*l,t),add:(l,c)=>zt(l+c,t),sub:(l,c)=>zt(l-c,t),mul:(l,c)=>zt(l*c,t),pow:(l,c)=>N7(a,l,c),div:(l,c)=>zt(l*EE(c,t),t),sqrN:l=>l*l,addN:(l,c)=>l+c,subN:(l,c)=>l-c,mulN:(l,c)=>l*c,inv:l=>EE(l,t),sqrt:n.sqrt||(l=>(o||(o=I7(t)),o(a,l))),invertBatch:l=>T7(a,l),cmov:(l,c,u)=>u?c:l,toBytes:l=>r?Ey(l,s):Y6(l,s),fromBytes:l=>{if(l.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+l.length);return r?Kh(l):w7(l)}});return Object.freeze(a)}const xE=BigInt(0),ih=BigInt(1);function xg(t,e){const r=e.negate();return t?r:e}function Z6(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ag(t,e){Z6(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1);return{windows:r,windowSize:n}}function k7(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function D7(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const _g=new WeakMap,X6=new WeakMap;function Sg(t){return X6.get(t)||1}function R7(t,e){return{constTimeNegate:xg,hasPrecomputes(r){return Sg(r)!==1},unsafeLadder(r,n,i=t.ZERO){let s=r;for(;n>xE;)n&ih&&(i=i.add(s)),s=s.double(),n>>=ih;return i},precomputeWindow(r,n){const{windows:i,windowSize:s}=Ag(n,e),o=[];let a=r,l=a;for(let c=0;c<i;c++){l=a,o.push(l);for(let u=1;u<s;u++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(r,n,i){const{windows:s,windowSize:o}=Ag(r,e);let a=t.ZERO,l=t.BASE;const c=BigInt(2**r-1),u=2**r,f=BigInt(r);for(let h=0;h<s;h++){const g=h*o;let w=Number(i&c);i>>=f,w>o&&(w-=u,i+=ih);const v=g,O=g+Math.abs(w)-1,A=h%2!==0,I=w<0;w===0?l=l.add(xg(A,n[v])):a=a.add(xg(I,n[O]))}return{p:a,f:l}},wNAFUnsafe(r,n,i,s=t.ZERO){const{windows:o,windowSize:a}=Ag(r,e),l=BigInt(2**r-1),c=2**r,u=BigInt(r);for(let f=0;f<o;f++){const h=f*a;if(i===xE)break;let g=Number(i&l);if(i>>=u,g>a&&(g-=c,i+=ih),g===0)continue;let w=n[h+Math.abs(g)-1];g<0&&(w=w.negate()),s=s.add(w)}return s},getPrecomputes(r,n,i){let s=_g.get(n);return s||(s=this.precomputeWindow(n,r),r!==1&&_g.set(n,i(s))),s},wNAFCached(r,n,i){const s=Sg(r);return this.wNAF(s,this.getPrecomputes(s,r,i),n)},wNAFCachedUnsafe(r,n,i,s){const o=Sg(r);return o===1?this.unsafeLadder(r,n,s):this.wNAFUnsafe(o,this.getPrecomputes(o,r,i),n,s)},setWindowSize(r,n){Z6(n,e),X6.set(r,n),_g.delete(r)}}}function $7(t,e,r,n){if(k7(r,t),D7(n,e),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=t.ZERO,s=b7(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,l=new Array(a+1).fill(i),c=Math.floor((e.BITS-1)/o)*o;let u=i;for(let f=c;f>=0;f-=o){l.fill(i);for(let g=0;g<n.length;g++){const w=n[g],v=Number(w>>BigInt(f)&BigInt(a));l[v]=l[v].add(r[g])}let h=i;for(let g=l.length-1,w=i;g>0;g--)w=w.add(l[g]),h=h.add(w);if(u=u.add(h),f!==0)for(let g=0;g<o;g++)u=u.double()}return u}function M7(t){return O7(t.Fp),Bv(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Q6(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}const Qn=BigInt(0),Fr=BigInt(1),sh=BigInt(2),B7=BigInt(8),U7={zip215:!0};function L7(t){const e=M7(t);return Bv(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function F7(t){const e=L7(t),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:l}=e,c=sh<<BigInt(a*8)-Fr,u=r.create,f=J6(e.n,e.nBitLength),h=e.uvRatio||((d,m)=>{try{return{isValid:!0,value:r.sqrt(d*r.inv(m))}}catch{return{isValid:!1,value:Qn}}}),g=e.adjustScalarBytes||(d=>d),w=e.domain||((d,m,b)=>{if(bg("phflag",b),m.length||b)throw new Error("Contexts/pre-hash are not supported");return d});function v(d,m){Bc("coordinate "+d,m,Qn,c)}function O(d){if(!(d instanceof _))throw new Error("ExtendedPoint expected")}const A=wE((d,m)=>{const{ex:b,ey:E,ez:S}=d,N=d.is0();m==null&&(m=N?B7:r.inv(S));const C=u(b*m),y=u(E*m),k=u(S*m);if(N)return{x:Qn,y:Fr};if(k!==Fr)throw new Error("invZ was invalid");return{x:C,y}}),I=wE(d=>{const{a:m,d:b}=e;if(d.is0())throw new Error("bad point: ZERO");const{ex:E,ey:S,ez:N,et:C}=d,y=u(E*E),k=u(S*S),q=u(N*N),x=u(q*q),U=u(y*m),F=u(q*u(U+k)),H=u(x+u(b*u(y*k)));if(F!==H)throw new Error("bad point: equation left != right (1)");const V=u(E*S),Z=u(N*C);if(V!==Z)throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(m,b,E,S){this.ex=m,this.ey=b,this.ez=E,this.et=S,v("x",m),v("y",b),v("z",E),v("t",S),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof _)throw new Error("extended point not allowed");const{x:b,y:E}=m||{};return v("x",b),v("y",E),new _(b,E,Fr,u(b*E))}static normalizeZ(m){const b=r.invertBatch(m.map(E=>E.ez));return m.map((E,S)=>E.toAffine(b[S])).map(_.fromAffine)}static msm(m,b){return $7(_,f,m,b)}_setWindowSize(m){R.setWindowSize(this,m)}assertValidity(){I(this)}equals(m){O(m);const{ex:b,ey:E,ez:S}=this,{ex:N,ey:C,ez:y}=m,k=u(b*y),q=u(N*S),x=u(E*y),U=u(C*S);return k===q&&x===U}is0(){return this.equals(_.ZERO)}negate(){return new _(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:m}=e,{ex:b,ey:E,ez:S}=this,N=u(b*b),C=u(E*E),y=u(sh*u(S*S)),k=u(m*N),q=b+E,x=u(u(q*q)-N-C),U=k+C,F=U-y,H=k-C,V=u(x*F),Z=u(U*H),X=u(x*H),J=u(F*U);return new _(V,Z,J,X)}add(m){O(m);const{a:b,d:E}=e,{ex:S,ey:N,ez:C,et:y}=this,{ex:k,ey:q,ez:x,et:U}=m;if(b===BigInt(-1)){const gi=u((N-S)*(q+k)),De=u((N+S)*(q-k)),Ne=u(De-gi);if(Ne===Qn)return this.double();const mi=u(C*sh*U),Re=u(y*sh*x),$e=Re+mi,yi=De+gi,Me=Re-mi,Fe=u($e*Ne),Yi=u(yi*Me),je=u($e*Me),ze=u(Ne*yi);return new _(Fe,Yi,ze,je)}const F=u(S*k),H=u(N*q),V=u(y*E*U),Z=u(C*x),X=u((S+N)*(k+q)-F-H),J=Z-V,de=Z+V,ie=u(H-b*F),ce=u(X*J),mr=u(de*ie),Ue=u(X*ie),Le=u(J*de);return new _(ce,mr,Le,Ue)}subtract(m){return this.add(m.negate())}wNAF(m){return R.wNAFCached(this,m,_.normalizeZ)}multiply(m){const b=m;Bc("scalar",b,Fr,n);const{p:E,f:S}=this.wNAF(b);return _.normalizeZ([E,S])[0]}multiplyUnsafe(m,b=_.ZERO){const E=m;return Bc("scalar",E,Qn,n),E===Qn?D:this.is0()||E===Fr?this:R.wNAFCachedUnsafe(this,E,_.normalizeZ,b)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return R.unsafeLadder(this,n).is0()}toAffine(m){return A(this,m)}clearCofactor(){const{h:m}=e;return m===Fr?this:this.multiplyUnsafe(m)}static fromHex(m,b=!1){const{d:E,a:S}=e,N=r.BYTES;m=es("pointHex",m,N),bg("zip215",b);const C=m.slice(),y=m[N-1];C[N-1]=y&-129;const k=Kh(C),q=b?c:r.ORDER;Bc("pointHex.y",k,Qn,q);const x=u(k*k),U=u(x-Fr),F=u(E*x-S);let{isValid:H,value:V}=h(U,F);if(!H)throw new Error("Point.fromHex: invalid y coordinate");const Z=(V&Fr)===Fr,X=(y&128)!==0;if(!b&&V===Qn&&X)throw new Error("Point.fromHex: x=0 and x_0=1");return X!==Z&&(V=u(-V)),_.fromAffine({x:V,y:k})}static fromPrivateKey(m){return B(m).point}toRawBytes(){const{x:m,y:b}=this.toAffine(),E=Ey(b,r.BYTES);return E[E.length-1]|=m&Fr?128:0,E}toHex(){return Mv(this.toRawBytes())}}_.BASE=new _(e.Gx,e.Gy,Fr,u(e.Gx*e.Gy)),_.ZERO=new _(Qn,Fr,Fr,Qn);const{BASE:T,ZERO:D}=_,R=R7(_,a*8);function $(d){return zt(d,n)}function M(d){return $(Kh(d))}function B(d){const m=r.BYTES;d=es("private key",d,m);const b=es("hashed private key",s(d),2*m),E=g(b.slice(0,m)),S=b.slice(m,2*m),N=M(E),C=T.multiply(N),y=C.toRawBytes();return{head:E,prefix:S,scalar:N,point:C,pointBytes:y}}function z(d){return B(d).pointBytes}function K(d=new Uint8Array,...m){const b=yE(...m);return M(s(w(b,es("context",d),!!i)))}function L(d,m,b={}){d=es("message",d),i&&(d=i(d));const{prefix:E,scalar:S,pointBytes:N}=B(m),C=K(b.context,E,d),y=T.multiply(C).toRawBytes(),k=K(b.context,y,N,d),q=$(C+k*S);Bc("signature.s",q,Qn,n);const x=yE(y,Ey(q,r.BYTES));return es("result",x,r.BYTES*2)}const P=U7;function p(d,m,b,E=P){const{context:S,zip215:N}=E,C=r.BYTES;d=es("signature",d,2*C),m=es("message",m),b=es("publicKey",b,C),N!==void 0&&bg("zip215",N),i&&(m=i(m));const y=Kh(d.slice(C,2*C));let k,q,x;try{k=_.fromHex(b,N),q=_.fromHex(d.slice(0,C),N),x=T.multiplyUnsafe(y)}catch{return!1}if(!N&&k.isSmallOrder())return!1;const U=K(S,q.toRawBytes(),k.toRawBytes(),m);return q.add(k.multiplyUnsafe(U)).subtract(x).clearCofactor().equals(_.ZERO)}return T._setWindowSize(8),{CURVE:e,getPublicKey:z,sign:L,verify:p,ExtendedPoint:_,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(r.BYTES),precompute(d=8,m=_.BASE){return m._setWindowSize(d),m.multiply(BigInt(3)),m}}}}BigInt(0),BigInt(1);const Uv=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),AE=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const j7=BigInt(1),_E=BigInt(2);BigInt(3);const z7=BigInt(5),q7=BigInt(8);function H7(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Uv,o=t*t%s*t%s,a=bi(o,_E,s)*o%s,l=bi(a,j7,s)*t%s,c=bi(l,z7,s)*l%s,u=bi(c,e,s)*c%s,f=bi(u,r,s)*u%s,h=bi(f,n,s)*f%s,g=bi(h,i,s)*h%s,w=bi(g,i,s)*h%s,v=bi(w,e,s)*c%s;return{pow_p_5_8:bi(v,_E,s)*t%s,b2:o}}function V7(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function K7(t,e){const r=Uv,n=zt(e*e*e,r),i=zt(n*n*e,r),s=H7(t*i).pow_p_5_8;let o=zt(t*n*s,r);const a=zt(e*o*o,r),l=o,c=zt(o*AE,r),u=a===t,f=a===zt(-t,r),h=a===zt(-t*AE,r);return u&&(o=l),(f||h)&&(o=c),P7(o,r)&&(o=zt(-o,r)),{isValid:u||f,value:o}}const W7=J6(Uv,void 0,!0),G7={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:W7,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:q7,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:g7,randomBytes:H6,adjustScalarBytes:V7,uvRatio:K7},e8=F7(G7),Y7="EdDSA",Q7="JWT",zd=".",kp="base64url",t8="utf8",r8="utf8",J7=":",Z7="did",X7="key",SE="base58btc",eU="z",tU="K36",rU=32;function Lv(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function n8(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Lv(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function i8(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=n8(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return Lv(r)}function nU(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,O=0,A=0,I=w.length;A!==I&&w[A]===0;)A++,v++;for(var _=(I-A)*u+1>>>0,T=new Uint8Array(_);A!==I;){for(var D=w[A],R=0,$=_-1;(D!==0||R<O)&&$!==-1;$--,R++)D+=256*T[$]>>>0,T[$]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");O=R,A++}for(var M=_-O;M!==_&&T[M]===0;)M++;for(var B=l.repeat(v);M<_;++M)B+=t.charAt(T[M]);return B}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var O=0,A=0;w[v]===l;)O++,v++;for(var I=(w.length-v)*c+1>>>0,_=new Uint8Array(I);w[v];){var T=r[w.charCodeAt(v)];if(T===255)return;for(var D=0,R=I-1;(T!==0||D<A)&&R!==-1;R--,D++)T+=a*_[R]>>>0,_[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");A=D,v++}if(w[v]!==" "){for(var $=I-A;$!==I&&_[$]===0;)$++;for(var M=new Uint8Array(O+(I-$)),B=O;$!==I;)M[B++]=_[$++];return M}}}function g(w){var v=h(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:h,decode:g}}var iU=nU,sU=iU;const s8=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},oU=t=>new TextEncoder().encode(t),aU=t=>new TextDecoder().decode(t);let lU=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},cU=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return o8(this,e)}},uU=class{constructor(e){this.decoders=e}or(e){return o8(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const o8=(t,e)=>new uU({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let fU=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new lU(e,r,n),this.decoder=new cU(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const Dp=({name:t,prefix:e,encode:r,decode:n})=>new fU(t,e,r,n),bf=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=sU(r,e);return Dp({prefix:t,name:e,encode:n,decode:s=>s8(i(s))})},hU=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,c=0;for(let u=0;u<s;++u){const f=i[t[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|f,a+=r,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},dU=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},dr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Dp({prefix:e,name:t,encode(i){return dU(i,n,r)},decode(i){return hU(i,n,r,t)}}),pU=Dp({prefix:"\0",name:"identity",encode:t=>aU(t),decode:t=>oU(t)});var gU=Object.freeze({__proto__:null,identity:pU});const mU=dr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yU=Object.freeze({__proto__:null,base2:mU});const wU=dr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var vU=Object.freeze({__proto__:null,base8:wU});const bU=bf({prefix:"9",name:"base10",alphabet:"0123456789"});var EU=Object.freeze({__proto__:null,base10:bU});const xU=dr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),AU=dr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var _U=Object.freeze({__proto__:null,base16:xU,base16upper:AU});const SU=dr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),IU=dr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),PU=dr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),CU=dr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),OU=dr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),NU=dr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),TU=dr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kU=dr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),DU=dr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var RU=Object.freeze({__proto__:null,base32:SU,base32upper:IU,base32pad:PU,base32padupper:CU,base32hex:OU,base32hexupper:NU,base32hexpad:TU,base32hexpadupper:kU,base32z:DU});const $U=bf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),MU=bf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var BU=Object.freeze({__proto__:null,base36:$U,base36upper:MU});const UU=bf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),LU=bf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var FU=Object.freeze({__proto__:null,base58btc:UU,base58flickr:LU});const jU=dr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zU=dr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),qU=dr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),HU=dr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var VU=Object.freeze({__proto__:null,base64:jU,base64pad:zU,base64url:qU,base64urlpad:HU});const a8=Array.from(""),KU=a8.reduce((t,e,r)=>(t[r]=e,t),[]),WU=a8.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function GU(t){return t.reduce((e,r)=>(e+=KU[r],e),"")}function YU(t){const e=[];for(const r of t){const n=WU[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const QU=Dp({prefix:"",name:"base256emoji",encode:GU,decode:YU});var JU=Object.freeze({__proto__:null,base256emoji:QU}),ZU=l8,IE=128,XU=-128,eL=Math.pow(2,31);function l8(t,e,r){e=e||[],r=r||0;for(var n=r;t>=eL;)e[r++]=t&255|IE,t/=128;for(;t&XU;)e[r++]=t&255|IE,t>>>=7;return e[r]=t|0,l8.bytes=r-n+1,e}var tL=Ay,rL=128,PE=127;function Ay(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Ay.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&PE)<<i:(o&PE)*Math.pow(2,i),i+=7}while(o>=rL);return Ay.bytes=s-n,r}var nL=Math.pow(2,7),iL=Math.pow(2,14),sL=Math.pow(2,21),oL=Math.pow(2,28),aL=Math.pow(2,35),lL=Math.pow(2,42),cL=Math.pow(2,49),uL=Math.pow(2,56),fL=Math.pow(2,63),hL=function(t){return t<nL?1:t<iL?2:t<sL?3:t<oL?4:t<aL?5:t<lL?6:t<cL?7:t<uL?8:t<fL?9:10},dL={encode:ZU,decode:tL,encodingLength:hL},c8=dL;const CE=(t,e,r=0)=>(c8.encode(t,e,r),e),OE=t=>c8.encodingLength(t),_y=(t,e)=>{const r=e.byteLength,n=OE(t),i=n+OE(r),s=new Uint8Array(i+r);return CE(t,s,0),CE(r,s,n),s.set(e,i),new pL(t,r,e,s)};let pL=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};const u8=({name:t,code:e,encode:r})=>new gL(t,e,r);let gL=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?_y(this.code,r):r.then(n=>_y(this.code,n))}else throw Error("Unknown type, must be binary type")}};const f8=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),mL=u8({name:"sha2-256",code:18,encode:f8("SHA-256")}),yL=u8({name:"sha2-512",code:19,encode:f8("SHA-512")});var wL=Object.freeze({__proto__:null,sha256:mL,sha512:yL});const h8=0,vL="identity",d8=s8,bL=t=>_y(h8,d8(t)),EL={code:h8,name:vL,encode:d8,digest:bL};var xL=Object.freeze({__proto__:null,identity:EL});new TextEncoder,new TextDecoder;const NE={...gU,...yU,...vU,...EU,..._U,...RU,...BU,...FU,...VU,...JU};({...wL,...xL});function p8(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const TE=p8("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Ig=p8("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=n8(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),g8={utf8:TE,"utf-8":TE,hex:NE.base16,latin1:Ig,ascii:Ig,binary:Ig,...NE};function Rp(t,e="utf8"){const r=g8[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}function mc(t,e="utf8"){const r=g8[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Lv(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function kE(t){return Ma(Rp(mc(t,kp),t8))}function qd(t){return Rp(mc(Os(t),t8),kp)}function m8(t){const e=mc(tU,SE),r=eU+Rp(i8([e,t]),SE);return[Z7,X7,r].join(J7)}function AL(t){return Rp(t,kp)}function _L(t){return mc(t,kp)}function SL(t){return mc([qd(t.header),qd(t.payload)].join(zd),r8)}function IL(t){return[qd(t.header),qd(t.payload),AL(t.signature)].join(zd)}function Sy(t){const e=t.split(zd),r=kE(e[0]),n=kE(e[1]),i=_L(e[2]),s=mc(e.slice(0,2).join(zd),r8);return{header:r,payload:n,signature:i,data:s}}function DE(t=H6(rU)){const e=e8.getPublicKey(t);return{secretKey:i8([t,e]),publicKey:e}}async function PL(t,e,r,n,i=te.fromMiliseconds(Date.now())){const s={alg:Y7,typ:Q7},o=m8(n.publicKey),a=i+r,l={iss:o,sub:t,aud:e,iat:i,exp:a},c=SL({header:s,payload:l}),u=e8.sign(c,n.secretKey.slice(0,32));return IL({header:s,payload:l,signature:u})}function Fv(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function y8(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Fv(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function yu(t,e){e||(e=t.reduce((i,s)=>i+s.length,0));const r=y8(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return Fv(r)}function CL(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,O=0,A=0,I=w.length;A!==I&&w[A]===0;)A++,v++;for(var _=(I-A)*u+1>>>0,T=new Uint8Array(_);A!==I;){for(var D=w[A],R=0,$=_-1;(D!==0||R<O)&&$!==-1;$--,R++)D+=256*T[$]>>>0,T[$]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");O=R,A++}for(var M=_-O;M!==_&&T[M]===0;)M++;for(var B=l.repeat(v);M<_;++M)B+=t.charAt(T[M]);return B}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var O=0,A=0;w[v]===l;)O++,v++;for(var I=(w.length-v)*c+1>>>0,_=new Uint8Array(I);w[v];){var T=r[w.charCodeAt(v)];if(T===255)return;for(var D=0,R=I-1;(T!==0||D<A)&&R!==-1;R--,D++)T+=a*_[R]>>>0,_[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");A=D,v++}if(w[v]!==" "){for(var $=I-A;$!==I&&_[$]===0;)$++;for(var M=new Uint8Array(O+(I-$)),B=O;$!==I;)M[B++]=_[$++];return M}}}function g(w){var v=h(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:h,decode:g}}var OL=CL,NL=OL;const TL=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},kL=t=>new TextEncoder().encode(t),DL=t=>new TextDecoder().decode(t);class RL{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class $L{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return w8(this,e)}}class ML{constructor(e){this.decoders=e}or(e){return w8(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const w8=(t,e)=>new ML({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class BL{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new RL(e,r,n),this.decoder=new $L(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const $p=({name:t,prefix:e,encode:r,decode:n})=>new BL(t,e,r,n),Ef=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=NL(r,e);return $p({prefix:t,name:e,encode:n,decode:s=>TL(i(s))})},UL=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,c=0;for(let u=0;u<s;++u){const f=i[t[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|f,a+=r,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},LL=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},pr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>$p({prefix:e,name:t,encode(i){return LL(i,n,r)},decode(i){return UL(i,n,r,t)}}),FL=$p({prefix:"\0",name:"identity",encode:t=>DL(t),decode:t=>kL(t)}),jL=Object.freeze(Object.defineProperty({__proto__:null,identity:FL},Symbol.toStringTag,{value:"Module"})),zL=pr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),qL=Object.freeze(Object.defineProperty({__proto__:null,base2:zL},Symbol.toStringTag,{value:"Module"})),HL=pr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),VL=Object.freeze(Object.defineProperty({__proto__:null,base8:HL},Symbol.toStringTag,{value:"Module"})),KL=Ef({prefix:"9",name:"base10",alphabet:"0123456789"}),WL=Object.freeze(Object.defineProperty({__proto__:null,base10:KL},Symbol.toStringTag,{value:"Module"})),GL=pr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),YL=pr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),QL=Object.freeze(Object.defineProperty({__proto__:null,base16:GL,base16upper:YL},Symbol.toStringTag,{value:"Module"})),JL=pr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ZL=pr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),XL=pr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eF=pr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),tF=pr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),rF=pr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),nF=pr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),iF=pr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),sF=pr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),oF=Object.freeze(Object.defineProperty({__proto__:null,base32:JL,base32hex:tF,base32hexpad:nF,base32hexpadupper:iF,base32hexupper:rF,base32pad:XL,base32padupper:eF,base32upper:ZL,base32z:sF},Symbol.toStringTag,{value:"Module"})),aF=Ef({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),lF=Ef({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),cF=Object.freeze(Object.defineProperty({__proto__:null,base36:aF,base36upper:lF},Symbol.toStringTag,{value:"Module"})),uF=Ef({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fF=Ef({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),hF=Object.freeze(Object.defineProperty({__proto__:null,base58btc:uF,base58flickr:fF},Symbol.toStringTag,{value:"Module"})),dF=pr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),pF=pr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gF=pr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mF=pr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),yF=Object.freeze(Object.defineProperty({__proto__:null,base64:dF,base64pad:pF,base64url:gF,base64urlpad:mF},Symbol.toStringTag,{value:"Module"})),v8=Array.from(""),wF=v8.reduce((t,e,r)=>(t[r]=e,t),[]),vF=v8.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function bF(t){return t.reduce((e,r)=>(e+=wF[r],e),"")}function EF(t){const e=[];for(const r of t){const n=vF[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const xF=$p({prefix:"",name:"base256emoji",encode:bF,decode:EF}),AF=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:xF},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const RE={...jL,...qL,...VL,...WL,...QL,...oF,...cF,...hF,...yF,...AF};function b8(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const $E=b8("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Pg=b8("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=y8(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),E8={utf8:$E,"utf-8":$E,hex:RE.base16,latin1:Pg,ascii:Pg,binary:Pg,...RE};function Un(t,e="utf8"){const r=E8[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Fv(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}function tn(t,e="utf8"){const r=E8[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}const _F={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},SF="Input must be an string, Buffer or Uint8Array";function IF(t){let e;if(t instanceof Uint8Array)e=t;else if(typeof t=="string")e=new TextEncoder().encode(t);else throw new Error(SF);return e}function PF(t){return Array.prototype.map.call(t,function(e){return(e<16?"0":"")+e.toString(16)}).join("")}function oh(t){return(4294967296+t).toString(16).substring(1)}function CF(t,e,r){let n=`
`+t+" = ";for(let i=0;i<e.length;i+=2){if(r===32)n+=oh(e[i]).toUpperCase(),n+=" ",n+=oh(e[i+1]).toUpperCase();else if(r===64)n+=oh(e[i+1]).toUpperCase(),n+=oh(e[i]).toUpperCase();else throw new Error("Invalid size "+r);i%6===4?n+=`
`+new Array(t.length+4).join(" "):i<e.length-2&&(n+=" ")}console.log(n)}function OF(t,e,r){let n=new Date().getTime();const i=new Uint8Array(e);for(let o=0;o<e;o++)i[o]=o%256;const s=new Date().getTime();console.log("Generated random input in "+(s-n)+"ms"),n=s;for(let o=0;o<r;o++){const a=t(i),l=new Date().getTime(),c=l-n;n=l,console.log("Hashed in "+c+"ms: "+a.substring(0,20)+"..."),console.log(Math.round(e/(1<<20)/(c/1e3)*100)/100+" MB PER SECOND")}}var x8={normalizeInput:IF,toHex:PF,debugPrint:CF,testSpeed:OF};const Wh=x8;function ah(t,e,r){const n=t[e]+t[r];let i=t[e+1]+t[r+1];n>=4294967296&&i++,t[e]=n,t[e+1]=i}function ME(t,e,r,n){let i=t[e]+r;r<0&&(i+=4294967296);let s=t[e+1]+n;i>=4294967296&&s++,t[e]=i,t[e+1]=s}function A8(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ws(t,e,r,n,i,s){const o=eu[i],a=eu[i+1],l=eu[s],c=eu[s+1];ah(pe,t,e),ME(pe,t,o,a);let u=pe[n]^pe[t],f=pe[n+1]^pe[t+1];pe[n]=f,pe[n+1]=u,ah(pe,r,n),u=pe[e]^pe[r],f=pe[e+1]^pe[r+1],pe[e]=u>>>24^f<<8,pe[e+1]=f>>>24^u<<8,ah(pe,t,e),ME(pe,t,l,c),u=pe[n]^pe[t],f=pe[n+1]^pe[t+1],pe[n]=u>>>16^f<<16,pe[n+1]=f>>>16^u<<16,ah(pe,r,n),u=pe[e]^pe[r],f=pe[e+1]^pe[r+1],pe[e]=f>>>31^u<<1,pe[e+1]=u>>>31^f<<1}const _8=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),NF=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],vr=new Uint8Array(NF.map(function(t){return t*2})),pe=new Uint32Array(32),eu=new Uint32Array(32);function S8(t,e){let r=0;for(r=0;r<16;r++)pe[r]=t.h[r],pe[r+16]=_8[r];for(pe[24]=pe[24]^t.t,pe[25]=pe[25]^t.t/4294967296,e&&(pe[28]=~pe[28],pe[29]=~pe[29]),r=0;r<32;r++)eu[r]=A8(t.b,4*r);for(r=0;r<12;r++)Ws(0,8,16,24,vr[r*16+0],vr[r*16+1]),Ws(2,10,18,26,vr[r*16+2],vr[r*16+3]),Ws(4,12,20,28,vr[r*16+4],vr[r*16+5]),Ws(6,14,22,30,vr[r*16+6],vr[r*16+7]),Ws(0,10,20,30,vr[r*16+8],vr[r*16+9]),Ws(2,12,22,24,vr[r*16+10],vr[r*16+11]),Ws(4,14,16,26,vr[r*16+12],vr[r*16+13]),Ws(6,8,18,28,vr[r*16+14],vr[r*16+15]);for(r=0;r<16;r++)t.h[r]=t.h[r]^pe[r]^pe[r+16]}const Gs=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);function I8(t,e,r,n){if(t===0||t>64)throw new Error("Illegal output length, expected 0 < length <= 64");if(e&&e.length>64)throw new Error("Illegal key, expected Uint8Array with 0 < length <= 64");if(r&&r.length!==16)throw new Error("Illegal salt, expected Uint8Array with length is 16");if(n&&n.length!==16)throw new Error("Illegal personal, expected Uint8Array with length is 16");const i={b:new Uint8Array(128),h:new Uint32Array(16),t:0,c:0,outlen:t};Gs.fill(0),Gs[0]=t,e&&(Gs[1]=e.length),Gs[2]=1,Gs[3]=1,r&&Gs.set(r,32),n&&Gs.set(n,48);for(let s=0;s<16;s++)i.h[s]=_8[s]^A8(Gs,s*4);return e&&(jv(i,e),i.c=128),i}function jv(t,e){for(let r=0;r<e.length;r++)t.c===128&&(t.t+=t.c,S8(t,!1),t.c=0),t.b[t.c++]=e[r]}function P8(t){for(t.t+=t.c;t.c<128;)t.b[t.c++]=0;S8(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3);return e}function C8(t,e,r,n,i){r=r||64,t=Wh.normalizeInput(t),n&&(n=Wh.normalizeInput(n)),i&&(i=Wh.normalizeInput(i));const s=I8(r,e,n,i);return jv(s,t),P8(s)}function TF(t,e,r,n,i){const s=C8(t,e,r,n,i);return Wh.toHex(s)}var kF={blake2b:C8,blake2bHex:TF,blake2bInit:I8,blake2bUpdate:jv,blake2bFinal:P8};const O8=x8;function DF(t,e){return t[e]^t[e+1]<<8^t[e+2]<<16^t[e+3]<<24}function Ys(t,e,r,n,i,s){Ie[t]=Ie[t]+Ie[e]+i,Ie[n]=lh(Ie[n]^Ie[t],16),Ie[r]=Ie[r]+Ie[n],Ie[e]=lh(Ie[e]^Ie[r],12),Ie[t]=Ie[t]+Ie[e]+s,Ie[n]=lh(Ie[n]^Ie[t],8),Ie[r]=Ie[r]+Ie[n],Ie[e]=lh(Ie[e]^Ie[r],7)}function lh(t,e){return t>>>e^t<<32-e}const N8=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),br=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0]),Ie=new Uint32Array(16),rr=new Uint32Array(16);function T8(t,e){let r=0;for(r=0;r<8;r++)Ie[r]=t.h[r],Ie[r+8]=N8[r];for(Ie[12]^=t.t,Ie[13]^=t.t/4294967296,e&&(Ie[14]=~Ie[14]),r=0;r<16;r++)rr[r]=DF(t.b,4*r);for(r=0;r<10;r++)Ys(0,4,8,12,rr[br[r*16+0]],rr[br[r*16+1]]),Ys(1,5,9,13,rr[br[r*16+2]],rr[br[r*16+3]]),Ys(2,6,10,14,rr[br[r*16+4]],rr[br[r*16+5]]),Ys(3,7,11,15,rr[br[r*16+6]],rr[br[r*16+7]]),Ys(0,5,10,15,rr[br[r*16+8]],rr[br[r*16+9]]),Ys(1,6,11,12,rr[br[r*16+10]],rr[br[r*16+11]]),Ys(2,7,8,13,rr[br[r*16+12]],rr[br[r*16+13]]),Ys(3,4,9,14,rr[br[r*16+14]],rr[br[r*16+15]]);for(r=0;r<8;r++)t.h[r]^=Ie[r]^Ie[r+8]}function k8(t,e){if(!(t>0&&t<=32))throw new Error("Incorrect output length, should be in [1, 32]");const r=e?e.length:0;if(e&&!(r>0&&r<=32))throw new Error("Incorrect key length, should be in [1, 32]");const n={h:new Uint32Array(N8),b:new Uint8Array(64),c:0,t:0,outlen:t};return n.h[0]^=16842752^r<<8^t,r>0&&(zv(n,e),n.c=64),n}function zv(t,e){for(let r=0;r<e.length;r++)t.c===64&&(t.t+=t.c,T8(t,!1),t.c=0),t.b[t.c++]=e[r]}function D8(t){for(t.t+=t.c;t.c<64;)t.b[t.c++]=0;T8(t,!0);const e=new Uint8Array(t.outlen);for(let r=0;r<t.outlen;r++)e[r]=t.h[r>>2]>>8*(r&3)&255;return e}function R8(t,e,r){r=r||32,t=O8.normalizeInput(t);const n=k8(r,e);return zv(n,t),D8(n)}function RF(t,e,r){const n=R8(t,e,r);return O8.toHex(n)}var $F={blake2s:R8,blake2sHex:RF,blake2sInit:k8,blake2sUpdate:zv,blake2sFinal:D8};const Uc=kF,Lc=$F;var MF={blake2b:Uc.blake2b,blake2bHex:Uc.blake2bHex,blake2bInit:Uc.blake2bInit,blake2bUpdate:Uc.blake2bUpdate,blake2bFinal:Uc.blake2bFinal,blake2s:Lc.blake2s,blake2sHex:Lc.blake2sHex,blake2sInit:Lc.blake2sInit,blake2sUpdate:Lc.blake2sUpdate,blake2sFinal:Lc.blake2sFinal},Mp={exports:{}};function BF(t){try{return JSON.stringify(t)}catch{return'"[Circular]"'}}var UF=LF;function LF(t,e,r){var n=r&&r.stringify||BF,i=1;if(typeof t=="object"&&t!==null){var s=e.length+i;if(s===1)return t;var o=new Array(s);o[0]=n(t);for(var a=1;a<s;a++)o[a]=n(e[a]);return o.join(" ")}if(typeof t!="string")return t;var l=e.length;if(l===0)return t;for(var c="",u=1-i,f=-1,h=t&&t.length||0,g=0;g<h;){if(t.charCodeAt(g)===37&&g+1<h){switch(f=f>-1?f:0,t.charCodeAt(g+1)){case 100:case 102:if(u>=l||e[u]==null)break;f<g&&(c+=t.slice(f,g)),c+=Number(e[u]),f=g+2,g++;break;case 105:if(u>=l||e[u]==null)break;f<g&&(c+=t.slice(f,g)),c+=Math.floor(Number(e[u])),f=g+2,g++;break;case 79:case 111:case 106:if(u>=l||e[u]===void 0)break;f<g&&(c+=t.slice(f,g));var w=typeof e[u];if(w==="string"){c+="'"+e[u]+"'",f=g+2,g++;break}if(w==="function"){c+=e[u].name||"<anonymous>",f=g+2,g++;break}c+=n(e[u]),f=g+2,g++;break;case 115:if(u>=l)break;f<g&&(c+=t.slice(f,g)),c+=String(e[u]),f=g+2,g++;break;case 37:f<g&&(c+=t.slice(f,g)),c+="%",f=g+2,g++,u--;break}++u}++g}return f===-1?t:(f<h&&(c+=t.slice(f)),c)}const BE=UF;Mp.exports=Ns;const Zu=ej().console||{},FF={mapHttpRequest:ch,mapHttpResponse:ch,wrapRequestSerializer:Cg,wrapResponseSerializer:Cg,wrapErrorSerializer:Cg,req:ch,res:ch,err:LE,errWithCause:LE};function vo(t,e){return t==="silent"?1/0:e.levels.values[t]}const qv=Symbol("pino.logFuncs"),Iy=Symbol("pino.hierarchy"),jF={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function UE(t,e){const r={logger:e,parent:t[Iy]};e[Iy]=r}function zF(t,e,r){const n={};e.forEach(i=>{n[i]=r[i]?r[i]:Zu[i]||Zu[jF[i]||"log"]||Ll}),t[qv]=n}function qF(t,e){return Array.isArray(t)?t.filter(function(n){return n!=="!stdSerializers.err"}):t===!0?Object.keys(e):!1}function Ns(t){t=t||{},t.browser=t.browser||{};const e=t.browser.transmit;if(e&&typeof e.send!="function")throw Error("pino: transmit option must have a send function");const r=t.browser.write||Zu;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},i=qF(t.browser.serialize,n);let s=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(s=!1);const o=Object.keys(t.customLevels||{}),a=["error","fatal","warn","info","debug","trace"].concat(o);typeof r=="function"&&a.forEach(function(v){r[v]=r}),(t.enabled===!1||t.browser.disabled)&&(t.level="silent");const l=t.level||"info",c=Object.create(r);c.log||(c.log=Ll),zF(c,a,r),UE({},c),Object.defineProperty(c,"levelVal",{get:f}),Object.defineProperty(c,"level",{get:h,set:g});const u={transmit:e,serialize:i,asObject:t.browser.asObject,asObjectBindingsOnly:t.browser.asObjectBindingsOnly,formatters:t.browser.formatters,levels:a,timestamp:JF(t),messageKey:t.messageKey||"msg",onChild:t.onChild||Ll};c.levels=HF(t),c.level=l,c.isLevelEnabled=function(v){return this.levels.values[v]?this.levels.values[v]>=this.levels.values[this.level]:!1},c.setMaxListeners=c.getMaxListeners=c.emit=c.addListener=c.on=c.prependListener=c.once=c.prependOnceListener=c.removeListener=c.removeAllListeners=c.listeners=c.listenerCount=c.eventNames=c.write=c.flush=Ll,c.serializers=n,c._serialize=i,c._stdErrSerialize=s,c.child=function(...v){return w.call(this,u,...v)},e&&(c._logEvent=Py());function f(){return vo(this.level,this)}function h(){return this._level}function g(v){if(v!=="silent"&&!this.levels.values[v])throw Error("unknown level "+v);this._level=v,ra(this,u,c,"error"),ra(this,u,c,"fatal"),ra(this,u,c,"warn"),ra(this,u,c,"info"),ra(this,u,c,"debug"),ra(this,u,c,"trace"),o.forEach(O=>{ra(this,u,c,O)})}function w(v,O,A){if(!O)throw new Error("missing bindings for child Pino");A=A||{},i&&O.serializers&&(A.serializers=O.serializers);const I=A.serializers;if(i&&I){var _=Object.assign({},n,I),T=t.browser.serialize===!0?Object.keys(_):i;delete O.serializers,Hv([O],T,_,this._stdErrSerialize)}function D($){this._childLevel=($._childLevel|0)+1,this.bindings=O,_&&(this.serializers=_,this._serialize=T),e&&(this._logEvent=Py([].concat($._logEvent.bindings,O)))}D.prototype=this;const R=new D(this);return UE(this,R),R.child=function(...$){return w.call(this,v,...$)},R.level=A.level||this.level,v.onChild(R),R}return c}function HF(t){const e=t.customLevels||{},r=Object.assign({},Ns.levels.values,e),n=Object.assign({},Ns.levels.labels,VF(e));return{values:r,labels:n}}function VF(t){const e={};return Object.keys(t).forEach(function(r){e[t[r]]=r}),e}Ns.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}};Ns.stdSerializers=FF;Ns.stdTimeFunctions=Object.assign({},{nullTime:$8,epochTime:M8,unixTime:ZF,isoTime:XF});function KF(t){const e=[];t.bindings&&e.push(t.bindings);let r=t[Iy];for(;r.parent;)r=r.parent,r.logger.bindings&&e.push(r.logger.bindings);return e.reverse()}function ra(t,e,r,n){if(Object.defineProperty(t,n,{value:vo(t.level,r)>vo(n,r)?Ll:r[qv][n],writable:!0,enumerable:!0,configurable:!0}),t[n]===Ll){if(!e.transmit)return;const s=e.transmit.level||t.level,o=vo(s,r);if(vo(n,r)<o)return}t[n]=GF(t,e,r,n);const i=KF(t);i.length!==0&&(t[n]=WF(i,t[n]))}function WF(t,e){return function(){return e.apply(this,[...t,...arguments])}}function GF(t,e,r,n){return function(i){return function(){const o=e.timestamp(),a=new Array(arguments.length),l=Object.getPrototypeOf&&Object.getPrototypeOf(this)===Zu?Zu:this;for(var c=0;c<a.length;c++)a[c]=arguments[c];var u=!1;if(e.serialize&&(Hv(a,this._serialize,this.serializers,this._stdErrSerialize),u=!0),e.asObject||e.formatters?i.call(l,...YF(this,n,a,o,e)):i.apply(l,a),e.transmit){const f=e.transmit.level||t._level,h=vo(f,r),g=vo(n,r);if(g<h)return;QF(this,{ts:o,methodLevel:n,methodValue:g,transmitValue:r.levels.values[e.transmit.level||t._level],send:e.transmit.send,val:vo(t._level,r)},a,u)}}}(t[qv][n])}function YF(t,e,r,n,i){const{level:s,log:o=f=>f}=i.formatters||{},a=r.slice();let l=a[0];const c={};let u=(t._childLevel|0)+1;if(u<1&&(u=1),n&&(c.time=n),s){const f=s(e,t.levels.values[e]);Object.assign(c,f)}else c.level=t.levels.values[e];if(i.asObjectBindingsOnly){if(l!==null&&typeof l=="object")for(;u--&&typeof a[0]=="object";)Object.assign(c,a.shift());return[o(c),...a]}else{if(l!==null&&typeof l=="object"){for(;u--&&typeof a[0]=="object";)Object.assign(c,a.shift());l=a.length?BE(a.shift(),a):void 0}else typeof l=="string"&&(l=BE(a.shift(),a));return l!==void 0&&(c[i.messageKey]=l),[o(c)]}}function Hv(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=Ns.stdSerializers.err(t[i]);else if(typeof t[i]=="object"&&!Array.isArray(t[i])&&e)for(const s in t[i])e.indexOf(s)>-1&&s in r&&(t[i][s]=r[s](t[i][s]))}function QF(t,e,r,n=!1){const i=e.send,s=e.ts,o=e.methodLevel,a=e.methodValue,l=e.val,c=t._logEvent.bindings;n||Hv(r,t._serialize||Object.keys(t.serializers),t.serializers,t._stdErrSerialize===void 0?!0:t._stdErrSerialize),t._logEvent.ts=s,t._logEvent.messages=r.filter(function(u){return c.indexOf(u)===-1}),t._logEvent.level.label=o,t._logEvent.level.value=a,i(o,t._logEvent,l),t._logEvent=Py(c)}function Py(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function LE(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)e[r]===void 0&&(e[r]=t[r]);return e}function JF(t){return typeof t.timestamp=="function"?t.timestamp:t.timestamp===!1?$8:M8}function ch(){return{}}function Cg(t){return t}function Ll(){}function $8(){return!1}function M8(){return Date.now()}function ZF(){return Math.round(Date.now()/1e3)}function XF(){return new Date(Date.now()).toISOString()}function ej(){function t(e){return typeof e<"u"&&e}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return t(self)||t(window)||t(this)||{}}}Mp.exports.default=Ns;Mp.exports.pino=Ns;var ll=Mp.exports;const B8=Mo(ll),tj={level:"info"},Bp="custom_context",Vv=1e3*1024;var rj=Object.defineProperty,nj=(t,e,r)=>e in t?rj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ho=(t,e,r)=>nj(t,typeof e!="symbol"?e+"":e,r);let ij=class{constructor(e){ho(this,"nodeValue"),ho(this,"sizeInBytes"),ho(this,"next"),this.nodeValue=e,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}},FE=class{constructor(e){ho(this,"lengthInNodes"),ho(this,"sizeInBytes"),ho(this,"head"),ho(this,"tail"),ho(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const r=new ij(e);if(r.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${r.size}`);for(;this.size+r.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=r),this.tail=r):(this.head=r,this.tail=r),this.lengthInNodes++,this.sizeInBytes+=r.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let r=this.head;for(;r!==null;)e.push(r.value),r=r.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const r=e.value;return e=e.next,{done:!1,value:r}}}}};var sj=Object.defineProperty,oj=(t,e,r)=>e in t?sj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,uh=(t,e,r)=>oj(t,typeof e!="symbol"?e+"":e,r);let U8=class{constructor(e,r=Vv){uh(this,"logs"),uh(this,"level"),uh(this,"levelValue"),uh(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=e??"error",this.levelValue=ll.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new FE(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,r){r===ll.levels.values.error?console.error(e):r===ll.levels.values.warn?console.warn(e):r===ll.levels.values.debug?console.debug(e):r===ll.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(Os({timestamp:new Date().toISOString(),log:e}));const r=typeof e=="string"?JSON.parse(e).level:e.level;r>=this.levelValue&&this.forwardToConsole(e,r)}getLogs(){return this.logs}clearLogs(){this.logs=new FE(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const r=this.getLogArray();return r.push(Os({extraMetadata:e})),new Blob(r,{type:"application/json"})}};var aj=Object.defineProperty,lj=(t,e,r)=>e in t?aj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,cj=(t,e,r)=>lj(t,e+"",r);let uj=class{constructor(e,r=Vv){cj(this,"baseChunkLogger"),this.baseChunkLogger=new U8(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const r=URL.createObjectURL(this.logsToBlob(e)),n=document.createElement("a");n.href=r,n.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r)}};var fj=Object.defineProperty,hj=(t,e,r)=>e in t?fj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dj=(t,e,r)=>hj(t,e+"",r);let pj=class{constructor(e,r=Vv){dj(this,"baseChunkLogger"),this.baseChunkLogger=new U8(e,r)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}};var gj=Object.defineProperty,mj=Object.defineProperties,yj=Object.getOwnPropertyDescriptors,jE=Object.getOwnPropertySymbols,wj=Object.prototype.hasOwnProperty,vj=Object.prototype.propertyIsEnumerable,zE=(t,e,r)=>e in t?gj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Hd=(t,e)=>{for(var r in e||(e={}))wj.call(e,r)&&zE(t,r,e[r]);if(jE)for(var r of jE(e))vj.call(e,r)&&zE(t,r,e[r]);return t},Vd=(t,e)=>mj(t,yj(e));function bj(t){return Vd(Hd({},t),{level:(t==null?void 0:t.level)||tj.level})}function Ej(t,e,r=Bp){return t[r]=e,t}function nn(t,e=Bp){return t[e]||""}function xj(t,e,r=Bp){const n=nn(t,r);return n.trim()?`${n}/${e}`:e}function _n(t,e,r=Bp){const n=xj(t,e,r),i=t.child({context:n});return Ej(i,n,r)}function Aj(t){var e,r;const n=new uj((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:B8(Vd(Hd({},t.opts),{level:"trace",browser:Vd(Hd({},(r=t.opts)==null?void 0:r.browser),{write:i=>n.write(i)})})),chunkLoggerController:n}}function _j(t){var e;const r=new pj((e=t.opts)==null?void 0:e.level,t.maxSizeInBytes);return{logger:B8(Vd(Hd({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}function L8(t){return typeof t.loggerOverride<"u"&&typeof t.loggerOverride!="string"?{logger:t.loggerOverride,chunkLoggerController:null}:typeof window<"u"?Aj(t):_j(t)}var Sj={};const Ij=":";function bs(t){const[e,r]=t.split(Ij);return{namespace:e,reference:r}}function qE(t,e=[]){const r=[];return Object.keys(t).forEach(n=>{if(e.length&&!e.includes(n))return;const i=t[n];r.push(...i.accounts)}),r}function F8(t,e){return t.includes(":")?[t]:e.chains||[]}var Pj=Object.defineProperty,Cj=Object.defineProperties,Oj=Object.getOwnPropertyDescriptors,HE=Object.getOwnPropertySymbols,Nj=Object.prototype.hasOwnProperty,Tj=Object.prototype.propertyIsEnumerable,Cy=(t,e,r)=>e in t?Pj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,VE=(t,e)=>{for(var r in e||(e={}))Nj.call(e,r)&&Cy(t,r,e[r]);if(HE)for(var r of HE(e))Tj.call(e,r)&&Cy(t,r,e[r]);return t},kj=(t,e)=>Cj(t,Oj(e)),KE=(t,e,r)=>Cy(t,typeof e!="symbol"?e+"":e,r);const Dj="ReactNative",yn={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},Rj="js";function Kd(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function jo(){return!Ra()&&!!Ev()&&navigator.product===Dj}function $j(){return jo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="android"}function Mj(){return jo()&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"&&(global==null?void 0:global.Platform.OS)==="ios"}function yc(){return!Kd()&&!!Ev()&&!!Ra()}function xf(){return jo()?yn.reactNative:Kd()?yn.node:yc()?yn.browser:yn.unknown}function WE(){var t;try{return jo()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(t=global.Application)==null?void 0:t.applicationId:void 0}catch{return}}function Bj(t,e){const r=new URLSearchParams(t);return Object.entries(e).sort(([n],[i])=>n.localeCompare(i)).forEach(([n,i])=>{i!=null&&r.set(n,String(i))}),r.toString()}function Uj(t){var e,r;const n=j8();try{return t!=null&&t.url&&n.url&&new URL(t.url).host!==new URL(n.url).host&&(console.warn(`The configured WalletConnect 'metadata.url':${t.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),t.url=n.url),(e=t==null?void 0:t.icons)!=null&&e.length&&t.icons.length>0&&(t.icons=t.icons.filter(i=>i!=="")),kj(VE(VE({},n),t),{url:(t==null?void 0:t.url)||n.url,name:(t==null?void 0:t.name)||n.name,description:(t==null?void 0:t.description)||n.description,icons:(r=t==null?void 0:t.icons)!=null&&r.length&&t.icons.length>0?t.icons:n.icons})}catch(i){return console.warn("Error populating app metadata",i),t||n}}function j8(){return XI()||{name:"",description:"",url:"",icons:[""]}}function Lj(){if(xf()===yn.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:r,Version:n}=global.Platform;return[r,n].join("-")}const t=t$();if(t===null)return"unknown";const e=t.os?t.os.replace(" ","").toLowerCase():"unknown";return t.type==="browser"?[e,t.name,t.version].join("-"):[e,t.version].join("-")}function Fj(){var t;const e=xf();return e===yn.browser?[e,((t=ZI())==null?void 0:t.host)||"unknown"].join(":"):e}function z8(t,e,r){const n=Lj(),i=Fj();return[[t,e].join("-"),[Rj,r].join("-"),n,i].join("/")}function jj({protocol:t,version:e,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:l}){const c=r.split("?"),u=z8(t,e,n),f={auth:i,ua:u,projectId:s,useOnCloseEvent:o,packageName:l||void 0,bundleId:a||void 0},h=Bj(c[1]||"",f);return c[0]+"?"+h}function wa(t,e){return t.filter(r=>e.includes(r)).length===t.length}function Oy(t){return Object.fromEntries(t.entries())}function Ny(t){return new Map(Object.entries(t))}function la(t=te.FIVE_MINUTES,e){const r=te.toMiliseconds(t||te.FIVE_MINUTES);let n,i,s,o;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a),o=Promise.resolve(a))},reject:a=>{s&&i&&(clearTimeout(s),i(a))},done:()=>new Promise((a,l)=>{if(o)return a(o);s=setTimeout(()=>{const c=new Error(e);o=Promise.reject(c),l(c)},r),n=a,i=l})}}function $i(t,e,r){return new Promise(async(n,i)=>{const s=setTimeout(()=>i(new Error(r)),e);try{const o=await t;n(o)}catch(o){i(o)}clearTimeout(s)})}function q8(t,e){if(typeof e=="string"&&e.startsWith(`${t}:`))return e;if(t.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(t.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${t}`)}function zj(t){return q8("topic",t)}function qj(t){return q8("id",t)}function H8(t){const[e,r]=t.split(":"),n={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")n.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))n.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return n}function Dt(t,e){return te.fromMiliseconds(Date.now()+te.toMiliseconds(t))}function Ni(t){return Date.now()>=te.toMiliseconds(t)}function Te(t,e){return`${t}${e?`:${e}`:""}`}function ji(t=[],e=[]){return[...new Set([...t,...e])]}async function Hj({id:t,topic:e,wcDeepLink:r}){var n;try{if(!r)return;const i=typeof r=="string"?JSON.parse(r):r,s=i==null?void 0:i.href;if(typeof s!="string")return;const o=Vj(s,t,e),a=xf();if(a===yn.browser){if(!((n=Ra())!=null&&n.hasFocus())){console.warn("Document does not have focus, skipping deeplink.");return}Kj(o)}else a===yn.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}function Vj(t,e,r){const n=`requestId=${e}&sessionTopic=${r}`;t.endsWith("/")&&(t=t.slice(0,-1));let i=`${t}`;if(t.startsWith("https://t.me")){const s=t.includes("?")?"&startapp=":"?startapp=";i=`${i}${s}${Qj(n,!0)}`}else i=`${i}/wc?${n}`;return i}function Kj(t){let e="_self";Yj()?e="_top":(Gj()||t.startsWith("https://")||t.startsWith("http://"))&&(e="_blank"),window.open(t,e,"noreferrer noopener")}async function Wj(t,e){let r="";try{if(yc()&&(r=localStorage.getItem(e),r))return r;r=await t.getItem(e)}catch(n){console.error(n)}return r}function GE(t,e){if(!t.includes(e))return null;const r=t.split(/([&,?,=])/),n=r.indexOf(e);return r[n+2]}function YE(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function Kv(){return typeof process<"u"&&Sj.IS_VITEST==="true"}function Gj(){return typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)}function Yj(){try{return window.self!==window.top}catch{return!1}}function Qj(t,e=!1){const r=Buffer.from(t).toString("base64");return e?r.replace(/[=]/g,""):r}function V8(t){return Buffer.from(t,"base64").toString("utf-8")}function Jj(t){return new Promise(e=>setTimeout(e,t))}let Zj=class{constructor({limit:e}){KE(this,"limit"),KE(this,"set"),this.limit=e,this.set=new Set}add(e){if(!this.set.has(e)){if(this.set.size>=this.limit){const r=this.set.values().next().value;r&&this.set.delete(r)}this.set.add(e)}}has(e){return this.set.has(e)}};const fh=BigInt(2**32-1),QE=BigInt(32);function K8(t,e=!1){return e?{h:Number(t&fh),l:Number(t>>QE&fh)}:{h:Number(t>>QE&fh)|0,l:Number(t&fh)|0}}function W8(t,e=!1){const r=t.length;let n=new Uint32Array(r),i=new Uint32Array(r);for(let s=0;s<r;s++){const{h:o,l:a}=K8(t[s],e);[n[s],i[s]]=[o,a]}return[n,i]}const JE=(t,e,r)=>t>>>r,ZE=(t,e,r)=>t<<32-r|e>>>r,oo=(t,e,r)=>t>>>r|e<<32-r,ao=(t,e,r)=>t<<32-r|e>>>r,tu=(t,e,r)=>t<<64-r|e>>>r-32,ru=(t,e,r)=>t>>>r-32|e<<64-r,Xj=(t,e)=>e,ez=(t,e)=>t,tz=(t,e,r)=>t<<r|e>>>32-r,rz=(t,e,r)=>e<<r|t>>>32-r,nz=(t,e,r)=>e<<r-32|t>>>64-r,iz=(t,e,r)=>t<<r-32|e>>>64-r;function ti(t,e,r,n){const i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}const Wv=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Gv=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,sz=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),oz=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0,az=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0),lz=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0,tl=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Up(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Ts(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function pi(t,...e){if(!Up(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Lp(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Ts(t.outputLen),Ts(t.blockLen)}function $o(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Yv(t,e){pi(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function Xu(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Hn(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Og(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ei(t,e){return t<<32-e|t>>>e}const G8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Y8(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const is=G8?t=>t:t=>Y8(t);function cz(t){for(let e=0;e<t.length;e++)t[e]=Y8(t[e]);return t}const lo=G8?t=>t:cz,Q8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",uz=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Fl(t){if(pi(t),Q8)return t.toHex();let e="";for(let r=0;r<t.length;r++)e+=uz[t[r]];return e}const ts={_0:48,_9:57,A:65,F:70,a:97,f:102};function XE(t){if(t>=ts._0&&t<=ts._9)return t-ts._0;if(t>=ts.A&&t<=ts.F)return t-(ts.A-10);if(t>=ts.a&&t<=ts.f)return t-(ts.a-10)}function Wd(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(Q8)return Uint8Array.fromHex(t);const e=t.length,r=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){const o=XE(t.charCodeAt(s)),a=XE(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}n[i]=o*16+a}return n}function J8(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function fi(t){return typeof t=="string"&&(t=J8(t)),pi(t),t}function po(...t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];pi(i),e+=i.length}const r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){const s=t[n];r.set(s,i),i+=s.length}return r}let Fp=class{};function Af(t){const e=n=>t().update(fi(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function fz(t){const e=(n,i)=>t(i).update(fi(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}function Va(t=32){if(tl&&typeof tl.getRandomValues=="function")return tl.getRandomValues(new Uint8Array(t));if(tl&&typeof tl.randomBytes=="function")return Uint8Array.from(tl.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}const hz=BigInt(0),Fc=BigInt(1),dz=BigInt(2),pz=BigInt(7),gz=BigInt(256),mz=BigInt(113),Z8=[],X8=[],e4=[];for(let t=0,e=Fc,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],Z8.push(2*(5*n+r)),X8.push((t+1)*(t+2)/2%64);let i=hz;for(let s=0;s<7;s++)e=(e<<Fc^(e>>pz)*mz)%gz,e&dz&&(i^=Fc<<(Fc<<BigInt(s))-Fc);e4.push(i)}const t4=W8(e4,!0),yz=t4[0],wz=t4[1],ex=(t,e,r)=>r>32?nz(t,e,r):tz(t,e,r),tx=(t,e,r)=>r>32?iz(t,e,r):rz(t,e,r);function vz(t,e=24){const r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,c=r[l],u=r[l+1],f=ex(c,u,1)^r[a],h=tx(c,u,1)^r[a+1];for(let g=0;g<50;g+=10)t[o+g]^=f,t[o+g+1]^=h}let i=t[2],s=t[3];for(let o=0;o<24;o++){const a=X8[o],l=ex(i,s,a),c=tx(i,s,a),u=Z8[o];i=t[u],s=t[u+1],t[u]=l,t[u+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=yz[n],t[1]^=wz[n]}Hn(r)}let bz=class r4 extends Fp{constructor(e,r,n,i=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,Ts(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Xu(this.state)}clone(){return this._cloneInto()}keccak(){lo(this.state32),vz(this.state32,this.rounds),lo(this.state32),this.posOut=0,this.pos=0}update(e){$o(this),e=fi(e),pi(e);const{blockLen:r,state:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,r&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){$o(this,!1),pi(e),this.finish();const r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ts(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Yv(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Hn(this.state)}_cloneInto(e){const{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new r4(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};const Ez=(t,e,r)=>Af(()=>new bz(e,t,r)),xz=Ez(1,136,256/8);function Az(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),l=n?4:0,c=n?0:4;t.setUint32(e+l,o,n),t.setUint32(e+c,a,n)}function _z(t,e,r){return t&e^~t&r}function Sz(t,e,r){return t&e^t&r^e&r}let n4=class extends Fp{constructor(e,r,n,i){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.buffer=new Uint8Array(e),this.view=Og(this.buffer)}update(e){$o(this),e=fi(e),pi(e);const{view:r,buffer:n,blockLen:i}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(i-this.pos,s-o);if(a===i){const l=Og(e);for(;i<=s-o;o+=i)this.process(l,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){$o(this),Yv(e,this),this.finished=!0;const{buffer:r,view:n,blockLen:i,isLE:s}=this;let{pos:o}=this;r[o++]=128,Hn(this.buffer.subarray(o)),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)r[f]=0;Az(n,i-8,BigInt(this.length*8),s),this.process(n,0);const a=Og(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,u[f],s)}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=i,e.pos=a,i%r&&e.buffer.set(n),e}clone(){return this._cloneInto()}};const Qs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Er=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),xr=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Iz=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Js=new Uint32Array(64);class Pz extends n4{constructor(e=32){super(64,e,8,!1),this.A=Qs[0]|0,this.B=Qs[1]|0,this.C=Qs[2]|0,this.D=Qs[3]|0,this.E=Qs[4]|0,this.F=Qs[5]|0,this.G=Qs[6]|0,this.H=Qs[7]|0}get(){const{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:l}=this;return[e,r,n,i,s,o,a,l]}set(e,r,n,i,s,o,a,l){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,r){for(let f=0;f<16;f++,r+=4)Js[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){const h=Js[f-15],g=Js[f-2],w=Ei(h,7)^Ei(h,18)^h>>>3,v=Ei(g,17)^Ei(g,19)^g>>>10;Js[f]=v+Js[f-7]+w+Js[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let f=0;f<64;f++){const h=Ei(a,6)^Ei(a,11)^Ei(a,25),g=u+h+_z(a,l,c)+Iz[f]+Js[f]|0,w=(Ei(n,2)^Ei(n,13)^Ei(n,22))+Sz(n,i,s)|0;u=c,c=l,l=a,a=o+g|0,o=s,s=i,i=n,n=g+w|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,i,s,o,a,l,c,u)}roundClean(){Hn(Js)}destroy(){this.set(0,0,0,0,0,0,0,0),Hn(this.buffer)}}const i4=W8(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),Cz=i4[0],Oz=i4[1],Zs=new Uint32Array(80),Xs=new Uint32Array(80);let Qv=class extends n4{constructor(e=64){super(128,e,16,!1),this.Ah=xr[0]|0,this.Al=xr[1]|0,this.Bh=xr[2]|0,this.Bl=xr[3]|0,this.Ch=xr[4]|0,this.Cl=xr[5]|0,this.Dh=xr[6]|0,this.Dl=xr[7]|0,this.Eh=xr[8]|0,this.El=xr[9]|0,this.Fh=xr[10]|0,this.Fl=xr[11]|0,this.Gh=xr[12]|0,this.Gl=xr[13]|0,this.Hh=xr[14]|0,this.Hl=xr[15]|0}get(){const{Ah:e,Al:r,Bh:n,Bl:i,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:f,Fl:h,Gh:g,Gl:w,Hh:v,Hl:O}=this;return[e,r,n,i,s,o,a,l,c,u,f,h,g,w,v,O]}set(e,r,n,i,s,o,a,l,c,u,f,h,g,w,v,O){this.Ah=e|0,this.Al=r|0,this.Bh=n|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=f|0,this.Fl=h|0,this.Gh=g|0,this.Gl=w|0,this.Hh=v|0,this.Hl=O|0}process(e,r){for(let _=0;_<16;_++,r+=4)Zs[_]=e.getUint32(r),Xs[_]=e.getUint32(r+=4);for(let _=16;_<80;_++){const T=Zs[_-15]|0,D=Xs[_-15]|0,R=oo(T,D,1)^oo(T,D,8)^JE(T,D,7),$=ao(T,D,1)^ao(T,D,8)^ZE(T,D,7),M=Zs[_-2]|0,B=Xs[_-2]|0,z=oo(M,B,19)^tu(M,B,61)^JE(M,B,6),K=ao(M,B,19)^ru(M,B,61)^ZE(M,B,6),L=sz($,K,Xs[_-7],Xs[_-16]),P=oz(L,R,z,Zs[_-7],Zs[_-16]);Zs[_]=P|0,Xs[_]=L|0}let{Ah:n,Al:i,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:f,El:h,Fh:g,Fl:w,Gh:v,Gl:O,Hh:A,Hl:I}=this;for(let _=0;_<80;_++){const T=oo(f,h,14)^oo(f,h,18)^tu(f,h,41),D=ao(f,h,14)^ao(f,h,18)^ru(f,h,41),R=f&g^~f&v,$=h&w^~h&O,M=az(I,D,$,Oz[_],Xs[_]),B=lz(M,A,T,R,Cz[_],Zs[_]),z=M|0,K=oo(n,i,28)^tu(n,i,34)^tu(n,i,39),L=ao(n,i,28)^ru(n,i,34)^ru(n,i,39),P=n&s^n&a^s&a,p=i&o^i&l^o&l;A=v|0,I=O|0,v=g|0,O=w|0,g=f|0,w=h|0,{h:f,l:h}=ti(c|0,u|0,B|0,z|0),c=a|0,u=l|0,a=s|0,l=o|0,s=n|0,o=i|0;const d=Wv(z,L,p);n=Gv(d,B,K,P),i=d|0}({h:n,l:i}=ti(this.Ah|0,this.Al|0,n|0,i|0)),{h:s,l:o}=ti(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=ti(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=ti(this.Dh|0,this.Dl|0,c|0,u|0),{h:f,l:h}=ti(this.Eh|0,this.El|0,f|0,h|0),{h:g,l:w}=ti(this.Fh|0,this.Fl|0,g|0,w|0),{h:v,l:O}=ti(this.Gh|0,this.Gl|0,v|0,O|0),{h:A,l:I}=ti(this.Hh|0,this.Hl|0,A|0,I|0),this.set(n,i,s,o,a,l,c,u,f,h,g,w,v,O,A,I)}roundClean(){Hn(Zs,Xs)}destroy(){Hn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};class Nz extends Qv{constructor(){super(48),this.Ah=Er[0]|0,this.Al=Er[1]|0,this.Bh=Er[2]|0,this.Bl=Er[3]|0,this.Ch=Er[4]|0,this.Cl=Er[5]|0,this.Dh=Er[6]|0,this.Dl=Er[7]|0,this.Eh=Er[8]|0,this.El=Er[9]|0,this.Fh=Er[10]|0,this.Fl=Er[11]|0,this.Gh=Er[12]|0,this.Gl=Er[13]|0,this.Hh=Er[14]|0,this.Hl=Er[15]|0}}const Ar=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class Tz extends Qv{constructor(){super(32),this.Ah=Ar[0]|0,this.Al=Ar[1]|0,this.Bh=Ar[2]|0,this.Bl=Ar[3]|0,this.Ch=Ar[4]|0,this.Cl=Ar[5]|0,this.Dh=Ar[6]|0,this.Dl=Ar[7]|0,this.Eh=Ar[8]|0,this.El=Ar[9]|0,this.Fh=Ar[10]|0,this.Fl=Ar[11]|0,this.Gh=Ar[12]|0,this.Gl=Ar[13]|0,this.Hh=Ar[14]|0,this.Hl=Ar[15]|0}}const jp=Af(()=>new Pz),kz=Af(()=>new Qv),Dz=Af(()=>new Nz),Rz=Af(()=>new Tz),$z=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Ft=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),se=new Uint32Array(32);function eo(t,e,r,n,i,s){const o=i[s],a=i[s+1];let l=se[2*t],c=se[2*t+1],u=se[2*e],f=se[2*e+1],h=se[2*r],g=se[2*r+1],w=se[2*n],v=se[2*n+1],O=Wv(l,u,o);c=Gv(O,c,f,a),l=O|0,{Dh:v,Dl:w}={Dh:v^c,Dl:w^l},{Dh:v,Dl:w}={Dh:Xj(v,w),Dl:ez(v)},{h:g,l:h}=ti(g,h,v,w),{Bh:f,Bl:u}={Bh:f^g,Bl:u^h},{Bh:f,Bl:u}={Bh:oo(f,u,24),Bl:ao(f,u,24)},se[2*t]=l,se[2*t+1]=c,se[2*e]=u,se[2*e+1]=f,se[2*r]=h,se[2*r+1]=g,se[2*n]=w,se[2*n+1]=v}function to(t,e,r,n,i,s){const o=i[s],a=i[s+1];let l=se[2*t],c=se[2*t+1],u=se[2*e],f=se[2*e+1],h=se[2*r],g=se[2*r+1],w=se[2*n],v=se[2*n+1],O=Wv(l,u,o);c=Gv(O,c,f,a),l=O|0,{Dh:v,Dl:w}={Dh:v^c,Dl:w^l},{Dh:v,Dl:w}={Dh:oo(v,w,16),Dl:ao(v,w,16)},{h:g,l:h}=ti(g,h,v,w),{Bh:f,Bl:u}={Bh:f^g,Bl:u^h},{Bh:f,Bl:u}={Bh:tu(f,u,63),Bl:ru(f,u,63)},se[2*t]=l,se[2*t+1]=c,se[2*e]=u,se[2*e+1]=f,se[2*r]=h,se[2*r+1]=g,se[2*n]=w,se[2*n+1]=v}function Mz(t,e={},r,n,i){if(Ts(r),t<0||t>r)throw new Error("outputLen bigger than keyLen");const{key:s,salt:o,personalization:a}=e;if(s!==void 0&&(s.length<1||s.length>r))throw new Error("key length must be undefined or 1.."+r);if(o!==void 0&&o.length!==n)throw new Error("salt must be undefined or "+n);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class Bz extends Fp{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,Ts(e),Ts(r),this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=Xu(this.buffer)}update(e){$o(this),e=fi(e),pi(e);const{blockLen:r,buffer:n,buffer32:i}=this,s=e.length,o=e.byteOffset,a=e.buffer;for(let l=0;l<s;){this.pos===r&&(lo(i),this.compress(i,0,!1),lo(i),this.pos=0);const c=Math.min(r-this.pos,s-l),u=o+l;if(c===r&&!(u%4)&&l+c<s){const f=new Uint32Array(a,u,Math.floor((s-l)/4));lo(f);for(let h=0;l+r<s;h+=i.length,l+=r)this.length+=r,this.compress(f,h,!1);lo(f);continue}n.set(e.subarray(l,l+c),this.pos),this.pos+=c,this.length+=c,l+=c}return this}digestInto(e){$o(this),Yv(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,Hn(this.buffer.subarray(r)),lo(n),this.compress(n,0,!0),lo(n);const i=Xu(e);this.get().forEach((s,o)=>i[o]=is(s))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:i,destroyed:s,outputLen:o,pos:a}=this;return e||(e=new this.constructor({dkLen:o})),e.set(...this.get()),e.buffer.set(r),e.destroyed=s,e.finished=i,e.length=n,e.pos=a,e.outputLen=o,e}clone(){return this._cloneInto()}}class Uz extends Bz{constructor(e={}){const r=e.dkLen===void 0?64:e.dkLen;super(128,r),this.v0l=Ft[0]|0,this.v0h=Ft[1]|0,this.v1l=Ft[2]|0,this.v1h=Ft[3]|0,this.v2l=Ft[4]|0,this.v2h=Ft[5]|0,this.v3l=Ft[6]|0,this.v3h=Ft[7]|0,this.v4l=Ft[8]|0,this.v4h=Ft[9]|0,this.v5l=Ft[10]|0,this.v5h=Ft[11]|0,this.v6l=Ft[12]|0,this.v6h=Ft[13]|0,this.v7l=Ft[14]|0,this.v7h=Ft[15]|0,Mz(r,e,64,16,16);let{key:n,personalization:i,salt:s}=e,o=0;if(n!==void 0&&(n=fi(n),o=n.length),this.v0l^=this.outputLen|o<<8|65536|1<<24,s!==void 0){s=fi(s);const a=Xu(s);this.v4l^=is(a[0]),this.v4h^=is(a[1]),this.v5l^=is(a[2]),this.v5h^=is(a[3])}if(i!==void 0){i=fi(i);const a=Xu(i);this.v6l^=is(a[0]),this.v6h^=is(a[1]),this.v7l^=is(a[2]),this.v7h^=is(a[3])}if(n!==void 0){const a=new Uint8Array(this.blockLen);a.set(n),this.update(a)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:i,v2l:s,v2h:o,v3l:a,v3h:l,v4l:c,v4h:u,v5l:f,v5h:h,v6l:g,v6h:w,v7l:v,v7h:O}=this;return[e,r,n,i,s,o,a,l,c,u,f,h,g,w,v,O]}set(e,r,n,i,s,o,a,l,c,u,f,h,g,w,v,O){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=i|0,this.v2l=s|0,this.v2h=o|0,this.v3l=a|0,this.v3h=l|0,this.v4l=c|0,this.v4h=u|0,this.v5l=f|0,this.v5h=h|0,this.v6l=g|0,this.v6h=w|0,this.v7l=v|0,this.v7h=O|0}compress(e,r,n){this.get().forEach((l,c)=>se[c]=l),se.set(Ft,16);let{h:i,l:s}=K8(BigInt(this.length));se[24]=Ft[8]^s,se[25]=Ft[9]^i,n&&(se[28]=~se[28],se[29]=~se[29]);let o=0;const a=$z;for(let l=0;l<12;l++)eo(0,4,8,12,e,r+2*a[o++]),to(0,4,8,12,e,r+2*a[o++]),eo(1,5,9,13,e,r+2*a[o++]),to(1,5,9,13,e,r+2*a[o++]),eo(2,6,10,14,e,r+2*a[o++]),to(2,6,10,14,e,r+2*a[o++]),eo(3,7,11,15,e,r+2*a[o++]),to(3,7,11,15,e,r+2*a[o++]),eo(0,5,10,15,e,r+2*a[o++]),to(0,5,10,15,e,r+2*a[o++]),eo(1,6,11,12,e,r+2*a[o++]),to(1,6,11,12,e,r+2*a[o++]),eo(2,7,8,13,e,r+2*a[o++]),to(2,7,8,13,e,r+2*a[o++]),eo(3,4,9,14,e,r+2*a[o++]),to(3,4,9,14,e,r+2*a[o++]);this.v0l^=se[0]^se[16],this.v0h^=se[1]^se[17],this.v1l^=se[2]^se[18],this.v1h^=se[3]^se[19],this.v2l^=se[4]^se[20],this.v2h^=se[5]^se[21],this.v3l^=se[6]^se[22],this.v3h^=se[7]^se[23],this.v4l^=se[8]^se[24],this.v4h^=se[9]^se[25],this.v5l^=se[10]^se[26],this.v5h^=se[11]^se[27],this.v6l^=se[12]^se[28],this.v6h^=se[13]^se[29],this.v7l^=se[14]^se[30],this.v7h^=se[15]^se[31],Hn(se)}destroy(){this.destroyed=!0,Hn(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Lz=fz(t=>new Uz(t)),Fz="https://rpc.walletconnect.org/v1";function s4(t){const e=`Ethereum Signed Message:
${t.length}`,r=new TextEncoder().encode(e+t);return"0x"+Buffer.from(xz(r)).toString("hex")}async function jz(t,e,r,n,i,s){switch(r.t){case"eip191":return await zz(t,e,r.s);case"eip1271":return await qz(t,e,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}function zz(t,e,r){const n=BB(r);return QB({payload:s4(e),signature:n}).toLowerCase()===t.toLowerCase()}async function qz(t,e,r,n,i,s){const o=bs(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const a="0x1626ba7e",l="0000000000000000000000000000000000000000000000000000000000000040",c=r.substring(2),u=(c.length/2).toString(16).padStart(64,"0"),f=(e.startsWith("0x")?e:s4(e)).substring(2),h=a+f+l+u+c,g=await fetch(`${s||Fz}/?chainId=${n}&projectId=${i}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({id:Hz(),jsonrpc:"2.0",method:"eth_call",params:[{to:t,data:h},"latest"]})}),{result:w}=await g.json();return w?w.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function Hz(){return Date.now()+Math.floor(Math.random()*1e3)}function Vz(t){const e=atob(t),r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);const n=r[0];if(n===0)throw new Error("No signatures found");const i=1+n*64;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=Buffer.from(t,"base64").slice(1,65);return vf.encode(s)}function Kz(t){const e=new Uint8Array(Buffer.from(t,"base64")),r=Array.from("TransactionData::").map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);n.set(r),n.set(e,r.length);const i=Lz(n,{dkLen:32});return vf.encode(i)}function rx(t){const e=new Uint8Array(jp(Wz(t)));return vf.encode(e)}function Wz(t){if(t instanceof Uint8Array)return t;if(Array.isArray(t))return new Uint8Array(t);if(typeof t=="object"&&t!=null&&t.data)return new Uint8Array(Object.values(t.data));if(typeof t=="object"&&t)return new Uint8Array(Object.values(t));throw new Error("getNearUint8ArrayFromBytes: Unexpected result type from bytes array")}function nx(t){const e=Buffer.from(t,"base64"),r=$9(e).txn;if(!r)throw new Error("Invalid signed transaction: missing 'txn' field");const n=I9(r),i=Buffer.from("TX"),s=Buffer.concat([i,Buffer.from(n)]),o=Rz(s);return YB.encode(o).replace(/=+$/,"")}function Ng(t){const e=[];let r=BigInt(t);for(;r>=BigInt(128);)e.push(Number(r&BigInt(127)|BigInt(128))),r>>=BigInt(7);return e.push(Number(r)),Buffer.from(e)}function Gz(t){const e=Buffer.from(t.signed.bodyBytes,"base64"),r=Buffer.from(t.signed.authInfoBytes,"base64"),n=Buffer.from(t.signature.signature,"base64"),i=[];i.push(Buffer.from([10])),i.push(Ng(e.length)),i.push(e),i.push(Buffer.from([18])),i.push(Ng(r.length)),i.push(r),i.push(Buffer.from([26])),i.push(Ng(n.length)),i.push(n);const s=Buffer.concat(i),o=jp(s);return Buffer.from(o).toString("hex").toUpperCase()}function Yz(t){var e,r;const n=[];try{if(typeof t=="string")return n.push(t),n;if(typeof t!="object")return n;t!=null&&t.id&&n.push(t.id);const i=(r=(e=t==null?void 0:t.capabilities)==null?void 0:e.caip345)==null?void 0:r.transactionHashes;i&&n.push(...i)}catch(i){console.warn("getWalletSendCallsHashes failed: ",i)}return n}var Qz=Object.defineProperty,Jz=Object.defineProperties,Zz=Object.getOwnPropertyDescriptors,ix=Object.getOwnPropertySymbols,Xz=Object.prototype.hasOwnProperty,eq=Object.prototype.propertyIsEnumerable,sx=(t,e,r)=>e in t?Qz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tq=(t,e)=>{for(var r in e||(e={}))Xz.call(e,r)&&sx(t,r,e[r]);if(ix)for(var r of ix(e))eq.call(e,r)&&sx(t,r,e[r]);return t},rq=(t,e)=>Jz(t,Zz(e));const o4="did:pkh:",nq={eip155:"Ethereum",solana:"Solana",bip122:"Bitcoin"},iq=t=>t?nq[t]||t:"",zp=t=>t==null?void 0:t.split(":"),sq=t=>{const e=t&&zp(t);if(e)return t.includes(o4)?e[3]:e[1]},oq=t=>{const e=t&&zp(t);if(e)return t.includes(o4)?e[2]:e[0]},Ty=t=>{const e=t&&zp(t);if(e)return e[2]+":"+e[3]},Gd=t=>{const e=t&&zp(t);if(e)return e.pop()};async function ox(t){const{cacao:e,projectId:r}=t,{s:n,p:i}=e,s=a4(i,i.iss),o=Gd(i.iss);return await jz(o,s,n,Ty(i.iss),r)}const a4=(t,e)=>{const r=oq(e);if(!r)throw new Error("Invalid issuer: "+e);const n=`${t.domain} wants you to sign in with your ${iq(r)} account:`,i=Gd(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=t.statement||void 0;const o=`URI: ${t.aud||t.uri}`,a=`Version: ${t.version}`,l=`Chain ID: ${sq(e)}`,c=`Nonce: ${t.nonce}`,u=`Issued At: ${t.iat}`,f=t.exp?`Expiration Time: ${t.exp}`:void 0,h=t.nbf?`Not Before: ${t.nbf}`:void 0,g=t.requestId?`Request ID: ${t.requestId}`:void 0,w=t.resources?`Resources:${t.resources.map(O=>`
- ${O}`).join("")}`:void 0,v=Gh(t.resources);if(v){const O=ef(v);s=gq(s,O)}return[n,i,"",s,"",o,a,l,c,u,f,h,g,w].filter(O=>O!=null).join(`
`)};function aq(t){return Buffer.from(JSON.stringify(t)).toString("base64")}function lq(t){return JSON.parse(Buffer.from(t,"base64").toString("utf-8"))}function Ba(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");const e=Object.keys(t.att);if(!(e!=null&&e.length))throw new Error("No resources found in `att` property");e.forEach(r=>{const n=t.att[r];if(Array.isArray(n))throw new Error(`Resource must be an object: ${r}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${r}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${r}`);Object.keys(n).forEach(i=>{const s=n[i];if(!Array.isArray(s))throw new Error(`Ability limits ${i} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${i} is empty array, must be an array with objects`);s.forEach(o=>{if(typeof o!="object")throw new Error(`Ability limits (${i}) must be an array of objects, found: ${o}`)})})})}function cq(t,e,r,n={}){return r==null||r.sort((i,s)=>i.localeCompare(s)),{att:{[t]:uq(e,r,n)}}}function uq(t,e,r={}){e=e==null?void 0:e.sort((i,s)=>i.localeCompare(s));const n=e.map(i=>({[`${t}/${i}`]:[r]}));return Object.assign({},...n)}function l4(t){return Ba(t),`urn:recap:${aq(t).replace(/=/g,"")}`}function ef(t){const e=lq(t.replace("urn:recap:",""));return Ba(e),e}function fq(t,e,r){const n=cq(t,e,r);return l4(n)}function hq(t){return t&&t.includes("urn:recap:")}function dq(t,e){const r=ef(t),n=ef(e),i=pq(r,n);return l4(i)}function pq(t,e){Ba(t),Ba(e);const r=Object.keys(t.att).concat(Object.keys(e.att)).sort((i,s)=>i.localeCompare(s)),n={att:{}};return r.forEach(i=>{var s,o;Object.keys(((s=t.att)==null?void 0:s[i])||{}).concat(Object.keys(((o=e.att)==null?void 0:o[i])||{})).sort((a,l)=>a.localeCompare(l)).forEach(a=>{var l,c;n.att[i]=rq(tq({},n.att[i]),{[a]:((l=t.att[i])==null?void 0:l[a])||((c=e.att[i])==null?void 0:c[a])})})}),n}function gq(t="",e){Ba(e);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;const n=[];let i=0;Object.keys(e.att).forEach(a=>{const l=Object.keys(e.att[a]).map(f=>({ability:f.split("/")[0],action:f.split("/")[1]}));l.sort((f,h)=>f.action.localeCompare(h.action));const c={};l.forEach(f=>{c[f.ability]||(c[f.ability]=[]),c[f.ability].push(f.action)});const u=Object.keys(c).map(f=>(i++,`(${i}) '${f}': '${c[f].join("', '")}' for '${a}'.`));n.push(u.join(", ").replace(".,","."))});const s=n.join(" "),o=`${r}${s}`;return`${t?t+" ":""}${o}`}function ax(t){var e;const r=ef(t);Ba(r);const n=(e=r.att)==null?void 0:e.eip155;return n?Object.keys(n).map(i=>i.split("/")[1]):[]}function lx(t){const e=ef(t);Ba(e);const r=[];return Object.values(e.att).forEach(n=>{Object.values(n).forEach(i=>{var s;(s=i==null?void 0:i[0])!=null&&s.chains&&r.push(i[0].chains)})}),[...new Set(r.flat())]}function Gh(t){if(!t)return;const e=t==null?void 0:t[t.length-1];return hq(e)?e:void 0}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */function c4(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ky(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}function Tg(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Vr(t,...e){if(!c4(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function cx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function mq(t,e){Vr(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function No(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function nc(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function yq(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}const wq=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function vq(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Dy(t){if(typeof t=="string")t=vq(t);else if(c4(t))t=Ry(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function bq(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Eq(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}const xq=(t,e)=>{function r(n,...i){if(Vr(n),!wq)throw new Error("Non little-endian hardware is not yet supported");if(t.nonceLength!==void 0){const c=i[0];if(!c)throw new Error("nonce / iv required");t.varSizeNonce?Vr(c):Vr(c,t.nonceLength)}const s=t.tagLength;s&&i[1]!==void 0&&Vr(i[1]);const o=e(n,...i),a=(c,u)=>{if(u!==void 0){if(c!==2)throw new Error("cipher output not supported");Vr(u)}};let l=!1;return{encrypt(c,u){if(l)throw new Error("cannot encrypt() twice with same key + nonce");return l=!0,Vr(c),a(o.encrypt.length,u),o.encrypt(c,u)},decrypt(c,u){if(Vr(c),s&&c.length<s)throw new Error("invalid ciphertext length: smaller than tagLength="+s);return a(o.decrypt.length,u),o.decrypt(c,u)}}}return Object.assign(r,t),r};function ux(t,e,r=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(r&&!_q(e))throw new Error("invalid output, must be aligned");return e}function fx(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s);t.setUint32(e+4,o,n),t.setUint32(e+0,a,n)}function Aq(t,e,r){ky(r);const n=new Uint8Array(16),i=yq(n);return fx(i,0,BigInt(e),r),fx(i,8,BigInt(t),r),n}function _q(t){return t.byteOffset%4===0}function Ry(t){return Uint8Array.from(t)}const u4=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Sq=u4("expand 16-byte k"),Iq=u4("expand 32-byte k"),Pq=No(Sq),Cq=No(Iq);function _e(t,e){return t<<e|t>>>32-e}function $y(t){return t.byteOffset%4===0}const hh=64,Oq=16,f4=2**32-1,hx=new Uint32Array;function Nq(t,e,r,n,i,s,o,a){const l=i.length,c=new Uint8Array(hh),u=No(c),f=$y(i)&&$y(s),h=f?No(i):hx,g=f?No(s):hx;for(let w=0;w<l;o++){if(t(e,r,n,u,o,a),o>=f4)throw new Error("arx: counter overflow");const v=Math.min(hh,l-w);if(f&&v===hh){const O=w/4;if(w%4!==0)throw new Error("arx: invalid block position");for(let A=0,I;A<Oq;A++)I=O+A,g[I]=h[I]^u[A];w+=hh;continue}for(let O=0,A;O<v;O++)A=w+O,s[A]=i[A]^c[O];w+=v}}function Tq(t,e){const{allowShortKeys:r,extendNonceFn:n,counterLength:i,counterRight:s,rounds:o}=bq({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Tg(i),Tg(o),ky(s),ky(r),(a,l,c,u,f=0)=>{Vr(a),Vr(l),Vr(c);const h=c.length;if(u===void 0&&(u=new Uint8Array(h)),Vr(u),Tg(f),f<0||f>=f4)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const g=[];let w=a.length,v,O;if(w===32)g.push(v=Ry(a)),O=Cq;else if(w===16&&r)v=new Uint8Array(32),v.set(a),v.set(a,16),O=Pq,g.push(v);else throw new Error(`arx: invalid 32-byte key, got length=${w}`);$y(l)||g.push(l=Ry(l));const A=No(v);if(n){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");n(O,A,No(l.subarray(0,16)),A),l=l.subarray(16)}const I=16-i;if(I!==l.length)throw new Error(`arx: nonce must be ${I} or 16 bytes`);if(I!==12){const T=new Uint8Array(12);T.set(l,s?0:12-l.length),l=T,g.push(l)}const _=No(l);return Nq(t,O,A,_,c,u,f,o),nc(...g),u}}const nr=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class kq{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=Dy(e),Vr(e,32);const r=nr(e,0),n=nr(e,2),i=nr(e,4),s=nr(e,6),o=nr(e,8),a=nr(e,10),l=nr(e,12),c=nr(e,14);this.r[0]=r&8191,this.r[1]=(r>>>13|n<<3)&8191,this.r[2]=(n>>>10|i<<6)&7939,this.r[3]=(i>>>7|s<<9)&8191,this.r[4]=(s>>>4|o<<12)&255,this.r[5]=o>>>1&8190,this.r[6]=(o>>>14|a<<2)&8191,this.r[7]=(a>>>11|l<<5)&8065,this.r[8]=(l>>>8|c<<8)&8191,this.r[9]=c>>>5&127;for(let u=0;u<8;u++)this.pad[u]=nr(e,16+2*u)}process(e,r,n=!1){const i=n?0:2048,{h:s,r:o}=this,a=o[0],l=o[1],c=o[2],u=o[3],f=o[4],h=o[5],g=o[6],w=o[7],v=o[8],O=o[9],A=nr(e,r+0),I=nr(e,r+2),_=nr(e,r+4),T=nr(e,r+6),D=nr(e,r+8),R=nr(e,r+10),$=nr(e,r+12),M=nr(e,r+14);let B=s[0]+(A&8191),z=s[1]+((A>>>13|I<<3)&8191),K=s[2]+((I>>>10|_<<6)&8191),L=s[3]+((_>>>7|T<<9)&8191),P=s[4]+((T>>>4|D<<12)&8191),p=s[5]+(D>>>1&8191),d=s[6]+((D>>>14|R<<2)&8191),m=s[7]+((R>>>11|$<<5)&8191),b=s[8]+(($>>>8|M<<8)&8191),E=s[9]+(M>>>5|i),S=0,N=S+B*a+z*(5*O)+K*(5*v)+L*(5*w)+P*(5*g);S=N>>>13,N&=8191,N+=p*(5*h)+d*(5*f)+m*(5*u)+b*(5*c)+E*(5*l),S+=N>>>13,N&=8191;let C=S+B*l+z*a+K*(5*O)+L*(5*v)+P*(5*w);S=C>>>13,C&=8191,C+=p*(5*g)+d*(5*h)+m*(5*f)+b*(5*u)+E*(5*c),S+=C>>>13,C&=8191;let y=S+B*c+z*l+K*a+L*(5*O)+P*(5*v);S=y>>>13,y&=8191,y+=p*(5*w)+d*(5*g)+m*(5*h)+b*(5*f)+E*(5*u),S+=y>>>13,y&=8191;let k=S+B*u+z*c+K*l+L*a+P*(5*O);S=k>>>13,k&=8191,k+=p*(5*v)+d*(5*w)+m*(5*g)+b*(5*h)+E*(5*f),S+=k>>>13,k&=8191;let q=S+B*f+z*u+K*c+L*l+P*a;S=q>>>13,q&=8191,q+=p*(5*O)+d*(5*v)+m*(5*w)+b*(5*g)+E*(5*h),S+=q>>>13,q&=8191;let x=S+B*h+z*f+K*u+L*c+P*l;S=x>>>13,x&=8191,x+=p*a+d*(5*O)+m*(5*v)+b*(5*w)+E*(5*g),S+=x>>>13,x&=8191;let U=S+B*g+z*h+K*f+L*u+P*c;S=U>>>13,U&=8191,U+=p*l+d*a+m*(5*O)+b*(5*v)+E*(5*w),S+=U>>>13,U&=8191;let F=S+B*w+z*g+K*h+L*f+P*u;S=F>>>13,F&=8191,F+=p*c+d*l+m*a+b*(5*O)+E*(5*v),S+=F>>>13,F&=8191;let H=S+B*v+z*w+K*g+L*h+P*f;S=H>>>13,H&=8191,H+=p*u+d*c+m*l+b*a+E*(5*O),S+=H>>>13,H&=8191;let V=S+B*O+z*v+K*w+L*g+P*h;S=V>>>13,V&=8191,V+=p*f+d*u+m*c+b*l+E*a,S+=V>>>13,V&=8191,S=(S<<2)+S|0,S=S+N|0,N=S&8191,S=S>>>13,C+=S,s[0]=N,s[1]=C,s[2]=y,s[3]=k,s[4]=q,s[5]=x,s[6]=U,s[7]=F,s[8]=H,s[9]=V}finalize(){const{h:e,pad:r}=this,n=new Uint16Array(10);let i=e[1]>>>13;e[1]&=8191;for(let a=2;a<10;a++)e[a]+=i,i=e[a]>>>13,e[a]&=8191;e[0]+=i*5,i=e[0]>>>13,e[0]&=8191,e[1]+=i,i=e[1]>>>13,e[1]&=8191,e[2]+=i,n[0]=e[0]+5,i=n[0]>>>13,n[0]&=8191;for(let a=1;a<10;a++)n[a]=e[a]+i,i=n[a]>>>13,n[a]&=8191;n[9]-=8192;let s=(i^1)-1;for(let a=0;a<10;a++)n[a]&=s;s=~s;for(let a=0;a<10;a++)e[a]=e[a]&s|n[a];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let o=e[0]+r[0];e[0]=o&65535;for(let a=1;a<8;a++)o=(e[a]+r[a]|0)+(o>>>16)|0,e[a]=o&65535;nc(n)}update(e){cx(this),e=Dy(e),Vr(e);const{buffer:r,blockLen:n}=this,i=e.length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o===n){for(;n<=i-s;s+=n)this.process(e,s);continue}r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(r,0,!1),this.pos=0)}return this}destroy(){nc(this.h,this.r,this.buffer,this.pad)}digestInto(e){cx(this),mq(e,this),this.finished=!0;const{buffer:r,h:n}=this;let{pos:i}=this;if(i){for(r[i++]=1;i<16;i++)r[i]=0;this.process(r,0,!0)}this.finalize();let s=0;for(let o=0;o<8;o++)e[s++]=n[o]>>>0,e[s++]=n[o]>>>8;return e}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}}function Dq(t){const e=(n,i)=>t(i).update(Dy(n)).digest(),r=t(new Uint8Array(32));return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Rq=Dq(t=>new kq(t));function $q(t,e,r,n,i,s=20){let o=t[0],a=t[1],l=t[2],c=t[3],u=e[0],f=e[1],h=e[2],g=e[3],w=e[4],v=e[5],O=e[6],A=e[7],I=i,_=r[0],T=r[1],D=r[2],R=o,$=a,M=l,B=c,z=u,K=f,L=h,P=g,p=w,d=v,m=O,b=A,E=I,S=_,N=T,C=D;for(let k=0;k<s;k+=2)R=R+z|0,E=_e(E^R,16),p=p+E|0,z=_e(z^p,12),R=R+z|0,E=_e(E^R,8),p=p+E|0,z=_e(z^p,7),$=$+K|0,S=_e(S^$,16),d=d+S|0,K=_e(K^d,12),$=$+K|0,S=_e(S^$,8),d=d+S|0,K=_e(K^d,7),M=M+L|0,N=_e(N^M,16),m=m+N|0,L=_e(L^m,12),M=M+L|0,N=_e(N^M,8),m=m+N|0,L=_e(L^m,7),B=B+P|0,C=_e(C^B,16),b=b+C|0,P=_e(P^b,12),B=B+P|0,C=_e(C^B,8),b=b+C|0,P=_e(P^b,7),R=R+K|0,C=_e(C^R,16),m=m+C|0,K=_e(K^m,12),R=R+K|0,C=_e(C^R,8),m=m+C|0,K=_e(K^m,7),$=$+L|0,E=_e(E^$,16),b=b+E|0,L=_e(L^b,12),$=$+L|0,E=_e(E^$,8),b=b+E|0,L=_e(L^b,7),M=M+P|0,S=_e(S^M,16),p=p+S|0,P=_e(P^p,12),M=M+P|0,S=_e(S^M,8),p=p+S|0,P=_e(P^p,7),B=B+z|0,N=_e(N^B,16),d=d+N|0,z=_e(z^d,12),B=B+z|0,N=_e(N^B,8),d=d+N|0,z=_e(z^d,7);let y=0;n[y++]=o+R|0,n[y++]=a+$|0,n[y++]=l+M|0,n[y++]=c+B|0,n[y++]=u+z|0,n[y++]=f+K|0,n[y++]=h+L|0,n[y++]=g+P|0,n[y++]=w+p|0,n[y++]=v+d|0,n[y++]=O+m|0,n[y++]=A+b|0,n[y++]=I+E|0,n[y++]=_+S|0,n[y++]=T+N|0,n[y++]=D+C|0}const Mq=Tq($q,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Bq=new Uint8Array(16),dx=(t,e)=>{t.update(e);const r=e.length%16;r&&t.update(Bq.subarray(r))},Uq=new Uint8Array(32);function px(t,e,r,n,i){const s=t(e,r,Uq),o=Rq.create(s);i&&dx(o,i),dx(o,n);const a=Aq(n.length,i?i.length:0,!0);o.update(a);const l=o.digest();return nc(s,a),l}const Lq=t=>(e,r,n)=>({encrypt(i,s){const o=i.length;s=ux(o+16,s,!1),s.set(i);const a=s.subarray(0,-16);t(e,r,a,a,1);const l=px(t,e,r,a,n);return s.set(l,o),nc(l),s},decrypt(i,s){s=ux(i.length-16,s,!1);const o=i.subarray(0,-16),a=i.subarray(-16),l=px(t,e,r,o,n);if(!Eq(a,l))throw new Error("invalid tag");return s.set(i.subarray(0,-16)),t(e,r,s,s,1),nc(l),s}}),h4=xq({blockSize:64,nonceLength:12,tagLength:16},Lq(Mq));let d4=class extends Fp{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,Lp(e);const n=fi(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Hn(s)}update(e){return $o(this),this.iHash.update(e),this}digestInto(e){$o(this),pi(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const qp=(t,e,r)=>new d4(t,e).update(r).digest();qp.create=(t,e)=>new d4(t,e);function Fq(t,e,r){return Lp(t),r===void 0&&(r=new Uint8Array(t.outputLen)),qp(t,fi(r),fi(e))}const kg=Uint8Array.from([0]),gx=Uint8Array.of();function jq(t,e,r,n=32){Lp(t),Ts(n);const i=t.outputLen;if(n>255*i)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(n/i);r===void 0&&(r=gx);const o=new Uint8Array(s*i),a=qp.create(t,e),l=a._cloneInto(),c=new Uint8Array(a.outputLen);for(let u=0;u<s;u++)kg[0]=u+1,l.update(u===0?gx:c).update(r).update(kg).digestInto(c),o.set(c,i*u),a._cloneInto(l);return a.destroy(),l.destroy(),Hn(c,kg),o.slice(0,n)}const zq=(t,e,r,n,i)=>jq(t,Fq(t,e,r),n,i),Hp=jp,Jv=BigInt(0),My=BigInt(1);function Yd(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function va(t,e,r=""){const n=Up(t),i=t==null?void 0:t.length,s=e!==void 0;if(!n||s&&i!==e){const o=r&&`"${r}" `,a=s?` of length ${e}`:"",l=n?`length=${i}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function dh(t){const e=t.toString(16);return e.length&1?"0"+e:e}function p4(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Jv:BigInt("0x"+t)}function Vp(t){return p4(Fl(t))}function Qd(t){return pi(t),p4(Fl(Uint8Array.from(t).reverse()))}function Zv(t,e){return Wd(t.toString(16).padStart(e*2,"0"))}function Xv(t,e){return Zv(t,e).reverse()}function Sr(t,e,r){let n;if(typeof e=="string")try{n=Wd(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Up(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const i=n.length;if(typeof r=="number"&&i!==r)throw new Error(t+" of length "+r+" expected, got "+i);return n}const Dg=t=>typeof t=="bigint"&&Jv<=t;function qq(t,e,r){return Dg(t)&&Dg(e)&&Dg(r)&&e<=t&&t<r}function By(t,e,r,n){if(!qq(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function g4(t){let e;for(e=0;t>Jv;t>>=My,e+=1);return e}const _f=t=>(My<<BigInt(t))-My;function Hq(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=h=>new Uint8Array(h),i=h=>Uint8Array.of(h);let s=n(t),o=n(t),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},c=(...h)=>r(o,s,...h),u=(h=n(0))=>{o=c(i(0),h),s=c(),h.length!==0&&(o=c(i(1),h),s=c())},f=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const g=[];for(;h<e;){s=c();const w=s.slice();g.push(w),h+=s.length}return po(...g)};return(h,g)=>{l(),u(h);let w;for(;!(w=g(f()));)u();return l(),w}}function Kp(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(i,s,o){const a=t[i];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${i}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([i,s])=>n(i,s,!1)),Object.entries(r).forEach(([i,s])=>n(i,s,!0))}function mx(t){const e=new WeakMap;return(r,...n)=>{const i=e.get(r);if(i!==void 0)return i;const s=t(r,...n);return e.set(r,s),s}}const Jr=BigInt(0),$r=BigInt(1),ba=BigInt(2),m4=BigInt(3),y4=BigInt(4),w4=BigInt(5),Vq=BigInt(7),v4=BigInt(8),Kq=BigInt(9),b4=BigInt(16);function hn(t,e){const r=t%e;return r>=Jr?r:e+r}function ei(t,e,r){let n=t;for(;e-- >Jr;)n*=n,n%=r;return n}function yx(t,e){if(t===Jr)throw new Error("invert: expected non-zero number");if(e<=Jr)throw new Error("invert: expected positive modulus, got "+e);let r=hn(t,e),n=e,i=Jr,s=$r;for(;r!==Jr;){const o=n/r,a=n%r,l=i-s*o;n=r,r=a,i=s,s=l}if(n!==$r)throw new Error("invert: does not exist");return hn(i,e)}function e1(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function E4(t,e){const r=(t.ORDER+$r)/y4,n=t.pow(e,r);return e1(t,n,e),n}function Wq(t,e){const r=(t.ORDER-w4)/v4,n=t.mul(e,ba),i=t.pow(n,r),s=t.mul(e,i),o=t.mul(t.mul(s,ba),i),a=t.mul(s,t.sub(o,t.ONE));return e1(t,a,e),a}function Gq(t){const e=zo(t),r=x4(t),n=r(e,e.neg(e.ONE)),i=r(e,n),s=r(e,e.neg(n)),o=(t+Vq)/b4;return(a,l)=>{let c=a.pow(l,o),u=a.mul(c,n);const f=a.mul(c,i),h=a.mul(c,s),g=a.eql(a.sqr(u),l),w=a.eql(a.sqr(f),l);c=a.cmov(c,u,g),u=a.cmov(h,f,w);const v=a.eql(a.sqr(u),l),O=a.cmov(c,u,v);return e1(a,O,l),O}}function x4(t){if(t<m4)throw new Error("sqrt is not defined for small field");let e=t-$r,r=0;for(;e%ba===Jr;)e/=ba,r++;let n=ba;const i=zo(t);for(;wx(i,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return E4;let s=i.pow(n,e);const o=(e+$r)/ba;return function(a,l){if(a.is0(l))return l;if(wx(a,l)!==1)throw new Error("Cannot find square root");let c=r,u=a.mul(a.ONE,s),f=a.pow(l,e),h=a.pow(l,o);for(;!a.eql(f,a.ONE);){if(a.is0(f))return a.ZERO;let g=1,w=a.sqr(f);for(;!a.eql(w,a.ONE);)if(g++,w=a.sqr(w),g===c)throw new Error("Cannot find square root");const v=$r<<BigInt(c-g-1),O=a.pow(u,v);c=g,u=a.sqr(O),f=a.mul(f,u),h=a.mul(h,O)}return h}}function Yq(t){return t%y4===m4?E4:t%v4===w4?Wq:t%b4===Kq?Gq(t):x4(t)}const Qq=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Jq(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=Qq.reduce((n,i)=>(n[i]="function",n),e);return Kp(t,r),t}function Zq(t,e,r){if(r<Jr)throw new Error("invalid exponent, negatives unsupported");if(r===Jr)return t.ONE;if(r===$r)return e;let n=t.ONE,i=e;for(;r>Jr;)r&$r&&(n=t.mul(n,i)),i=t.sqr(i),r>>=$r;return n}function A4(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce((o,a,l)=>t.is0(a)?o:(n[l]=o,t.mul(o,a)),t.ONE),s=t.inv(i);return e.reduceRight((o,a,l)=>t.is0(a)?o:(n[l]=t.mul(o,n[l]),t.mul(o,a)),s),n}function wx(t,e){const r=(t.ORDER-$r)/ba,n=t.pow(e,r),i=t.eql(n,t.ONE),s=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!i&&!s&&!o)throw new Error("invalid Legendre symbol result");return i?1:s?0:-1}function _4(t,e){e!==void 0&&Ts(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function zo(t,e,r=!1,n={}){if(t<=Jr)throw new Error("invalid field: expected ORDER > 0, got "+t);let i,s,o=!1,a;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const h=e;h.BITS&&(i=h.BITS),h.sqrt&&(s=h.sqrt),typeof h.isLE=="boolean"&&(r=h.isLE),typeof h.modFromBytes=="boolean"&&(o=h.modFromBytes),a=h.allowedLengths}else typeof e=="number"&&(i=e),n.sqrt&&(s=n.sqrt);const{nBitLength:l,nByteLength:c}=_4(t,i);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const f=Object.freeze({ORDER:t,isLE:r,BITS:l,BYTES:c,MASK:_f(l),ZERO:Jr,ONE:$r,allowedLengths:a,create:h=>hn(h,t),isValid:h=>{if(typeof h!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof h);return Jr<=h&&h<t},is0:h=>h===Jr,isValidNot0:h=>!f.is0(h)&&f.isValid(h),isOdd:h=>(h&$r)===$r,neg:h=>hn(-h,t),eql:(h,g)=>h===g,sqr:h=>hn(h*h,t),add:(h,g)=>hn(h+g,t),sub:(h,g)=>hn(h-g,t),mul:(h,g)=>hn(h*g,t),pow:(h,g)=>Zq(f,h,g),div:(h,g)=>hn(h*yx(g,t),t),sqrN:h=>h*h,addN:(h,g)=>h+g,subN:(h,g)=>h-g,mulN:(h,g)=>h*g,inv:h=>yx(h,t),sqrt:s||(h=>(u||(u=Yq(t)),u(f,h))),toBytes:h=>r?Xv(h,c):Zv(h,c),fromBytes:(h,g=!0)=>{if(a){if(!a.includes(h.length)||h.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+h.length);const v=new Uint8Array(c);v.set(h,r?0:v.length-h.length),h=v}if(h.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+h.length);let w=r?Qd(h):Vp(h);if(o&&(w=hn(w,t)),!g&&!f.isValid(w))throw new Error("invalid field element: outside of range 0..ORDER");return w},invertBatch:h=>A4(f,h),cmov:(h,g,w)=>w?g:h});return Object.freeze(f)}function S4(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function I4(t){const e=S4(t);return e+Math.ceil(e/2)}function Xq(t,e,r=!1){const n=t.length,i=S4(e),s=I4(e);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=r?Qd(t):Vp(t),a=hn(o,e-$r)+$r;return r?Xv(a,i):Zv(a,i)}const ic=BigInt(0),Ea=BigInt(1);function Jd(t,e){const r=e.negate();return t?r:e}function Rg(t,e){const r=A4(t.Fp,e.map(n=>n.Z));return e.map((n,i)=>t.fromAffine(n.toAffine(r[i])))}function P4(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function $g(t,e){P4(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),i=2**t,s=_f(t),o=BigInt(t);return{windows:r,windowSize:n,mask:s,maxNumber:i,shiftBy:o}}function vx(t,e,r){const{windowSize:n,mask:i,maxNumber:s,shiftBy:o}=r;let a=Number(t&i),l=t>>o;a>n&&(a-=s,l+=Ea);const c=e*n,u=c+Math.abs(a)-1,f=a===0,h=a<0,g=e%2!==0;return{nextN:l,offset:u,isZero:f,isNeg:h,isNegF:g,offsetF:c}}function eH(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function tH(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Mg=new WeakMap,C4=new WeakMap;function Bg(t){return C4.get(t)||1}function bx(t){if(t!==ic)throw new Error("invalid wNAF")}class rH{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let i=e;for(;r>ic;)r&Ea&&(n=n.add(i)),i=i.double(),r>>=Ea;return n}precomputeWindow(e,r){const{windows:n,windowSize:i}=$g(r,this.bits),s=[];let o=e,a=o;for(let l=0;l<n;l++){a=o,s.push(a);for(let c=1;c<i;c++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let i=this.ZERO,s=this.BASE;const o=$g(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:u,isNeg:f,isNegF:h,offsetF:g}=vx(n,a,o);n=l,u?s=s.add(Jd(h,r[g])):i=i.add(Jd(f,r[c]))}return bx(n),{p:i,f:s}}wNAFUnsafe(e,r,n,i=this.ZERO){const s=$g(e,this.bits);for(let o=0;o<s.windows&&n!==ic;o++){const{nextN:a,offset:l,isZero:c,isNeg:u}=vx(n,o,s);if(n=a,!c){const f=r[l];i=i.add(u?f.negate():f)}}return bx(n),i}getPrecomputes(e,r,n){let i=Mg.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(i=n(i)),Mg.set(r,i))),i}cached(e,r,n){const i=Bg(e);return this.wNAF(i,this.getPrecomputes(i,e,n),r)}unsafe(e,r,n,i){const s=Bg(e);return s===1?this._unsafeLadder(e,r,i):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),r,i)}createCache(e,r){P4(r,this.bits),C4.set(e,r),Mg.delete(e)}hasCache(e){return Bg(e)!==1}}function nH(t,e,r,n){let i=e,s=t.ZERO,o=t.ZERO;for(;r>ic||n>ic;)r&Ea&&(s=s.add(i)),n&Ea&&(o=o.add(i)),i=i.double(),r>>=Ea,n>>=Ea;return{p1:s,p2:o}}function iH(t,e,r,n){eH(r,t),tH(n,e);const i=r.length,s=n.length;if(i!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=g4(BigInt(i));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=_f(l),u=new Array(Number(c)+1).fill(o),f=Math.floor((e.BITS-1)/l)*l;let h=o;for(let g=f;g>=0;g-=l){u.fill(o);for(let v=0;v<s;v++){const O=n[v],A=Number(O>>BigInt(g)&c);u[A]=u[A].add(r[v])}let w=o;for(let v=u.length-1,O=o;v>0;v--)O=O.add(u[v]),w=w.add(O);if(h=h.add(w),g!==0)for(let v=0;v<l;v++)h=h.double()}return h}function Ex(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Jq(e),e}else return zo(t,{isLE:r})}function sH(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const a of["p","n","h"]){const l=e[a];if(!(typeof l=="bigint"&&l>ic))throw new Error(`CURVE.${a} must be positive bigint`)}const i=Ex(e.p,r.Fp,n),s=Ex(e.n,r.Fn,n),o=["Gx","Gy","a","b"];for(const a of o)if(!i.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:i,Fn:s}}BigInt(0),BigInt(1),BigInt(2),BigInt(8),J8("HashToScalar-");const jc=BigInt(0),rl=BigInt(1),ph=BigInt(2);function oH(t){return Kp(t,{adjustScalarBytes:"function",powPminus2:"function"}),Object.freeze({...t})}function aH(t){const e=oH(t),{P:r,type:n,adjustScalarBytes:i,powPminus2:s,randomBytes:o}=e,a=n==="x25519";if(!a&&n!=="x448")throw new Error("invalid type");const l=o||Va,c=a?255:448,u=a?32:56,f=BigInt(a?9:5),h=BigInt(a?121665:39081),g=a?ph**BigInt(254):ph**BigInt(447),w=a?BigInt(8)*ph**BigInt(251)-rl:BigInt(4)*ph**BigInt(445)-rl,v=g+w+rl,O=L=>hn(L,r),A=I(f);function I(L){return Xv(O(L),u)}function _(L){const P=Sr("u coordinate",L,u);return a&&(P[31]&=127),O(Qd(P))}function T(L){return Qd(i(Sr("scalar",L,u)))}function D(L,P){const p=M(_(P),T(L));if(p===jc)throw new Error("invalid private or public key received");return I(p)}function R(L){return D(L,A)}function $(L,P,p){const d=O(L*(P-p));return P=O(P-d),p=O(p+d),{x_2:P,x_3:p}}function M(L,P){By("u",L,jc,r),By("scalar",P,g,v);const p=P,d=L;let m=rl,b=jc,E=L,S=rl,N=jc;for(let y=BigInt(c-1);y>=jc;y--){const k=p>>y&rl;N^=k,{x_2:m,x_3:E}=$(N,m,E),{x_2:b,x_3:S}=$(N,b,S),N=k;const q=m+b,x=O(q*q),U=m-b,F=O(U*U),H=x-F,V=E+S,Z=E-S,X=O(Z*q),J=O(V*U),de=X+J,ie=X-J;E=O(de*de),S=O(d*O(ie*ie)),m=O(x*F),b=O(H*(x+O(h*H)))}({x_2:m,x_3:E}=$(N,m,E)),{x_2:b,x_3:S}=$(N,b,S);const C=s(b);return O(m*C)}const B={secretKey:u,publicKey:u,seed:u},z=(L=l(u))=>(pi(L,B.seed),L);function K(L){const P=z(L);return{secretKey:P,publicKey:R(P)}}return{keygen:K,getSharedSecret:(L,P)=>D(L,P),getPublicKey:L=>R(L),scalarMult:D,scalarMultBase:R,utils:{randomSecretKey:z,randomPrivateKey:z},GuBytes:A.slice(),lengths:B}}const lH=BigInt(1),xx=BigInt(2),cH=BigInt(3),uH=BigInt(5);BigInt(8);const O4=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),fH={p:O4,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function hH(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=O4,o=t*t%s*t%s,a=ei(o,xx,s)*o%s,l=ei(a,lH,s)*t%s,c=ei(l,uH,s)*l%s,u=ei(c,e,s)*c%s,f=ei(u,r,s)*u%s,h=ei(f,n,s)*f%s,g=ei(h,i,s)*h%s,w=ei(g,i,s)*h%s,v=ei(w,e,s)*c%s;return{pow_p_5_8:ei(v,xx,s)*t%s,b2:o}}function dH(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const pH=zo(fH.p,{isLE:!0}),Uy=(()=>{const t=pH.ORDER;return aH({P:t,type:"x25519",powPminus2:e=>{const{pow_p_5_8:r,b2:n}=hH(e);return hn(ei(r,cH,t)*n,t)},adjustScalarBytes:dH})})(),Ax=(t,e)=>(t+(t>=0?e:-e)/N4)/e;function gH(t,e,r){const[[n,i],[s,o]]=e,a=Ax(o*t,r),l=Ax(-i*t,r);let c=t-a*n-l*s,u=-a*i-l*o;const f=c<ws,h=u<ws;f&&(c=-c),h&&(u=-u);const g=_f(Math.ceil(g4(r)/2))+jl;if(c<ws||c>=g||u<ws||u>=g)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:f,k1:c,k2neg:h,k2:u}}function Ly(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Ug(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Yd(r.lowS,"lowS"),Yd(r.prehash,"prehash"),r.format!==void 0&&Ly(r.format),r}class mH extends Error{constructor(e=""){super(e)}}const hs={Err:mH,_tlv:{encode:(t,e)=>{const{Err:r}=hs;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,i=dh(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?dh(i.length/2|128):"";return dh(t)+s+i+e},decode(t,e){const{Err:r}=hs;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const i=e[n++],s=!!(i&128);let o=0;if(!s)o=i;else{const l=i&127;if(!l)throw new r("tlv.decode(long): indefinite length not supported");if(l>4)throw new r("tlv.decode(long): byte length is too big");const c=e.subarray(n,n+l);if(c.length!==l)throw new r("tlv.decode: length bytes not complete");if(c[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(n+=l,o<128)throw new r("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new r("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=hs;if(t<ws)throw new e("integer: negative integers are not allowed");let r=dh(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=hs;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return Vp(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=hs,i=Sr("signature",t),{v:s,l:o}=n.decode(48,i);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=n.decode(2,s),{v:c,l:u}=n.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(c)}},hexFromSig(t){const{_tlv:e,_int:r}=hs,n=e.encode(2,r.encode(t.r)),i=e.encode(2,r.encode(t.s)),s=n+i;return e.encode(48,s)}},ws=BigInt(0),jl=BigInt(1),N4=BigInt(2),gh=BigInt(3),yH=BigInt(4);function _l(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let i=Sr("private key",e);try{n=t.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function wH(t,e={}){const r=sH("weierstrass",t,e),{Fp:n,Fn:i}=r;let s=r.CURVE;const{h:o,n:a}=s;Kp(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!n.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=k4(n,i);function u(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function f(L,P,p){const{x:d,y:m}=P.toAffine(),b=n.toBytes(d);if(Yd(p,"isCompressed"),p){u();const E=!n.isOdd(m);return po(T4(E),b)}else return po(Uint8Array.of(4),b,n.toBytes(m))}function h(L){va(L,void 0,"Point");const{publicKey:P,publicKeyUncompressed:p}=c,d=L.length,m=L[0],b=L.subarray(1);if(d===P&&(m===2||m===3)){const E=n.fromBytes(b);if(!n.isValid(E))throw new Error("bad point: is not on curve, wrong x");const S=v(E);let N;try{N=n.sqrt(S)}catch(y){const k=y instanceof Error?": "+y.message:"";throw new Error("bad point: is not on curve, sqrt error"+k)}u();const C=n.isOdd(N);return(m&1)===1!==C&&(N=n.neg(N)),{x:E,y:N}}else if(d===p&&m===4){const E=n.BYTES,S=n.fromBytes(b.subarray(0,E)),N=n.fromBytes(b.subarray(E,E*2));if(!O(S,N))throw new Error("bad point: is not on curve");return{x:S,y:N}}else throw new Error(`bad point: got length ${d}, expected compressed=${P} or uncompressed=${p}`)}const g=e.toBytes||f,w=e.fromBytes||h;function v(L){const P=n.sqr(L),p=n.mul(P,L);return n.add(n.add(p,n.mul(L,s.a)),s.b)}function O(L,P){const p=n.sqr(P),d=v(L);return n.eql(p,d)}if(!O(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const A=n.mul(n.pow(s.a,gh),yH),I=n.mul(n.sqr(s.b),BigInt(27));if(n.is0(n.add(A,I)))throw new Error("bad curve params: a or b");function _(L,P,p=!1){if(!n.isValid(P)||p&&n.is0(P))throw new Error(`bad point coordinate ${L}`);return P}function T(L){if(!(L instanceof B))throw new Error("ProjectivePoint expected")}function D(L){if(!l||!l.basises)throw new Error("no endo");return gH(L,l.basises,i.ORDER)}const R=mx((L,P)=>{const{X:p,Y:d,Z:m}=L;if(n.eql(m,n.ONE))return{x:p,y:d};const b=L.is0();P==null&&(P=b?n.ONE:n.inv(m));const E=n.mul(p,P),S=n.mul(d,P),N=n.mul(m,P);if(b)return{x:n.ZERO,y:n.ZERO};if(!n.eql(N,n.ONE))throw new Error("invZ was invalid");return{x:E,y:S}}),$=mx(L=>{if(L.is0()){if(e.allowInfinityPoint&&!n.is0(L.Y))return;throw new Error("bad point: ZERO")}const{x:P,y:p}=L.toAffine();if(!n.isValid(P)||!n.isValid(p))throw new Error("bad point: x or y not field elements");if(!O(P,p))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function M(L,P,p,d,m){return p=new B(n.mul(p.X,L),p.Y,p.Z),P=Jd(d,P),p=Jd(m,p),P.add(p)}class B{constructor(P,p,d){this.X=_("x",P),this.Y=_("y",p,!0),this.Z=_("z",d),Object.freeze(this)}static CURVE(){return s}static fromAffine(P){const{x:p,y:d}=P||{};if(!P||!n.isValid(p)||!n.isValid(d))throw new Error("invalid affine point");if(P instanceof B)throw new Error("projective point not allowed");return n.is0(p)&&n.is0(d)?B.ZERO:new B(p,d,n.ONE)}static fromBytes(P){const p=B.fromAffine(w(va(P,void 0,"point")));return p.assertValidity(),p}static fromHex(P){return B.fromBytes(Sr("pointHex",P))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(P=8,p=!0){return K.createCache(this,P),p||this.multiply(gh),this}assertValidity(){$(this)}hasEvenY(){const{y:P}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(P)}equals(P){T(P);const{X:p,Y:d,Z:m}=this,{X:b,Y:E,Z:S}=P,N=n.eql(n.mul(p,S),n.mul(b,m)),C=n.eql(n.mul(d,S),n.mul(E,m));return N&&C}negate(){return new B(this.X,n.neg(this.Y),this.Z)}double(){const{a:P,b:p}=s,d=n.mul(p,gh),{X:m,Y:b,Z:E}=this;let S=n.ZERO,N=n.ZERO,C=n.ZERO,y=n.mul(m,m),k=n.mul(b,b),q=n.mul(E,E),x=n.mul(m,b);return x=n.add(x,x),C=n.mul(m,E),C=n.add(C,C),S=n.mul(P,C),N=n.mul(d,q),N=n.add(S,N),S=n.sub(k,N),N=n.add(k,N),N=n.mul(S,N),S=n.mul(x,S),C=n.mul(d,C),q=n.mul(P,q),x=n.sub(y,q),x=n.mul(P,x),x=n.add(x,C),C=n.add(y,y),y=n.add(C,y),y=n.add(y,q),y=n.mul(y,x),N=n.add(N,y),q=n.mul(b,E),q=n.add(q,q),y=n.mul(q,x),S=n.sub(S,y),C=n.mul(q,k),C=n.add(C,C),C=n.add(C,C),new B(S,N,C)}add(P){T(P);const{X:p,Y:d,Z:m}=this,{X:b,Y:E,Z:S}=P;let N=n.ZERO,C=n.ZERO,y=n.ZERO;const k=s.a,q=n.mul(s.b,gh);let x=n.mul(p,b),U=n.mul(d,E),F=n.mul(m,S),H=n.add(p,d),V=n.add(b,E);H=n.mul(H,V),V=n.add(x,U),H=n.sub(H,V),V=n.add(p,m);let Z=n.add(b,S);return V=n.mul(V,Z),Z=n.add(x,F),V=n.sub(V,Z),Z=n.add(d,m),N=n.add(E,S),Z=n.mul(Z,N),N=n.add(U,F),Z=n.sub(Z,N),y=n.mul(k,V),N=n.mul(q,F),y=n.add(N,y),N=n.sub(U,y),y=n.add(U,y),C=n.mul(N,y),U=n.add(x,x),U=n.add(U,x),F=n.mul(k,F),V=n.mul(q,V),U=n.add(U,F),F=n.sub(x,F),F=n.mul(k,F),V=n.add(V,F),x=n.mul(U,V),C=n.add(C,x),x=n.mul(Z,V),N=n.mul(H,N),N=n.sub(N,x),x=n.mul(H,U),y=n.mul(Z,y),y=n.add(y,x),new B(N,C,y)}subtract(P){return this.add(P.negate())}is0(){return this.equals(B.ZERO)}multiply(P){const{endo:p}=e;if(!i.isValidNot0(P))throw new Error("invalid scalar: out of range");let d,m;const b=E=>K.cached(this,E,S=>Rg(B,S));if(p){const{k1neg:E,k1:S,k2neg:N,k2:C}=D(P),{p:y,f:k}=b(S),{p:q,f:x}=b(C);m=k.add(x),d=M(p.beta,y,q,E,N)}else{const{p:E,f:S}=b(P);d=E,m=S}return Rg(B,[d,m])[0]}multiplyUnsafe(P){const{endo:p}=e,d=this;if(!i.isValid(P))throw new Error("invalid scalar: out of range");if(P===ws||d.is0())return B.ZERO;if(P===jl)return d;if(K.hasCache(this))return this.multiply(P);if(p){const{k1neg:m,k1:b,k2neg:E,k2:S}=D(P),{p1:N,p2:C}=nH(B,d,b,S);return M(p.beta,N,C,m,E)}else return K.unsafe(d,P)}multiplyAndAddUnsafe(P,p,d){const m=this.multiplyUnsafe(p).add(P.multiplyUnsafe(d));return m.is0()?void 0:m}toAffine(P){return R(this,P)}isTorsionFree(){const{isTorsionFree:P}=e;return o===jl?!0:P?P(B,this):K.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:P}=e;return o===jl?this:P?P(B,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(P=!0){return Yd(P,"isCompressed"),this.assertValidity(),g(B,this,P)}toHex(P=!0){return Fl(this.toBytes(P))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(P=!0){return this.toBytes(P)}_setWindowSize(P){this.precompute(P)}static normalizeZ(P){return Rg(B,P)}static msm(P,p){return iH(B,i,P,p)}static fromPrivateKey(P){return B.BASE.multiply(_l(i,P))}}B.BASE=new B(s.Gx,s.Gy,n.ONE),B.ZERO=new B(n.ZERO,n.ONE,n.ZERO),B.Fp=n,B.Fn=i;const z=i.BITS,K=new rH(B,e.endo?Math.ceil(z/2):z);return B.BASE.precompute(8),B}function T4(t){return Uint8Array.of(t?2:3)}function k4(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function vH(t,e={}){const{Fn:r}=t,n=e.randomBytes||Va,i=Object.assign(k4(t.Fp,r),{seed:I4(r.ORDER)});function s(h){try{return!!_l(r,h)}catch{return!1}}function o(h,g){const{publicKey:w,publicKeyUncompressed:v}=i;try{const O=h.length;return g===!0&&O!==w||g===!1&&O!==v?!1:!!t.fromBytes(h)}catch{return!1}}function a(h=n(i.seed)){return Xq(va(h,i.seed,"seed"),r.ORDER)}function l(h,g=!0){return t.BASE.multiply(_l(r,h)).toBytes(g)}function c(h){const g=a(h);return{secretKey:g,publicKey:l(g)}}function u(h){if(typeof h=="bigint")return!1;if(h instanceof t)return!0;const{secretKey:g,publicKey:w,publicKeyUncompressed:v}=i;if(r.allowedLengths||g===w)return;const O=Sr("key",h).length;return O===w||O===v}function f(h,g,w=!0){if(u(h)===!0)throw new Error("first arg must be private key");if(u(g)===!1)throw new Error("second arg must be public key");const v=_l(r,h);return t.fromHex(g).multiply(v).toBytes(w)}return Object.freeze({getPublicKey:l,getSharedSecret:f,keygen:c,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:h=>_l(r,h),precompute(h=8,g=t.BASE){return g.precompute(h,!1)}},lengths:i})}function bH(t,e,r={}){Lp(e),Kp(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||Va,i=r.hmac||((p,...d)=>qp(e,p,po(...d))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:u,getSharedSecret:f,utils:h,lengths:g}=vH(t,r),w={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},v="compact";function O(p){const d=a>>jl;return p>d}function A(p,d){if(!o.isValidNot0(d))throw new Error(`invalid signature ${p}: out of range 1..Point.Fn.ORDER`);return d}function I(p,d){Ly(d);const m=g.signature,b=d==="compact"?m:d==="recovered"?m+1:void 0;return va(p,b,`${d} signature`)}class _{constructor(d,m,b){this.r=A("r",d),this.s=A("s",m),b!=null&&(this.recovery=b),Object.freeze(this)}static fromBytes(d,m=v){I(d,m);let b;if(m==="der"){const{r:C,s:y}=hs.toSig(va(d));return new _(C,y)}m==="recovered"&&(b=d[0],m="compact",d=d.subarray(1));const E=o.BYTES,S=d.subarray(0,E),N=d.subarray(E,E*2);return new _(o.fromBytes(S),o.fromBytes(N),b)}static fromHex(d,m){return this.fromBytes(Wd(d),m)}addRecoveryBit(d){return new _(this.r,this.s,d)}recoverPublicKey(d){const m=s.ORDER,{r:b,s:E,recovery:S}=this;if(S==null||![0,1,2,3].includes(S))throw new Error("recovery id invalid");if(a*N4<m&&S>1)throw new Error("recovery id is ambiguous for h>1 curve");const N=S===2||S===3?b+a:b;if(!s.isValid(N))throw new Error("recovery id 2 or 3 invalid");const C=s.toBytes(N),y=t.fromBytes(po(T4((S&1)===0),C)),k=o.inv(N),q=D(Sr("msgHash",d)),x=o.create(-q*k),U=o.create(E*k),F=t.BASE.multiplyUnsafe(x).add(y.multiplyUnsafe(U));if(F.is0())throw new Error("point at infinify");return F.assertValidity(),F}hasHighS(){return O(this.s)}toBytes(d=v){if(Ly(d),d==="der")return Wd(hs.hexFromSig(this));const m=o.toBytes(this.r),b=o.toBytes(this.s);if(d==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return po(Uint8Array.of(this.recovery),m,b)}return po(m,b)}toHex(d){return Fl(this.toBytes(d))}assertValidity(){}static fromCompact(d){return _.fromBytes(Sr("sig",d),"compact")}static fromDER(d){return _.fromBytes(Sr("sig",d),"der")}normalizeS(){return this.hasHighS()?new _(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Fl(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Fl(this.toBytes("compact"))}}const T=r.bits2int||function(p){if(p.length>8192)throw new Error("input is too large");const d=Vp(p),m=p.length*8-l;return m>0?d>>BigInt(m):d},D=r.bits2int_modN||function(p){return o.create(T(p))},R=_f(l);function $(p){return By("num < 2^"+l,p,ws,R),o.toBytes(p)}function M(p,d){return va(p,void 0,"message"),d?va(e(p),void 0,"prehashed message"):p}function B(p,d,m){if(["recovered","canonical"].some(U=>U in m))throw new Error("sign() legacy options not supported");const{lowS:b,prehash:E,extraEntropy:S}=Ug(m,w);p=M(p,E);const N=D(p),C=_l(o,d),y=[$(C),$(N)];if(S!=null&&S!==!1){const U=S===!0?n(g.secretKey):S;y.push(Sr("extraEntropy",U))}const k=po(...y),q=N;function x(U){const F=T(U);if(!o.isValidNot0(F))return;const H=o.inv(F),V=t.BASE.multiply(F).toAffine(),Z=o.create(V.x);if(Z===ws)return;const X=o.create(H*o.create(q+Z*C));if(X===ws)return;let J=(V.x===Z?0:2)|Number(V.y&jl),de=X;return b&&O(X)&&(de=o.neg(X),J^=1),new _(Z,de,J)}return{seed:k,k2sig:x}}function z(p,d,m={}){p=Sr("message",p);const{seed:b,k2sig:E}=B(p,d,m);return Hq(e.outputLen,o.BYTES,i)(b,E)}function K(p){let d;const m=typeof p=="string"||Up(p),b=!m&&p!==null&&typeof p=="object"&&typeof p.r=="bigint"&&typeof p.s=="bigint";if(!m&&!b)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(b)d=new _(p.r,p.s);else if(m){try{d=_.fromBytes(Sr("sig",p),"der")}catch(E){if(!(E instanceof hs.Err))throw E}if(!d)try{d=_.fromBytes(Sr("sig",p),"compact")}catch{return!1}}return d||!1}function L(p,d,m,b={}){const{lowS:E,prehash:S,format:N}=Ug(b,w);if(m=Sr("publicKey",m),d=M(Sr("message",d),S),"strict"in b)throw new Error("options.strict was renamed to lowS");const C=N===void 0?K(p):_.fromBytes(Sr("sig",p),N);if(C===!1)return!1;try{const y=t.fromBytes(m);if(E&&C.hasHighS())return!1;const{r:k,s:q}=C,x=D(d),U=o.inv(q),F=o.create(x*U),H=o.create(k*U),V=t.BASE.multiplyUnsafe(F).add(y.multiplyUnsafe(H));return V.is0()?!1:o.create(V.x)===k}catch{return!1}}function P(p,d,m={}){const{prehash:b}=Ug(m,w);return d=M(d,b),_.fromBytes(p,"recovered").recoverPublicKey(d).toBytes()}return Object.freeze({keygen:c,getPublicKey:u,getSharedSecret:f,utils:h,lengths:g,Point:t,sign:z,verify:L,recoverPublicKey:P,Signature:_,hash:e})}function EH(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const i=zo(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),s={Fp:r,Fn:i,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function xH(t){const{CURVE:e,curveOpts:r}=EH(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function AH(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,_4(r.Fn.ORDER,r.Fn.BITS))})}function _H(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:i}=xH(t),s=wH(e,r),o=bH(s,n,i);return AH(t,o)}function Fy(t,e){const r=n=>_H({...t,hash:n});return{...r(e),create:r}}const D4={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},R4={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},$4={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},SH=zo(D4.p),IH=zo(R4.p),PH=zo($4.p),CH=Fy({...D4,Fp:SH,lowS:!1},jp);Fy({...R4,Fp:IH,lowS:!1},Dz),Fy({...$4,Fp:PH,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},kz);const OH=CH,M4="base10",Mr="base16",Kr="base64pad",go="base64url",Sf="utf8",B4=0,Es=1,If=2,NH=0,_x=1,wu=12,t1=32;function TH(){const t=Uy.utils.randomPrivateKey(),e=Uy.getPublicKey(t);return{privateKey:tn(t,Mr),publicKey:tn(e,Mr)}}function jy(){const t=Va(t1);return tn(t,Mr)}function kH(t,e){const r=Uy.getSharedSecret(Un(t,Mr),Un(e,Mr)),n=zq(Hp,r,void 0,void 0,t1);return tn(n,Mr)}function Yh(t){const e=Hp(Un(t,Mr));return tn(e,Mr)}function kn(t){const e=Hp(Un(t,Sf));return tn(e,Mr)}function U4(t){return Un(`${t}`,M4)}function Ua(t){return Number(tn(t,M4))}function L4(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function F4(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4;return e+"=".repeat(r)}function DH(t){const e=U4(typeof t.type<"u"?t.type:B4);if(Ua(e)===Es&&typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof t.senderPublicKey<"u"?Un(t.senderPublicKey,Mr):void 0,n=typeof t.iv<"u"?Un(t.iv,Mr):Va(wu),i=Un(t.symKey,Mr),s=h4(i,n).encrypt(Un(t.message,Sf)),o=j4({type:e,sealed:s,iv:n,senderPublicKey:r});return t.encoding===go?L4(o):o}function RH(t){const e=Un(t.symKey,Mr),{sealed:r,iv:n}=tf({encoded:t.encoded,encoding:t.encoding}),i=h4(e,n).decrypt(r);if(i===null)throw new Error("Failed to decrypt");return tn(i,Sf)}function $H(t,e){const r=U4(If),n=Va(wu),i=Un(t,Sf),s=j4({type:r,sealed:i,iv:n});return e===go?L4(s):s}function MH(t,e){const{sealed:r}=tf({encoded:t,encoding:e});return tn(r,Sf)}function j4(t){if(Ua(t.type)===If)return tn(yu([t.type,t.sealed]),Kr);if(Ua(t.type)===Es){if(typeof t.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return tn(yu([t.type,t.senderPublicKey,t.iv,t.sealed]),Kr)}return tn(yu([t.type,t.iv,t.sealed]),Kr)}function tf(t){const e=(t.encoding||Kr)===go?F4(t.encoded):t.encoded,r=Un(e,Kr),n=r.slice(NH,_x),i=_x;if(Ua(n)===Es){const l=i+t1,c=l+wu,u=r.slice(i,l),f=r.slice(l,c),h=r.slice(c);return{type:n,sealed:h,iv:f,senderPublicKey:u}}if(Ua(n)===If){const l=r.slice(i),c=Va(wu);return{type:n,sealed:l,iv:c}}const s=i+wu,o=r.slice(i,s),a=r.slice(s);return{type:n,sealed:a,iv:o}}function BH(t,e){const r=tf({encoded:t,encoding:e==null?void 0:e.encoding});return z4({type:Ua(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?tn(r.senderPublicKey,Mr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function z4(t){const e=(t==null?void 0:t.type)||B4;if(e===Es){if(typeof(t==null?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(t==null?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:t==null?void 0:t.senderPublicKey,receiverPublicKey:t==null?void 0:t.receiverPublicKey}}function Sx(t){return t.type===Es&&typeof t.senderPublicKey=="string"&&typeof t.receiverPublicKey=="string"}function Ix(t){return t.type===If}function UH(t){const e=Buffer.from(t.x,"base64"),r=Buffer.from(t.y,"base64");return yu([new Uint8Array([4]),e,r])}function LH(t,e){const[r,n,i]=t.split("."),s=Buffer.from(F4(i),"base64");if(s.length!==64)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),l=`${r}.${n}`,c=Hp(l),u=UH(e);if(!OH.verify(yu([o,a]),c,u))throw new Error("Invalid signature");return Sy(t).payload}const FH="irn";function Zd(t){return(t==null?void 0:t.relay)||{protocol:FH}}function Sl(t){const e=_F[t];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${t}`);return e}var jH=Object.defineProperty,zH=Object.defineProperties,qH=Object.getOwnPropertyDescriptors,Px=Object.getOwnPropertySymbols,HH=Object.prototype.hasOwnProperty,VH=Object.prototype.propertyIsEnumerable,Cx=(t,e,r)=>e in t?jH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Lg=(t,e)=>{for(var r in e||(e={}))HH.call(e,r)&&Cx(t,r,e[r]);if(Px)for(var r of Px(e))VH.call(e,r)&&Cx(t,r,e[r]);return t},KH=(t,e)=>zH(t,qH(e));function WH(t,e="-"){const r={},n="relay"+e;return Object.keys(t).forEach(i=>{if(i.startsWith(n)){const s=i.replace(n,""),o=t[i];r[s]=o}}),r}function Ox(t){if(!t.includes("wc:")){const c=V8(t);c!=null&&c.includes("wc:")&&(t=c)}t=t.includes("wc://")?t.replace("wc://",""):t,t=t.includes("wc:")?t.replace("wc:",""):t;const e=t.indexOf(":"),r=t.indexOf("?")!==-1?t.indexOf("?"):void 0,n=t.substring(0,e),i=t.substring(e+1,r).split("@"),s=typeof r<"u"?t.substring(r):"",o=new URLSearchParams(s),a=Object.fromEntries(o.entries()),l=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:GH(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:WH(a),methods:l,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function GH(t){return t.startsWith("//")?t.substring(2):t}function YH(t,e="-"){const r="relay",n={};return Object.keys(t).forEach(i=>{const s=i,o=r+e+s;t[s]&&(n[o]=t[s])}),n}function Nx(t){const e=new URLSearchParams,r=Lg(Lg(KH(Lg({},YH(t.relay)),{symKey:t.symKey}),t.expiryTimestamp&&{expiryTimestamp:t.expiryTimestamp.toString()}),t.methods&&{methods:t.methods.join(",")});return Object.entries(r).sort(([n],[i])=>n.localeCompare(i)).forEach(([n,i])=>{i!==void 0&&e.append(n,String(i))}),`${t.protocol}:${t.topic}@${t.version}?${e}`}function mh(t,e,r){return`${t}?wc_ev=${r}&topic=${e}`}var QH=Object.defineProperty,JH=Object.defineProperties,ZH=Object.getOwnPropertyDescriptors,Tx=Object.getOwnPropertySymbols,XH=Object.prototype.hasOwnProperty,eV=Object.prototype.propertyIsEnumerable,kx=(t,e,r)=>e in t?QH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tV=(t,e)=>{for(var r in e||(e={}))XH.call(e,r)&&kx(t,r,e[r]);if(Tx)for(var r of Tx(e))eV.call(e,r)&&kx(t,r,e[r]);return t},rV=(t,e)=>JH(t,ZH(e));function wc(t){const e=[];return t.forEach(r=>{const[n,i]=r.split(":");e.push(`${n}:${i}`)}),e}function q4(t){const e=[];return Object.values(t).forEach(r=>{e.push(...wc(r.accounts))}),[...new Set(e)]}function nV(t){const e=[];return Object.values(t).forEach(r=>{e.push(...r.methods)}),[...new Set(e)]}function iV(t){const e=[];return Object.values(t).forEach(r=>{e.push(...r.events)}),[...new Set(e)]}function sV(t,e){const r=[];return Object.values(t).forEach(n=>{wc(n.accounts).includes(e)&&r.push(...n.methods)}),r}function oV(t,e){const r=[];return Object.values(t).forEach(n=>{wc(n.accounts).includes(e)&&r.push(...n.events)}),r}function Wp(t){return t.includes(":")}function Il(t){return Wp(t)?t.split(":")[0]:t}function Dx(t){var e,r,n;const i={};if(!zi(t))return i;for(const[s,o]of Object.entries(t)){const a=Wp(s)?[s]:o.chains,l=o.methods||[],c=o.events||[],u=Il(s);i[u]=rV(tV({},i[u]),{chains:ji(a,(e=i[u])==null?void 0:e.chains),methods:ji(l,(r=i[u])==null?void 0:r.methods),events:ji(c,(n=i[u])==null?void 0:n.events)})}return i}function aV(t){const e={};return t==null||t.forEach(r=>{var n;const[i,s]=r.split(":");e[i]||(e[i]={accounts:[],chains:[],events:[],methods:[]}),e[i].accounts.push(r),(n=e[i].chains)==null||n.push(`${i}:${s}`)}),e}function Rx(t,e){e=e.map(n=>n.replace("did:pkh:",""));const r=aV(e);for(const[n,i]of Object.entries(r))i.methods?i.methods=ji(i.methods,t):i.methods=t,i.events=["chainChanged","accountsChanged"];return r}function lV(t,e){var r,n,i,s,o,a;const l=Dx(t),c=Dx(e),u={},f=Object.keys(l).concat(Object.keys(c));for(const h of f)u[h]={chains:ji((r=l[h])==null?void 0:r.chains,(n=c[h])==null?void 0:n.chains),methods:ji((i=l[h])==null?void 0:i.methods,(s=c[h])==null?void 0:s.methods),events:ji((o=l[h])==null?void 0:o.events,(a=c[h])==null?void 0:a.events)};return u}const cV={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},uV={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ne(t,e){const{message:r,code:n}=uV[t];return{message:e?`${r} ${e}`:r,code:n}}function yt(t,e){const{message:r,code:n}=cV[t];return{message:e?`${r} ${e}`:r,code:n}}function Fn(t,e){return!!Array.isArray(t)}function zi(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function Zt(t){return typeof t>"u"}function Bt(t,e){return e&&Zt(t)?!0:typeof t=="string"&&!!t.trim().length}function r1(t,e){return typeof t=="number"&&!isNaN(t)}function fV(t,e){const{requiredNamespaces:r}=e,n=Object.keys(t.namespaces),i=Object.keys(r);let s=!0;return wa(i,n)?(n.forEach(o=>{const{accounts:a,methods:l,events:c}=t.namespaces[o],u=wc(a),f=r[o];(!wa(F8(o,f),u)||!wa(f.methods,l)||!wa(f.events,c))&&(s=!1)}),s):!1}function Xd(t){return Bt(t,!1)&&t.includes(":")?t.split(":").length===2:!1}function hV(t){if(Bt(t,!1)&&t.includes(":")){const e=t.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Xd(r)}}return!1}function dV(t){function e(r){try{return typeof new URL(r)<"u"}catch{return!1}}try{if(Bt(t,!1)){if(e(t))return!0;const r=V8(t);return e(r)}}catch{}return!1}function pV(t){var e;return(e=t==null?void 0:t.proposer)==null?void 0:e.publicKey}function gV(t){return t==null?void 0:t.topic}function mV(t,e){let r=null;return Bt(t==null?void 0:t.publicKey,!1)||(r=ne("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function $x(t){let e=!0;return Fn(t)?t.length&&(e=t.every(r=>Bt(r,!1))):e=!1,e}function yV(t,e,r){let n=null;return Fn(e)&&e.length?e.forEach(i=>{n||Xd(i)||(n=yt("UNSUPPORTED_CHAINS",`${r}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):Xd(t)||(n=yt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function wV(t,e,r){let n=null;return Object.entries(t).forEach(([i,s])=>{if(n)return;const o=yV(i,F8(i,s),`${e} ${r}`);o&&(n=o)}),n}function vV(t,e){let r=null;return Fn(t)?t.forEach(n=>{r||hV(n)||(r=yt("UNSUPPORTED_ACCOUNTS",`${e}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):r=yt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function bV(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=vV(n==null?void 0:n.accounts,`${e} namespace`);i&&(r=i)}),r}function EV(t,e){let r=null;return $x(t==null?void 0:t.methods)?$x(t==null?void 0:t.events)||(r=yt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=yt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function H4(t,e){let r=null;return Object.values(t).forEach(n=>{if(r)return;const i=EV(n,`${e}, namespace`);i&&(r=i)}),r}function xV(t,e,r){let n=null;if(t&&zi(t)){const i=H4(t,e);i&&(n=i);const s=wV(t,e,r);s&&(n=s)}else n=ne("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return n}function Fg(t,e){let r=null;if(t&&zi(t)){const n=H4(t,e);n&&(r=n);const i=bV(t,e);i&&(r=i)}else r=ne("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function V4(t){return Bt(t.protocol,!0)}function AV(t,e){let r=!1;return t?t&&Fn(t)&&t.length&&t.forEach(n=>{r=V4(n)}):r=!0,r}function _V(t){return typeof t=="number"}function qr(t){return typeof t<"u"&&typeof t!==null}function SV(t){return!(!t||typeof t!="object"||!t.code||!r1(t.code)||!t.message||!Bt(t.message,!1))}function IV(t){return!(Zt(t)||!Bt(t.method,!1))}function PV(t){return!(Zt(t)||Zt(t.result)&&Zt(t.error)||!r1(t.id)||!Bt(t.jsonrpc,!1))}function CV(t){return!(Zt(t)||!Bt(t.name,!1))}function Mx(t,e){return!(!Xd(e)||!q4(t).includes(e))}function OV(t,e,r){return Bt(r,!1)?sV(t,e).includes(r):!1}function NV(t,e,r){return Bt(r,!1)?oV(t,e).includes(r):!1}function Bx(t,e,r){let n=null;const i=TV(t),s=kV(e),o=Object.keys(i),a=Object.keys(s),l=Ux(Object.keys(t)),c=Ux(Object.keys(e)),u=l.filter(f=>!c.includes(f));return u.length&&(n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(e).toString()}`)),wa(o,a)||(n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(e).forEach(f=>{if(!f.includes(":")||n)return;const h=wc(e[f].accounts);h.includes(f)||(n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${f}
        Required: ${f}
        Approved: ${h.toString()}`))}),o.forEach(f=>{n||(wa(i[f].methods,s[f].methods)?wa(i[f].events,s[f].events)||(n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${f}`)):n=ne("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${f}`))}),n}function TV(t){const e={};return Object.keys(t).forEach(r=>{var n;r.includes(":")?e[r]=t[r]:(n=t[r].chains)==null||n.forEach(i=>{e[i]={methods:t[r].methods,events:t[r].events}})}),e}function Ux(t){return[...new Set(t.map(e=>e.includes(":")?e.split(":")[0]:e))]}function kV(t){const e={};return Object.keys(t).forEach(r=>{if(r.includes(":"))e[r]=t[r];else{const n=wc(t[r].accounts);n==null||n.forEach(i=>{e[i]={accounts:t[r].accounts.filter(s=>s.includes(`${i}:`)),methods:t[r].methods,events:t[r].events}})}}),e}function DV(t,e){return r1(t)&&t<=e.max&&t>=e.min}function Lx(){const t=xf();return new Promise(e=>{switch(t){case yn.browser:e(RV());break;case yn.reactNative:e($V());break;case yn.node:e(MV());break;default:e(!0)}})}function RV(){return yc()&&(navigator==null?void 0:navigator.onLine)}async function $V(){if(jo()&&typeof global<"u"&&global!=null&&global.NetInfo){const t=await(global==null?void 0:global.NetInfo.fetch());return t==null?void 0:t.isConnected}return!0}function MV(){return!0}function BV(t){switch(xf()){case yn.browser:UV(t);break;case yn.reactNative:LV(t);break}}function UV(t){!jo()&&yc()&&(window.addEventListener("online",()=>t(!0)),window.addEventListener("offline",()=>t(!1)))}function LV(t){jo()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(e=>t(e==null?void 0:e.isConnected)))}function FV(){var t;return yc()&&Ra()?((t=Ra())==null?void 0:t.visibilityState)==="visible":!0}const jg={};class zc{static get(e){return jg[e]}static set(e,r){jg[e]=r}static delete(e){delete jg[e]}}function jV(t){const e=vf.decode(t);if(e.length<33)throw new Error("Too short to contain a public key");return e.slice(1,33)}function zV({publicKey:t,signature:e,payload:r}){var n;const i=zy(r.method),s=128|parseInt(((n=r.version)==null?void 0:n.toString())||"4"),o=VV(r.address),a=r.era==="00"?new Uint8Array([0]):zy(r.era);if(a.length!==1&&a.length!==2)throw new Error("Invalid era length");const l=parseInt(r.nonce,16),c=new Uint8Array([l&255,l>>8&255]),u=BigInt(`0x${HV(r.tip)}`),f=WV(u),h=new Uint8Array([0,...t,o,...e,...a,...c,...f,...i]),g=KV(h.length+1);return new Uint8Array([...g,s,...h])}function qV(t){const e=zy(t),r=MF.blake2b(e,void 0,32);return"0x"+Buffer.from(r).toString("hex")}function zy(t){return new Uint8Array(t.replace(/^0x/,"").match(/.{1,2}/g).map(e=>parseInt(e,16)))}function HV(t){return t.startsWith("0x")?t.slice(2):t}function VV(t){const e=vf.decode(t)[0];return e===42?0:e===60?2:1}function KV(t){if(t<64)return new Uint8Array([t<<2]);if(t<16384){const e=t<<2|1;return new Uint8Array([e&255,e>>8&255])}else if(t<1<<30){const e=t<<2|2;return new Uint8Array([e&255,e>>8&255,e>>16&255,e>>24&255])}else throw new Error("Compact encoding > 2^30 not supported")}function WV(t){if(t<BigInt(1)<<BigInt(6))return new Uint8Array([Number(t<<BigInt(2))]);if(t<BigInt(1)<<BigInt(14)){const e=t<<BigInt(2)|BigInt(1);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255))])}else if(t<BigInt(1)<<BigInt(30)){const e=t<<BigInt(2)|BigInt(2);return new Uint8Array([Number(e&BigInt(255)),Number(e>>BigInt(8)&BigInt(255)),Number(e>>BigInt(16)&BigInt(255)),Number(e>>BigInt(24)&BigInt(255))])}else throw new Error("BigInt compact encoding not supported > 2^30")}function GV(t){const e=Uint8Array.from(Buffer.from(t.signature,"hex")),r=jV(t.transaction.address),n=zV({publicKey:r,signature:e,payload:t.transaction}),i=Buffer.from(n).toString("hex");return qV(i)}function n1({logger:t,name:e}){const r=typeof t=="string"?L8({opts:{level:t,name:e}}).logger:t;return r.level=typeof t=="string"?t:t.level,r}class Ka{}let YV=class extends Ka{constructor(e){super()}};const Fx=te.FIVE_SECONDS,Wa={pulse:"heartbeat_pulse"};let QV=class K4 extends YV{constructor(e){super(e),this.events=new An.EventEmitter,this.interval=Fx,this.interval=(e==null?void 0:e.interval)||Fx}static async init(e){const r=new K4(e);return await r.init(),r}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),te.toMiliseconds(this.interval))}pulse(){this.events.emit(Wa.pulse)}};const JV=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,ZV=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,XV=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function eK(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){tK(t);return}return e}function tK(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function yh(t,e={}){if(typeof t!="string")return t;if(t[0]==='"'&&t[t.length-1]==='"'&&t.indexOf("\\")===-1)return t.slice(1,-1);const r=t.trim();if(r.length<=9)switch(r.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!XV.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(JV.test(t)||ZV.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,eK)}return JSON.parse(t)}catch(n){if(e.strict)throw n;return t}}function rK(t){return!t||typeof t.then!="function"?Promise.resolve(t):t}function Gt(t,...e){try{return rK(t(...e))}catch(r){return Promise.reject(r)}}function nK(t){const e=typeof t;return t===null||e!=="object"&&e!=="function"}function iK(t){const e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}function Qh(t){if(nK(t))return String(t);if(iK(t)||Array.isArray(t))return JSON.stringify(t);if(typeof t.toJSON=="function")return Qh(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const qy="base64:";function sK(t){return typeof t=="string"?t:qy+lK(t)}function oK(t){return typeof t!="string"||!t.startsWith(qy)?t:aK(t.slice(qy.length))}function aK(t){return globalThis.Buffer?Buffer.from(t,"base64"):Uint8Array.from(globalThis.atob(t),e=>e.codePointAt(0))}function lK(t){return globalThis.Buffer?Buffer.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t))}function zr(t){var e;return t&&((e=t.split("?")[0])==null?void 0:e.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""))||""}function cK(...t){return zr(t.join(":"))}function wh(t){return t=zr(t),t?t+":":""}function uK(t,e){if(e===void 0)return!0;let r=0,n=t.indexOf(":");for(;n>-1;)r++,n=t.indexOf(":",n+1);return r<=e}function fK(t,e){return e?t.startsWith(e)&&t[t.length-1]!=="$":t[t.length-1]!=="$"}const hK="memory",dK=()=>{const t=new Map;return{name:hK,getInstance:()=>t,hasItem(e){return t.has(e)},getItem(e){return t.get(e)??null},getItemRaw(e){return t.get(e)??null},setItem(e,r){t.set(e,r)},setItemRaw(e,r){t.set(e,r)},removeItem(e){t.delete(e)},getKeys(){return[...t.keys()]},clear(){t.clear()},dispose(){t.clear()}}};function pK(t={}){const e={mounts:{"":t.driver||dK()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=c=>{for(const u of e.mountpoints)if(c.startsWith(u))return{base:u,relativeKey:c.slice(u.length),driver:e.mounts[u]};return{base:"",relativeKey:c,driver:e.mounts[""]}},n=(c,u)=>e.mountpoints.filter(f=>f.startsWith(c)||u&&c.startsWith(f)).map(f=>({relativeBase:c.length>f.length?c.slice(f.length):void 0,mountpoint:f,driver:e.mounts[f]})),i=(c,u)=>{if(e.watching){u=zr(u);for(const f of e.watchListeners)f(c,u)}},s=async()=>{if(!e.watching){e.watching=!0;for(const c in e.mounts)e.unwatch[c]=await jx(e.mounts[c],i,c)}},o=async()=>{if(e.watching){for(const c in e.unwatch)await e.unwatch[c]();e.unwatch={},e.watching=!1}},a=(c,u,f)=>{const h=new Map,g=w=>{let v=h.get(w.base);return v||(v={driver:w.driver,base:w.base,items:[]},h.set(w.base,v)),v};for(const w of c){const v=typeof w=="string",O=zr(v?w:w.key),A=v?void 0:w.value,I=v||!w.options?u:{...u,...w.options},_=r(O);g(_).items.push({key:O,value:A,relativeKey:_.relativeKey,options:I})}return Promise.all([...h.values()].map(w=>f(w))).then(w=>w.flat())},l={hasItem(c,u={}){c=zr(c);const{relativeKey:f,driver:h}=r(c);return Gt(h.hasItem,f,u)},getItem(c,u={}){c=zr(c);const{relativeKey:f,driver:h}=r(c);return Gt(h.getItem,f,u).then(g=>yh(g))},getItems(c,u={}){return a(c,u,f=>f.driver.getItems?Gt(f.driver.getItems,f.items.map(h=>({key:h.relativeKey,options:h.options})),u).then(h=>h.map(g=>({key:cK(f.base,g.key),value:yh(g.value)}))):Promise.all(f.items.map(h=>Gt(f.driver.getItem,h.relativeKey,h.options).then(g=>({key:h.key,value:yh(g)})))))},getItemRaw(c,u={}){c=zr(c);const{relativeKey:f,driver:h}=r(c);return h.getItemRaw?Gt(h.getItemRaw,f,u):Gt(h.getItem,f,u).then(g=>oK(g))},async setItem(c,u,f={}){if(u===void 0)return l.removeItem(c);c=zr(c);const{relativeKey:h,driver:g}=r(c);g.setItem&&(await Gt(g.setItem,h,Qh(u),f),g.watch||i("update",c))},async setItems(c,u){await a(c,u,async f=>{if(f.driver.setItems)return Gt(f.driver.setItems,f.items.map(h=>({key:h.relativeKey,value:Qh(h.value),options:h.options})),u);f.driver.setItem&&await Promise.all(f.items.map(h=>Gt(f.driver.setItem,h.relativeKey,Qh(h.value),h.options)))})},async setItemRaw(c,u,f={}){if(u===void 0)return l.removeItem(c,f);c=zr(c);const{relativeKey:h,driver:g}=r(c);if(g.setItemRaw)await Gt(g.setItemRaw,h,u,f);else if(g.setItem)await Gt(g.setItem,h,sK(u),f);else return;g.watch||i("update",c)},async removeItem(c,u={}){typeof u=="boolean"&&(u={removeMeta:u}),c=zr(c);const{relativeKey:f,driver:h}=r(c);h.removeItem&&(await Gt(h.removeItem,f,u),(u.removeMeta||u.removeMata)&&await Gt(h.removeItem,f+"$",u),h.watch||i("remove",c))},async getMeta(c,u={}){typeof u=="boolean"&&(u={nativeOnly:u}),c=zr(c);const{relativeKey:f,driver:h}=r(c),g=Object.create(null);if(h.getMeta&&Object.assign(g,await Gt(h.getMeta,f,u)),!u.nativeOnly){const w=await Gt(h.getItem,f+"$",u).then(v=>yh(v));w&&typeof w=="object"&&(typeof w.atime=="string"&&(w.atime=new Date(w.atime)),typeof w.mtime=="string"&&(w.mtime=new Date(w.mtime)),Object.assign(g,w))}return g},setMeta(c,u,f={}){return this.setItem(c+"$",u,f)},removeMeta(c,u={}){return this.removeItem(c+"$",u)},async getKeys(c,u={}){var O;c=wh(c);const f=n(c,!0);let h=[];const g=[];let w=!0;for(const A of f){(O=A.driver.flags)!=null&&O.maxDepth||(w=!1);const I=await Gt(A.driver.getKeys,A.relativeBase,u);for(const _ of I){const T=A.mountpoint+zr(_);h.some(D=>T.startsWith(D))||g.push(T)}h=[A.mountpoint,...h.filter(_=>!_.startsWith(A.mountpoint))]}const v=u.maxDepth!==void 0&&!w;return g.filter(A=>(!v||uK(A,u.maxDepth))&&fK(A,c))},async clear(c,u={}){c=wh(c),await Promise.all(n(c,!1).map(async f=>{if(f.driver.clear)return Gt(f.driver.clear,f.relativeBase,u);if(f.driver.removeItem){const h=await f.driver.getKeys(f.relativeBase||"",u);return Promise.all(h.map(g=>f.driver.removeItem(g,u)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(c=>zx(c)))},async watch(c){return await s(),e.watchListeners.push(c),async()=>{e.watchListeners=e.watchListeners.filter(u=>u!==c),e.watchListeners.length===0&&await o()}},async unwatch(){e.watchListeners=[],await o()},mount(c,u){if(c=wh(c),c&&e.mounts[c])throw new Error(`already mounted at ${c}`);return c&&(e.mountpoints.push(c),e.mountpoints.sort((f,h)=>h.length-f.length)),e.mounts[c]=u,e.watching&&Promise.resolve(jx(u,i,c)).then(f=>{e.unwatch[c]=f}).catch(console.error),l},async unmount(c,u=!0){var f,h;c=wh(c),!(!c||!e.mounts[c])&&(e.watching&&c in e.unwatch&&((h=(f=e.unwatch)[c])==null||h.call(f),delete e.unwatch[c]),u&&await zx(e.mounts[c]),e.mountpoints=e.mountpoints.filter(g=>g!==c),delete e.mounts[c])},getMount(c=""){c=zr(c)+":";const u=r(c);return{driver:u.driver,base:u.base}},getMounts(c="",u={}){return c=zr(c),n(c,u.parents).map(h=>({driver:h.driver,base:h.mountpoint}))},keys:(c,u={})=>l.getKeys(c,u),get:(c,u={})=>l.getItem(c,u),set:(c,u,f={})=>l.setItem(c,u,f),has:(c,u={})=>l.hasItem(c,u),del:(c,u={})=>l.removeItem(c,u),remove:(c,u={})=>l.removeItem(c,u)};return l}function jx(t,e,r){return t.watch?t.watch((n,i)=>e(n,r+i)):()=>{}}async function zx(t){typeof t.dispose=="function"&&await Gt(t.dispose)}function Ga(t){return new Promise((e,r)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>r(t.error)})}function W4(t,e){let r;const n=()=>{if(r)return r;const i=indexedDB.open(t);return i.onupgradeneeded=()=>i.result.createObjectStore(e),r=Ga(i),r.then(s=>{s.onclose=()=>r=void 0},()=>{}),r};return(i,s)=>n().then(o=>s(o.transaction(e,i).objectStore(e)))}let zg;function Pf(){return zg||(zg=W4("keyval-store","keyval")),zg}function qx(t,e=Pf()){return e("readonly",r=>Ga(r.get(t)))}function gK(t,e,r=Pf()){return r("readwrite",n=>(n.put(e,t),Ga(n.transaction)))}function mK(t,e=Pf()){return e("readwrite",r=>(r.delete(t),Ga(r.transaction)))}function yK(t=Pf()){return t("readwrite",e=>(e.clear(),Ga(e.transaction)))}function wK(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Ga(t.transaction)}function vK(t=Pf()){return t("readonly",e=>{if(e.getAllKeys)return Ga(e.getAllKeys());const r=[];return wK(e,n=>r.push(n.key)).then(()=>r)})}const bK="idb-keyval";var EK=(t={})=>{const e=t.base&&t.base.length>0?`${t.base}:`:"",r=i=>e+i;let n;return t.dbName&&t.storeName&&(n=W4(t.dbName,t.storeName)),{name:bK,options:t,async hasItem(i){return!(typeof await qx(r(i),n)>"u")},async getItem(i){return await qx(r(i),n)??null},setItem(i,s){return gK(r(i),s,n)},removeItem(i){return mK(r(i),n)},getKeys(){return vK(n)},clear(){return yK(n)}}};const xK="WALLET_CONNECT_V2_INDEXED_DB",AK="keyvaluestorage";let _K=class{constructor(){this.indexedDb=pK({driver:EK({dbName:xK,storeName:AK})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Os(r))}async removeItem(e){await this.indexedDb.removeItem(e)}};var qg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Jh={exports:{}};(function(){let t;function e(){}t=e,t.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},t.prototype.setItem=function(r,n){this[r]=String(n)},t.prototype.removeItem=function(r){delete this[r]},t.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(n){r[n]=void 0,delete r[n]})},t.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof qg<"u"&&qg.localStorage?Jh.exports=qg.localStorage:typeof window<"u"&&window.localStorage?Jh.exports=window.localStorage:Jh.exports=new e})();function SK(t){var e;return[t[0],Ma((e=t[1])!=null?e:"")]}let IK=class{constructor(){this.localStorage=Jh.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(SK)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Ma(r)}async setItem(e,r){this.localStorage.setItem(e,Os(r))}async removeItem(e){this.localStorage.removeItem(e)}};const PK="wc_storage_version",Hx=1,CK=async(t,e,r)=>{const n=PK,i=await e.getItem(n);if(i&&i>=Hx){r(e);return}const s=await t.getKeys();if(!s.length){r(e);return}const o=[];for(;s.length;){const a=s.shift();if(!a)continue;const l=a.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){const c=await t.getItem(a);await e.setItem(a,c),o.push(a)}}await e.setItem(n,Hx),r(e),OK(t,o)},OK=async(t,e)=>{e.length&&e.forEach(async r=>{await t.removeItem(r)})};let NK=class{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new IK;this.storage=e;try{const r=new _K;CK(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}};var TK=Object.defineProperty,kK=(t,e,r)=>e in t?TK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vx=(t,e,r)=>kK(t,typeof e!="symbol"?e+"":e,r);let DK=class extends Ka{constructor(e){super(),this.opts=e,Vx(this,"protocol","wc"),Vx(this,"version",2)}};var RK=Object.defineProperty,$K=(t,e,r)=>e in t?RK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,MK=(t,e,r)=>$K(t,e+"",r);let BK=class extends Ka{constructor(e,r){super(),this.core=e,this.logger=r,MK(this,"records",new Map)}},UK=class{constructor(e,r){this.logger=e,this.core=r}},LK=class extends Ka{constructor(e,r){super(),this.relayer=e,this.logger=r}},FK=class extends Ka{constructor(e){super()}},jK=class{constructor(e,r,n,i){this.core=e,this.logger=r,this.name=n}},zK=class extends Ka{constructor(e,r){super(),this.relayer=e,this.logger=r}},qK=class extends Ka{constructor(e,r){super(),this.core=e,this.logger=r}},HK=class{constructor(e,r,n){this.core=e,this.logger=r,this.store=n}},VK=class{constructor(e,r){this.projectId=e,this.logger=r}},KK=class{constructor(e,r,n){this.core=e,this.logger=r,this.telemetryEnabled=n}};var WK=Object.defineProperty,GK=(t,e,r)=>e in t?WK(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kx=(t,e,r)=>GK(t,typeof e!="symbol"?e+"":e,r);let YK=class{constructor(e){this.opts=e,Kx(this,"protocol","wc"),Kx(this,"version",2)}},QK=class{constructor(e){this.client=e}};const JK="PARSE_ERROR",ZK="INVALID_REQUEST",XK="METHOD_NOT_FOUND",eW="INVALID_PARAMS",G4="INTERNAL_ERROR",i1="SERVER_ERROR",tW=[-32700,-32600,-32601,-32602,-32603],vu={[JK]:{code:-32700,message:"Parse error"},[ZK]:{code:-32600,message:"Invalid Request"},[XK]:{code:-32601,message:"Method not found"},[eW]:{code:-32602,message:"Invalid params"},[G4]:{code:-32603,message:"Internal error"},[i1]:{code:-32e3,message:"Server error"}},Y4=i1;function rW(t){return tW.includes(t)}function Wx(t){return Object.keys(vu).includes(t)?vu[t]:vu[Y4]}function nW(t){const e=Object.values(vu).find(r=>r.code===t);return e||vu[Y4]}function Q4(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):t}var J4={},rs={},Gx;function iW(){if(Gx)return rs;Gx=1,Object.defineProperty(rs,"__esModule",{value:!0}),rs.isBrowserCryptoAvailable=rs.getSubtleCrypto=rs.getBrowerCrypto=void 0;function t(){return(Rn==null?void 0:Rn.crypto)||(Rn==null?void 0:Rn.msCrypto)||{}}rs.getBrowerCrypto=t;function e(){const n=t();return n.subtle||n.webkitSubtle}rs.getSubtleCrypto=e;function r(){return!!t()&&!!e()}return rs.isBrowserCryptoAvailable=r,rs}var ns={},Yx;function sW(){if(Yx)return ns;Yx=1,Object.defineProperty(ns,"__esModule",{value:!0}),ns.isBrowser=ns.isNode=ns.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ns.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ns.isNode=e;function r(){return!t()&&!e()}return ns.isBrowser=r,ns}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=mf;e.__exportStar(iW(),t),e.__exportStar(sW(),t)})(J4);function Pi(t=3){const e=Date.now()*Math.pow(10,t),r=Math.floor(Math.random()*Math.pow(10,t));return e+r}function bo(t=6){return BigInt(Pi(t))}function ai(t,e,r){return{id:r||Pi(),jsonrpc:"2.0",method:t,params:e}}function rf(t,e){return{id:t,jsonrpc:"2.0",result:e}}function Gp(t,e,r){return{id:t,jsonrpc:"2.0",error:oW(e)}}function oW(t,e){return typeof t>"u"?Wx(G4):(typeof t=="string"&&(t=Object.assign(Object.assign({},Wx(i1)),{message:t})),rW(t.code)&&(t=nW(t.code)),t)}class aW{}class lW extends aW{constructor(){super()}}class cW extends lW{constructor(e){super()}}const uW="^https?:",fW="^wss?:";function hW(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function Z4(t,e){const r=hW(t);return typeof r>"u"?!1:new RegExp(e).test(r)}function Qx(t){return Z4(t,uW)}function Jx(t){return Z4(t,fW)}function dW(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function X4(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function s1(t){return X4(t)&&"method"in t}function Yp(t){return X4(t)&&(Ci(t)||Dn(t))}function Ci(t){return"result"in t}function Dn(t){return"error"in t}let o1=class extends cW{constructor(e){super(e),this.events=new An.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(ai(e.method,e.params||[],e.id||bo().toString()),r)}async requestStrict(e,r){return new Promise(async(n,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{Dn(s)?i(s.error):n(s.result)});try{await this.connection.send(e,r)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Yp(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const pW=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),gW=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Zx=t=>t.split("?")[0],Xx=10,mW=pW();let yW=class{constructor(e){if(this.url=e,this.events=new An.EventEmitter,this.registering=!1,!Jx(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=n=>{this.onClose(n),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Os(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!Jx(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));n(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,n)=>{const i=J4.isReactNative()?void 0:{rejectUnauthorized:!dW(e)},s=new mW(e,[],i);gW()?s.onerror=o=>{const a=o;n(this.emitError(a.error))}:s.on("error",o=>{n(this.emitError(o))}),s.onopen=()=>{this.onOpen(s),r(s)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ma(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Gp(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Q4(e,Zx(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Xx&&this.events.setMaxListeners(Xx)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${Zx(this.url)}`));return this.events.emit("register_error",r),r}};var wW={};const eP="wc",tP=2,Hy="core",Wi=`${eP}@2:${Hy}:`,vW={logger:"error"},bW={database:":memory:"},EW="crypto",e3="client_ed25519_seed",xW=te.ONE_DAY,AW="keychain",_W="0.3",SW="messages",IW="0.3",PW=te.SIX_HOURS,CW="publisher",rP="irn",OW="error",nP="wss://relay.walletconnect.org",NW="relayer",Mt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},TW="_subscription",Pn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},kW=.1,Vy="2.23.0",mt={link_mode:"link_mode",relay:"relay"},Zh={inbound:"inbound",outbound:"outbound"},DW="0.3",RW="WALLETCONNECT_CLIENT_ID",t3="WALLETCONNECT_LINK_MODE_APPS",ln={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},$W="subscription",MW="0.3",BW="pairing",UW="0.3",qc={wc_pairingDelete:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:te.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:te.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:te.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:te.ONE_DAY,prompt:!1,tag:0},res:{ttl:te.ONE_DAY,prompt:!1,tag:0}}},ha={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Jn={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},LW="history",FW="0.3",jW="expirer",Nn={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},zW="0.3",qW="verify-api",HW="https://verify.walletconnect.com",iP="https://verify.walletconnect.org",bu=iP,VW=`${bu}/v3`,KW=[HW,iP],WW="echo",GW="https://echo.walletconnect.com",_i={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},ss={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Zn={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success",session_request_response_started:"session_request_response_started",session_request_response_validation_success:"session_request_response_validation_success",session_request_response_publish_started:"session_request_response_publish_started"},na={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found",session_request_response_validation_failure:"session_request_response_validation_failure",session_request_response_publish_failure:"session_request_response_publish_failure"},ia={authenticated_session_approve_started:"authenticated_session_approve_started",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve"},Hc={no_internet_connection:"no_internet_connection",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},YW=.1,QW="event-client",JW=86400,ZW="https://pulse.walletconnect.org/batch";function XW(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var s=t.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=t.length,l=t.charAt(0),c=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function f(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var v=0,O=0,A=0,I=w.length;A!==I&&w[A]===0;)A++,v++;for(var _=(I-A)*u+1>>>0,T=new Uint8Array(_);A!==I;){for(var D=w[A],R=0,$=_-1;(D!==0||R<O)&&$!==-1;$--,R++)D+=256*T[$]>>>0,T[$]=D%a>>>0,D=D/a>>>0;if(D!==0)throw new Error("Non-zero carry");O=R,A++}for(var M=_-O;M!==_&&T[M]===0;)M++;for(var B=l.repeat(v);M<_;++M)B+=t.charAt(T[M]);return B}function h(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var v=0;if(w[v]!==" "){for(var O=0,A=0;w[v]===l;)O++,v++;for(var I=(w.length-v)*c+1>>>0,_=new Uint8Array(I);w[v];){var T=r[w.charCodeAt(v)];if(T===255)return;for(var D=0,R=I-1;(T!==0||D<A)&&R!==-1;R--,D++)T+=a*_[R]>>>0,_[R]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");A=D,v++}if(w[v]!==" "){for(var $=I-A;$!==I&&_[$]===0;)$++;for(var M=new Uint8Array(O+(I-$)),B=O;$!==I;)M[B++]=_[$++];return M}}}function g(w){var v=h(w);if(v)return v;throw new Error(`Non-${e} character`)}return{encode:f,decodeUnsafe:h,decode:g}}var eG=XW,tG=eG;const sP=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},rG=t=>new TextEncoder().encode(t),nG=t=>new TextDecoder().decode(t);class iG{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class sG{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return oP(this,e)}}class oG{constructor(e){this.decoders=e}or(e){return oP(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const oP=(t,e)=>new oG({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class aG{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new iG(e,r,n),this.decoder=new sG(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Qp=({name:t,prefix:e,encode:r,decode:n})=>new aG(t,e,r,n),Cf=({prefix:t,name:e,alphabet:r})=>{const{encode:n,decode:i}=tG(r,e);return Qp({prefix:t,name:e,encode:n,decode:s=>sP(i(s))})},lG=(t,e,r,n)=>{const i={};for(let u=0;u<e.length;++u)i[e[u]]=u;let s=t.length;for(;t[s-1]==="=";)--s;const o=new Uint8Array(s*r/8|0);let a=0,l=0,c=0;for(let u=0;u<s;++u){const f=i[t[u]];if(f===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|f,a+=r,a>=8&&(a-=8,o[c++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return o},cG=(t,e,r)=>{const n=e[e.length-1]==="=",i=(1<<r)-1;let s="",o=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],o+=8;o>r;)o-=r,s+=e[i&a>>o];if(o&&(s+=e[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},gr=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Qp({prefix:e,name:t,encode(i){return cG(i,n,r)},decode(i){return lG(i,n,r,t)}}),uG=Qp({prefix:"\0",name:"identity",encode:t=>nG(t),decode:t=>rG(t)});var fG=Object.freeze({__proto__:null,identity:uG});const hG=gr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var dG=Object.freeze({__proto__:null,base2:hG});const pG=gr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var gG=Object.freeze({__proto__:null,base8:pG});const mG=Cf({prefix:"9",name:"base10",alphabet:"0123456789"});var yG=Object.freeze({__proto__:null,base10:mG});const wG=gr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),vG=gr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var bG=Object.freeze({__proto__:null,base16:wG,base16upper:vG});const EG=gr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xG=gr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),AG=gr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_G=gr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),SG=gr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),IG=gr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),PG=gr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),CG=gr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),OG=gr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var NG=Object.freeze({__proto__:null,base32:EG,base32upper:xG,base32pad:AG,base32padupper:_G,base32hex:SG,base32hexupper:IG,base32hexpad:PG,base32hexpadupper:CG,base32z:OG});const TG=Cf({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),kG=Cf({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var DG=Object.freeze({__proto__:null,base36:TG,base36upper:kG});const RG=Cf({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),$G=Cf({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var MG=Object.freeze({__proto__:null,base58btc:RG,base58flickr:$G});const BG=gr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),UG=gr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),LG=gr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),FG=gr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var jG=Object.freeze({__proto__:null,base64:BG,base64pad:UG,base64url:LG,base64urlpad:FG});const aP=Array.from(""),zG=aP.reduce((t,e,r)=>(t[r]=e,t),[]),qG=aP.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function HG(t){return t.reduce((e,r)=>(e+=zG[r],e),"")}function VG(t){const e=[];for(const r of t){const n=qG[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}const KG=Qp({prefix:"",name:"base256emoji",encode:HG,decode:VG});var WG=Object.freeze({__proto__:null,base256emoji:KG}),GG=lP,r3=128,YG=-128,QG=Math.pow(2,31);function lP(t,e,r){e=e||[],r=r||0;for(var n=r;t>=QG;)e[r++]=t&255|r3,t/=128;for(;t&YG;)e[r++]=t&255|r3,t>>>=7;return e[r]=t|0,lP.bytes=r-n+1,e}var JG=Ky,ZG=128,n3=127;function Ky(t,n){var r=0,n=n||0,i=0,s=n,o,a=t.length;do{if(s>=a)throw Ky.bytes=0,new RangeError("Could not decode varint");o=t[s++],r+=i<28?(o&n3)<<i:(o&n3)*Math.pow(2,i),i+=7}while(o>=ZG);return Ky.bytes=s-n,r}var XG=Math.pow(2,7),eY=Math.pow(2,14),tY=Math.pow(2,21),rY=Math.pow(2,28),nY=Math.pow(2,35),iY=Math.pow(2,42),sY=Math.pow(2,49),oY=Math.pow(2,56),aY=Math.pow(2,63),lY=function(t){return t<XG?1:t<eY?2:t<tY?3:t<rY?4:t<nY?5:t<iY?6:t<sY?7:t<oY?8:t<aY?9:10},cY={encode:GG,decode:JG,encodingLength:lY},cP=cY;const i3=(t,e,r=0)=>(cP.encode(t,e,r),e),s3=t=>cP.encodingLength(t),Wy=(t,e)=>{const r=e.byteLength,n=s3(t),i=n+s3(r),s=new Uint8Array(i+r);return i3(t,s,0),i3(r,s,n),s.set(e,i),new uY(t,r,e,s)};class uY{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}}const uP=({name:t,code:e,encode:r})=>new fY(t,e,r);class fY{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Wy(this.code,r):r.then(n=>Wy(this.code,n))}else throw Error("Unknown type, must be binary type")}}const fP=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),hY=uP({name:"sha2-256",code:18,encode:fP("SHA-256")}),dY=uP({name:"sha2-512",code:19,encode:fP("SHA-512")});var pY=Object.freeze({__proto__:null,sha256:hY,sha512:dY});const hP=0,gY="identity",dP=sP,mY=t=>Wy(hP,dP(t)),yY={code:hP,name:gY,encode:dP,digest:mY};var wY=Object.freeze({__proto__:null,identity:yY});new TextEncoder,new TextDecoder;const o3={...fG,...dG,...gG,...yG,...bG,...NG,...DG,...MG,...jG,...WG};({...pY,...wY});function pP(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function vY(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?pP(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function gP(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const a3=gP("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Hg=gP("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=vY(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),bY={utf8:a3,"utf-8":a3,hex:o3.base16,latin1:Hg,ascii:Hg,binary:Hg,...o3};function EY(t,e="utf8"){const r=bY[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?pP(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var xY=Object.defineProperty,AY=(t,e,r)=>e in t?xY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xi=(t,e,r)=>AY(t,typeof e!="symbol"?e+"":e,r);class _Y{constructor(e,r){this.core=e,this.logger=r,xi(this,"keychain",new Map),xi(this,"name",AW),xi(this,"version",_W),xi(this,"initialized",!1),xi(this,"storagePrefix",Wi),xi(this,"init",async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}}),xi(this,"has",n=>(this.isInitialized(),this.keychain.has(n))),xi(this,"set",async(n,i)=>{this.isInitialized(),this.keychain.set(n,i),await this.persist()}),xi(this,"get",n=>{this.isInitialized();const i=this.keychain.get(n);if(typeof i>"u"){const{message:s}=ne("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return i}),xi(this,"del",async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()}),this.core=e,this.logger=_n(r,this.name)}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Oy(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ny(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var SY=Object.defineProperty,IY=(t,e,r)=>e in t?SY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kt=(t,e,r)=>IY(t,typeof e!="symbol"?e+"":e,r);class PY{constructor(e,r,n){this.core=e,this.logger=r,Kt(this,"name",EW),Kt(this,"keychain"),Kt(this,"randomSessionIdentifier",jy()),Kt(this,"initialized",!1),Kt(this,"clientId"),Kt(this,"init",async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)}),Kt(this,"hasKeys",i=>(this.isInitialized(),this.keychain.has(i))),Kt(this,"getClientId",async()=>{if(this.isInitialized(),this.clientId)return this.clientId;const i=await this.getClientSeed(),s=DE(i),o=m8(s.publicKey);return this.clientId=o,o}),Kt(this,"generateKeyPair",()=>{this.isInitialized();const i=TH();return this.setPrivateKey(i.publicKey,i.privateKey)}),Kt(this,"signJWT",async i=>{this.isInitialized();const s=await this.getClientSeed(),o=DE(s),a=this.randomSessionIdentifier;return await PL(a,i,xW,o)}),Kt(this,"generateSharedKey",(i,s,o)=>{this.isInitialized();const a=this.getPrivateKey(i),l=kH(a,s);return this.setSymKey(l,o)}),Kt(this,"setSymKey",async(i,s)=>{this.isInitialized();const o=s||Yh(i);return await this.keychain.set(o,i),o}),Kt(this,"deleteKeyPair",async i=>{this.isInitialized(),await this.keychain.del(i)}),Kt(this,"deleteSymKey",async i=>{this.isInitialized(),await this.keychain.del(i)}),Kt(this,"encode",async(i,s,o)=>{this.isInitialized();const a=z4(o),l=Os(s);if(Ix(a))return $H(l,o==null?void 0:o.encoding);if(Sx(a)){const h=a.senderPublicKey,g=a.receiverPublicKey;i=await this.generateSharedKey(h,g)}const c=this.getSymKey(i),{type:u,senderPublicKey:f}=a;return DH({type:u,symKey:c,message:l,senderPublicKey:f,encoding:o==null?void 0:o.encoding})}),Kt(this,"decode",async(i,s,o)=>{this.isInitialized();const a=BH(s,o);if(Ix(a)){const l=MH(s,o==null?void 0:o.encoding);return Ma(l)}if(Sx(a)){const l=a.receiverPublicKey,c=a.senderPublicKey;i=await this.generateSharedKey(l,c)}try{const l=this.getSymKey(i),c=RH({symKey:l,encoded:s,encoding:o==null?void 0:o.encoding});return Ma(c)}catch(l){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}}),Kt(this,"getPayloadType",(i,s=Kr)=>{const o=tf({encoded:i,encoding:s});return Ua(o.type)}),Kt(this,"getPayloadSenderPublicKey",(i,s=Kr)=>{const o=tf({encoded:i,encoding:s});return o.senderPublicKey?tn(o.senderPublicKey,Mr):void 0}),this.core=e,this.logger=_n(r,this.name),this.keychain=n||new _Y(this.core,this.logger)}get context(){return nn(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(e3)}catch{e=jy(),await this.keychain.set(e3,e)}return EY(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var CY=Object.defineProperty,OY=Object.defineProperties,NY=Object.getOwnPropertyDescriptors,l3=Object.getOwnPropertySymbols,TY=Object.prototype.hasOwnProperty,kY=Object.prototype.propertyIsEnumerable,Gy=(t,e,r)=>e in t?CY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,DY=(t,e)=>{for(var r in e||(e={}))TY.call(e,r)&&Gy(t,r,e[r]);if(l3)for(var r of l3(e))kY.call(e,r)&&Gy(t,r,e[r]);return t},RY=(t,e)=>OY(t,NY(e)),sn=(t,e,r)=>Gy(t,typeof e!="symbol"?e+"":e,r);class $Y extends UK{constructor(e,r){super(e,r),this.logger=e,this.core=r,sn(this,"messages",new Map),sn(this,"messagesWithoutClientAck",new Map),sn(this,"name",SW),sn(this,"version",IW),sn(this,"initialized",!1),sn(this,"storagePrefix",Wi),sn(this,"init",async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n);const i=await this.getRelayerMessagesWithoutClientAck();typeof i<"u"&&(this.messagesWithoutClientAck=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}}),sn(this,"set",async(n,i,s)=>{this.isInitialized();const o=kn(i);let a=this.messages.get(n);if(typeof a>"u"&&(a={}),typeof a[o]<"u")return o;if(a[o]=i,this.messages.set(n,a),s===Zh.inbound){const l=this.messagesWithoutClientAck.get(n)||{};this.messagesWithoutClientAck.set(n,RY(DY({},l),{[o]:i}))}return await this.persist(),o}),sn(this,"get",n=>{this.isInitialized();let i=this.messages.get(n);return typeof i>"u"&&(i={}),i}),sn(this,"getWithoutAck",n=>{this.isInitialized();const i={};for(const s of n){const o=this.messagesWithoutClientAck.get(s)||{};i[s]=Object.values(o)}return i}),sn(this,"has",(n,i)=>{this.isInitialized();const s=this.get(n),o=kn(i);return typeof s[o]<"u"}),sn(this,"ack",async(n,i)=>{this.isInitialized();const s=this.messagesWithoutClientAck.get(n);if(typeof s>"u")return;const o=kn(i);delete s[o],Object.keys(s).length===0?this.messagesWithoutClientAck.delete(n):this.messagesWithoutClientAck.set(n,s),await this.persist()}),sn(this,"del",async n=>{this.isInitialized(),this.messages.delete(n),this.messagesWithoutClientAck.delete(n),await this.persist()}),this.logger=_n(e,this.name),this.core=r}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Oy(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Oy(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ny(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?Ny(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var MY=Object.defineProperty,BY=Object.defineProperties,UY=Object.getOwnPropertyDescriptors,c3=Object.getOwnPropertySymbols,LY=Object.prototype.hasOwnProperty,FY=Object.prototype.propertyIsEnumerable,Yy=(t,e,r)=>e in t?MY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,nl=(t,e)=>{for(var r in e||(e={}))LY.call(e,r)&&Yy(t,r,e[r]);if(c3)for(var r of c3(e))FY.call(e,r)&&Yy(t,r,e[r]);return t},u3=(t,e)=>BY(t,UY(e)),Cn=(t,e,r)=>Yy(t,typeof e!="symbol"?e+"":e,r);class jY extends LK{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,Cn(this,"events",new An.EventEmitter),Cn(this,"name",CW),Cn(this,"queue",new Map),Cn(this,"publishTimeout",te.toMiliseconds(te.ONE_MINUTE)),Cn(this,"initialPublishTimeout",te.toMiliseconds(te.ONE_SECOND*15)),Cn(this,"needsTransportRestart",!1),Cn(this,"publish",async(n,i,s)=>{var o,a,l,c,u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:i,opts:s}});const f=(s==null?void 0:s.ttl)||PW,h=(s==null?void 0:s.prompt)||!1,g=(s==null?void 0:s.tag)||0,w=(s==null?void 0:s.id)||bo().toString(),v=Sl(Zd().protocol),O={id:w,method:(s==null?void 0:s.publishMethod)||v.publish,params:nl({topic:n,message:i,ttl:f,prompt:h,tag:g,attestation:s==null?void 0:s.attestation},s==null?void 0:s.tvf)},A=`Failed to publish payload, please try again. id:${w} tag:${g}`;try{Zt((o=O.params)==null?void 0:o.prompt)&&((a=O.params)==null||delete a.prompt),Zt((l=O.params)==null?void 0:l.tag)&&((c=O.params)==null||delete c.tag);const I=new Promise(async _=>{const T=({id:R})=>{var $;(($=O.id)==null?void 0:$.toString())===R.toString()&&(this.removeRequestFromQueue(R),this.relayer.events.removeListener(Mt.publish,T),_())};this.relayer.events.on(Mt.publish,T);const D=$i(new Promise((R,$)=>{this.rpcPublish(O,s).then(R).catch(M=>{this.logger.warn(M,M==null?void 0:M.message),$(M)})}),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${w} tag:${g}`);try{await D,this.events.removeListener(Mt.publish,T)}catch(R){this.queue.set(w,{request:O,opts:s,attempt:1}),this.logger.warn(R,R==null?void 0:R.message)}});this.logger.trace({type:"method",method:"publish",params:{id:w,topic:n,message:i,opts:s}}),await $i(I,this.publishTimeout,A)}catch(I){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(I),(u=s==null?void 0:s.internal)!=null&&u.throwOnFailedPublish)throw I}finally{this.queue.delete(w)}}),Cn(this,"publishCustom",async n=>{var i,s,o,a,l;this.logger.debug("Publishing custom payload"),this.logger.trace({type:"method",method:"publishCustom",params:n});const{payload:c,opts:u={}}=n,{attestation:f,tvf:h,publishMethod:g,prompt:w,tag:v,ttl:O=te.FIVE_MINUTES}=u,A=u.id||bo().toString(),I=Sl(Zd().protocol),_=g||I.publish,T={id:A,method:_,params:nl(u3(nl({},c),{ttl:O,prompt:w,tag:v,attestation:f}),h)},D=`Failed to publish custom payload, please try again. id:${A} tag:${v}`;try{Zt((i=T.params)==null?void 0:i.prompt)&&((s=T.params)==null||delete s.prompt),Zt((o=T.params)==null?void 0:o.tag)&&((a=T.params)==null||delete a.tag);const R=new Promise(async $=>{const M=({id:z})=>{var K;((K=T.id)==null?void 0:K.toString())===z.toString()&&(this.removeRequestFromQueue(z),this.relayer.events.removeListener(Mt.publish,M),$())};this.relayer.events.on(Mt.publish,M);const B=$i(new Promise((z,K)=>{this.rpcPublish(T,u).then(z).catch(L=>{this.logger.warn(L,L==null?void 0:L.message),K(L)})}),this.initialPublishTimeout,`Failed initial custom payload publish, retrying.... method:${_} id:${A} tag:${v}`);try{await B,this.events.removeListener(Mt.publish,M)}catch(z){this.queue.set(A,{request:T,opts:u,attempt:1}),this.logger.warn(z,z==null?void 0:z.message)}});this.logger.trace({type:"method",method:"publish",params:{id:A,payload:c,opts:u}}),await $i(R,this.publishTimeout,D)}catch(R){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(R),(l=u==null?void 0:u.internal)!=null&&l.throwOnFailedPublish)throw R}finally{this.queue.delete(A)}}),Cn(this,"on",(n,i)=>{this.events.on(n,i)}),Cn(this,"once",(n,i)=>{this.events.once(n,i)}),Cn(this,"off",(n,i)=>{this.events.off(n,i)}),Cn(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.relayer=e,this.logger=_n(r,this.name),this.registerEventListeners()}get context(){return nn(this.logger)}async rpcPublish(e,r){this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:e});const n=await this.relayer.request(e);return this.relayer.events.emit(Mt.publish,nl(nl({},e),r)),this.logger.debug("Successfully Published Payload"),n}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async(e,r)=>{var n;const i=e.attempt+1;this.queue.set(r,u3(nl({},e),{attempt:i})),this.logger.warn({},`Publisher: queue->publishing: ${e.request.id}, tag: ${(n=e.request.params)==null?void 0:n.tag}, attempt: ${i}`),await this.rpcPublish(e.request,e.opts),this.logger.warn({},`Publisher: queue->published: ${e.request.id}`)})}registerEventListeners(){this.relayer.core.heartbeat.on(Wa.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Mt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Mt.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}var zY=Object.defineProperty,qY=(t,e,r)=>e in t?zY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,il=(t,e,r)=>qY(t,typeof e!="symbol"?e+"":e,r);class HY{constructor(){il(this,"map",new Map),il(this,"set",(e,r)=>{const n=this.get(e);this.exists(e,r)||this.map.set(e,[...n,r])}),il(this,"get",e=>this.map.get(e)||[]),il(this,"exists",(e,r)=>this.get(e).includes(r)),il(this,"delete",(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const n=this.get(e);if(!this.exists(e,r))return;const i=n.filter(s=>s!==r);if(!i.length){this.map.delete(e);return}this.map.set(e,i)}),il(this,"clear",()=>{this.map.clear()})}get topics(){return Array.from(this.map.keys())}}var VY=Object.defineProperty,KY=Object.defineProperties,WY=Object.getOwnPropertyDescriptors,f3=Object.getOwnPropertySymbols,GY=Object.prototype.hasOwnProperty,YY=Object.prototype.propertyIsEnumerable,Qy=(t,e,r)=>e in t?VY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Vc=(t,e)=>{for(var r in e||(e={}))GY.call(e,r)&&Qy(t,r,e[r]);if(f3)for(var r of f3(e))YY.call(e,r)&&Qy(t,r,e[r]);return t},Vg=(t,e)=>KY(t,WY(e)),qe=(t,e,r)=>Qy(t,typeof e!="symbol"?e+"":e,r);class QY extends zK{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,qe(this,"subscriptions",new Map),qe(this,"topicMap",new HY),qe(this,"events",new An.EventEmitter),qe(this,"name",$W),qe(this,"version",MW),qe(this,"pending",new Map),qe(this,"cached",[]),qe(this,"initialized",!1),qe(this,"storagePrefix",Wi),qe(this,"subscribeTimeout",te.toMiliseconds(te.ONE_MINUTE)),qe(this,"initialSubscribeTimeout",te.toMiliseconds(te.ONE_SECOND*15)),qe(this,"clientId"),qe(this,"batchSubscribeTopicsLimit",500),qe(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0}),qe(this,"subscribe",async(n,i)=>{var s;this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}});try{const o=Zd(i),a={topic:n,relay:o,transportType:i==null?void 0:i.transportType};(s=i==null?void 0:i.internal)!=null&&s.skipSubscribe||this.pending.set(n,a);const l=await this.rpcSubscribe(n,o,i);return typeof l=="string"&&(this.onSubscribe(l,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:i}})),l}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}}),qe(this,"unsubscribe",async(n,i)=>{this.isInitialized(),typeof(i==null?void 0:i.id)<"u"?await this.unsubscribeById(n,i.id,i):await this.unsubscribeByTopic(n,i)}),qe(this,"isSubscribed",n=>new Promise(i=>{i(this.topicMap.topics.includes(n))})),qe(this,"isKnownTopic",n=>new Promise(i=>{i(this.topicMap.topics.includes(n)||this.pending.has(n)||this.cached.some(s=>s.topic===n))})),qe(this,"on",(n,i)=>{this.events.on(n,i)}),qe(this,"once",(n,i)=>{this.events.once(n,i)}),qe(this,"off",(n,i)=>{this.events.off(n,i)}),qe(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),qe(this,"start",async()=>{await this.onConnect()}),qe(this,"stop",async()=>{await this.onDisconnect()}),qe(this,"restart",async()=>{await this.restore(),await this.onRestart()}),qe(this,"checkPending",async()=>{if(this.pending.size===0&&(!this.initialized||!this.relayer.connected))return;const n=[];this.pending.forEach(i=>{n.push(i)}),await this.batchSubscribe(n)}),qe(this,"registerEventListeners",()=>{this.relayer.core.heartbeat.on(Wa.pulse,async()=>{await this.checkPending()}),this.events.on(ln.created,async n=>{const i=ln.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()}),this.events.on(ln.deleted,async n=>{const i=ln.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:n}),await this.persist()})}),this.relayer=e,this.logger=_n(r,this.name),this.clientId=""}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,r){let n=!1;try{n=this.getSubscription(e).topic===r}catch{}return n}reset(){this.cached=[],this.initialized=!0}onDisable(){this.values.length>0&&(this.cached=this.values),this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const n=this.topicMap.get(e);await Promise.all(n.map(async i=>await this.unsubscribeById(e,i,r)))}async unsubscribeById(e,r,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}});try{const i=Zd(n);await this.restartToComplete({topic:e,id:r,relay:i}),await this.rpcUnsubscribe(e,r,i);const s=yt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:n}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,r,n){var i,s;const o=await this.getSubscriptionId(e);if((i=n==null?void 0:n.internal)!=null&&i.skipSubscribe)return o;(!n||(n==null?void 0:n.transportType)===mt.relay)&&await this.restartToComplete({topic:e,id:e,relay:r});const a={method:Sl(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a});const l=(s=n==null?void 0:n.internal)==null?void 0:s.throwOnFailedPublish;try{if((n==null?void 0:n.transportType)===mt.link_mode)return setTimeout(()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(a).catch(f=>this.logger.warn(f))},te.toMiliseconds(te.ONE_SECOND)),o;const c=new Promise(async f=>{const h=g=>{g.topic===e&&(this.events.removeListener(ln.created,h),f(g.id))};this.events.on(ln.created,h);try{const g=await $i(new Promise((w,v)=>{this.relayer.request(a).catch(O=>{this.logger.warn(O,O==null?void 0:O.message),v(O)}).then(w)}),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(ln.created,h),f(g)}catch{}}),u=await $i(c,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!u&&l)throw new Error(`Subscribing to ${e} failed, please try again`);return u?o:null}catch(c){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Mt.connection_stalled),l)throw c}return null}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,n={method:Sl(r.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{await await $i(new Promise(i=>{this.relayer.request(n).catch(s=>this.logger.warn(s)).then(i)}),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Mt.connection_stalled)}}async rpcBatchFetchMessages(e){if(!e.length)return;const r=e[0].relay,n={method:Sl(r.protocol).batchFetchMessages,params:{topics:e.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let i;try{i=await await $i(new Promise((s,o)=>{this.relayer.request(n).catch(a=>{this.logger.warn(a),o(a)}).then(s)}),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Mt.connection_stalled)}return i}rpcUnsubscribe(e,r,n){const i={method:Sl(n.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,r){this.setSubscription(e,Vg(Vc({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Vc({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,n){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,n),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r)}addSubscription(e,r){this.subscriptions.set(e,Vc({},r)),this.topicMap.set(r.topic,e),this.events.emit(ln.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:n}=ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const n=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(n.topic,e),this.events.emit(ln.deleted,Vg(Vc({},n),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(ln.sync)}async onRestart(){if(this.cached.length){const e=[...this.cached],r=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let n=0;n<r;n++){const i=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(ln.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size&&!e.every(r=>{var n;return r.topic===((n=this.subscriptions.get(r.id))==null?void 0:n.topic)})){const{message:r}=ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map(async r=>Vg(Vc({},r),{id:await this.getSubscriptionId(r.topic)})))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const r=await this.rpcBatchFetchMessages(e);r&&r.messages&&(await Jj(te.toMiliseconds(te.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(r.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return kn(e+await this.getClientId())}}var JY=Object.defineProperty,h3=Object.getOwnPropertySymbols,ZY=Object.prototype.hasOwnProperty,XY=Object.prototype.propertyIsEnumerable,Jy=(t,e,r)=>e in t?JY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,d3=(t,e)=>{for(var r in e||(e={}))ZY.call(e,r)&&Jy(t,r,e[r]);if(h3)for(var r of h3(e))XY.call(e,r)&&Jy(t,r,e[r]);return t},Se=(t,e,r)=>Jy(t,typeof e!="symbol"?e+"":e,r);class eQ extends FK{constructor(e){var r;super(e),Se(this,"protocol","wc"),Se(this,"version",2),Se(this,"core"),Se(this,"logger"),Se(this,"events",new An.EventEmitter),Se(this,"provider"),Se(this,"messages"),Se(this,"subscriber"),Se(this,"publisher"),Se(this,"name",NW),Se(this,"transportExplicitlyClosed",!1),Se(this,"initialized",!1),Se(this,"connectionAttemptInProgress",!1),Se(this,"relayUrl"),Se(this,"projectId"),Se(this,"packageName"),Se(this,"bundleId"),Se(this,"hasExperiencedNetworkDisruption",!1),Se(this,"pingTimeout"),Se(this,"heartBeatTimeout",te.toMiliseconds(te.THIRTY_SECONDS+te.FIVE_SECONDS)),Se(this,"reconnectTimeout"),Se(this,"connectPromise"),Se(this,"reconnectInProgress",!1),Se(this,"requestsInFlight",[]),Se(this,"connectTimeout",te.toMiliseconds(te.ONE_SECOND*15)),Se(this,"request",async n=>{var i,s;this.logger.debug("Publishing Request Payload");const o=n.id||bo().toString();await this.toEstablishConnection();try{this.logger.trace({id:o,method:n.method,topic:(i=n.params)==null?void 0:i.topic},"relayer.request - publishing...");const a=`${o}:${((s=n.params)==null?void 0:s.tag)||""}`;this.requestsInFlight.push(a);const l=await this.provider.request(n);return this.requestsInFlight=this.requestsInFlight.filter(c=>c!==a),l}catch(a){throw this.logger.debug(`Failed to Publish Request: ${o}`),a}}),Se(this,"resetPingTimeout",()=>{Kd()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var n,i,s,o;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),(o=(s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null?void 0:s.terminate)==null||o.call(s)}catch(a){this.logger.warn(a,a==null?void 0:a.message)}},this.heartBeatTimeout))}),Se(this,"onPayloadHandler",n=>{this.onProviderPayload(n),this.resetPingTimeout()}),Se(this,"onConnectHandler",()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit(Mt.connect)}),Se(this,"onDisconnectHandler",()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()}),Se(this,"onProviderErrorHandler",n=>{this.logger.fatal(`Fatal socket error: ${n.message}`),this.events.emit(Mt.error,n),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()}),Se(this,"registerProviderListeners",()=>{this.provider.on(Pn.payload,this.onPayloadHandler),this.provider.on(Pn.connect,this.onConnectHandler),this.provider.on(Pn.disconnect,this.onDisconnectHandler),this.provider.on(Pn.error,this.onProviderErrorHandler)}),this.core=e.core,this.logger=n1({logger:(r=e.logger)!=null?r:OW,name:this.name}),this.messages=new $Y(this.logger,e.core),this.subscriber=new QY(this,this.logger),this.publisher=new jY(this,this.logger),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||nP,$j()?this.packageName=WE():Mj()&&(this.bundleId=WE()),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.transportOpen().catch(e=>this.logger.warn(e,e==null?void 0:e.message))}get context(){return nn(this.logger)}get connected(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===1||!1}get connecting(){var e,r,n;return((n=(r=(e=this.provider)==null?void 0:e.connection)==null?void 0:r.socket)==null?void 0:n.readyState)===0||this.connectPromise!==void 0||!1}async publish(e,r,n){this.isInitialized(),await this.publisher.publish(e,r,n),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now(),transportType:mt.relay},Zh.outbound)}async publishCustom(e){this.isInitialized(),await this.publisher.publishCustom(e)}async subscribe(e,r){var n,i,s;this.isInitialized(),(!(r!=null&&r.transportType)||(r==null?void 0:r.transportType)==="relay")&&await this.toEstablishConnection();const o=typeof((n=r==null?void 0:r.internal)==null?void 0:n.throwOnFailedPublish)>"u"?!0:(i=r==null?void 0:r.internal)==null?void 0:i.throwOnFailedPublish;let a=((s=this.subscriber.topicMap.get(e))==null?void 0:s[0])||"",l;const c=u=>{u.topic===e&&(this.subscriber.off(ln.created,c),l())};return await Promise.all([new Promise(u=>{l=u,this.subscriber.on(ln.created,c)}),new Promise(async(u,f)=>{a=await this.subscriber.subscribe(e,d3({internal:{throwOnFailedPublish:o}},r)).catch(h=>{o&&f(h)})||a,u()})]),a}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await $i(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(!this.subscriber.hasAnyTopics){this.logger.info("Starting WS connection skipped because the client has no topics to work with.");return}if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise(async(r,n)=>{await this.connect(e).then(r).catch(n).finally(()=>{this.connectPromise=void 0})}),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Lx())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if((e==null?void 0:e.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const r=e.sort((n,i)=>n.publishedAt-i.publishedAt);this.logger.debug(`Batch of ${r.length} message events sorted`);for(const n of r)try{await this.onMessageEvent(n)}catch(i){this.logger.warn(i,"Error while processing batch message event: "+(i==null?void 0:i.message))}this.logger.trace(`Batch of ${r.length} message events processed`)}async onLinkMessageEvent(e,r){const{topic:n}=e;if(!r.sessionExists){const i=Dt(te.FIVE_MINUTES),s={topic:n,expiry:i,relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(n,s)}this.events.emit(Mt.message,e),await this.recordMessageEvent(e,Zh.inbound)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let r=1;for(;r<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${r}...`),await this.createProvider(),await new Promise(async(n,i)=>{const s=()=>{i(new Error("Connection interrupted while trying to connect"))};this.provider.once(Pn.disconnect,s),await $i(new Promise((o,a)=>{this.provider.connect().then(o).catch(a)}),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{this.provider.off(Pn.disconnect,s),clearTimeout(this.reconnectTimeout)}),await new Promise(async(o,a)=>{const l=()=>{i(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(Pn.disconnect,l),await this.subscriber.start().then(o).catch(a).finally(()=>{this.provider.off(Pn.disconnect,l)})}),this.hasExperiencedNetworkDisruption=!1,n()})}catch(n){await this.subscriber.stop();const i=n;this.logger.warn({},i.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${r}`);break}await new Promise(n=>setTimeout(n,te.toMiliseconds(r*1))),r++}}startPingTimeout(){var e,r,n,i,s;if(Kd())try{(r=(e=this.provider)==null?void 0:e.connection)!=null&&r.socket&&((s=(i=(n=this.provider)==null?void 0:n.connection)==null?void 0:i.socket)==null||s.on("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(o){this.logger.warn(o,o==null?void 0:o.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new o1(new yW(jj({sdkVersion:Vy,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,r){const{topic:n,message:i}=e;await this.messages.set(n,i,r)}async shouldIgnoreMessageEvent(e){const{topic:r,message:n}=e;if(!n||n.length===0)return this.logger.warn(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isKnownTopic(r))return this.logger.warn(`Ignoring message for unknown topic ${r}`),!0;const i=this.messages.has(r,n);return i&&this.logger.warn(`Ignoring duplicate message: ${n}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),s1(e)){if(!e.method.endsWith(TW))return;const r=e.params,{topic:n,message:i,publishedAt:s,attestation:o}=r.data,a={topic:n,message:i,publishedAt:s,transportType:mt.relay,attestation:o};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(d3({type:"event",event:r.id},a)),this.events.emit(r.id,a),await this.acknowledgePayload(e),await this.onMessageEvent(a)}else Yp(e)&&this.events.emit(Mt.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,Zh.inbound),this.events.emit(Mt.message,e))}async acknowledgePayload(e){const r=rf(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Pn.payload,this.onPayloadHandler),this.provider.off(Pn.connect,this.onConnectHandler),this.provider.off(Pn.disconnect,this.onDisconnectHandler),this.provider.off(Pn.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await Lx();BV(async r=>{e!==r&&(e=r,r?await this.transportOpen().catch(n=>this.logger.error(n,n==null?void 0:n.message)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}),this.core.heartbeat.on(Wa.pulse,async()=>{if(!this.transportExplicitlyClosed&&!this.connected&&FV())try{await this.confirmOnlineStateOrThrow(),await this.transportOpen()}catch(r){this.logger.warn(r,r==null?void 0:r.message)}})}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit(Mt.disconnect),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(e=>this.logger.error(e,e==null?void 0:e.message)),this.reconnectTimeout=void 0,this.reconnectInProgress=!1},te.toMiliseconds(kW)))))}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectPromise){await this.connectPromise;return}await this.connect()}}}function tQ(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function p3(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function g3(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const rQ="[object RegExp]",nQ="[object String]",iQ="[object Number]",sQ="[object Boolean]",m3="[object Arguments]",oQ="[object Symbol]",aQ="[object Date]",lQ="[object Map]",cQ="[object Set]",uQ="[object Array]",fQ="[object Function]",hQ="[object ArrayBuffer]",Kg="[object Object]",dQ="[object Error]",pQ="[object DataView]",gQ="[object Uint8Array]",mQ="[object Uint8ClampedArray]",yQ="[object Uint16Array]",wQ="[object Uint32Array]",vQ="[object BigUint64Array]",bQ="[object Int8Array]",EQ="[object Int16Array]",xQ="[object Int32Array]",AQ="[object BigInt64Array]",_Q="[object Float32Array]",SQ="[object Float64Array]";function IQ(){}function y3(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function PQ(t,e,r){return nu(t,e,void 0,void 0,void 0,void 0,r)}function nu(t,e,r,n,i,s,o){const a=o(t,e,r,n,i,s);if(a!==void 0)return a;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return Eu(t,e,s,o)}return Eu(t,e,s,o)}function Eu(t,e,r,n){if(Object.is(t,e))return!0;let i=g3(t),s=g3(e);if(i===m3&&(i=Kg),s===m3&&(s=Kg),i!==s)return!1;switch(i){case nQ:return t.toString()===e.toString();case iQ:{const l=t.valueOf(),c=e.valueOf();return tQ(l,c)}case sQ:case aQ:case oQ:return Object.is(t.valueOf(),e.valueOf());case rQ:return t.source===e.source&&t.flags===e.flags;case fQ:return t===e}r=r??new Map;const o=r.get(t),a=r.get(e);if(o!=null&&a!=null)return o===e;r.set(t,e),r.set(e,t);try{switch(i){case lQ:{if(t.size!==e.size)return!1;for(const[l,c]of t.entries())if(!e.has(l)||!nu(c,e.get(l),l,t,e,r,n))return!1;return!0}case cQ:{if(t.size!==e.size)return!1;const l=Array.from(t.values()),c=Array.from(e.values());for(let u=0;u<l.length;u++){const f=l[u],h=c.findIndex(g=>nu(f,g,void 0,t,e,r,n));if(h===-1)return!1;c.splice(h,1)}return!0}case uQ:case gQ:case mQ:case yQ:case wQ:case vQ:case bQ:case EQ:case xQ:case AQ:case _Q:case SQ:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let l=0;l<t.length;l++)if(!nu(t[l],e[l],l,t,e,r,n))return!1;return!0}case hQ:return t.byteLength!==e.byteLength?!1:Eu(new Uint8Array(t),new Uint8Array(e),r,n);case pQ:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:Eu(new Uint8Array(t),new Uint8Array(e),r,n);case dQ:return t.name===e.name&&t.message===e.message;case Kg:{if(!(Eu(t.constructor,e.constructor,r,n)||y3(t)&&y3(e)))return!1;const l=[...Object.keys(t),...p3(t)],c=[...Object.keys(e),...p3(e)];if(l.length!==c.length)return!1;for(let u=0;u<l.length;u++){const f=l[u],h=t[f];if(!Object.hasOwn(e,f))return!1;const g=e[f];if(!nu(h,g,f,t,e,r,n))return!1}return!0}default:return!1}}finally{r.delete(t),r.delete(e)}}function CQ(t,e){return PQ(t,e,IQ)}var OQ=Object.defineProperty,w3=Object.getOwnPropertySymbols,NQ=Object.prototype.hasOwnProperty,TQ=Object.prototype.propertyIsEnumerable,Zy=(t,e,r)=>e in t?OQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,v3=(t,e)=>{for(var r in e||(e={}))NQ.call(e,r)&&Zy(t,r,e[r]);if(w3)for(var r of w3(e))TQ.call(e,r)&&Zy(t,r,e[r]);return t},jr=(t,e,r)=>Zy(t,typeof e!="symbol"?e+"":e,r);class Ya extends jK{constructor(e,r,n,i=Wi,s=void 0){super(e,r,n,i),this.core=e,this.logger=r,this.name=n,jr(this,"map",new Map),jr(this,"version",DW),jr(this,"cached",[]),jr(this,"initialized",!1),jr(this,"getKey"),jr(this,"storagePrefix",Wi),jr(this,"recentlyDeleted",[]),jr(this,"recentlyDeletedLimit",200),jr(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!Zt(o)?this.map.set(this.getKey(o),o):pV(o)?this.map.set(o.id,o):gV(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)}),jr(this,"set",async(o,a)=>{this.isInitialized(),this.map.has(o)?await this.update(o,a):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:a}),this.map.set(o,a),await this.persist())}),jr(this,"get",o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o))),jr(this,"getAll",o=>(this.isInitialized(),o?this.values.filter(a=>Object.keys(o).every(l=>CQ(a[l],o[l]))):this.values)),jr(this,"update",async(o,a)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:a});const l=v3(v3({},this.getData(o)),a);this.map.set(o,l),await this.persist()}),jr(this,"delete",async(o,a)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:a}),this.map.delete(o),this.addToRecentlyDeleted(o),await this.persist())}),this.logger=_n(r,this.name),this.storagePrefix=i,this.getKey=s}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){if(this.recentlyDeleted.includes(e)){const{message:i}=ne("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}const{message:n}=ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(n),new Error(n)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var kQ=Object.defineProperty,DQ=(t,e,r)=>e in t?kQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,be=(t,e,r)=>DQ(t,typeof e!="symbol"?e+"":e,r);class RQ{constructor(e,r){this.core=e,this.logger=r,be(this,"name",BW),be(this,"version",UW),be(this,"events",new bv),be(this,"pairings"),be(this,"initialized",!1),be(this,"storagePrefix",Wi),be(this,"ignoredPayloadTypes",[Es]),be(this,"registeredMethods",[]),be(this,"init",async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))}),be(this,"register",({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]}),be(this,"create",async n=>{this.isInitialized();const i=jy(),s=await this.core.crypto.setSymKey(i),o=Dt(te.FIVE_MINUTES),a={protocol:rP},l={topic:s,expiry:o,relay:a,active:!1,methods:n==null?void 0:n.methods},c=Nx({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:i,relay:a,expiryTimestamp:o,methods:n==null?void 0:n.methods});return this.events.emit(ha.create,l),this.core.expirer.set(s,o),await this.pairings.set(s,l),await this.core.relayer.subscribe(s,{transportType:n==null?void 0:n.transportType,internal:n==null?void 0:n.internal}),{topic:s,uri:c}}),be(this,"pair",async n=>{this.isInitialized();const i=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[_i.pairing_started]}});this.isValidPair(n,i);const{topic:s,symKey:o,relay:a,expiryTimestamp:l,methods:c}=Ox(n.uri);i.props.properties.topic=s,i.addTrace(_i.pairing_uri_validation_success),i.addTrace(_i.pairing_uri_not_expired);let u;if(this.pairings.keys.includes(s)){if(u=this.pairings.get(s),i.addTrace(_i.existing_pairing),u.active)throw i.setError(ss.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);i.addTrace(_i.pairing_not_expired)}const f=l||Dt(te.FIVE_MINUTES),h={topic:s,relay:a,expiry:f,active:!1,methods:c};this.core.expirer.set(s,f),await this.pairings.set(s,h),i.addTrace(_i.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(ha.create,h),i.addTrace(_i.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(o,s),i.addTrace(_i.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{i.setError(ss.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:a})}catch(g){throw i.setError(ss.subscribe_pairing_topic_failure),g}return i.addTrace(_i.subscribe_pairing_topic_success),h}),be(this,"activate",async({topic:n})=>{this.isInitialized();const i=Dt(te.FIVE_MINUTES);this.core.expirer.set(n,i),await this.pairings.update(n,{active:!0,expiry:i})}),be(this,"ping",async n=>{this.isInitialized(),await this.isValidPing(n),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:i}=n;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:a,reject:l}=la();this.events.once(Te("pairing_ping",s),({error:c})=>{c?l(c):a()}),await o()}}),be(this,"updateExpiry",async({topic:n,expiry:i})=>{this.isInitialized(),await this.pairings.update(n,{expiry:i})}),be(this,"updateMetadata",async({topic:n,metadata:i})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:i})}),be(this,"getPairings",()=>(this.isInitialized(),this.pairings.values)),be(this,"disconnect",async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:i}=n;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",yt("USER_DISCONNECTED")),await this.deletePairing(i))}),be(this,"formatUriFromPairing",n=>{this.isInitialized();const{topic:i,relay:s,expiry:o,methods:a}=n,l=this.core.crypto.keychain.get(i);return Nx({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:l,relay:s,expiryTimestamp:o,methods:a})}),be(this,"sendRequest",async(n,i,s)=>{const o=ai(i,s),a=await this.core.crypto.encode(n,o),l=qc[i].req;return this.core.history.set(n,o),this.core.relayer.publish(n,a,l),o.id}),be(this,"sendResult",async(n,i,s)=>{const o=rf(n,s),a=await this.core.crypto.encode(i,o),l=(await this.core.history.get(i,n)).request.method,c=qc[l].res;await this.core.relayer.publish(i,a,c),await this.core.history.resolve(o)}),be(this,"sendError",async(n,i,s)=>{const o=Gp(n,s),a=await this.core.crypto.encode(i,o),l=(await this.core.history.get(i,n)).request.method,c=qc[l]?qc[l].res:qc.unregistered_method.res;await this.core.relayer.publish(i,a,c),await this.core.history.resolve(o)}),be(this,"deletePairing",async(n,i)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,yt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),i?Promise.resolve():this.core.expirer.del(n)])}),be(this,"cleanup",async()=>{const n=this.pairings.getAll().filter(i=>Ni(i.expiry));await Promise.all(n.map(i=>this.deletePairing(i.topic)))}),be(this,"onRelayEventRequest",async n=>{const{topic:i,payload:s}=n;switch(s.method){case"wc_pairingPing":return await this.onPairingPingRequest(i,s);case"wc_pairingDelete":return await this.onPairingDeleteRequest(i,s);default:return await this.onUnknownRpcMethodRequest(i,s)}}),be(this,"onRelayEventResponse",async n=>{const{topic:i,payload:s}=n,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}}),be(this,"onPairingPingRequest",async(n,i)=>{const{id:s}=i;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(ha.ping,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),be(this,"onPairingPingResponse",(n,i)=>{const{id:s}=i;setTimeout(()=>{Ci(i)?this.events.emit(Te("pairing_ping",s),{}):Dn(i)&&this.events.emit(Te("pairing_ping",s),{error:i.error})},500)}),be(this,"onPairingDeleteRequest",async(n,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(ha.delete,{id:s,topic:n})}catch(o){await this.sendError(s,n,o),this.logger.error(o)}}),be(this,"onUnknownRpcMethodRequest",async(n,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const a=yt("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,n,a),this.logger.error(a)}catch(a){await this.sendError(s,n,a),this.logger.error(a)}}),be(this,"onUnknownRpcMethodResponse",n=>{this.registeredMethods.includes(n)||this.logger.error(yt("WC_METHOD_UNSUPPORTED",n))}),be(this,"isValidPair",(n,i)=>{var s;if(!qr(n)){const{message:a}=ne("MISSING_OR_INVALID",`pair() params: ${n}`);throw i.setError(ss.malformed_pairing_uri),new Error(a)}if(!dV(n.uri)){const{message:a}=ne("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw i.setError(ss.malformed_pairing_uri),new Error(a)}const o=Ox(n==null?void 0:n.uri);if(!((s=o==null?void 0:o.relay)!=null&&s.protocol)){const{message:a}=ne("MISSING_OR_INVALID","pair() uri#relay-protocol");throw i.setError(ss.malformed_pairing_uri),new Error(a)}if(!(o!=null&&o.symKey)){const{message:a}=ne("MISSING_OR_INVALID","pair() uri#symKey");throw i.setError(ss.malformed_pairing_uri),new Error(a)}if(o!=null&&o.expiryTimestamp&&te.toMiliseconds(o==null?void 0:o.expiryTimestamp)<Date.now()){i.setError(ss.pairing_expired);const{message:a}=ne("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(a)}}),be(this,"isValidPing",async n=>{if(!qr(n)){const{message:s}=ne("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),be(this,"isValidDisconnect",async n=>{if(!qr(n)){const{message:s}=ne("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:i}=n;await this.isValidPairingTopic(i)}),be(this,"isValidPairingTopic",async n=>{if(!Bt(n,!1)){const{message:i}=ne("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(i)}if(!this.pairings.keys.includes(n)){const{message:i}=ne("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(i)}if(Ni(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:i}=ne("EXPIRED",`pairing topic: ${n}`);throw new Error(i)}}),this.core=e,this.logger=_n(r,this.name),this.pairings=new Ya(this.core,this.logger,this.name,this.storagePrefix)}get context(){return nn(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Mt.message,async e=>{const{topic:r,message:n,transportType:i}=e;if(this.pairings.keys.includes(r)&&i!==mt.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))try{const s=await this.core.crypto.decode(r,n);s1(s)?(this.core.history.set(r,s),await this.onRelayEventRequest({topic:r,payload:s})):Yp(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:r,payload:s}),this.core.history.delete(r,s.id)),await this.core.relayer.messages.ack(r,n)}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Nn.expired,async e=>{const{topic:r}=H8(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(ha.expire,{topic:r}))})}}var $Q=Object.defineProperty,MQ=(t,e,r)=>e in t?$Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ir=(t,e,r)=>MQ(t,typeof e!="symbol"?e+"":e,r);class BQ extends BK{constructor(e,r){super(e,r),this.core=e,this.logger=r,ir(this,"records",new Map),ir(this,"events",new An.EventEmitter),ir(this,"name",LW),ir(this,"version",FW),ir(this,"cached",[]),ir(this,"initialized",!1),ir(this,"storagePrefix",Wi),ir(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),ir(this,"set",(n,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:n,request:{method:i.method,params:i.params||null},chainId:s,expiry:Dt(te.THIRTY_DAYS)};this.records.set(o.id,o),this.persist(),this.events.emit(Jn.created,o)}),ir(this,"resolve",async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const i=await this.getRecord(n.id);typeof i.response>"u"&&(i.response=Dn(n)?{error:n.error}:{result:n.result},this.records.set(i.id,i),this.persist(),this.events.emit(Jn.updated,i))}),ir(this,"get",async(n,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:i}),await this.getRecord(i))),ir(this,"delete",(n,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===n){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(Jn.deleted,s)}}),this.persist()}),ir(this,"exists",async(n,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===n:!1)),ir(this,"on",(n,i)=>{this.events.on(n,i)}),ir(this,"once",(n,i)=>{this.events.once(n,i)}),ir(this,"off",(n,i)=>{this.events.off(n,i)}),ir(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=_n(r,this.name)}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const n={topic:r.topic,request:ai(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(n)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:n}=ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(n)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Jn.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Jn.created,e=>{const r=Jn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Jn.updated,e=>{const r=Jn.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.events.on(Jn.deleted,e=>{const r=Jn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e})}),this.core.heartbeat.on(Wa.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach(r=>{te.toMiliseconds(r.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${r.id}`),this.records.delete(r.id),this.events.emit(Jn.deleted,r,!1),e=!0)}),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var UQ=Object.defineProperty,LQ=(t,e,r)=>e in t?UQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,_r=(t,e,r)=>LQ(t,typeof e!="symbol"?e+"":e,r);class FQ extends qK{constructor(e,r){super(e,r),this.core=e,this.logger=r,_r(this,"expirations",new Map),_r(this,"events",new An.EventEmitter),_r(this,"name",jW),_r(this,"version",zW),_r(this,"cached",[]),_r(this,"initialized",!1),_r(this,"storagePrefix",Wi),_r(this,"init",async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)}),_r(this,"has",n=>{try{const i=this.formatTarget(n);return typeof this.getExpiration(i)<"u"}catch{return!1}}),_r(this,"set",(n,i)=>{this.isInitialized();const s=this.formatTarget(n),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Nn.created,{target:s,expiration:o})}),_r(this,"get",n=>{this.isInitialized();const i=this.formatTarget(n);return this.getExpiration(i)}),_r(this,"del",n=>{if(this.isInitialized(),this.has(n)){const i=this.formatTarget(n),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Nn.deleted,{target:i,expiration:s})}}),_r(this,"on",(n,i)=>{this.events.on(n,i)}),_r(this,"once",(n,i)=>{this.events.once(n,i)}),_r(this,"off",(n,i)=>{this.events.off(n,i)}),_r(this,"removeListener",(n,i)=>{this.events.removeListener(n,i)}),this.logger=_n(r,this.name)}get context(){return nn(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return zj(e);if(typeof e=="number")return qj(e);const{message:r}=ne("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Nn.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=ne("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:n}=ne("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(n),new Error(n)}return r}checkExpiry(e,r){const{expiry:n}=r;te.toMiliseconds(n)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(Nn.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Wa.pulse,()=>this.checkExpirations()),this.events.on(Nn.created,e=>{const r=Nn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Nn.expired,e=>{const r=Nn.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(Nn.deleted,e=>{const r=Nn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}}var jQ=Object.defineProperty,zQ=(t,e,r)=>e in t?jQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kt=(t,e,r)=>zQ(t,typeof e!="symbol"?e+"":e,r);class qQ extends HK{constructor(e,r,n){super(e,r,n),this.core=e,this.logger=r,this.store=n,kt(this,"name",qW),kt(this,"abortController"),kt(this,"isDevEnv"),kt(this,"verifyUrlV3",VW),kt(this,"storagePrefix",Wi),kt(this,"version",tP),kt(this,"publicKey"),kt(this,"fetchPromise"),kt(this,"init",async()=>{var i;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&te.toMiliseconds((i=this.publicKey)==null?void 0:i.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))}),kt(this,"register",async i=>{if(!yc()||this.isDevEnv)return;const s=window.location.origin,{id:o,decryptedId:a}=i,l=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${o}&decryptedId=${a}`;try{const c=Ra(),u=this.startAbortTimer(te.ONE_SECOND*5),f=await new Promise((h,g)=>{const w=()=>{window.removeEventListener("message",O),c.body.removeChild(v),g("attestation aborted")};this.abortController.signal.addEventListener("abort",w);const v=c.createElement("iframe");v.src=l,v.style.display="none",v.addEventListener("error",w,{signal:this.abortController.signal});const O=A=>{if(A.data&&typeof A.data=="string")try{const I=JSON.parse(A.data);if(I.type==="verify_attestation"){if(Sy(I.attestation).payload.id!==o)return;clearInterval(u),c.body.removeChild(v),this.abortController.signal.removeEventListener("abort",w),window.removeEventListener("message",O),h(I.attestation===null?"":I.attestation)}}catch(I){this.logger.warn(I)}};c.body.appendChild(v),window.addEventListener("message",O,{signal:this.abortController.signal})});return this.logger.debug(f,"jwt attestation"),f}catch(c){this.logger.warn(c)}return""}),kt(this,"resolve",async i=>{if(this.isDevEnv)return"";const{attestationId:s,hash:o,encryptedId:a}=i;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(Sy(s).payload.id!==a)return;const c=await this.isValidJwtAttestation(s);if(c){if(!c.isVerified){this.logger.warn("resolve: jwt attestation: origin url not verified");return}return c}}if(!o)return;const l=this.getVerifyUrl(i==null?void 0:i.verifyUrl);return this.fetchAttestation(o,l)}),kt(this,"fetchAttestation",async(i,s)=>{this.logger.debug(`resolving attestation: ${i} from url: ${s}`);const o=this.startAbortTimer(te.ONE_SECOND*5),a=await fetch(`${s}/attestation/${i}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(o),a.status===200?await a.json():void 0}),kt(this,"getVerifyUrl",i=>{let s=i||bu;return KW.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${bu}`),s=bu),s}),kt(this,"fetchPublicKey",async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const i=this.startAbortTimer(te.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(i),await s.json()}catch(i){this.logger.warn(i)}}),kt(this,"persistPublicKey",async i=>{this.logger.debug(i,"persisting public key to local storage"),await this.store.setItem(this.storeKey,i),this.publicKey=i}),kt(this,"removePublicKey",async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0}),kt(this,"isValidJwtAttestation",async i=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(i,s)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}const o=await this.fetchAndPersistPublicKey();try{if(o)return this.validateAttestation(i,o)}catch(a){this.logger.error(a),this.logger.warn("error validating attestation")}}),kt(this,"getPublicKey",async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey()),kt(this,"fetchAndPersistPublicKey",async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const o=await this.fetchPublicKey();o&&(await this.persistPublicKey(o),s(o))});const i=await this.fetchPromise;return this.fetchPromise=void 0,i}),kt(this,"validateAttestation",(i,s)=>{const o=LH(i,s.publicKey),a={hasExpired:te.toMiliseconds(o.exp)<Date.now(),payload:o};if(a.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:a.payload.origin,isScam:a.payload.isScam,isVerified:a.payload.isVerified}}),this.logger=_n(r,this.name),this.abortController=new AbortController,this.isDevEnv=Kv(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return nn(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),te.toMiliseconds(e))}}var HQ=Object.defineProperty,VQ=(t,e,r)=>e in t?HQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,b3=(t,e,r)=>VQ(t,typeof e!="symbol"?e+"":e,r);class KQ extends VK{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,b3(this,"context",WW),b3(this,"registerDeviceToken",async n=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:a=!1}=n,l=`${GW}/${this.projectId}/clients`;await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:a})})}),this.logger=_n(r,this.context)}}var WQ=Object.defineProperty,E3=Object.getOwnPropertySymbols,GQ=Object.prototype.hasOwnProperty,YQ=Object.prototype.propertyIsEnumerable,Xy=(t,e,r)=>e in t?WQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kc=(t,e)=>{for(var r in e||(e={}))GQ.call(e,r)&&Xy(t,r,e[r]);if(E3)for(var r of E3(e))YQ.call(e,r)&&Xy(t,r,e[r]);return t},Wt=(t,e,r)=>Xy(t,typeof e!="symbol"?e+"":e,r);class QQ extends KK{constructor(e,r,n=!0){super(e,r,n),this.core=e,this.logger=r,Wt(this,"context",QW),Wt(this,"storagePrefix",Wi),Wt(this,"storageVersion",YW),Wt(this,"events",new Map),Wt(this,"shouldPersist",!1),Wt(this,"init",async()=>{if(!Kv())try{const i={eventId:YE(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:z8(this.core.relayer.protocol,this.core.relayer.version,Vy)}}};await this.sendEvent([i])}catch(i){this.logger.warn(i)}}),Wt(this,"createEvent",i=>{const{event:s="ERROR",type:o="",properties:{topic:a,trace:l}}=i,c=YE(),u=this.core.projectId||"",f=Date.now(),h=Kc({eventId:c,timestamp:f,props:{event:s,type:o,properties:{topic:a,trace:l}},bundleId:u,domain:this.getAppDomain()},this.setMethods(c));return this.telemetryEnabled&&(this.events.set(c,h),this.shouldPersist=!0),h}),Wt(this,"getEvent",i=>{const{eventId:s,topic:o}=i;if(s)return this.events.get(s);const a=Array.from(this.events.values()).find(l=>l.props.properties.topic===o);if(a)return Kc(Kc({},a),this.setMethods(a.eventId))}),Wt(this,"deleteEvent",i=>{const{eventId:s}=i;this.events.delete(s),this.shouldPersist=!0}),Wt(this,"setEventListeners",()=>{this.core.heartbeat.on(Wa.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(i=>{te.fromMiliseconds(Date.now())-te.fromMiliseconds(i.timestamp)>JW&&(this.events.delete(i.eventId),this.shouldPersist=!0)})})}),Wt(this,"setMethods",i=>({addTrace:s=>this.addTrace(i,s),setError:s=>this.setError(i,s)})),Wt(this,"addTrace",(i,s)=>{const o=this.events.get(i);o&&(o.props.properties.trace.push(s),this.events.set(i,o),this.shouldPersist=!0)}),Wt(this,"setError",(i,s)=>{const o=this.events.get(i);o&&(o.props.type=s,o.timestamp=Date.now(),this.events.set(i,o),this.shouldPersist=!0)}),Wt(this,"persist",async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1}),Wt(this,"restore",async()=>{try{const i=await this.core.storage.getItem(this.storageKey)||[];if(!i.length)return;i.forEach(s=>{this.events.set(s.eventId,Kc(Kc({},s),this.setMethods(s.eventId)))})}catch(i){this.logger.warn(i)}}),Wt(this,"submit",async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const i=[];for(const[s,o]of this.events)o.props.type&&i.push(o);if(i.length!==0)try{if((await this.sendEvent(i)).ok)for(const s of i)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}}),Wt(this,"sendEvent",async i=>{const s=this.getAppDomain()?"":"&sp=desktop";return await fetch(`${ZW}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Vy}${s}`,{method:"POST",body:JSON.stringify(i)})}),Wt(this,"getAppDomain",()=>j8().url),this.logger=_n(r,this.context),this.telemetryEnabled=n,n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var JQ=Object.defineProperty,x3=Object.getOwnPropertySymbols,ZQ=Object.prototype.hasOwnProperty,XQ=Object.prototype.propertyIsEnumerable,ew=(t,e,r)=>e in t?JQ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,A3=(t,e)=>{for(var r in e||(e={}))ZQ.call(e,r)&&ew(t,r,e[r]);if(x3)for(var r of x3(e))XQ.call(e,r)&&ew(t,r,e[r]);return t},He=(t,e,r)=>ew(t,typeof e!="symbol"?e+"":e,r);let eJ=class mP extends DK{constructor(e){var r;super(e),He(this,"protocol",eP),He(this,"version",tP),He(this,"name",Hy),He(this,"relayUrl"),He(this,"projectId"),He(this,"customStoragePrefix"),He(this,"events",new An.EventEmitter),He(this,"logger"),He(this,"heartbeat"),He(this,"relayer"),He(this,"crypto"),He(this,"storage"),He(this,"history"),He(this,"expirer"),He(this,"pairing"),He(this,"verify"),He(this,"echoClient"),He(this,"linkModeSupportedApps"),He(this,"eventClient"),He(this,"initialized",!1),He(this,"logChunkController"),He(this,"on",(a,l)=>this.events.on(a,l)),He(this,"once",(a,l)=>this.events.once(a,l)),He(this,"off",(a,l)=>this.events.off(a,l)),He(this,"removeListener",(a,l)=>this.events.removeListener(a,l)),He(this,"dispatchEnvelope",({topic:a,message:l,sessionExists:c})=>{if(!a||!l)return;const u={topic:a,message:l,publishedAt:Date.now(),transportType:mt.link_mode};this.relayer.onLinkMessageEvent(u,{sessionExists:c})});const n=this.getGlobalCore(e==null?void 0:e.customStoragePrefix);if(n)try{return this.customStoragePrefix=n.customStoragePrefix,this.logger=n.logger,this.heartbeat=n.heartbeat,this.crypto=n.crypto,this.history=n.history,this.expirer=n.expirer,this.storage=n.storage,this.relayer=n.relayer,this.pairing=n.pairing,this.verify=n.verify,this.echoClient=n.echoClient,this.linkModeSupportedApps=n.linkModeSupportedApps,this.eventClient=n.eventClient,this.initialized=n.initialized,this.logChunkController=n.logChunkController,n}catch(a){console.warn("Failed to copy global core",a)}this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||nP,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const i=bj({level:typeof(e==null?void 0:e.logger)=="string"&&e.logger?e.logger:vW.logger,name:Hy}),{logger:s,chunkLoggerController:o}=L8({opts:i,maxSizeInBytes:e==null?void 0:e.maxLogBlobSizeInBytes,loggerOverride:e==null?void 0:e.logger});this.logChunkController=o,(r=this.logChunkController)!=null&&r.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,l;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((l=this.logChunkController)==null||l.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=_n(s,this.name),this.heartbeat=new QV,this.crypto=new PY(this,this.logger,e==null?void 0:e.keychain),this.history=new BQ(this,this.logger),this.expirer=new FQ(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new NK(A3(A3({},bW),e==null?void 0:e.storageOptions)),this.relayer=new eQ({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new RQ(this,this.logger),this.verify=new qQ(this,this.logger,this.storage),this.echoClient=new KQ(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new QQ(this,this.logger,e==null?void 0:e.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const r=new mP(e);await r.initialize();const n=await r.crypto.getClientId();return await r.storage.setItem(RW,n),r}get context(){return nn(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return(e=this.logChunkController)==null?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(t3,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(t3)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(e,`Core Initialization Failure at epoch ${Date.now()}`),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${e}`,n=`${r}_count`;return globalThis[n]=(globalThis[n]||0)+1,globalThis[n]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[n]} times.`),globalThis[r]}catch(r){console.warn("Failed to get global WalletConnect core",r);return}}setGlobalCore(e){var r;try{if(this.isGlobalCoreDisabled())return;const n=`_walletConnectCore_${((r=e.opts)==null?void 0:r.customStoragePrefix)||""}`;globalThis[n]=e}catch(n){console.warn("Failed to set global WalletConnect core",n)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&wW.DISABLE_GLOBAL_CORE==="true"}catch{return!0}}};const tJ=eJ,yP="wc",wP=2,vP="client",a1=`${yP}@${wP}:${vP}:`,Wg={name:vP,logger:"error"},_3="WALLETCONNECT_DEEPLINK_CHOICE",rJ="proposal",S3="Proposal expired",nJ="session",sl=te.SEVEN_DAYS,iJ="engine",sr={wc_sessionPropose:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1104},res:{ttl:te.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1106},res:{ttl:te.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:te.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1112},res:{ttl:te.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:te.ONE_DAY,prompt:!1,tag:1114},res:{ttl:te.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:te.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:te.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:te.FIVE_MINUTES,prompt:!1,tag:1119}}},Gg={min:te.FIVE_MINUTES,max:te.SEVEN_DAYS},Ai={idle:"IDLE",active:"ACTIVE"},sJ={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"},sui_signAndExecuteTransaction:{key:"digest"},sui_signTransaction:{key:""},hedera_signAndExecuteTransaction:{key:"transactionId"},hedera_executeTransaction:{key:"transactionId"},near_signTransaction:{key:""},near_signTransactions:{key:""},tron_signTransaction:{key:"txID"},xrpl_signTransaction:{key:""},xrpl_signTransactionFor:{key:""},algo_signTxn:{key:""},sendTransfer:{key:"txid"},stacks_stxTransfer:{key:"txId"},polkadot_signTransaction:{key:""},cosmos_signDirect:{key:""}},oJ="request",aJ=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],lJ="wc",cJ="auth",uJ="authKeys",fJ="pairingTopics",hJ="requests",Jp=`${lJ}@${1.5}:${cJ}:`,Xh=`${Jp}:PUB_KEY`;var dJ=Object.defineProperty,pJ=Object.defineProperties,gJ=Object.getOwnPropertyDescriptors,I3=Object.getOwnPropertySymbols,mJ=Object.prototype.hasOwnProperty,yJ=Object.prototype.propertyIsEnumerable,tw=(t,e,r)=>e in t?dJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Oe=(t,e)=>{for(var r in e||(e={}))mJ.call(e,r)&&tw(t,r,e[r]);if(I3)for(var r of I3(e))yJ.call(e,r)&&tw(t,r,e[r]);return t},or=(t,e)=>pJ(t,gJ(e)),G=(t,e,r)=>tw(t,typeof e!="symbol"?e+"":e,r);class wJ extends QK{constructor(e){super(e),G(this,"name",iJ),G(this,"events",new bv),G(this,"initialized",!1),G(this,"requestQueue",{state:Ai.idle,queue:[]}),G(this,"sessionRequestQueue",{state:Ai.idle,queue:[]}),G(this,"emittedSessionRequests",new Zj({limit:500})),G(this,"requestQueueDelay",te.ONE_SECOND),G(this,"expectedPairingMethodMap",new Map),G(this,"recentlyDeletedMap",new Map),G(this,"recentlyDeletedLimit",200),G(this,"relayMessageCache",[]),G(this,"pendingSessions",new Map),G(this,"init",async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(sr)}),this.initialized=!0,setTimeout(async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},te.toMiliseconds(this.requestQueueDelay)))}),G(this,"connect",async r=>{var n;this.isInitialized(),await this.confirmOnlineStateOrThrow();const i=or(Oe({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(i),i.optionalNamespaces=lV(i.requiredNamespaces,i.optionalNamespaces),i.requiredNamespaces={};const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:a,sessionProperties:l,scopedProperties:c,relays:u,authentication:f,walletPay:h}=i,g=((n=f==null?void 0:f[0])==null?void 0:n.ttl)||sr.wc_sessionPropose.req.ttl||te.FIVE_MINUTES;this.validateRequestExpiry(g);let w=s,v,O=!1;try{if(w){const B=this.client.core.pairing.pairings.get(w);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),O=B.active}}catch(B){throw this.client.logger.error(`connect() -> pairing.get(${w}) failed`),B}if(!w||!O){const{topic:B,uri:z}=await this.client.core.pairing.create({internal:{skipSubscribe:!0}});w=B,v=z}if(!w){const{message:B}=ne("NO_MATCHING_KEY",`connect() pairing topic: ${w}`);throw new Error(B)}const A=await this.client.core.crypto.generateKeyPair(),I=Dt(g),_=Oe(or(Oe(Oe({requiredNamespaces:o,optionalNamespaces:a,relays:u??[{protocol:rP}],proposer:{publicKey:A,metadata:this.client.metadata},expiryTimestamp:I,pairingTopic:w},l&&{sessionProperties:l}),c&&{scopedProperties:c}),{id:Pi()}),(f||h)&&{requests:{authentication:f==null?void 0:f.map(B=>{const{domain:z,chains:K,nonce:L,uri:P,exp:p,nbf:d,type:m,statement:b,requestId:E,resources:S,signatureTypes:N}=B;return{domain:z,chains:K,nonce:L,type:m??"caip122",aud:P,version:"1",iat:new Date().toISOString(),exp:p,nbf:d,statement:b,requestId:E,resources:S,signatureTypes:N}}),walletPay:h}}),T=Te("session_connect",_.id),{reject:D,resolve:R,done:$}=la(g,S3),M=({id:B})=>{B===_.id&&(this.client.events.off("proposal_expire",M),this.pendingSessions.delete(_.id),this.events.emit(T,{error:{message:S3,code:0}}))};return this.client.events.on("proposal_expire",M),this.events.once(T,({error:B,session:z})=>{this.client.events.off("proposal_expire",M),B?D(B):z&&R(z)}),await this.setProposal(_.id,_),await this.sendProposeSession({proposal:_,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:{correlationId:_.id}}}).catch(B=>{throw this.deleteProposal(_.id),B}),{uri:v,approval:$}}),G(this,"pair",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(r)}catch(n){throw this.client.logger.error("pair() failed"),n}}),G(this,"approve",async r=>{var n,i,s;const o=this.client.core.eventClient.createEvent({properties:{topic:(n=r==null?void 0:r.id)==null?void 0:n.toString(),trace:[Zn.session_approve_started]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(z){throw o.setError(na.no_internet_connection),z}try{await this.isValidProposalId(r==null?void 0:r.id)}catch(z){throw this.client.logger.error(`approve() -> proposal.get(${r==null?void 0:r.id}) failed`),o.setError(na.proposal_not_found),z}try{await this.isValidApprove(r)}catch(z){throw this.client.logger.error("approve() -> isValidApprove() failed"),o.setError(na.session_approve_namespace_validation_failure),z}const{id:a,relayProtocol:l,namespaces:c,sessionProperties:u,scopedProperties:f,sessionConfig:h,proposalRequestsResponses:g}=r,w=this.client.proposal.get(a);this.client.core.eventClient.deleteEvent({eventId:o.eventId});const{pairingTopic:v,proposer:O,requiredNamespaces:A,optionalNamespaces:I}=w;let _=(i=this.client.core.eventClient)==null?void 0:i.getEvent({topic:v});_||(_=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Zn.session_approve_started,properties:{topic:v,trace:[Zn.session_approve_started,Zn.session_namespaces_validation_success]}}));const T=await this.client.core.crypto.generateKeyPair(),D=O.publicKey,R=await this.client.core.crypto.generateSharedKey(T,D),$=or(Oe(Oe(Oe({relay:{protocol:l??"irn"},namespaces:c,controller:{publicKey:T,metadata:this.client.metadata},expiry:Dt(sl)},u&&{sessionProperties:u}),f&&{scopedProperties:f}),h&&{sessionConfig:h}),{proposalRequestsResponses:g}),M=mt.relay;_.addTrace(Zn.subscribing_session_topic);try{await this.client.core.relayer.subscribe(R,{transportType:M,internal:{skipSubscribe:!0}})}catch(z){throw _.setError(na.subscribe_session_topic_failure),z}_.addTrace(Zn.subscribe_session_topic_success);const B=or(Oe({},$),{topic:R,requiredNamespaces:A,optionalNamespaces:I,pairingTopic:v,acknowledged:!1,self:$.controller,peer:{publicKey:O.publicKey,metadata:O.metadata},controller:T,transportType:mt.relay,authentication:g==null?void 0:g.authentication,walletPayResult:g==null?void 0:g.walletPay});await this.client.session.set(R,B),_.addTrace(Zn.store_session);try{await this.sendApproveSession({sessionTopic:R,proposal:w,pairingProposalResponse:{relay:{protocol:l??"irn"},responderPublicKey:T},sessionSettleRequest:$,publishOpts:{internal:{throwOnFailedPublish:!0},tvf:Oe({correlationId:a},this.getTVFApproveParams(B))}}),_.addTrace(Zn.session_approve_publish_success)}catch(z){throw this.client.logger.error(z),this.client.session.delete(R,yt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(R),z}return this.client.core.eventClient.deleteEvent({eventId:_.eventId}),await this.client.core.pairing.updateMetadata({topic:v,metadata:O.metadata}),await this.deleteProposal(a),await this.client.core.pairing.activate({topic:v}),await this.setExpiry(R,Dt(sl)),{topic:R,acknowledged:()=>Promise.resolve(this.client.session.get(R))}}),G(this,"reject",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(r)}catch(o){throw this.client.logger.error("reject() -> isValidReject() failed"),o}const{id:n,reason:i}=r;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(o){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),o}s&&await this.sendError({id:n,topic:s,error:i,rpcOpts:sr.wc_sessionPropose.reject}),await this.deleteProposal(n)}),G(this,"update",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(r)}catch(f){throw this.client.logger.error("update() -> isValidUpdate() failed"),f}const{topic:n,namespaces:i}=r,{done:s,resolve:o,reject:a}=la(te.FIVE_MINUTES,"Session update request expired without receiving any acknowledgement"),l=Pi(),c=bo().toString(),u=this.client.session.get(n).namespaces;return this.events.once(Te("session_update",l),({error:f})=>{f?a(f):o()}),await this.client.session.update(n,{namespaces:i}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:i},throwOnFailedPublish:!0,clientRpcId:l,relayRpcId:c}).catch(f=>{this.client.logger.error(f),this.client.session.update(n,{namespaces:u}),a(f)}),{acknowledged:s}}),G(this,"extend",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(r)}catch(l){throw this.client.logger.error("extend() -> isValidExtend() failed"),l}const{topic:n}=r,i=Pi(),{done:s,resolve:o,reject:a}=la(te.FIVE_MINUTES,"Session extend request expired without receiving any acknowledgement");return this.events.once(Te("session_extend",i),({error:l})=>{l?a(l):o()}),await this.setExpiry(n,Dt(sl)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:i,throwOnFailedPublish:!0}).catch(l=>{a(l)}),{acknowledged:s}}),G(this,"request",async r=>{this.isInitialized();try{await this.isValidRequest(r)}catch(O){throw this.client.logger.error("request() -> isValidRequest() failed"),O}const{chainId:n,request:i,topic:s,expiry:o=sr.wc_sessionRequest.req.ttl}=r,a=this.client.session.get(s);(a==null?void 0:a.transportType)===mt.relay&&await this.confirmOnlineStateOrThrow();const l=Pi(),c=bo().toString(),{done:u,resolve:f,reject:h}=la(o,"Request expired. Please try again.");this.events.once(Te("session_request",l),({error:O,result:A})=>{O?h(O):f(A)});const g="wc_sessionRequest",w=this.getAppLinkIfEnabled(a.peer.metadata,a.transportType);if(w)return await this.sendRequest({clientRpcId:l,relayRpcId:c,topic:s,method:g,params:{request:or(Oe({},i),{expiryTimestamp:Dt(o)}),chainId:n},expiry:o,throwOnFailedPublish:!0,appLink:w}).catch(O=>h(O)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:l}),await u();const v={request:or(Oe({},i),{expiryTimestamp:Dt(o)}),chainId:n};return await Promise.all([new Promise(async O=>{await this.sendRequest({clientRpcId:l,relayRpcId:c,topic:s,method:g,params:v,expiry:o,throwOnFailedPublish:!0,tvf:this.getTVFParams(l,v)}).catch(A=>h(A)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:n,id:l}),O()}),new Promise(async O=>{var A;if(!((A=a.sessionConfig)!=null&&A.disableDeepLink)){const I=await Wj(this.client.core.storage,_3);await Hj({id:l,topic:s,wcDeepLink:I})}O()}),u()]).then(O=>O[2])}),G(this,"respond",async r=>{var n,i;this.isInitialized();const s=this.client.core.eventClient.createEvent({properties:{topic:(r==null?void 0:r.topic)||((i=(n=r==null?void 0:r.response)==null?void 0:n.id)==null?void 0:i.toString()),trace:[Zn.session_request_response_started]}});try{await this.isValidRespond(r)}catch(f){throw s.addTrace(f==null?void 0:f.message),s.setError(na.session_request_response_validation_failure),f}s.addTrace(Zn.session_request_response_validation_success);const{topic:o,response:a}=r,{id:l}=a,c=this.client.session.get(o);c.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const u=this.getAppLinkIfEnabled(c.peer.metadata,c.transportType);try{s.addTrace(Zn.session_request_response_publish_started),Ci(a)?await this.sendResult({id:l,topic:o,result:a.result,throwOnFailedPublish:!0,appLink:u}):Dn(a)&&await this.sendError({id:l,topic:o,error:a.error,appLink:u}),this.cleanupAfterResponse(r)}catch(f){throw s.addTrace(f==null?void 0:f.message),s.setError(na.session_request_response_publish_failure),f}}),G(this,"ping",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(r)}catch(i){throw this.client.logger.error("ping() -> isValidPing() failed"),i}const{topic:n}=r;if(this.client.session.keys.includes(n)){const i=Pi(),s=bo().toString(),{done:o,resolve:a,reject:l}=la(te.FIVE_MINUTES,"Ping request expired without receiving any acknowledgement");this.events.once(Te("session_ping",i),({error:c})=>{c?l(c):a()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:i,relayRpcId:s}),o()])}else this.client.core.pairing.pairings.keys.includes(n)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:n}))}),G(this,"emit",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(r);const{topic:n,event:i,chainId:s}=r,o=bo().toString(),a=Pi();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:i,chainId:s},throwOnFailedPublish:!0,relayRpcId:o,clientRpcId:a})}),G(this,"disconnect",async r=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(r);const{topic:n}=r;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:yt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:i}=ne("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(i)}}),G(this,"find",r=>(this.isInitialized(),this.client.session.getAll().filter(n=>fV(n,r)))),G(this,"getPendingSessionRequests",()=>this.client.pendingRequest.getAll()),G(this,"authenticate",async(r,n)=>{var i;this.isInitialized(),this.isValidAuthenticate(r);const s=n&&this.client.core.linkModeSupportedApps.includes(n)&&((i=this.client.metadata.redirect)==null?void 0:i.linkMode),o=s?mt.link_mode:mt.relay;o===mt.relay&&await this.confirmOnlineStateOrThrow();const{chains:a,statement:l="",uri:c,domain:u,nonce:f,type:h,exp:g,nbf:w,methods:v=[],expiry:O}=r,A=[...r.resources||[]],{topic:I,uri:_}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:o});this.client.logger.info({message:"Generated new pairing",pairing:{topic:I,uri:_}});const T=await this.client.core.crypto.generateKeyPair(),D=Yh(T);if(await Promise.all([this.client.auth.authKeys.set(Xh,{responseTopic:D,publicKey:T}),this.client.auth.pairingTopics.set(D,{topic:D,pairingTopic:I})]),await this.client.core.relayer.subscribe(D,{transportType:o}),this.client.logger.info(`sending request to new pairing topic: ${I}`),v.length>0){const{namespace:S}=bs(a[0]);let N=fq(S,"request",v);Gh(A)&&(N=dq(N,A.pop())),A.push(N)}const R=O&&O>sr.wc_sessionAuthenticate.req.ttl?O:sr.wc_sessionAuthenticate.req.ttl,$={authPayload:{type:h??"caip122",chains:a,statement:l,aud:c,domain:u,version:"1",nonce:f,iat:new Date().toISOString(),exp:g,nbf:w,resources:A},requester:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Dt(R)},M={eip155:{chains:a,methods:[...new Set(["personal_sign",...v])],events:["chainChanged","accountsChanged"]}},B={requiredNamespaces:{},optionalNamespaces:M,relays:[{protocol:"irn"}],pairingTopic:I,proposer:{publicKey:T,metadata:this.client.metadata},expiryTimestamp:Dt(sr.wc_sessionPropose.req.ttl),id:Pi()},{done:z,resolve:K,reject:L}=la(R,"Request expired"),P=Pi(),p=Te("session_connect",B.id),d=Te("session_request",P),m=async({error:S,session:N})=>{this.events.off(d,b),S?L(S):N&&K({session:N})},b=async S=>{var N,C,y;if(await this.deletePendingAuthRequest(P,{message:"fulfilled",code:0}),S.error){const V=yt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return S.error.code===V.code?void 0:(this.events.off(p,m),L(S.error.message))}await this.deleteProposal(B.id),this.events.off(p,m);const{cacaos:k,responder:q}=S.result,x=[],U=[];for(const V of k){await ox({cacao:V,projectId:this.client.core.projectId})||(this.client.logger.error(V,"Signature verification failed"),L(yt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:Z}=V,X=Gh(Z.resources),J=[Ty(Z.iss)],de=Gd(Z.iss);if(X){const ie=ax(X),ce=lx(X);x.push(...ie),J.push(...ce)}for(const ie of J)U.push(`${ie}:${de}`)}const F=await this.client.core.crypto.generateSharedKey(T,q.publicKey);let H;x.length>0&&(H={topic:F,acknowledged:!0,self:{publicKey:T,metadata:this.client.metadata},peer:q,controller:q.publicKey,expiry:Dt(sl),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:I,namespaces:Rx([...new Set(x)],[...new Set(U)]),transportType:o},await this.client.core.relayer.subscribe(F,{transportType:o}),await this.client.session.set(F,H),I&&await this.client.core.pairing.updateMetadata({topic:I,metadata:q.metadata}),H=this.client.session.get(F)),(N=this.client.metadata.redirect)!=null&&N.linkMode&&(C=q.metadata.redirect)!=null&&C.linkMode&&(y=q.metadata.redirect)!=null&&y.universal&&n&&(this.client.core.addLinkModeSupportedApp(q.metadata.redirect.universal),this.client.session.update(F,{transportType:mt.link_mode})),K({auths:k,session:H})};this.events.once(p,m),this.events.once(d,b);let E;try{if(s){const S=ai("wc_sessionAuthenticate",$,P);this.client.core.history.set(I,S);const N=await this.client.core.crypto.encode("",S,{type:If,encoding:go});E=mh(n,I,N)}else await Promise.all([this.sendRequest({topic:I,method:"wc_sessionAuthenticate",params:$,expiry:r.expiry,throwOnFailedPublish:!0,clientRpcId:P}),this.sendRequest({topic:I,method:"wc_sessionPropose",params:B,expiry:sr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:B.id})])}catch(S){throw this.events.off(p,m),this.events.off(d,b),S}return await this.setProposal(B.id,B),await this.setAuthRequest(P,{request:or(Oe({},$),{verifyContext:{}}),pairingTopic:I,transportType:o}),{uri:E??_,response:z}}),G(this,"approveSessionAuthenticate",async r=>{const{id:n,auths:i}=r,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[ia.authenticated_session_approve_started]}});try{this.isInitialized()}catch(O){throw s.setError(Hc.no_internet_connection),O}const o=this.getPendingAuthRequest(n);if(!o)throw s.setError(Hc.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const a=o.transportType||mt.relay;a===mt.relay&&await this.confirmOnlineStateOrThrow();const l=o.requester.publicKey,c=await this.client.core.crypto.generateKeyPair(),u=Yh(l),f={type:Es,receiverPublicKey:l,senderPublicKey:c},h=[],g=[];for(const O of i){if(!await ox({cacao:O,projectId:this.client.core.projectId})){s.setError(Hc.invalid_cacao);const D=yt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:u,error:D,encodeOpts:f}),new Error(D.message)}s.addTrace(ia.cacaos_verified);const{p:A}=O,I=Gh(A.resources),_=[Ty(A.iss)],T=Gd(A.iss);if(I){const D=ax(I),R=lx(I);h.push(...D),_.push(...R)}for(const D of _)g.push(`${D}:${T}`)}const w=await this.client.core.crypto.generateSharedKey(c,l);s.addTrace(ia.create_authenticated_session_topic);let v;if((h==null?void 0:h.length)>0){v={topic:w,acknowledged:!0,self:{publicKey:c,metadata:this.client.metadata},peer:{publicKey:l,metadata:o.requester.metadata},controller:l,expiry:Dt(sl),authentication:i,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:o.pairingTopic,namespaces:Rx([...new Set(h)],[...new Set(g)]),transportType:a},s.addTrace(ia.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(w,{transportType:a})}catch(O){throw s.setError(Hc.subscribe_authenticated_session_topic_failure),O}s.addTrace(ia.subscribe_authenticated_session_topic_success),await this.client.session.set(w,v),s.addTrace(ia.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:o.pairingTopic,metadata:o.requester.metadata})}s.addTrace(ia.publishing_authenticated_session_approve);try{await this.sendResult({topic:u,id:n,result:{cacaos:i,responder:{publicKey:c,metadata:this.client.metadata}},encodeOpts:f,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(o.requester.metadata,a)})}catch(O){throw s.setError(Hc.authenticated_session_approve_publish_failure),O}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:o.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:v}}),G(this,"rejectSessionAuthenticate",async r=>{this.isInitialized();const{id:n,reason:i}=r,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);s.transportType===mt.relay&&await this.confirmOnlineStateOrThrow();const o=s.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),l=Yh(o),c={type:Es,receiverPublicKey:o,senderPublicKey:a};await this.sendError({id:n,topic:l,error:i,encodeOpts:c,rpcOpts:sr.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(s.requester.metadata,s.transportType)}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.deleteProposal(n)}),G(this,"formatAuthMessage",r=>{this.isInitialized();const{request:n,iss:i}=r;return a4(n,i)}),G(this,"processRelayMessageCache",()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const r=this.relayMessageCache.shift();r&&await this.onRelayMessage(r)}catch(r){this.client.logger.error(r)}},50)}),G(this,"cleanupDuplicatePairings",async r=>{if(r.pairingTopic)try{const n=this.client.core.pairing.pairings.get(r.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,a;return((o=s.peerMetadata)==null?void 0:o.url)&&((a=s.peerMetadata)==null?void 0:a.url)===r.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}}),G(this,"deleteSession",async r=>{var n;const{topic:i,expirerHasDeleted:s=!1,emitEvent:o=!0,id:a=0}=r,{self:l}=this.client.session.get(i);await this.client.core.relayer.unsubscribe(i),await this.client.session.delete(i,yt("USER_DISCONNECTED")),this.addToRecentlyDeleted(i,"session"),this.client.core.crypto.keychain.has(l.publicKey)&&await this.client.core.crypto.deleteKeyPair(l.publicKey),this.client.core.crypto.keychain.has(i)&&await this.client.core.crypto.deleteSymKey(i),s||this.client.core.expirer.del(i),this.client.core.storage.removeItem(_3).catch(c=>this.client.logger.warn(c)),i===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=Ai.idle),await Promise.all(this.getPendingSessionRequests().filter(c=>c.topic===i).map(c=>this.deletePendingSessionRequest(c.id,yt("USER_DISCONNECTED")))),o&&this.client.events.emit("session_delete",{id:a,topic:i})}),G(this,"deleteProposal",async(r,n)=>{if(n)try{const i=this.client.proposal.get(r),s=this.client.core.eventClient.getEvent({topic:i.pairingTopic});s==null||s.setError(na.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(r,yt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"proposal")}),G(this,"deletePendingSessionRequest",async(r,n,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)]),this.addToRecentlyDeleted(r,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==r),i&&(this.sessionRequestQueue.state=Ai.idle,this.client.events.emit("session_request_expire",{id:r}))}),G(this,"deletePendingAuthRequest",async(r,n,i=!1)=>{await Promise.all([this.client.auth.requests.delete(r,n),i?Promise.resolve():this.client.core.expirer.del(r)])}),G(this,"setExpiry",async(r,n)=>{this.client.session.keys.includes(r)&&(this.client.core.expirer.set(r,n),await this.client.session.update(r,{expiry:n}))}),G(this,"setProposal",async(r,n)=>{this.client.core.expirer.set(r,Dt(sr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(r,n)}),G(this,"setAuthRequest",async(r,n)=>{const{request:i,pairingTopic:s,transportType:o=mt.relay}=n;this.client.core.expirer.set(r,i.expiryTimestamp),await this.client.auth.requests.set(r,{authPayload:i.authPayload,requester:i.requester,expiryTimestamp:i.expiryTimestamp,id:r,pairingTopic:s,verifyContext:i.verifyContext,transportType:o})}),G(this,"setPendingSessionRequest",async r=>{const{id:n,topic:i,params:s,verifyContext:o}=r,a=s.request.expiryTimestamp||Dt(sr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,a),await this.client.pendingRequest.set(n,{id:n,topic:i,params:s,verifyContext:o})}),G(this,"sendRequest",async r=>{const{topic:n,method:i,params:s,expiry:o,relayRpcId:a,clientRpcId:l,throwOnFailedPublish:c,appLink:u,tvf:f,publishOpts:h={}}=r,g=ai(i,s,l);let w;const v=!!u;try{const I=v?go:Kr;w=await this.client.core.crypto.encode(n,g,{encoding:I})}catch(I){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),I}let O;if(aJ.includes(i)){const I=kn(JSON.stringify(g)),_=kn(w);O=await this.client.core.verify.register({id:_,decryptedId:I})}const A=Oe(Oe({},sr[i].req),h);if(A.attestation=O,o&&(A.ttl=o),a&&(A.id=a),this.client.core.history.set(n,g),v){const I=mh(u,n,w);await global.Linking.openURL(I,this.client.name)}else A.tvf=or(Oe({},f),{correlationId:g.id}),c?(A.internal=or(Oe({},A.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,w,A)):this.client.core.relayer.publish(n,w,A).catch(I=>this.client.logger.error(I));return g.id}),G(this,"sendProposeSession",async r=>{const{proposal:n,publishOpts:i}=r,s=ai("wc_sessionPropose",n,n.id);this.client.core.history.set(n.pairingTopic,s);const o=await this.client.core.crypto.encode(n.pairingTopic,s,{encoding:Kr}),a=kn(JSON.stringify(s)),l=kn(o),c=await this.client.core.verify.register({id:l,decryptedId:a});await this.client.core.relayer.publishCustom({payload:{pairingTopic:n.pairingTopic,sessionProposal:o},opts:or(Oe({},i),{publishMethod:"wc_proposeSession",attestation:c})})}),G(this,"sendApproveSession",async r=>{const{sessionTopic:n,pairingProposalResponse:i,proposal:s,sessionSettleRequest:o,publishOpts:a}=r,l=rf(s.id,i),c=await this.client.core.crypto.encode(s.pairingTopic,l,{encoding:Kr}),u=ai("wc_sessionSettle",o,a==null?void 0:a.id),f=await this.client.core.crypto.encode(n,u,{encoding:Kr});this.client.core.history.set(n,u),await this.client.core.relayer.publishCustom({payload:{sessionTopic:n,pairingTopic:s.pairingTopic,sessionProposalResponse:c,sessionSettlementRequest:f},opts:or(Oe({},a),{publishMethod:"wc_approveSession"})})}),G(this,"sendResult",async r=>{const{id:n,topic:i,result:s,throwOnFailedPublish:o,encodeOpts:a,appLink:l}=r,c=rf(n,s);let u;const f=l&&typeof(global==null?void 0:global.Linking)<"u";try{const w=f?go:Kr;u=await this.client.core.crypto.encode(i,c,or(Oe({},a||{}),{encoding:w}))}catch(w){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${i} failed`),w}let h,g;try{h=await this.client.core.history.get(i,n);const w=h.request;try{g=this.getTVFParams(n,w.params,s)}catch(v){this.client.logger.warn(`sendResult() -> getTVFParams() failed: ${v==null?void 0:v.message}`)}}catch(w){throw this.client.logger.error(`sendResult() -> history.get(${i}, ${n}) failed`),w}if(f){const w=mh(l,i,u);await global.Linking.openURL(w,this.client.name)}else{const w=h.request.method,v=sr[w].res;v.tvf=or(Oe({},g),{correlationId:n}),o?(v.internal=or(Oe({},v.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,u,v)):this.client.core.relayer.publish(i,u,v).catch(O=>this.client.logger.error(O))}await this.client.core.history.resolve(c)}),G(this,"sendError",async r=>{const{id:n,topic:i,error:s,encodeOpts:o,rpcOpts:a,appLink:l}=r,c=Gp(n,s);let u;const f=l&&typeof(global==null?void 0:global.Linking)<"u";try{const g=f?go:Kr;u=await this.client.core.crypto.encode(i,c,or(Oe({},o||{}),{encoding:g}))}catch(g){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${i} failed`),g}let h;try{h=await this.client.core.history.get(i,n)}catch(g){throw this.client.logger.error(`sendError() -> history.get(${i}, ${n}) failed`),g}if(f){const g=mh(l,i,u);await global.Linking.openURL(g,this.client.name)}else{const g=h.request.method,w=a||sr[g].res;this.client.core.relayer.publish(i,u,w)}await this.client.core.history.resolve(c)}),G(this,"cleanup",async()=>{const r=[],n=[];this.client.session.getAll().forEach(i=>{let s=!1;Ni(i.expiry)&&(s=!0),this.client.core.crypto.keychain.has(i.topic)||(s=!0),s&&r.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Ni(i.expiryTimestamp)&&n.push(i.id)}),await Promise.all([...r.map(i=>this.deleteSession({topic:i})),...n.map(i=>this.deleteProposal(i))])}),G(this,"onProviderMessageEvent",async r=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(r):await this.onRelayMessage(r)}),G(this,"onRelayEventRequest",async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()}),G(this,"processRequestsQueue",async()=>{if(this.requestQueue.state===Ai.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ai.active;const r=this.requestQueue.queue.shift();if(r)try{await this.processRequest(r)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=Ai.idle}),G(this,"processRequest",async r=>{const{topic:n,payload:i,attestation:s,transportType:o,encryptedId:a}=r,l=i.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:l}))switch(l){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:i,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,i);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,i);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,i);case"wc_sessionPing":return await this.onSessionPingRequest(n,i);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,i);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});case"wc_sessionEvent":return await this.onSessionEventRequest(n,i);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:i,attestation:s,encryptedId:a,transportType:o});default:return this.client.logger.info(`Unsupported request method ${l}`)}}),G(this,"onRelayEventResponse",async r=>{const{topic:n,payload:i,transportType:s}=r,o=(await this.client.core.history.get(n,i.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(n,i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(n,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,i);case"wc_sessionExtend":return this.onSessionExtendResponse(n,i);case"wc_sessionPing":return this.onSessionPingResponse(n,i);case"wc_sessionRequest":return this.onSessionRequestResponse(n,i);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,i);default:return this.client.logger.info(`Unsupported response method ${o}`)}}),G(this,"onRelayEventUnknownPayload",r=>{const{topic:n}=r,{message:i}=ne("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)}),G(this,"shouldIgnorePairingRequest",r=>{const{topic:n,requestMethod:i}=r,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(i)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)}),G(this,"onSessionProposeRequest",async r=>{const{topic:n,payload:i,attestation:s,encryptedId:o}=r,{params:a,id:l}=i;try{const c=this.client.core.eventClient.getEvent({topic:n});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),c==null||c.setError(ss.proposal_listener_not_found)),this.isValidConnect(Oe({},i.params));const u=a.expiryTimestamp||Dt(sr.wc_sessionPropose.req.ttl),f=Oe({id:l,pairingTopic:n,expiryTimestamp:u,attestation:s,encryptedId:o},a);await this.setProposal(l,f);const h=await this.getVerifyContext({attestationId:s,hash:kn(JSON.stringify(i)),encryptedId:o,metadata:f.proposer.metadata});c==null||c.addTrace(_i.emit_session_proposal),this.client.events.emit("session_proposal",{id:l,params:f,verifyContext:h})}catch(c){await this.sendError({id:l,topic:n,error:c,rpcOpts:sr.wc_sessionPropose.autoReject}),this.client.logger.error(c)}}),G(this,"onSessionProposeResponse",async(r,n,i)=>{const{id:s}=n;if(Ci(n)){const{result:o}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const a=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const l=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const c=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:c});const u=await this.client.core.crypto.generateSharedKey(l,c);this.pendingSessions.set(s,{sessionTopic:u,pairingTopic:r,proposalId:s,publicKey:l});const f=await this.client.core.relayer.subscribe(u,{transportType:i});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:r})}else if(Dn(n)){await this.deleteProposal(s);const o=Te("session_connect",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(o,{error:n.error})}}),G(this,"onSessionSettleRequest",async(r,n)=>{const{id:i,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:a,expiry:l,namespaces:c,sessionProperties:u,scopedProperties:f,sessionConfig:h,proposalRequestsResponses:g}=n.params,w=[...this.pendingSessions.values()].find(A=>A.sessionTopic===r);if(!w)return this.client.logger.error(`Pending session not found for topic ${r}`);const v=this.client.proposal.get(w.proposalId),O=or(Oe(Oe(Oe({topic:r,relay:o,expiry:l,namespaces:c,acknowledged:!0,pairingTopic:w.pairingTopic,requiredNamespaces:v.requiredNamespaces,optionalNamespaces:v.optionalNamespaces,controller:a.publicKey,self:{publicKey:w.publicKey,metadata:this.client.metadata},peer:{publicKey:a.publicKey,metadata:a.metadata}},u&&{sessionProperties:u}),f&&{scopedProperties:f}),h&&{sessionConfig:h}),{transportType:mt.relay,authentication:g==null?void 0:g.authentication,walletPayResult:g==null?void 0:g.walletPay});await this.client.session.set(O.topic,O),await this.setExpiry(O.topic,O.expiry),await this.client.core.pairing.updateMetadata({topic:w.pairingTopic,metadata:O.peer.metadata}),this.pendingSessions.delete(w.proposalId),this.deleteProposal(w.proposalId,!1),this.cleanupDuplicatePairings(O),await this.sendResult({id:n.id,topic:r,throwOnFailedPublish:!0,result:!0}),this.client.events.emit("session_connect",{session:O}),this.events.emit(Te("session_connect",w.proposalId),{session:O})}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),G(this,"onSessionSettleResponse",async(r,n)=>{const{id:i}=n;Ci(n)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Te("session_approve",i),{})):Dn(n)&&(await this.client.session.delete(r,yt("USER_DISCONNECTED")),this.events.emit(Te("session_approve",i),{error:n.error}))}),G(this,"onSessionUpdateRequest",async(r,n)=>{const{params:i,id:s}=n;try{const o=`${r}_session_update`,a=zc.get(o);if(a&&this.isRequestOutOfSync(a,s)){this.client.logger.warn(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:r,error:yt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(Oe({topic:r},i));try{zc.set(o,s),await this.client.session.update(r,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:r,result:!0})}catch(l){throw zc.delete(o),l}this.client.events.emit("session_update",{id:s,topic:r,params:i})}catch(o){await this.sendError({id:s,topic:r,error:o}),this.client.logger.error(o)}}),G(this,"isRequestOutOfSync",(r,n)=>n.toString().slice(0,-3)<r.toString().slice(0,-3)),G(this,"onSessionUpdateResponse",(r,n)=>{const{id:i}=n,s=Te("session_update",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ci(n)?this.events.emit(Te("session_update",i),{}):Dn(n)&&this.events.emit(Te("session_update",i),{error:n.error})}),G(this,"onSessionExtendRequest",async(r,n)=>{const{id:i}=n;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Dt(sl)),await this.sendResult({id:i,topic:r,result:!0}),this.client.events.emit("session_extend",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),G(this,"onSessionExtendResponse",(r,n)=>{const{id:i}=n,s=Te("session_extend",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ci(n)?this.events.emit(Te("session_extend",i),{}):Dn(n)&&this.events.emit(Te("session_extend",i),{error:n.error})}),G(this,"onSessionPingRequest",async(r,n)=>{const{id:i}=n;try{this.isValidPing({topic:r}),await this.sendResult({id:i,topic:r,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:i,topic:r})}catch(s){await this.sendError({id:i,topic:r,error:s}),this.client.logger.error(s)}}),G(this,"onSessionPingResponse",(r,n)=>{const{id:i}=n,s=Te("session_ping",i);setTimeout(()=>{if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners 2176`);Ci(n)?this.events.emit(Te("session_ping",i),{}):Dn(n)&&this.events.emit(Te("session_ping",i),{error:n.error})},500)}),G(this,"onSessionDeleteRequest",async(r,n)=>{const{id:i}=n;try{await this.isValidDisconnect({topic:r,reason:n.params}),this.cleanupPendingSentRequestsForTopic({topic:r,error:yt("USER_DISCONNECTED")}),await this.deleteSession({topic:r,id:i})}catch(s){this.client.logger.error(s)}}),G(this,"onSessionRequest",async r=>{var n,i,s;const{topic:o,payload:a,attestation:l,encryptedId:c,transportType:u}=r,{id:f,params:h}=a;try{await this.isValidRequest(Oe({topic:o},h));const g=this.client.session.get(o),w=await this.getVerifyContext({attestationId:l,hash:kn(JSON.stringify(ai("wc_sessionRequest",h,f))),encryptedId:c,metadata:g.peer.metadata,transportType:u}),v={id:f,topic:o,params:h,verifyContext:w};await this.setPendingSessionRequest(v),u===mt.link_mode&&(n=g.peer.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp((i=g.peer.metadata.redirect)==null?void 0:i.universal),(s=this.client.signConfig)!=null&&s.disableRequestQueue?this.emitSessionRequest(v):(this.addSessionRequestToSessionRequestQueue(v),this.processSessionRequestQueue())}catch(g){await this.sendError({id:f,topic:o,error:g}),this.client.logger.error(g)}}),G(this,"onSessionRequestResponse",(r,n)=>{const{id:i}=n,s=Te("session_request",i);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);Ci(n)?this.events.emit(Te("session_request",i),{result:n.result}):Dn(n)&&this.events.emit(Te("session_request",i),{error:n.error})}),G(this,"onSessionEventRequest",async(r,n)=>{const{id:i,params:s}=n;try{const o=`${r}_session_event_${s.event.name}`,a=zc.get(o);if(a&&this.isRequestOutOfSync(a,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit(Oe({topic:r},s)),this.client.events.emit("session_event",{id:i,topic:r,params:s}),zc.set(o,i)}catch(o){await this.sendError({id:i,topic:r,error:o}),this.client.logger.error(o)}}),G(this,"onSessionAuthenticateResponse",(r,n)=>{const{id:i}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:r,payload:n}),Ci(n)?this.events.emit(Te("session_request",i),{result:n.result}):Dn(n)&&this.events.emit(Te("session_request",i),{error:n.error})}),G(this,"onSessionAuthenticateRequest",async r=>{var n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:l}=r;try{const{requester:c,authPayload:u,expiryTimestamp:f}=s.params,h=await this.getVerifyContext({attestationId:o,hash:kn(JSON.stringify(s)),encryptedId:a,metadata:c.metadata,transportType:l}),g={requester:c,pairingTopic:i,id:s.id,authPayload:u,verifyContext:h,expiryTimestamp:f};await this.setAuthRequest(s.id,{request:g,pairingTopic:i,transportType:l}),l===mt.link_mode&&(n=c.metadata.redirect)!=null&&n.universal&&this.client.core.addLinkModeSupportedApp(c.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:h})}catch(c){this.client.logger.error(c);const u=s.params.requester.publicKey,f=await this.client.core.crypto.generateKeyPair(),h=this.getAppLinkIfEnabled(s.params.requester.metadata,l),g={type:Es,receiverPublicKey:u,senderPublicKey:f};await this.sendError({id:s.id,topic:i,error:c,encodeOpts:g,rpcOpts:sr.wc_sessionAuthenticate.autoReject,appLink:h})}}),G(this,"addSessionRequestToSessionRequestQueue",r=>{this.sessionRequestQueue.queue.push(r)}),G(this,"cleanupAfterResponse",r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Ai.idle,this.processSessionRequestQueue()},te.toMiliseconds(this.requestQueueDelay))}),G(this,"cleanupPendingSentRequestsForTopic",({topic:r,error:n})=>{const i=this.client.core.history.pending;i.length>0&&i.filter(s=>s.topic===r&&s.request.method==="wc_sessionRequest").forEach(s=>{this.events.emit(Te("session_request",s.request.id),{error:n})})}),G(this,"processSessionRequestQueue",()=>{if(this.sessionRequestQueue.state===Ai.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.emitSessionRequest(r)}catch(n){this.client.logger.error(n)}}),G(this,"emitSessionRequest",r=>{if(this.emittedSessionRequests.has(r.id)){this.client.logger.warn({id:r.id},`Skipping emitting \`session_request\` event for duplicate request. id: ${r.id}`);return}this.sessionRequestQueue.state=Ai.active,this.emittedSessionRequests.add(r.id),this.client.events.emit("session_request",r)}),G(this,"onPairingCreated",r=>{if(r.methods&&this.expectedPairingMethodMap.set(r.topic,r.methods),r.active)return;const n=this.client.proposal.getAll().find(i=>i.pairingTopic===r.topic);n&&this.onSessionProposeRequest({topic:r.topic,payload:ai("wc_sessionPropose",or(Oe({},n),{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties,scopedProperties:n.scopedProperties}),n.id),attestation:n.attestation,encryptedId:n.encryptedId})}),G(this,"isValidConnect",async r=>{if(!qr(r)){const{message:c}=ne("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(c)}const{pairingTopic:n,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,scopedProperties:a,relays:l}=r;if(Zt(n)||await this.isValidPairingTopic(n),!AV(l)){const{message:c}=ne("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(c)}if(i&&!Zt(i)&&zi(i)!==0){const c="requiredNamespaces are deprecated and are automatically assigned to optionalNamespaces";["fatal","error","silent"].includes(this.client.logger.level)?console.warn(c):this.client.logger.warn(c),this.validateNamespaces(i,"requiredNamespaces")}if(s&&!Zt(s)&&zi(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),o&&!Zt(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Zt(a)){this.validateSessionProps(a,"scopedProperties");const c=Object.keys(i||{}).concat(Object.keys(s||{}));if(!Object.keys(a).every(u=>c.includes(u.split(":")[0])))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(a)}, required/optional namespaces: ${JSON.stringify(c)}`)}}),G(this,"validateNamespaces",(r,n)=>{const i=xV(r,"connect()",n);if(i)throw new Error(i.message)}),G(this,"isValidApprove",async r=>{if(!qr(r))throw new Error(ne("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:n,namespaces:i,relayProtocol:s,sessionProperties:o,scopedProperties:a}=r;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const l=this.client.proposal.get(n),c=Fg(i,"approve()");if(c)throw new Error(c.message);const u=Bx(l.requiredNamespaces,i,"approve()");if(u)throw new Error(u.message);if(!Bt(s,!0)){const{message:f}=ne("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}if(o&&!Zt(o)&&this.validateSessionProps(o,"sessionProperties"),a&&!Zt(a)){this.validateSessionProps(a,"scopedProperties");const f=new Set(Object.keys(i));if(!Object.keys(a).every(h=>f.has(h.split(":")[0])))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(a)}, approved namespaces: ${Array.from(f).join(", ")}`)}}),G(this,"isValidReject",async r=>{if(!qr(r)){const{message:s}=ne("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(s)}const{id:n,reason:i}=r;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!SV(i)){const{message:s}=ne("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}}),G(this,"isValidSessionSettleRequest",r=>{if(!qr(r)){const{message:c}=ne("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(c)}const{relay:n,controller:i,namespaces:s,expiry:o}=r;if(!V4(n)){const{message:c}=ne("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(c)}const a=mV(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);const l=Fg(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Ni(o)){const{message:c}=ne("EXPIRED","onSessionSettleRequest()");throw new Error(c)}}),G(this,"isValidUpdate",async r=>{if(!qr(r)){const{message:l}=ne("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(l)}const{topic:n,namespaces:i}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),o=Fg(i,"update()");if(o)throw new Error(o.message);const a=Bx(s.requiredNamespaces,i,"update()");if(a)throw new Error(a.message)}),G(this,"isValidExtend",async r=>{if(!qr(r)){const{message:i}=ne("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(i)}const{topic:n}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)}),G(this,"isValidRequest",async r=>{if(!qr(r)){const{message:l}=ne("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(l)}const{topic:n,request:i,chainId:s,expiry:o}=r;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!Mx(a,s)){const{message:l}=ne("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(l)}if(!IV(i)){const{message:l}=ne("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(l)}if(!OV(a,s,i.method)){const{message:l}=ne("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(l)}this.validateRequestExpiry(o)}),G(this,"isValidRespond",async r=>{var n;if(!qr(r)){const{message:a}=ne("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(a)}const{topic:i,response:s}=r;try{await this.isValidSessionTopic(i)}catch(a){throw(n=r==null?void 0:r.response)!=null&&n.id&&this.cleanupAfterResponse(r),a}if(!PV(s)){const{message:a}=ne("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(a)}const o=this.client.pendingRequest.get(s.id);if(o.topic!==i){const{message:a}=ne("MISMATCHED_TOPIC",`Request response topic mismatch. reqId: ${s.id}, expected topic: ${o.topic}, received topic: ${i}`);throw new Error(a)}}),G(this,"isValidPing",async r=>{if(!qr(r)){const{message:i}=ne("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),G(this,"isValidEmit",async r=>{if(!qr(r)){const{message:a}=ne("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(a)}const{topic:n,event:i,chainId:s}=r;await this.isValidSessionTopic(n);const{namespaces:o}=this.client.session.get(n);if(!Mx(o,s)){const{message:a}=ne("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(a)}if(!CV(i)){const{message:a}=ne("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}if(!NV(o,s,i.name)){const{message:a}=ne("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(a)}}),G(this,"isValidDisconnect",async r=>{if(!qr(r)){const{message:i}=ne("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(i)}const{topic:n}=r;await this.isValidSessionOrPairingTopic(n)}),G(this,"isValidAuthenticate",r=>{const{chains:n,uri:i,domain:s,nonce:o}=r;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!Bt(i,!1))throw new Error("uri is required parameter");if(!Bt(s,!1))throw new Error("domain is required parameter");if(!Bt(o,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(l=>bs(l).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:a}=bs(n[0]);if(a!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")}),G(this,"getVerifyContext",async r=>{const{attestationId:n,hash:i,encryptedId:s,metadata:o,transportType:a}=r,l={verified:{verifyUrl:o.verifyUrl||bu,validation:"UNKNOWN",origin:o.url||""}};try{if(a===mt.link_mode){const u=this.getAppLinkIfEnabled(o,a);return l.verified.validation=u&&new URL(u).origin===new URL(o.url).origin?"VALID":"INVALID",l}const c=await this.client.core.verify.resolve({attestationId:n,hash:i,encryptedId:s,verifyUrl:o.verifyUrl});c&&(l.verified.origin=c.origin,l.verified.isScam=c.isScam,l.verified.validation=c.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.warn(c)}return this.client.logger.debug(`Verify context: ${JSON.stringify(l)}`),l}),G(this,"validateSessionProps",(r,n)=>{Object.values(r).forEach((i,s)=>{if(i==null){const{message:o}=ne("MISSING_OR_INVALID",`${n} must contain an existing value for each key. Received: ${i} for key ${Object.keys(r)[s]}`);throw new Error(o)}})}),G(this,"getPendingAuthRequest",r=>{const n=this.client.auth.requests.get(r);return typeof n=="object"?n:void 0}),G(this,"addToRecentlyDeleted",(r,n)=>{if(this.recentlyDeletedMap.set(r,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let i=0;const s=this.recentlyDeletedLimit/2;for(const o of this.recentlyDeletedMap.keys()){if(i++>=s)break;this.recentlyDeletedMap.delete(o)}}}),G(this,"checkRecentlyDeleted",r=>{const n=this.recentlyDeletedMap.get(r);if(n){const{message:i}=ne("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${r}`);throw new Error(i)}}),G(this,"isLinkModeEnabled",(r,n)=>{var i,s,o,a,l,c,u,f,h;return!r||n!==mt.link_mode?!1:((s=(i=this.client.metadata)==null?void 0:i.redirect)==null?void 0:s.linkMode)===!0&&((a=(o=this.client.metadata)==null?void 0:o.redirect)==null?void 0:a.universal)!==void 0&&((c=(l=this.client.metadata)==null?void 0:l.redirect)==null?void 0:c.universal)!==""&&((u=r==null?void 0:r.redirect)==null?void 0:u.universal)!==void 0&&((f=r==null?void 0:r.redirect)==null?void 0:f.universal)!==""&&((h=r==null?void 0:r.redirect)==null?void 0:h.linkMode)===!0&&this.client.core.linkModeSupportedApps.includes(r.redirect.universal)&&typeof(global==null?void 0:global.Linking)<"u"}),G(this,"getAppLinkIfEnabled",(r,n)=>{var i;return this.isLinkModeEnabled(r,n)?(i=r==null?void 0:r.redirect)==null?void 0:i.universal:void 0}),G(this,"handleLinkModeMessage",({url:r})=>{if(!r||!r.includes("wc_ev")||!r.includes("topic"))return;const n=GE(r,"topic")||"",i=decodeURIComponent(GE(r,"wc_ev")||""),s=this.client.session.keys.includes(n);s&&this.client.session.update(n,{transportType:mt.link_mode}),this.client.core.dispatchEnvelope({topic:n,message:i,sessionExists:s})}),G(this,"registerLinkModeListeners",async()=>{var r;if(Kv()||jo()&&(r=this.client.metadata.redirect)!=null&&r.linkMode){const n=global==null?void 0:global.Linking;if(typeof n<"u"){n.addEventListener("url",this.handleLinkModeMessage,this.client.name);const i=await n.getInitialURL();i&&setTimeout(()=>{this.handleLinkModeMessage({url:i})},50)}}}),G(this,"getTVFApproveParams",r=>{try{const n=q4(r.namespaces),i=nV(r.namespaces),s=iV(r.namespaces),o=r.sessionProperties,a=r.scopedProperties;return{approvedChains:n,approvedMethods:i,approvedEvents:s,sessionProperties:o,scopedProperties:a}}catch(n){return this.client.logger.warn(n,"Error getting TVF approve params"),{}}}),G(this,"getTVFParams",(r,n,i)=>{var s,o,a;if(!((s=n.request)!=null&&s.method))return{};const l={correlationId:r,rpcMethods:[n.request.method],chainId:n.chainId};try{const c=this.extractTxHashesFromResult(n.request,i);l.txHashes=c,l.contractAddresses=this.isValidContractData(n.request.params)?[(a=(o=n.request.params)==null?void 0:o[0])==null?void 0:a.to]:[]}catch(c){this.client.logger.warn(c,"Error getting TVF params")}return l}),G(this,"isValidContractData",r=>{var n;if(!r)return!1;try{const i=(r==null?void 0:r.data)||((n=r==null?void 0:r[0])==null?void 0:n.data);if(!i.startsWith("0x"))return!1;const s=i.slice(2);return/^[0-9a-fA-F]*$/.test(s)?s.length%2===0:!1}catch{}return!1}),G(this,"extractTxHashesFromResult",(r,n)=>{var i;try{if(!n)return[];const s=r.method,o=sJ[s];if(s==="sui_signTransaction")return[Kz(n.transactionBytes)];if(s==="near_signTransaction")return[rx(n)];if(s==="near_signTransactions")return n.map(l=>rx(l));if(s==="xrpl_signTransactionFor"||s==="xrpl_signTransaction")return[(i=n.tx_json)==null?void 0:i.hash];if(s==="polkadot_signTransaction")return[GV({transaction:r.params.transactionPayload,signature:n.signature})];if(s==="algo_signTxn")return Fn(n)?n.map(l=>nx(l)):[nx(n)];if(s==="cosmos_signDirect")return[Gz(n)];if(s==="wallet_sendCalls")return Yz(n);if(typeof n=="string")return[n];const a=n[o.key];if(Fn(a))return s==="solana_signAllTransactions"?a.map(l=>Vz(l)):a;if(typeof a=="string")return[a]}catch(s){this.client.logger.warn(s,"Error extracting tx hashes from result")}return[]})}async processPendingMessageEvents(){try{const e=this.client.session.keys,r=this.client.core.relayer.messages.getWithoutAck(e);for(const[n,i]of Object.entries(r))for(const s of i)try{await this.onProviderMessageEvent({topic:n,message:s,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${n}, message: ${s}`)}}catch(e){this.client.logger.warn(e,"processPendingMessageEvents failed")}}isInitialized(){if(!this.initialized){const{message:e}=ne("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Mt.message,e=>{this.onProviderMessageEvent(e)})}async onRelayMessage(e){const{topic:r,message:n,attestation:i,transportType:s}=e,{publicKey:o}=this.client.auth.authKeys.keys.includes(Xh)?this.client.auth.authKeys.get(Xh):{publicKey:void 0};try{const a=await this.client.core.crypto.decode(r,n,{receiverPublicKey:o,encoding:s===mt.link_mode?go:Kr});s1(a)?(this.client.core.history.set(r,a),await this.onRelayEventRequest({topic:r,payload:a,attestation:i,transportType:s,encryptedId:kn(n)})):Yp(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a,transportType:s}),this.client.core.history.delete(r,a.id)):(this.client.logger.error(`onRelayMessage() -> unknown payload: ${JSON.stringify(a)}`),await this.onRelayEventUnknownPayload({topic:r,payload:a,transportType:s})),await this.client.core.relayer.messages.ack(r,n)}catch(a){this.client.logger.error(`onRelayMessage() -> failed to process an inbound message: ${n}`),this.client.logger.error(a)}}registerExpirerEvents(){this.client.core.expirer.on(Nn.expired,async e=>{const{topic:r,id:n}=H8(e.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ne("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ne("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(ha.create,e=>this.onPairingCreated(e)),this.client.core.pairing.events.on(ha.delete,e=>{this.addToRecentlyDeleted(e.topic,"pairing")})}isValidPairingTopic(e){if(!Bt(e,!1)){const{message:r}=ne("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=ne("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(Ni(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=ne("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!Bt(e,!1)){const{message:r}=ne("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:r}=ne("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(Ni(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=ne("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=ne("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Bt(e,!1)){const{message:r}=ne("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=ne("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!_V(e)){const{message:r}=ne("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=ne("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(Ni(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=ne("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}validateRequestExpiry(e){if(e&&!DV(e,Gg)){const{message:r}=ne("MISSING_OR_INVALID",`request() expiry: ${e}. Expiry must be a number (in seconds) between ${Gg.min} and ${Gg.max}`);throw new Error(r)}}}class vJ extends Ya{constructor(e,r){super(e,r,rJ,a1),this.core=e,this.logger=r}}let bJ=class extends Ya{constructor(e,r){super(e,r,nJ,a1),this.core=e,this.logger=r}};class EJ extends Ya{constructor(e,r){super(e,r,oJ,a1,n=>n.id),this.core=e,this.logger=r}}class xJ extends Ya{constructor(e,r){super(e,r,uJ,Jp,()=>Xh),this.core=e,this.logger=r}}class AJ extends Ya{constructor(e,r){super(e,r,fJ,Jp),this.core=e,this.logger=r}}class _J extends Ya{constructor(e,r){super(e,r,hJ,Jp,n=>n.id),this.core=e,this.logger=r}}var SJ=Object.defineProperty,IJ=(t,e,r)=>e in t?SJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Yg=(t,e,r)=>IJ(t,typeof e!="symbol"?e+"":e,r);class PJ{constructor(e,r){this.core=e,this.logger=r,Yg(this,"authKeys"),Yg(this,"pairingTopics"),Yg(this,"requests"),this.authKeys=new xJ(this.core,this.logger),this.pairingTopics=new AJ(this.core,this.logger),this.requests=new _J(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var CJ=Object.defineProperty,OJ=(t,e,r)=>e in t?CJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ee=(t,e,r)=>OJ(t,typeof e!="symbol"?e+"":e,r);class l1 extends YK{constructor(e){super(e),Ee(this,"protocol",yP),Ee(this,"version",wP),Ee(this,"name",Wg.name),Ee(this,"metadata"),Ee(this,"core"),Ee(this,"logger"),Ee(this,"events",new An.EventEmitter),Ee(this,"engine"),Ee(this,"session"),Ee(this,"proposal"),Ee(this,"pendingRequest"),Ee(this,"auth"),Ee(this,"signConfig"),Ee(this,"on",(n,i)=>this.events.on(n,i)),Ee(this,"once",(n,i)=>this.events.once(n,i)),Ee(this,"off",(n,i)=>this.events.off(n,i)),Ee(this,"removeListener",(n,i)=>this.events.removeListener(n,i)),Ee(this,"removeAllListeners",n=>this.events.removeAllListeners(n)),Ee(this,"connect",async n=>{try{return await this.engine.connect(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"pair",async n=>{try{return await this.engine.pair(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"approve",async n=>{try{return await this.engine.approve(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"reject",async n=>{try{return await this.engine.reject(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"update",async n=>{try{return await this.engine.update(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"extend",async n=>{try{return await this.engine.extend(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"request",async n=>{try{return await this.engine.request(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"respond",async n=>{try{return await this.engine.respond(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"ping",async n=>{try{return await this.engine.ping(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"emit",async n=>{try{return await this.engine.emit(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"disconnect",async n=>{try{return await this.engine.disconnect(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"find",n=>{try{return this.engine.find(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"getPendingSessionRequests",()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}}),Ee(this,"authenticate",async(n,i)=>{try{return await this.engine.authenticate(n,i)}catch(s){throw this.logger.error(s.message),s}}),Ee(this,"formatAuthMessage",n=>{try{return this.engine.formatAuthMessage(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"approveSessionAuthenticate",async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),Ee(this,"rejectSessionAuthenticate",async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(i){throw this.logger.error(i.message),i}}),this.name=(e==null?void 0:e.name)||Wg.name,this.metadata=Uj(e==null?void 0:e.metadata),this.signConfig=e==null?void 0:e.signConfig;const r=n1({logger:(e==null?void 0:e.logger)||Wg.logger,name:this.name});this.logger=r,this.core=(e==null?void 0:e.core)||new tJ(e),this.session=new bJ(this.core,this.logger),this.proposal=new vJ(this.core,this.logger),this.pendingRequest=new EJ(this.core,this.logger),this.engine=new wJ(this),this.auth=new PJ(this.core,this.logger)}static async init(e){const r=new l1(e);return await r.initialize(),r}get context(){return nn(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const NJ=l1;var rw={exports:{}};(function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Rn<"u"&&Rn,n=function(){function s(){this.fetch=!1,this.DOMException=r.DOMException}return s.prototype=r,new s}();(function(s){(function(o){var a=typeof s<"u"&&s||typeof self<"u"&&self||typeof Rn<"u"&&Rn||{},l={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function c(d){return d&&DataView.prototype.isPrototypeOf(d)}if(l.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(d){return d&&u.indexOf(Object.prototype.toString.call(d))>-1};function h(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(d)||d==="")throw new TypeError('Invalid character in header field name: "'+d+'"');return d.toLowerCase()}function g(d){return typeof d!="string"&&(d=String(d)),d}function w(d){var m={next:function(){var b=d.shift();return{done:b===void 0,value:b}}};return l.iterable&&(m[Symbol.iterator]=function(){return m}),m}function v(d){this.map={},d instanceof v?d.forEach(function(m,b){this.append(b,m)},this):Array.isArray(d)?d.forEach(function(m){if(m.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+m.length);this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}v.prototype.append=function(d,m){d=h(d),m=g(m);var b=this.map[d];this.map[d]=b?b+", "+m:m},v.prototype.delete=function(d){delete this.map[h(d)]},v.prototype.get=function(d){return d=h(d),this.has(d)?this.map[d]:null},v.prototype.has=function(d){return this.map.hasOwnProperty(h(d))},v.prototype.set=function(d,m){this.map[h(d)]=g(m)},v.prototype.forEach=function(d,m){for(var b in this.map)this.map.hasOwnProperty(b)&&d.call(m,this.map[b],b,this)},v.prototype.keys=function(){var d=[];return this.forEach(function(m,b){d.push(b)}),w(d)},v.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),w(d)},v.prototype.entries=function(){var d=[];return this.forEach(function(m,b){d.push([b,m])}),w(d)},l.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function O(d){if(!d._noBody){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}}function A(d){return new Promise(function(m,b){d.onload=function(){m(d.result)},d.onerror=function(){b(d.error)}})}function I(d){var m=new FileReader,b=A(m);return m.readAsArrayBuffer(d),b}function _(d){var m=new FileReader,b=A(m),E=/charset=([A-Za-z0-9_-]+)/.exec(d.type),S=E?E[1]:"utf-8";return m.readAsText(d,S),b}function T(d){for(var m=new Uint8Array(d),b=new Array(m.length),E=0;E<m.length;E++)b[E]=String.fromCharCode(m[E]);return b.join("")}function D(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(d){this.bodyUsed=this.bodyUsed,this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:l.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:l.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():l.arrayBuffer&&l.blob&&c(d)?(this._bodyArrayBuffer=D(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||f(d))?this._bodyArrayBuffer=D(d):this._bodyText=d=Object.prototype.toString.call(d):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var d=O(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var d=O(this);return d||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(I);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var d=O(this);if(d)return d;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(z)}),this.json=function(){return this.text().then(JSON.parse)},this}var $=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function M(d){var m=d.toUpperCase();return $.indexOf(m)>-1?m:d}function B(d,m){if(!(this instanceof B))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');m=m||{};var b=m.body;if(d instanceof B){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new v(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!b&&d._bodyInit!=null&&(b=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new v(m.headers)),this.method=M(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal||function(){if("AbortController"in a){var N=new AbortController;return N.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&b)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(b),(this.method==="GET"||this.method==="HEAD")&&(m.cache==="no-store"||m.cache==="no-cache")){var E=/([?&])_=[^&]*/;if(E.test(this.url))this.url=this.url.replace(E,"$1_="+new Date().getTime());else{var S=/\?/;this.url+=(S.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function z(d){var m=new FormData;return d.trim().split("&").forEach(function(b){if(b){var E=b.split("="),S=E.shift().replace(/\+/g," "),N=E.join("=").replace(/\+/g," ");m.append(decodeURIComponent(S),decodeURIComponent(N))}}),m}function K(d){var m=new v,b=d.replace(/\r?\n[\t ]+/g," ");return b.split("\r").map(function(E){return E.indexOf(`
`)===0?E.substr(1,E.length):E}).forEach(function(E){var S=E.split(":"),N=S.shift().trim();if(N){var C=S.join(":").trim();try{m.append(N,C)}catch(y){console.warn("Response "+y.message)}}}),m}R.call(B.prototype);function L(d,m){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=m.statusText===void 0?"":""+m.statusText,this.headers=new v(m.headers),this.url=m.url||"",this._initBody(d)}R.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},L.error=function(){var d=new L(null,{status:200,statusText:""});return d.ok=!1,d.status=0,d.type="error",d};var P=[301,302,303,307,308];L.redirect=function(d,m){if(P.indexOf(m)===-1)throw new RangeError("Invalid status code");return new L(null,{status:m,headers:{location:d}})},o.DOMException=a.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,b){this.message=m,this.name=b;var E=Error(m);this.stack=E.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function p(d,m){return new Promise(function(b,E){var S=new B(d,m);if(S.signal&&S.signal.aborted)return E(new o.DOMException("Aborted","AbortError"));var N=new XMLHttpRequest;function C(){N.abort()}N.onload=function(){var q={statusText:N.statusText,headers:K(N.getAllResponseHeaders()||"")};S.url.indexOf("file://")===0&&(N.status<200||N.status>599)?q.status=200:q.status=N.status,q.url="responseURL"in N?N.responseURL:q.headers.get("X-Request-URL");var x="response"in N?N.response:N.responseText;setTimeout(function(){b(new L(x,q))},0)},N.onerror=function(){setTimeout(function(){E(new TypeError("Network request failed"))},0)},N.ontimeout=function(){setTimeout(function(){E(new TypeError("Network request timed out"))},0)},N.onabort=function(){setTimeout(function(){E(new o.DOMException("Aborted","AbortError"))},0)};function y(q){try{return q===""&&a.location.href?a.location.href:q}catch{return q}}if(N.open(S.method,y(S.url),!0),S.credentials==="include"?N.withCredentials=!0:S.credentials==="omit"&&(N.withCredentials=!1),"responseType"in N&&(l.blob?N.responseType="blob":l.arrayBuffer&&(N.responseType="arraybuffer")),m&&typeof m.headers=="object"&&!(m.headers instanceof v||a.Headers&&m.headers instanceof a.Headers)){var k=[];Object.getOwnPropertyNames(m.headers).forEach(function(q){k.push(h(q)),N.setRequestHeader(q,g(m.headers[q]))}),S.headers.forEach(function(q,x){k.indexOf(x)===-1&&N.setRequestHeader(x,q)})}else S.headers.forEach(function(q,x){N.setRequestHeader(x,q)});S.signal&&(S.signal.addEventListener("abort",C),N.onreadystatechange=function(){N.readyState===4&&S.signal.removeEventListener("abort",C)}),N.send(typeof S._bodyInit>"u"?null:S._bodyInit)})}return p.polyfill=!0,a.fetch||(a.fetch=p,a.Headers=v,a.Request=B,a.Response=L),o.Headers=v,o.Request=B,o.Response=L,o.fetch=p,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=r.fetch?r:n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e})(rw,rw.exports);var TJ=rw.exports;const P3=Mo(TJ);var kJ=Object.defineProperty,DJ=Object.defineProperties,RJ=Object.getOwnPropertyDescriptors,C3=Object.getOwnPropertySymbols,$J=Object.prototype.hasOwnProperty,MJ=Object.prototype.propertyIsEnumerable,O3=(t,e,r)=>e in t?kJ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,N3=(t,e)=>{for(var r in e||(e={}))$J.call(e,r)&&O3(t,r,e[r]);if(C3)for(var r of C3(e))MJ.call(e,r)&&O3(t,r,e[r]);return t},T3=(t,e)=>DJ(t,RJ(e));const BJ={Accept:"application/json","Content-Type":"application/json"},UJ="POST",k3={headers:BJ,method:UJ},D3=10;let bP=class{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new An.EventEmitter,this.isAvailable=!1,this.registering=!1,!Qx(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const r=Os(e),n=await(await P3(this.url,T3(N3({},k3),{body:r}))).json();this.onPayload({data:n})}catch(r){this.onError(e.id,r)}}async register(e=this.url){if(!Qx(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((n,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));n()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Os({id:1,jsonrpc:"2.0",method:"test",params:[]});await P3(e,T3(N3({},k3),{body:r}))}this.onOpen()}catch(r){const n=this.parseError(r);throw this.events.emit("register_error",n),this.onClose(),n}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ma(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const n=this.parseError(r),i=n.message||n.toString(),s=Gp(e,i);this.events.emit("payload",s)}parseError(e,r=this.url){return Q4(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>D3&&this.events.setMaxListeners(D3)}};function c1(t){return t==null||typeof t!="object"&&typeof t!="function"}function EP(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function xP(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const LJ="[object RegExp]",AP="[object String]",_P="[object Number]",SP="[object Boolean]",IP="[object Arguments]",FJ="[object Symbol]",jJ="[object Date]",zJ="[object Map]",qJ="[object Set]",HJ="[object Array]",VJ="[object ArrayBuffer]",KJ="[object Object]",WJ="[object DataView]",GJ="[object Uint8Array]",YJ="[object Uint8ClampedArray]",QJ="[object Uint16Array]",JJ="[object Uint32Array]",ZJ="[object Int8Array]",XJ="[object Int16Array]",eZ="[object Int32Array]",tZ="[object Float32Array]",rZ="[object Float64Array]";function u1(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function nZ(t,e){return Pl(t,void 0,t,new Map,e)}function Pl(t,e,r,n=new Map,i=void 0){const s=i==null?void 0:i(t,e,r,n);if(s!=null)return s;if(c1(t))return t;if(n.has(t))return n.get(t);if(Array.isArray(t)){const o=new Array(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Pl(t[a],a,r,n,i);return Object.hasOwn(t,"index")&&(o.index=t.index),Object.hasOwn(t,"input")&&(o.input=t.input),o}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const o=new RegExp(t.source,t.flags);return o.lastIndex=t.lastIndex,o}if(t instanceof Map){const o=new Map;n.set(t,o);for(const[a,l]of t)o.set(a,Pl(l,a,r,n,i));return o}if(t instanceof Set){const o=new Set;n.set(t,o);for(const a of t)o.add(Pl(a,void 0,r,n,i));return o}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(u1(t)){const o=new(Object.getPrototypeOf(t)).constructor(t.length);n.set(t,o);for(let a=0;a<t.length;a++)o[a]=Pl(t[a],a,r,n,i);return o}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const o=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return n.set(t,o),da(o,t,r,n,i),o}if(typeof File<"u"&&t instanceof File){const o=new File([t],t.name,{type:t.type});return n.set(t,o),da(o,t,r,n,i),o}if(t instanceof Blob){const o=new Blob([t],{type:t.type});return n.set(t,o),da(o,t,r,n,i),o}if(t instanceof Error){const o=new t.constructor;return n.set(t,o),o.message=t.message,o.name=t.name,o.stack=t.stack,o.cause=t.cause,da(o,t,r,n,i),o}if(typeof t=="object"&&iZ(t)){const o=Object.create(Object.getPrototypeOf(t));return n.set(t,o),da(o,t,r,n,i),o}return t}function da(t,e,r=t,n,i){const s=[...Object.keys(e),...EP(e)];for(let o=0;o<s.length;o++){const a=s[o],l=Object.getOwnPropertyDescriptor(t,a);(l==null||l.writable)&&(t[a]=Pl(e[a],a,r,n,i))}}function iZ(t){switch(xP(t)){case IP:case HJ:case VJ:case WJ:case SP:case jJ:case tZ:case rZ:case ZJ:case XJ:case eZ:case zJ:case _P:case KJ:case LJ:case qJ:case AP:case FJ:case GJ:case YJ:case QJ:case JJ:return!0;default:return!1}}function sZ(t,e){return nZ(t,(r,n,i,s)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case _P:case AP:case SP:{const o=new t.constructor(t==null?void 0:t.valueOf());return da(o,t),o}case IP:{const o={};return da(o,t),o.length=t.length,o[Symbol.iterator]=t[Symbol.iterator],o}default:return}})}function R3(t){return sZ(t)}function $3(t){return t!==null&&typeof t=="object"&&xP(t)==="[object Arguments]"}function M3(t){return typeof t=="object"&&t!==null}function oZ(){}function aZ(t){return u1(t)}function lZ(t){var r;if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!((r=Object.getOwnPropertyDescriptor(t,Symbol.toStringTag))!=null&&r.writable)?!1:t.toString()===`[object ${n}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function cZ(t){if(c1(t))return t;if(Array.isArray(t)||u1(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),r=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new r(t);if(t instanceof RegExp){const n=new r(t);return n.lastIndex=t.lastIndex,n}if(t instanceof DataView)return new r(t.buffer.slice(0));if(t instanceof Error){const n=new r(t.message);return n.stack=t.stack,n.name=t.name,n.cause=t.cause,n}if(typeof File<"u"&&t instanceof File)return new r([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const n=Object.create(e);return Object.assign(n,t)}return t}function uZ(t,...e){const r=e.slice(0,-1),n=e[e.length-1];let i=t;for(let s=0;s<r.length;s++){const o=r[s];i=nw(i,o,n,new Map)}return i}function nw(t,e,r,n){if(c1(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(n.has(e))return cZ(n.get(e));if(n.set(e,t),Array.isArray(e)){e=e.slice();for(let s=0;s<e.length;s++)e[s]=e[s]??void 0}const i=[...Object.keys(e),...EP(e)];for(let s=0;s<i.length;s++){const o=i[s];let a=e[o],l=t[o];if($3(a)&&(a={...a}),$3(l)&&(l={...l}),typeof Buffer<"u"&&Buffer.isBuffer(a)&&(a=R3(a)),Array.isArray(a))if(typeof l=="object"&&l!=null){const u=[],f=Reflect.ownKeys(l);for(let h=0;h<f.length;h++){const g=f[h];u[g]=l[g]}l=u}else l=[];const c=r(l,a,o,t,e,n);c!=null?t[o]=c:Array.isArray(a)||M3(l)&&M3(a)?t[o]=nw(l,a,r,n):l==null&&lZ(a)?t[o]=nw({},a,r,n):l==null&&aZ(a)?t[o]=R3(a):(l===void 0||a!==void 0)&&(t[o]=a)}return t}function fZ(t,...e){return uZ(t,...e,oZ)}const B3="error",hZ="wss://relay.walletconnect.org",dZ="wc",PP="universal_provider",vh=`${dZ}@2:${PP}:`,CP="https://rpc.walletconnect.org/v1/",OP="generic",pZ=`${CP}bundler`,zl="call_status",gZ=86400,f1={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var mZ=Object.defineProperty,yZ=Object.defineProperties,wZ=Object.getOwnPropertyDescriptors,U3=Object.getOwnPropertySymbols,vZ=Object.prototype.hasOwnProperty,bZ=Object.prototype.propertyIsEnumerable,L3=(t,e,r)=>e in t?mZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,bh=(t,e)=>{for(var r in e||(e={}))vZ.call(e,r)&&L3(t,r,e[r]);if(U3)for(var r of U3(e))bZ.call(e,r)&&L3(t,r,e[r]);return t},EZ=(t,e)=>yZ(t,wZ(e));function NP(t,e,r){var n;const i=bs(t);return((n=e.rpcMap)==null?void 0:n[i.reference])||`${CP}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function xZ(t){return t.includes(":")?t.split(":")[1]:t}function TP(t){return t.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function AZ(t,e){const r=Object.keys(e.namespaces).filter(i=>i.includes(t));if(!r.length)return[];const n=[];return r.forEach(i=>{const s=e.namespaces[i].accounts;n.push(...s)}),n}function F3(t){return Object.fromEntries(Object.entries(t).filter(([e,r])=>{var n,i;return((n=r==null?void 0:r.chains)==null?void 0:n.length)&&((i=r==null?void 0:r.chains)==null?void 0:i.length)>0}))}function Eh(t={},e={}){const r=F3(j3(t)),n=F3(j3(e));return fZ(r,n)}function j3(t){var e,r,n,i,s;const o={};if(!zi(t))return o;for(const[a,l]of Object.entries(t)){const c=Wp(a)?[a]:l.chains,u=l.methods||[],f=l.events||[],h=l.rpcMap||{},g=Il(a);o[g]=EZ(bh(bh({},o[g]),l),{chains:ji(c,(e=o[g])==null?void 0:e.chains),methods:ji(u,(r=o[g])==null?void 0:r.methods),events:ji(f,(n=o[g])==null?void 0:n.events)}),(zi(h)||zi(((i=o[g])==null?void 0:i.rpcMap)||{}))&&(o[g].rpcMap=bh(bh({},h),(s=o[g])==null?void 0:s.rpcMap))}return o}function z3(t){return t.includes(":")?t.split(":")[2]:t}function q3(t){const e={};for(const[r,n]of Object.entries(t)){const i=n.methods||[],s=n.events||[],o=n.accounts||[],a=Wp(r)?[r]:n.chains?n.chains:TP(n.accounts);e[r]={chains:a,methods:i,events:s,accounts:o}}return e}function Qg(t){return typeof t=="number"?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}function _Z(t){try{const e=JSON.parse(t);return typeof e=="object"&&e!==null&&!Array.isArray(e)}catch{return!1}}const kP={},ql=t=>kP[t],Jg=(t,e)=>{kP[t]=e};var SZ=Object.defineProperty,H3=Object.getOwnPropertySymbols,IZ=Object.prototype.hasOwnProperty,PZ=Object.prototype.propertyIsEnumerable,V3=(t,e,r)=>e in t?SZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,K3=(t,e)=>{for(var r in e||(e={}))IZ.call(e,r)&&V3(t,r,e[r]);if(H3)for(var r of H3(e))PZ.call(e,r)&&V3(t,r,e[r]);return t};const W3="eip155",CZ=["atomic","flow-control","paymasterService","sessionKeys","auxiliaryFunds"],OZ=t=>t&&t.startsWith("0x")?BigInt(t).toString(10):t,Zg=t=>t&&t.startsWith("0x")?t:`0x${BigInt(t).toString(16)}`,G3=t=>Object.keys(t).filter(e=>CZ.includes(e)).reduce((e,r)=>(e[r]=NZ(t[r]),e),{}),NZ=t=>typeof t=="string"&&_Z(t)?JSON.parse(t):t,TZ=(t,e,r)=>{const{sessionProperties:n={},scopedProperties:i={}}=t,s={};if(!zi(i)&&!zi(n))return;const o=G3(n);for(const a of r){const l=OZ(a);if(!l)continue;s[Zg(l)]=o;const c=i==null?void 0:i[`${W3}:${l}`];if(c){const u=c==null?void 0:c[`${W3}:${l}:${e}`];s[Zg(l)]=K3(K3({},s[Zg(l)]),G3(u||c))}}for(const[a,l]of Object.entries(s))Object.keys(l).length===0&&delete s[a];return Object.keys(s).length>0?s:void 0};var kZ=Object.defineProperty,DZ=(t,e,r)=>e in t?kZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,RZ=(t,e,r)=>DZ(t,e+"",r);let Xg,$Z=class DP{constructor(e){RZ(this,"storage"),this.storage=e}async getItem(e){return await this.storage.getItem(e)}async setItem(e,r){return await this.storage.setItem(e,r)}async removeItem(e){return await this.storage.removeItem(e)}static getStorage(e){return Xg||(Xg=new DP(e)),Xg}};var MZ=Object.defineProperty,BZ=Object.defineProperties,UZ=Object.getOwnPropertyDescriptors,Y3=Object.getOwnPropertySymbols,LZ=Object.prototype.hasOwnProperty,FZ=Object.prototype.propertyIsEnumerable,Q3=(t,e,r)=>e in t?MZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jZ=(t,e)=>{for(var r in e||(e={}))LZ.call(e,r)&&Q3(t,r,e[r]);if(Y3)for(var r of Y3(e))FZ.call(e,r)&&Q3(t,r,e[r]);return t},zZ=(t,e)=>BZ(t,UZ(e));async function qZ(t,e){const r=bs(t.result.capabilities.caip345.caip2),n=t.result.capabilities.caip345.transactionHashes,i=await Promise.allSettled(n.map(f=>HZ(r.reference,f,e))),s=i.filter(f=>f.status==="fulfilled").map(f=>f.value).filter(f=>f);i.filter(f=>f.status==="rejected").forEach(f=>console.warn("Failed to fetch transaction receipt:",f.reason));const o=!s.length||s.some(f=>!f),a=s.every(f=>(f==null?void 0:f.status)==="0x1"),l=s.every(f=>(f==null?void 0:f.status)==="0x0"),c=s.some(f=>(f==null?void 0:f.status)==="0x0");let u;return o?u=100:a?u=200:l?u=500:c&&(u=600),{id:t.result.id,version:t.request.version,atomic:t.request.atomicRequired,chainId:t.request.chainId,capabilities:t.result.capabilities,receipts:s,status:u}}async function HZ(t,e,r){return await r(parseInt(t)).request(ai("eth_getTransactionReceipt",[e]))}async function VZ({sendCalls:t,storage:e}){const r=await e.getItem(zl);await e.setItem(zl,zZ(jZ({},r),{[t.result.id]:{request:t.request,result:t.result,expiry:Dt(gZ)}}))}async function KZ({resultId:t,storage:e}){const r=await e.getItem(zl);if(r){delete r[t],await e.setItem(zl,r);for(const n in r)Ni(r[n].expiry)&&delete r[n];await e.setItem(zl,r)}}async function WZ({resultId:t,storage:e}){const r=await e.getItem(zl),n=r==null?void 0:r[t];if(n&&!Ni(n.expiry))return n;await KZ({resultId:t,storage:e})}var GZ=Object.defineProperty,YZ=Object.defineProperties,QZ=Object.getOwnPropertyDescriptors,J3=Object.getOwnPropertySymbols,JZ=Object.prototype.hasOwnProperty,ZZ=Object.prototype.propertyIsEnumerable,iw=(t,e,r)=>e in t?GZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,em=(t,e)=>{for(var r in e||(e={}))JZ.call(e,r)&&iw(t,r,e[r]);if(J3)for(var r of J3(e))ZZ.call(e,r)&&iw(t,r,e[r]);return t},tm=(t,e)=>YZ(t,QZ(e)),sa=(t,e,r)=>iw(t,typeof e!="symbol"?e+"":e,r);class XZ{constructor(e){sa(this,"name","eip155"),sa(this,"client"),sa(this,"chainId"),sa(this,"namespace"),sa(this,"httpProviders"),sa(this,"events"),sa(this,"storage"),this.namespace=e.namespace,this.events=ql("events"),this.client=ql("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain()),this.storage=$Z.getStorage(this.client.core.storage)}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e);case"wallet_sendCalls":return await this.sendCalls(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r);const n=this.chainId;this.chainId=parseInt(e),this.events.emit(f1.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const n=r||NP(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new o1(new bP(n,ql("disableProviderPing")))}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var n;const i=parseInt(xZ(r));e[i]=this.createHttpProvider(i,(n=this.namespace.rpcMap)==null?void 0:n[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(e){const r=e||this.chainId;return this.httpProviders[r]||(this.httpProviders=tm(em({},this.httpProviders),{[r]:this.createHttpProvider(r)}),this.httpProviders[r])}async handleSwitchChain(e){var r,n;let i=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(n=this.namespace.chains)==null?void 0:n[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var r,n,i,s,o;const a=(n=(r=e.request)==null?void 0:r.params)==null?void 0:n[0],l=((s=(i=e.request)==null?void 0:i.params)==null?void 0:s[1])||[];if(!a)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const c=this.client.session.get(e.topic),u=((o=c==null?void 0:c.sessionProperties)==null?void 0:o.capabilities)||{},f=`${a}${l.join(",")}`,h=u==null?void 0:u[f];if(h)return h;let g;try{g=TZ(c,a,l)}catch(v){console.warn("Failed to extract capabilities from session",v)}if(g)return g;const w=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:tm(em({},c.sessionProperties||{}),{capabilities:tm(em({},u||{}),{[f]:w})})})}catch(v){console.warn("Failed to update session with capabilities",v)}return w}async getCallStatus(e){var r,n,i;const s=this.client.session.get(e.topic),o=(r=s.sessionProperties)==null?void 0:r.bundler_name;if(o){const c=this.getBundlerUrl(e.chainId,o);try{return await this.getUserOperationReceipt(c,e)}catch(u){console.warn("Failed to fetch call status from bundler",u,c)}}const a=(n=s.sessionProperties)==null?void 0:n.bundler_url;if(a)try{return await this.getUserOperationReceipt(a,e)}catch(c){console.warn("Failed to fetch call status from custom bundler",c,a)}const l=await WZ({resultId:(i=e.request.params)==null?void 0:i[0],storage:this.storage});if(l)try{return await qZ(l,this.getHttpProvider.bind(this))}catch(c){console.warn("Failed to fetch call status from stored send calls",c,l)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,r){var n;const i=new URL(e),s=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ai("eth_getUserOperationReceipt",[(n=r.request.params)==null?void 0:n[0]]))});if(!s.ok)throw new Error(`Failed to fetch user operation receipt - ${s.status}`);return await s.json()}getBundlerUrl(e,r){return`${pZ}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${r}`}async sendCalls(e){var r,n,i;const s=await this.client.request(e),o=(r=e.request.params)==null?void 0:r[0],a=s==null?void 0:s.id,l=(s==null?void 0:s.capabilities)||{},c=(n=l==null?void 0:l.caip345)==null?void 0:n.caip2,u=(i=l==null?void 0:l.caip345)==null?void 0:i.transactionHashes;return!a||!c||!(u!=null&&u.length)||await VZ({sendCalls:{request:o,result:s},storage:this.storage}),s}}var eX=Object.defineProperty,tX=(t,e,r)=>e in t?eX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ol=(t,e,r)=>tX(t,typeof e!="symbol"?e+"":e,r);class rX{constructor(e){ol(this,"name",OP),ol(this,"client"),ol(this,"httpProviders"),ol(this,"events"),ol(this,"namespace"),ol(this,"chainId"),this.namespace=e.namespace,this.events=ql("events"),this.client=ql("client"),this.chainId=this.getDefaultChain(),this.name=this.getNamespaceName(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r);const n=this.chainId;this.chainId=e,this.events.emit(f1.DEFAULT_CHAIN_CHANGED,{currentCaipChainId:`${this.name}:${e}`,previousCaipChainId:`${this.name}:${n}`})}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getNamespaceName(){const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return bs(e).namespace}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){var e,r;const n={};return(r=(e=this.namespace)==null?void 0:e.accounts)==null||r.forEach(i=>{var s,o;const a=bs(i),l=(o=(s=this.namespace)==null?void 0:s.rpcMap)==null?void 0:o[`${a.namespace}:${a.reference}`];n[a.reference]=this.createHttpProvider(i,l)}),n}getHttpProvider(e){const r=bs(e).reference,n=this.httpProviders[r];if(typeof n>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return n}setHttpProvider(e,r){const n=this.createHttpProvider(e,r);n&&(this.httpProviders[e]=n)}createHttpProvider(e,r){const n=r||NP(e,this.namespace,this.client.core.projectId);if(!n)throw new Error(`No RPC url provided for chainId: ${e}`);return new o1(new bP(n,ql("disableProviderPing")))}}var nX=Object.defineProperty,iX=Object.defineProperties,sX=Object.getOwnPropertyDescriptors,Z3=Object.getOwnPropertySymbols,oX=Object.prototype.hasOwnProperty,aX=Object.prototype.propertyIsEnumerable,sw=(t,e,r)=>e in t?nX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Wc=(t,e)=>{for(var r in e||(e={}))oX.call(e,r)&&sw(t,r,e[r]);if(Z3)for(var r of Z3(e))aX.call(e,r)&&sw(t,r,e[r]);return t},xh=(t,e)=>iX(t,sX(e)),on=(t,e,r)=>sw(t,typeof e!="symbol"?e+"":e,r);class h1{constructor(e){on(this,"client"),on(this,"namespaces"),on(this,"optionalNamespaces"),on(this,"sessionProperties"),on(this,"scopedProperties"),on(this,"events",new bv),on(this,"rpcProviders",{}),on(this,"session"),on(this,"providerOpts"),on(this,"logger"),on(this,"uri"),on(this,"disableProviderPing",!1),on(this,"connectParams");var r,n;this.providerOpts=e,this.logger=n1({logger:(r=e.logger)!=null?r:B3,name:(n=this.providerOpts.name)!=null?n:PP}),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new h1(e);return await r.initialize(),r}async request(e,r,n){const[i,s]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:Wc({},e),chainId:`${i}:${s}`,topic:this.session.topic,expiry:n})}sendAsync(e,r,n,i){const s=new Date().getTime();this.request(e,n,i).then(o=>r(null,rf(s,o))).catch(o=>r(o,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:yt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.connectParams=e,this.setNamespaces(e),this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,r){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:n,response:i}=await this.client.authenticate(e,r);n&&(this.uri=n,this.events.emit("display_uri",n));const s=await i();if(this.session=s.session,this.session){const o=q3(this.session.namespaces);this.namespaces=Eh(this.namespaces,o),await this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){var r,n;const{uri:i,approval:s}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties,authentication:(r=this.connectParams)==null?void 0:r.authentication,walletPay:(n=this.connectParams)==null?void 0:n.walletPay});i&&(this.uri=i,this.events.emit("display_uri",i));const o=await s();this.session=o;const a=q3(o.namespaces);return this.namespaces=Eh(this.namespaces,a),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[n,i]=this.validateChain(e);this.getProvider(n).setDefaultChain(i,r)}catch(n){if(!/Please call connect/.test(n.message))throw n}}async cleanupPendingPairings(e={}){try{this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(!Fn(r))return;for(const n of r)e.deletePairings?this.client.core.expirer.set(n.topic,0):await this.client.core.relayer.subscriber.unsubscribe(n.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}catch(r){this.logger.warn(r,"Failed to cleanup pending pairings")}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,r;if(this.client=this.providerOpts.client||await NJ.init({core:this.providerOpts.core,logger:this.providerOpts.logger||B3,relayUrl:this.providerOpts.relayUrl||hZ,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(n){throw this.logger.error(n,"Failed to get session"),new Error(`The provided session: ${(r=(e=this.providerOpts)==null?void 0:e.session)==null?void 0:r.topic} doesn't exist in the Sign client`)}else{const n=this.client.session.getAll();this.session=n[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>Il(r)))];Jg("client",this.client),Jg("events",this.events),Jg("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const n=AZ(r,this.session);if((n==null?void 0:n.length)===0)return;const i=TP(n),s=Eh(this.namespaces,this.optionalNamespaces),o=xh(Wc({},s[r]),{accounts:n,chains:i});switch(r){case"eip155":this.rpcProviders[r]=new XZ({namespace:o});break;default:this.rpcProviders[r]=new rX({namespace:o})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{var r;const{topic:n}=e;n===((r=this.session)==null?void 0:r.topic)&&this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{var r;const{params:n,topic:i}=e;if(i!==((r=this.session)==null?void 0:r.topic))return;const{event:s}=n;if(s.name==="accountsChanged"){const o=s.data;o&&Fn(o)&&this.events.emit("accountsChanged",o.map(z3))}else if(s.name==="chainChanged"){const o=n.chainId,a=n.event.data,l=Il(o),c=Qg(o)!==Qg(a)?`${l}:${Qg(a)}`:o;this.onChainChanged({currentCaipChainId:c})}else this.events.emit(s.name,s.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var n,i;if(e!==((n=this.session)==null?void 0:n.topic))return;const{namespaces:s}=r,o=(i=this.client)==null?void 0:i.session.get(e);this.session=xh(Wc({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{var r;e.topic===((r=this.session)==null?void 0:r.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",xh(Wc({},yt("USER_DISCONNECTED")),{data:e.topic})))}),this.on(f1.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(xh(Wc({},e),{internal:!0}))})}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[OP]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r={},optionalNamespaces:n={},sessionProperties:i,scopedProperties:s}=e;this.optionalNamespaces=Eh(r,n),this.sessionProperties=i,this.scopedProperties=s}validateChain(e){const[r,n]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,n];if(r&&!Object.keys(this.namespaces||{}).map(o=>Il(o)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&n)return[r,n];const i=Il(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged({currentCaipChainId:e,previousCaipChainId:r,internal:n=!1}){if(!this.namespaces)return;const[i,s]=this.validateChain(e);s&&(this.updateNamespaceChain(i,s),n?(this.events.emit("chainChanged",s),this.emitAccountsChangedOnChainChange({namespace:i,currentCaipChainId:e,previousCaipChainId:r})):this.getProvider(i).setDefaultChain(s),await this.persist("namespaces",this.namespaces))}emitAccountsChangedOnChainChange({namespace:e,currentCaipChainId:r,previousCaipChainId:n}){var i,s;try{if(n===r)return;const o=(s=(i=this.session)==null?void 0:i.namespaces[e])==null?void 0:s.accounts;if(!o)return;const a=o.filter(l=>l.includes(`${r}:`)).map(z3);if(!Fn(a))return;this.events.emit("accountsChanged",a)}catch(o){this.logger.warn(o,"Failed to emit accountsChanged on chain change")}}updateNamespaceChain(e,r){if(!this.namespaces)return;const n=this.namespaces[e]?e:`${e}:${r}`,i={chains:[],methods:[],events:[],defaultChain:r};this.namespaces[n]?this.namespaces[n]&&(this.namespaces[n].defaultChain=r):this.namespaces[n]=i}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.connectParams=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,r){var n;const i=((n=this.session)==null?void 0:n.topic)||"";await this.client.core.storage.setItem(`${vh}/${e}${i}`,r)}async getFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";return await this.client.core.storage.getItem(`${vh}/${e}${n}`)}async deleteFromStore(e){var r;const n=((r=this.session)==null?void 0:r.topic)||"";await this.client.core.storage.removeItem(`${vh}/${e}${n}`)}async cleanupStorage(){var e;try{if(((e=this.client)==null?void 0:e.session.length)>0)return;const r=await this.client.core.storage.getKeys();for(const n of r)n.startsWith(vh)&&await this.client.core.storage.removeItem(n)}catch(r){this.logger.warn(r,"Failed to cleanup storage")}}}const lX=h1,cX="wc",uX="ethereum_provider",fX=`${cX}@2:${uX}:`,hX="https://rpc.walletconnect.org/v1/",ow=["eth_sendTransaction","personal_sign"],dX=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],aw=["chainChanged","accountsChanged"],pX=["chainChanged","accountsChanged","message","disconnect","connect"],gX=async()=>{const{createAppKit:t}=await FR(()=>import("./core-DKVhzpCZ.js").then(e=>e.bt),[]);return t};var mX=Object.defineProperty,yX=Object.defineProperties,wX=Object.getOwnPropertyDescriptors,X3=Object.getOwnPropertySymbols,vX=Object.prototype.hasOwnProperty,bX=Object.prototype.propertyIsEnumerable,lw=(t,e,r)=>e in t?mX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ca=(t,e)=>{for(var r in e||(e={}))vX.call(e,r)&&lw(t,r,e[r]);if(X3)for(var r of X3(e))bX.call(e,r)&&lw(t,r,e[r]);return t},Gc=(t,e)=>yX(t,wX(e)),an=(t,e,r)=>lw(t,typeof e!="symbol"?e+"":e,r);function ep(t){return Number(t[0].split(":")[1])}function Ah(t){return`0x${t.toString(16)}`}function EX(t){const{chains:e,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=t;if(!Fn(e))throw new Error("Invalid chains");const l={chains:e,methods:n||ow,events:s||aw,rpcMap:ca({},e.length?{[ep(e)]:a[ep(e)]}:{})},c=s==null?void 0:s.filter(g=>!aw.includes(g)),u=n==null?void 0:n.filter(g=>!ow.includes(g));if(!r&&!o&&!i&&!(c!=null&&c.length)&&!(u!=null&&u.length))return{required:e.length?l:void 0};const f=(c==null?void 0:c.length)&&(u==null?void 0:u.length)||!r,h={chains:[...new Set(f?l.chains.concat(r||[]):r)],methods:[...new Set(l.methods.concat(i!=null&&i.length?i:dX))],events:[...new Set(l.events.concat(o!=null&&o.length?o:pX))],rpcMap:a};return{required:e.length?l:void 0,optional:r.length?h:void 0}}class d1{constructor(){an(this,"events",new An.EventEmitter),an(this,"namespace","eip155"),an(this,"accounts",[]),an(this,"signer"),an(this,"chainId",1),an(this,"modal"),an(this,"rpc"),an(this,"STORAGE_KEY",fX),an(this,"on",(e,r)=>(this.events.on(e,r),this)),an(this,"once",(e,r)=>(this.events.once(e,r),this)),an(this,"removeListener",(e,r)=>(this.events.removeListener(e,r),this)),an(this,"off",(e,r)=>(this.events.off(e,r),this)),an(this,"parseAccount",e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e),this.signer={},this.rpc={}}static async init(e){const r=new d1;return await r.initialize(e),r}async request(e,r){return await this.signer.request(e,this.formatChainId(this.chainId),r)}sendAsync(e,r,n){this.signer.sendAsync(e,r,this.formatChainId(this.chainId),n)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){var r;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:n,optional:i}=EX(this.rpc);try{const s=await new Promise(async(a,l)=>{var c,u;this.rpc.showQrModal&&((c=this.modal)==null||c.open(),(u=this.modal)==null||u.subscribeState(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),l(new Error("Connection request reset. Please try again.")))}));const f=e!=null&&e.scopedProperties?{[this.namespace]:e.scopedProperties}:void 0;await this.signer.connect(Gc(ca({namespaces:ca({},n&&{[this.namespace]:n})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e==null?void 0:e.pairingTopic,scopedProperties:f})).then(h=>{a(h)}).catch(h=>{var g;(g=this.modal)==null||g.showErrorMessage("Unable to connect"),l(new Error(h.message))})});if(!s)return;const o=qE(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:Ah(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{(r=this.modal)==null||r.close()}}async authenticate(e,r){var n;if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:e==null?void 0:e.chains});try{const i=await new Promise(async(o,a)=>{var l,c;this.rpc.showQrModal&&((l=this.modal)==null||l.open(),(c=this.modal)==null||c.subscribeState(u=>{!u.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),a(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(Gc(ca({},e),{chains:this.rpc.chains}),r).then(u=>{o(u)}).catch(u=>{var f;(f=this.modal)==null||f.showErrorMessage("Unable to connect"),a(new Error(u.message))})}),s=i.session;if(s){const o=qE(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:Ah(this.chainId)})}return i}catch(i){throw this.signer.logger.error(i),i}finally{(n=this.modal)==null||n.close()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:n}=r;n.name==="accountsChanged"?(this.accounts=this.parseAccounts(n.data),this.events.emit("accountsChanged",this.accounts)):n.name==="chainChanged"?this.setChainId(this.formatChainId(n.data)):this.events.emit(n.name,n.data),this.events.emit("session_event",e)}),this.signer.on("accountsChanged",e=>{this.accounts=this.parseAccounts(e),this.events.emit("accountsChanged",this.accounts)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",Ah(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",Gc(ca({},yt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(n=>this.isCompatibleChainId(n)).map(n=>this.parseChainId(n));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Ah(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,n,i]=e.split(":");return{chainId:`${r}:${n}`,address:i}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,n;const i=(r=e==null?void 0:e.chains)!=null?r:[],s=(n=e==null?void 0:e.optionalChains)!=null?n:[],o=i.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const a=i.length?(e==null?void 0:e.methods)||ow:[],l=i.length?(e==null?void 0:e.events)||aw:[],c=(e==null?void 0:e.optionalMethods)||[],u=(e==null?void 0:e.optionalEvents)||[],f=(e==null?void 0:e.rpcMap)||this.buildRpcMap(o,e.projectId),h=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:i==null?void 0:i.map(g=>this.formatChainId(g)),optionalChains:s.map(g=>this.formatChainId(g)),methods:a,events:l,optionalMethods:c,optionalEvents:u,rpcMap:f,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const n={};return e.forEach(i=>{n[i]=this.getRpcUrl(i,r)}),n}async initialize(e){var r;if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?ep(this.rpc.chains):ep(this.rpc.optionalChains),this.signer=await lX.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storage:e.storage,storageOptions:e.storageOptions,customStoragePrefix:e.customStoragePrefix,telemetryEnabled:e.telemetryEnabled,logger:e.logger}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let n;try{const i=await gX(),{convertWCMToAppKitOptions:s}=await Promise.resolve().then(function(){return TX}),o=s(Gc(ca({},this.rpc.qrModalOptions),{chains:[...new Set([...this.rpc.chains,...this.rpc.optionalChains])],metadata:this.rpc.metadata,projectId:this.rpc.projectId}));if(!o.networks.length)throw new Error("No networks found for WalletConnect");n=i(Gc(ca({},o),{universalProvider:this.signer,manualWCControl:!0,enableMobileFullScreen:((r=this.rpc.qrModalOptions)==null?void 0:r.enableMobileFullScreen)===!0}))}catch(i){throw console.warn(i),new Error("To use QR modal, please install @reown/appkit package")}if(n)try{this.modal=n}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:n,rpcMap:i}=e;r&&Fn(r)&&(this.rpc.chains=r.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=(i==null?void 0:i[s])||this.getRpcUrl(s)})),n&&Fn(n)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=n==null?void 0:n.map(s=>this.formatChainId(s)),n.forEach(s=>{this.rpc.rpcMap[s]=(i==null?void 0:i[s])||this.getRpcUrl(s)}))}getRpcUrl(e,r){var n;return((n=this.rpc.rpcMap)==null?void 0:n[e])||`${hX}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}catch(e){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(e),await this.disconnect().catch(r=>this.signer.logger.warn(r))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}var xX=Object.defineProperty,AX=Object.defineProperties,_X=Object.getOwnPropertyDescriptors,eA=Object.getOwnPropertySymbols,SX=Object.prototype.hasOwnProperty,IX=Object.prototype.propertyIsEnumerable,tA=(t,e,r)=>e in t?xX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,RP=(t,e)=>{for(var r in e||(e={}))SX.call(e,r)&&tA(t,r,e[r]);if(eA)for(var r of eA(e))IX.call(e,r)&&tA(t,r,e[r]);return t},PX=(t,e)=>AX(t,_X(e));function CX(t){if(t)return{"--w3m-font-family":t["--wcm-font-family"],"--w3m-accent":t["--wcm-accent-color"],"--w3m-color-mix":t["--wcm-background-color"],"--w3m-z-index":t["--wcm-z-index"]?Number(t["--wcm-z-index"]):void 0,"--w3m-qr-color":t["--wcm-accent-color"],"--w3m-font-size-master":t["--wcm-text-medium-regular-size"],"--w3m-border-radius-master":t["--wcm-container-border-radius"],"--w3m-color-mix-strength":0}}const OX=t=>{const[e,r]=t.split(":");return $P({id:r,caipNetworkId:t,chainNamespace:e,name:"",nativeCurrency:{name:"",symbol:"",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}})};function NX(t){var e,r,n,i,s,o,a;const l=(e=t.chains)==null?void 0:e.map(OX).filter(Boolean);if(l.length===0)throw new Error("At least one chain must be specified");const c=l.find(f=>{var h;return f.id===((h=t.defaultChain)==null?void 0:h.id)}),u={projectId:t.projectId,networks:l,themeMode:t.themeMode,themeVariables:CX(t.themeVariables),chainImages:t.chainImages,connectorImages:t.walletImages,defaultNetwork:c,metadata:PX(RP({},t.metadata),{name:((r=t.metadata)==null?void 0:r.name)||"WalletConnect",description:((n=t.metadata)==null?void 0:n.description)||"Connect to WalletConnect-compatible wallets",url:((i=t.metadata)==null?void 0:i.url)||"https://walletconnect.org",icons:((s=t.metadata)==null?void 0:s.icons)||["https://walletconnect.org/walletconnect-logo.png"]}),showWallets:!0,featuredWalletIds:t.explorerRecommendedWalletIds==="NONE"?[]:Array.isArray(t.explorerRecommendedWalletIds)?t.explorerRecommendedWalletIds:[],excludeWalletIds:t.explorerExcludedWalletIds==="ALL"?[]:Array.isArray(t.explorerExcludedWalletIds)?t.explorerExcludedWalletIds:[],enableEIP6963:!1,enableInjected:!1,enableCoinbase:!0,enableWalletConnect:!0,features:{email:!1,socials:!1}};if((o=t.mobileWallets)!=null&&o.length||(a=t.desktopWallets)!=null&&a.length){const f=[...(t.mobileWallets||[]).map(w=>({id:w.id,name:w.name,links:w.links})),...(t.desktopWallets||[]).map(w=>({id:w.id,name:w.name,links:{native:w.links.native,universal:w.links.universal}}))],h=[...u.featuredWalletIds||[],...u.excludeWalletIds||[]],g=f.filter(w=>!h.includes(w.id));g.length&&(u.customWallets=g)}return u}function $P(t){return RP({formatters:void 0,fees:void 0,serializers:void 0},t)}var TX=Object.freeze({__proto__:null,convertWCMToAppKitOptions:NX,defineChain:$P});const ro={chainId:"0xa4ec",chainName:"Celo Mainnet",nativeCurrency:{name:"Celo",symbol:"CELO",decimals:18},rpcUrls:["https://forno.celo.org"],blockExplorerUrls:["https://explorer.celo.org/mainnet"]},MP=Y.createContext();function kX({children:t}){const[e,r]=Y.useState(null),[n,i]=Y.useState(null),[s,o]=Y.useState(null),[a,l]=Y.useState(null),[c,u]=Y.useState(!1),[f,h]=Y.useState(null),g=()=>{r(null),i(null),o(null),l(null)},w=async T=>{if(await T.request({method:"eth_chainId"})!==ro.chainId)try{await T.request({method:"wallet_switchEthereumChain",params:[{chainId:ro.chainId}]})}catch(R){if(R.code===4902)await T.request({method:"wallet_addEthereumChain",params:[ro]});else throw R}},v=Y.useCallback(async T=>{const D=new T2(T,"any"),R=await D.getNetwork();if(R.chainId!==parseInt(ro.chainId,16))throw new Error("Please switch to Celo Mainnet (42220)");i(D);const $=D.getSigner();o($);const M=await $.getAddress();r(M),l(R.chainId)},[]),O=Y.useCallback(async()=>{var T;if(!c){u(!0);try{const{ethereum:D}=window,R=((T=D==null?void 0:D.providers)==null?void 0:T.find($=>$.isMetaMask))||D||null;if(!R)throw new Error("MetaMask not found");await w(R),await R.request({method:"eth_requestAccounts"}),await v(R)}finally{u(!1)}}},[v,c]),A=Y.useCallback(async()=>{if(!c){u(!0);try{const D=await d1.init({projectId:"demo",chains:[parseInt(ro.chainId,16)],optionalChains:[parseInt(ro.chainId,16)],rpcMap:{[parseInt(ro.chainId,16)]:ro.rpcUrls[0]},showQrModal:!0});await D.enable(),h(D),await v(D)}finally{u(!1)}}},[v,c]),I=Y.useCallback(async()=>{f&&(await f.disconnect(),h(null)),g()},[f]);Y.useEffect(()=>{const{ethereum:T}=window;if(!T)return;const D=$=>{!$||$.length===0?g():(r($[0]),o(M=>M||new T2(T).getSigner()))},R=()=>{window.location.reload()};return T.on("accountsChanged",D),T.on("chainChanged",R),()=>{T.removeListener("accountsChanged",D),T.removeListener("chainChanged",R)}},[]);const _=Y.useMemo(()=>({address:e,provider:n,signer:s,chainId:a,isConnecting:c,connectMetamask:O,connectWalletConnect:A,disconnect:I}),[e,n,s,a,c,O,A,I]);return W.jsx(MP.Provider,{value:_,children:t})}function Of(){return Y.useContext(MP)}const DX=t=>t?`${t.slice(0,6)}...${t.slice(-4)}`:"",RX=t=>{try{return Number(BR(t)).toFixed(3)}catch{return"0"}},$X="data:image/svg+xml,%3csvg%20width='120'%20height='120'%20viewBox='0%200%20120%20120'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='120'%20height='120'%20rx='24'%20fill='%23000000'/%3e%3cpath%20d='M32%2060c0-15.464%2012.536-28%2028-28s28%2012.536%2028%2028-12.536%2028-28%2028S32%2075.464%2032%2060Z'%20fill='%23FBCC5C'/%3e%3cpath%20d='M48%2060c0-6.627%205.373-12%2012-12s12%205.373%2012%2012-5.373%2012-12%2012-12-5.373-12-12Z'%20fill='%23000000'/%3e%3cpath%20d='M60%2030v12'%20stroke='%23FBCC5C'%20stroke-width='6'%20stroke-linecap='round'/%3e%3cpath%20d='M60%2078v12'%20stroke='%23FBCC5C'%20stroke-width='6'%20stroke-linecap='round'/%3e%3c/svg%3e",MX=[{path:"/",label:"Home"},{path:"/nft",label:"NFT"},{path:"/profile",label:"Profile"}];function BX({onConnect:t,onAlert:e}){const r=uf(),{address:n,disconnect:i}=Of(),[s,o]=Y.useState(!1),a=async()=>{try{await i(),e({type:"success",message:"Disconnected"})}catch(l){e({type:"error",message:l.message})}finally{o(!1)}};return W.jsxs("header",{className:"navbar",children:[W.jsx("div",{className:"nav-left",children:W.jsxs(Sd,{to:"/",className:"brand",children:[W.jsx("img",{src:$X,alt:"CeloModuleX"}),W.jsx("span",{children:"CeloModuleX"})]})}),W.jsx("nav",{className:"nav-center",children:MX.map(l=>W.jsx(Sd,{to:l.path,className:r.pathname===l.path?"active":"",children:l.label},l.path))}),W.jsx("div",{className:"nav-right",children:n?W.jsxs("div",{className:"wallet-menu",children:[W.jsx("button",{className:"btn outline",onClick:()=>o(!s),children:DX(n)}),s&&W.jsx("div",{className:"wallet-dropdown",children:W.jsx("button",{onClick:a,children:"Disconnect"})})]}):W.jsx("button",{className:"btn primary",onClick:t,children:"Connect Wallet"})})]})}function UX({isOpen:t,onClose:e,onAlert:r}){const{connectMetamask:n,connectWalletConnect:i,isConnecting:s}=Of();if(Y.useEffect(()=>{const a=l=>l.key==="Escape"&&e();return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[e]),!t)return null;const o=async a=>{try{a==="metamask"?await n():await i(),r({type:"success",message:"Wallet connected"}),e()}catch(l){r({type:"error",message:l.message})}};return W.jsx("div",{className:"modal-backdrop",onClick:e,children:W.jsxs("div",{className:"modal",onClick:a=>a.stopPropagation(),children:[W.jsxs("div",{className:"modal-header",children:[W.jsx("h3",{children:"Connect Wallet"}),W.jsx("button",{className:"close",onClick:e,"aria-label":"Close",children:""})]}),W.jsxs("div",{className:"modal-content",children:[W.jsx("button",{className:"btn primary full",onClick:()=>o("metamask"),disabled:s,children:"MetaMask"}),W.jsx("button",{className:"btn outline full",onClick:()=>o("walletconnect"),disabled:s,children:"WalletConnect v2"})]})]})})}function LX({type:t="info",message:e,onClose:r}){return W.jsxs("div",{className:`alert ${t}`,children:[W.jsx("span",{children:e}),W.jsx("button",{onClick:r,"aria-label":"Close alert",children:""})]})}function p1(){return W.jsx("div",{className:"loader",children:W.jsx("div",{className:"spinner"})})}const FX="0xad9801c23f3a7ebfea6c33e8575d479169881ff2",jX=[{inputs:[{internalType:"address",name:"_nftContract",type:"address"},{internalType:"uint256",name:"_basicFee",type:"uint256"},{internalType:"uint256",name:"_premiumFee",type:"uint256"},{internalType:"address",name:"initialOwner",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"totalGlobalActions",type:"uint256"}],name:"GlobalStatsUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"moduleId",type:"uint256"}],name:"ModuleActivated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"moduleId",type:"uint256"}],name:"ModuleDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"moduleId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"timestamp",type:"uint256"}],name:"ModuleExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"moduleAddress",type:"address"},{indexed:!0,internalType:"uint256",name:"moduleId",type:"uint256"}],name:"ModuleRegistered",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"}],name:"NFTAccessGranted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"int256",name:"newScore",type:"int256"}],name:"UserStatsUpdated",type:"event"},{inputs:[{internalType:"uint256",name:"moduleId",type:"uint256"}],name:"activateModule",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"basicFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"username",type:"string"},{internalType:"string",name:"twitter",type:"string"},{internalType:"string",name:"github",type:"string"},{internalType:"string",name:"talent",type:"string"},{internalType:"string",name:"selfID",type:"string"}],name:"createProfile",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"dailyActions",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"moduleId",type:"uint256"}],name:"deactivateModule",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"moduleId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"executeModule",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"payable",type:"function"},{inputs:[],name:"feesCollected",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAllModuleIds",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"moduleId",type:"uint256"}],name:"getModule",outputs:[{components:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"bool",name:"active",type:"bool"},{internalType:"uint8",name:"category",type:"uint8"},{internalType:"uint8",name:"moduleType",type:"uint8"},{internalType:"bool",name:"premium",type:"bool"},{internalType:"uint16",name:"version",type:"uint16"}],internalType:"struct MainHub.Module",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"getUserProfile",outputs:[{internalType:"string",name:"",type:"string"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"string",name:"",type:"string"},{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"moduleActions",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextModuleId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nftContract",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"premiumFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"moduleAddress",type:"address"},{internalType:"uint8",name:"category",type:"uint8"},{internalType:"uint8",name:"moduleType",type:"uint8"},{internalType:"bool",name:"premium",type:"bool"},{internalType:"uint16",name:"version",type:"uint16"}],name:"registerModule",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalGlobalActions",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalUsers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_basicFee",type:"uint256"},{internalType:"uint256",name:"_premiumFee",type:"uint256"}],name:"updateFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"twitter",type:"string"},{internalType:"string",name:"github",type:"string"},{internalType:"string",name:"talent",type:"string"},{internalType:"string",name:"selfID",type:"string"}],name:"updateProfile",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawFees",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],zX="0xa2a5d8c63bd03cfbf01843f2dbddcc3d9b6158fd",qX=[{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"initialPrice",type:"uint256"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"initialOwner",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"owner",type:"address"}],name:"ERC721IncorrectOwner",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721InsufficientApproval",type:"error"},{inputs:[{internalType:"address",name:"approver",type:"address"}],name:"ERC721InvalidApprover",type:"error"},{inputs:[{internalType:"address",name:"operator",type:"address"}],name:"ERC721InvalidOperator",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"ERC721InvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"receiver",type:"address"}],name:"ERC721InvalidReceiver",type:"error"},{inputs:[{internalType:"address",name:"sender",type:"address"}],name:"ERC721InvalidSender",type:"error"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ERC721NonexistentToken",type:"error"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"OwnableInvalidOwner",type:"error"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"OwnableUnauthorizedAccount",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"FundsWithdrawn",type:"event"},{inputs:[],name:"mintNFT",outputs:[],stateMutability:"payable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"pricePaid",type:"uint256"}],name:"NFTMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newPrice",type:"uint256"}],name:"PriceUpdated",type:"event"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newPrice",type:"uint256"}],name:"updateNFTPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNFTPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"hasMinted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"}],name:"hasNFT",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],Zp=t=>new RI(FX,jX,t),g1=t=>new RI(zX,qX,t),HX=async(t,e)=>Zp(t).createProfile(e.username||"",e.twitter||"",e.github||"",e.talent||"",e.selfID||""),VX=async(t,e)=>Zp(t).updateProfile(e.twitter||"",e.github||"",e.talent||"",e.selfID||""),rA=async(t,e)=>{const r=Zp(t),[n,i,s,o,a,l,c]=await r.getUserProfile(e);return{username:n,createdAt:i.toNumber?i.toNumber():Number(i),twitter:s,github:o,talent:a,selfID:l,hasNFT:c}},BP=async t=>{const e=Zp(t),[r,n]=await Promise.all([e.totalGlobalActions(),e.getAllModuleIds()]),i=r.toNumber?r.toNumber():Number(r),s=n.length;return{totalActions:i,uniqueModules:s,score:i}},KX=async t=>await g1(t).getNFTPrice(),nA=async(t,e)=>g1(t).hasNFT(e),WX=async t=>{const e=g1(t),r=await e.getNFTPrice();return e.mintNFT({value:r})};function GX({onAlert:t}){const{provider:e,address:r}=Of(),[n,i]=Y.useState({score:0,totalActions:0,uniqueModules:0}),[s,o]=Y.useState(!1);return Y.useEffect(()=>{(async()=>{if(e){o(!0);try{const l=await BP(e);i(l)}catch(l){t({type:"error",message:l.message})}finally{o(!1)}}})()},[e,t]),W.jsxs("div",{className:"page home",children:[W.jsxs("section",{className:"hero",children:[W.jsxs("div",{className:"hero-content",children:[W.jsx("p",{className:"tag",children:"CeloModuleX"}),W.jsx("h1",{children:"Start Using Modules"}),W.jsx("p",{className:"subtitle",children:"Compose powerful on-chain automations and join a thriving builder community on Celo."}),W.jsxs("div",{className:"cta",children:[W.jsx(Sd,{to:"/profile",className:"btn primary",children:"Create Profile"}),W.jsx(Sd,{to:"/nft",className:"btn outline",children:"Access Pass"})]})]}),W.jsxs("div",{className:"hero-card",children:[W.jsx("h3",{children:"Network"}),W.jsx("p",{className:"stat-value",children:"Celo Mainnet"}),W.jsx("p",{className:"stat-label",children:"Chain ID 42220"})]})]}),r&&W.jsxs("section",{className:"stats",children:[W.jsxs("div",{className:"section-header",children:[W.jsx("h2",{children:"Your Activity"}),W.jsx("p",{children:"Realtime metrics from MainHub"})]}),s?W.jsx(p1,{}):W.jsxs("div",{className:"stat-grid",children:[W.jsxs("div",{className:"stat-card",children:[W.jsx("p",{className:"stat-label",children:"Score"}),W.jsx("p",{className:"stat-value",children:n.score})]}),W.jsxs("div",{className:"stat-card",children:[W.jsx("p",{className:"stat-label",children:"Total Actions"}),W.jsx("p",{className:"stat-value",children:n.totalActions})]}),W.jsxs("div",{className:"stat-card",children:[W.jsx("p",{className:"stat-label",children:"Unique Modules"}),W.jsx("p",{className:"stat-value",children:n.uniqueModules})]})]})]})]})}function YX({onAlert:t}){const{provider:e,signer:r,address:n}=Of(),[i,s]=Y.useState("0"),[o,a]=Y.useState(!1),[l,c]=Y.useState("https://ipfs.io/ipfs/bafkreiah7zsjf7vayv3jogesplqvpz2gl9l9q40sp5m5sz5kdgx3bu6l5u"),[u,f]=Y.useState(!1);Y.useEffect(()=>{(async()=>{if(!(!e||!n)){f(!0);try{const[w,v]=await Promise.all([KX(e),nA(e,n)]);s(w),a(v)}catch(w){t({type:"error",message:w.message})}finally{f(!1)}}})()},[e,n,t]);const h=async()=>{if(!r){t({type:"error",message:"Connect your wallet first"});return}f(!0);try{await(await WX(r)).wait(),t({type:"success",message:"NFT minted successfully"});const w=await nA(e,n);a(w)}catch(g){t({type:"error",message:g.message})}finally{f(!1)}};return W.jsx("div",{className:"page nft",children:W.jsxs("section",{className:"nft-header",children:[W.jsxs("div",{children:[W.jsx("p",{className:"tag",children:"Access Pass"}),W.jsx("h1",{children:"Unlock premium modules"}),W.jsx("p",{className:"subtitle",children:"Mint your ModuleX Access Pass to enable premium automation."}),W.jsxs("div",{className:"nft-details",children:[W.jsxs("div",{children:[W.jsx("p",{className:"stat-label",children:"Current Price"}),W.jsxs("p",{className:"stat-value",children:[RX(i)," CELO"]})]}),W.jsxs("div",{children:[W.jsx("p",{className:"stat-label",children:"Ownership"}),W.jsx("p",{className:"stat-value",children:o?"You own the pass":"Not minted yet"})]})]}),W.jsx("button",{className:"btn primary",onClick:h,disabled:u,children:u?"Processing...":o?"Mint Again":"Mint NFT"})]}),W.jsx("div",{className:"nft-card",children:u?W.jsx(p1,{}):W.jsx("img",{src:l,alt:"ModuleX Access NFT"})})]})})}const QX={username:"",twitter:"",github:"",talent:"",selfID:"",createdAt:0,hasNFT:!1};function JX({onAlert:t}){const{provider:e,signer:r,address:n}=Of(),[i,s]=Y.useState(QX),[o,a]=Y.useState({score:0,totalActions:0,uniqueModules:0}),[l,c]=Y.useState(!1);Y.useEffect(()=>{(async()=>{if(!(!e||!n)){c(!0);try{const[g,w]=await Promise.all([rA(e,n),BP(e)]);s(g),a(w)}catch(g){t({type:"error",message:g.message})}finally{c(!1)}}})()},[e,n,t]);const u=h=>{const{name:g,value:w}=h.target;s(v=>({...v,[g]:w}))},f=async h=>{if(!r){t({type:"error",message:"Connect your wallet"});return}c(!0);try{await(await(h==="create"?HX:VX)(r,i)).wait(),t({type:"success",message:"Profile saved"});const v=await rA(e,n);s(v)}catch(g){t({type:"error",message:g.message})}finally{c(!1)}};return W.jsxs("div",{className:"page profile",children:[W.jsx("div",{className:"profile-header",children:W.jsxs("div",{children:[W.jsx("p",{className:"tag",children:"Identity"}),W.jsx("h1",{children:"Your Profile"}),W.jsx("p",{className:"subtitle",children:"Manage your ModuleX identity and automation footprint."})]})}),W.jsxs("div",{className:"profile-grid",children:[W.jsxs("div",{className:"card",children:[W.jsx("h3",{children:"Profile Details"}),W.jsxs("div",{className:"form-grid",children:[W.jsxs("label",{children:[W.jsx("span",{children:"Username"}),W.jsx("input",{name:"username",value:i.username,onChange:u})]}),W.jsxs("label",{children:[W.jsx("span",{children:"Twitter"}),W.jsx("input",{name:"twitter",value:i.twitter,onChange:u})]}),W.jsxs("label",{children:[W.jsx("span",{children:"GitHub"}),W.jsx("input",{name:"github",value:i.github,onChange:u})]}),W.jsxs("label",{children:[W.jsx("span",{children:"Talent"}),W.jsx("input",{name:"talent",value:i.talent,onChange:u})]}),W.jsxs("label",{children:[W.jsx("span",{children:"Self ID"}),W.jsx("input",{name:"selfID",value:i.selfID,onChange:u})]})]}),W.jsxs("div",{className:"actions",children:[W.jsx("button",{className:"btn outline",onClick:()=>f("create"),disabled:l,children:"Create Profile"}),W.jsx("button",{className:"btn primary",onClick:()=>f("update"),disabled:l,children:"Update Profile"})]})]}),W.jsxs("div",{className:"card stats",children:[W.jsx("h3",{children:"Usage"}),l?W.jsx(p1,{}):W.jsxs("div",{className:"stat-grid",children:[W.jsxs("div",{children:[W.jsx("p",{className:"stat-label",children:"Total Actions"}),W.jsx("p",{className:"stat-value",children:o.totalActions})]}),W.jsxs("div",{children:[W.jsx("p",{className:"stat-label",children:"Premium Modules"}),W.jsx("p",{className:"stat-value",children:o.uniqueModules})]}),W.jsxs("div",{children:[W.jsx("p",{className:"stat-label",children:"Score"}),W.jsx("p",{className:"stat-value",children:o.score})]})]}),W.jsxs("div",{className:"meta",children:[W.jsxs("p",{children:["Address: ",n||"Not connected"]}),W.jsxs("p",{children:["NFT Access: ",W.jsx("strong",{children:i.hasNFT?"Granted":"Missing"})]}),i.createdAt?W.jsxs("p",{children:["Created: ",new Date(i.createdAt*1e3).toLocaleString()]}):W.jsx("p",{children:"Created: Not set"})]})]})]})]})}function ZX(){const[t,e]=Y.useState(!1),[r,n]=Y.useState({type:"",message:""}),i=()=>n({type:"",message:""});return W.jsxs("div",{className:"app-shell",children:[W.jsx(BX,{onConnect:()=>e(!0),onAlert:n}),W.jsx("main",{className:"app-content",children:W.jsxs(iN,{children:[W.jsx(Mh,{path:"/",element:W.jsx(GX,{onAlert:n})}),W.jsx(Mh,{path:"/nft",element:W.jsx(YX,{onAlert:n})}),W.jsx(Mh,{path:"/profile",element:W.jsx(JX,{onAlert:n})})]})}),W.jsx(UX,{isOpen:t,onClose:()=>e(!1),onAlert:n}),r.message&&W.jsx(LX,{type:r.type,message:r.message,onClose:i})]})}rm.createRoot(document.getElementById("root")).render(W.jsx(gA.StrictMode,{children:W.jsx(fN,{basename:"/CeloModuleX",children:W.jsx(kX,{children:W.jsx(ZX,{})})})}));export{An as A,QV as B,_F as C,bj as D,nn as E,ai as F,Wa as G,o1 as H,Ka as I,yW as J,s1 as K,Yp as L,rf as M,bv as N,PL as O,DE as P,m8 as Q,bo as R,Gp as S,Ci as T,Dn as U,Pi as V,bP as W,_n as X,L8 as Y,FR as _,Os as a,yK as b,W4 as c,yh as d,mK as e,gK as f,qx as g,XI as h,Un as i,te as j,vK as k,Ra as l,Ev as m,t$ as n,ZI as o,yu as p,Sy as q,vf as r,Ma as s,tn as t,$9 as u,I9 as v,YB as w,MF as x,BB as y,QB as z};
